<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Serenity BDD Users Manual Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Serenity BDD Users Manual Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Serenity BDD Users Manual" href="/opensearch.xml"><title data-react-helmet="true">Interacting With Web Pages | Serenity BDD Users Manual</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://serenity-bdd.github.io/docs/guide/page_objects"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Interacting With Web Pages | Serenity BDD Users Manual"><meta data-react-helmet="true" name="description" content="Serenity integrates smoothly with Selenium WebDriver and manages details such as setting up the driver and maintaining the driver instance. It also provides a number of enhancements to standard Selenium."><meta data-react-helmet="true" property="og:description" content="Serenity integrates smoothly with Selenium WebDriver and manages details such as setting up the driver and maintaining the driver instance. It also provides a number of enhancements to standard Selenium."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://serenity-bdd.github.io/docs/guide/page_objects"><link data-react-helmet="true" rel="alternate" href="https://serenity-bdd.github.io/docs/guide/page_objects" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://serenity-bdd.github.io/docs/guide/page_objects" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://V10PILA8X2-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.4fb1788f.css">
<link rel="preload" href="/assets/js/runtime~main.b226eb74.js" as="script">
<link rel="preload" href="/assets/js/main.156fa54c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/serenity-bdd-small.png" alt="Serenity BDD Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/serenity-bdd-small.png" alt="Serenity BDD Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Home</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/tutorials/first_test">Tutorials</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/guide/user_guide_intro">User Manual</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://www.serenitydojo.academy/serenity-bdd-support-packages" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Get Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">Learn Serenity BDD</a><ul class="dropdown__menu"><li><a href="https://expansion.serenity-dojo.com/courses/testing-web-applications-with-serenity-bdd" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Serenity BDD Online Training<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://expansion.serenity-dojo.com/courses/testing-web-applications-with-serenity-bdd" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>BDD and Requirements Discovery Training<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.serenity-dojo.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>BDD And Test Automation Coaching<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Your First Steps with Serenity BDD</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Serenity Fundamentals</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/user_guide_intro">Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/getting_started">Creating A New Project</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/maven">Using Maven with Serenity</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/step_libraries">Step Libraries</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/guide/page_objects">Interacting With Web Pages</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/page_elements">Serenity Page Elements</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/driver_config">Configuring Selenium WebDriver</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/cucumber">Running Cucumber scenarios with Serenity</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">The Screenplay Pattern</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Integrating in Spring</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reporting and Living Documentation</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Scaling Serenity</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Mobile Testing with Serenity</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Interacting with Web Pages</h1></header><p>Serenity integrates smoothly with Selenium WebDriver and manages details such as setting up the driver and maintaining the driver instance. It also provides a number of enhancements to standard Selenium.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="page-objects"></a>Page Objects<a class="hash-link" href="#page-objects" title="Direct link to heading">#</a></h2><p>If you are working with WebDriver web tests, you will be familiar with the concept of Page Objects. Page Objects are a way of isolating the implementation details of a web page inside a class, exposing only business-focused methods related to that page. They are an excellent way of making your web tests more maintainable.</p><p>In Serenity, page objects are just ordinary classes that extend the <code>PageObject</code> class. Serenity automatically injects a WebDriver instance into the page object that you can access via the <code>getDriver()</code> method, although you rarely need to use the WebDriver directly. The Serenity <code>PageObject</code> class provides a number of convenient methods that make accessing and manipulating web elements much easier than with conventional WebDriver test scripts.</p><p>Here is a simple example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import net.serenitybdd.core.pages.WebElementFacade;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import net.thucydides.core.pages.PageObject;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@DefaultUrl(&quot;http://localhost:9000/somepage&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class FindAJobPage extends PageObject {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    WebElementFacade keywords;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    WebElementFacade searchButton;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void look_for_jobs_with_keywords(String values) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        typeInto(keywords, values);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        searchButton.click();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public List&lt;String&gt; getJobTabs() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return findAll(&quot;//div[@id=&#x27;tabs&#x27;]//a&quot;).stream()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            .map(WebElementFacade::getText)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            .collect(Collectors.toList());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <code>typeInto</code> method is a shorthand that simply clears a field and enters the specified text.
If you prefer a more fluent-API style, you can also do something like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@DefaultUrl(&quot;http://localhost:9000/somepage&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class FindAJobPage extends PageObject {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    WebElementFacade keywordsField;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    WebElementFacade searchButton;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public FindAJobPage(WebDriver driver) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        super(driver);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void look_for_jobs_with_keywords(String values) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        enter(values).into(keywordsField);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        searchButton.click();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public List&lt;String&gt; getJobTabs() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">         return findAll(&quot;//div[@id=&#x27;tabs&#x27;]//a&quot;).stream()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            .map(WebElementFacade::getText)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            .collect(Collectors.toList());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can use an even more fluent style of expressing the implementation steps by using methods like <code>find</code>, <code>findBy</code> and <code>then</code>.</p><p>For example, you can use webdriver <code>By</code> finders with element name, id, css selector or xpath selector as follows:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">find(By.name(&quot;demo&quot;)).then(By.name(&quot;specialField&quot;)).getValue();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">find(By.cssSelector(&quot;.foo&quot;)).getValue();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">find(By.xpath(&quot;//th&quot;)).getValue();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <code>findBy</code> method lets you pass the css or xpath selector directly to WebDriver. For example,</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">findBy(&quot;#demo&quot;).then(&quot;#specialField&quot;).getValue(); //css selectors</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">findBy(&quot;//div[@id=&#x27;dataTable&#x27;]&quot;).getValue(); //xpath selector</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="using-pages-in-a-step-library"></a>Using pages in a step library<a class="hash-link" href="#using-pages-in-a-step-library" title="Direct link to heading">#</a></h2><p>When you need to use a page object in one of your steps, you just need to declare a variable of type PageObject in your step library, e.g.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">FindAJobPage page;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If you want to make sure you are on the right page, you can use the <code>currentPageAt()</code> method. This will check the page class for any <code>@At</code> annotations present in the PageObject class and, if present, check that the current URL corresponds to the URL pattern specified in the annotation. For example, when you invoke it using <code>currentPageAt()+, the following Page Object will check that the current URL is precisely </code><a href="http://www.apache.org%60" target="_blank" rel="noopener noreferrer">http://www.apache.org`</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@At(&quot;http://www.apache.org&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ApacheHomePage extends PageObject {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <code>@At</code> annotation also supports wildcards and regular expressions. The following page object will match any Apache sub-domain:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@At(&quot;http://.*.apache.org&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AnyApachePage extends PageObject {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>More generally, however, you are more interested in what comes after the host name. You can use the special <code>#HOST</code> token to match any server name. So the following Page Object will match both <code>http://localhost:8080/app/action/login.form</code> and <code>http://staging.acme.com/app/action/login.form</code>. It will also ignore parameters, so <code>http://staging.acme.com/app/action/login.form?username=toto&amp;password=oz</code> will work fine too.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@At(urls={&quot;#HOST/app/action/login.form&quot;})</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LoginPage extends PageObject {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="opening-the-page"></a>Opening the page<a class="hash-link" href="#opening-the-page" title="Direct link to heading">#</a></h2><p>A page object is usually designed to work with a particular web page. When the <code>open()</code> method is invoked, the browser will be opened to the default URL for the page.</p><p>The <code>@DefaultUrl</code> annotation indicates the URL that this test should use when run in isolation (e.g. from within your IDE).
Generally, however, the host part of the default URL will be overridden by the <code>webdriver.base.url</code> property, as this allows you to set the base URL across the board for all of your tests,
and so makes it easier to run your tests on different environments by simply changing this property value.
For example, in the test class above, setting the <code>webdriver.base.url</code> to &#x27;<a href="https://staging.mycompany.com&#x27;" target="_blank" rel="noopener noreferrer">https://staging.mycompany.com&#x27;</a> would result in the page being opened at the URL of &#x27;<a href="https://staging.mycompany.com/somepage&#x27;" target="_blank" rel="noopener noreferrer">https://staging.mycompany.com/somepage&#x27;</a>.</p><p>You can also define named URLs that can be used to open the web page, optionally with parameters. For example, in the following code, we define a URL called &#x27;open.issue&#x27;, that accepts a single parameter:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@DefaultUrl(&quot;http://jira.mycompany.org&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@NamedUrls(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @NamedUrl(name = &quot;open.issue&quot;, url = &quot;http://jira.mycompany.org/issues/{1}&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class JiraIssuePage extends PageObject {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You could then open this page to the <a href="http://jira.mycompany.org/issues/ISSUE-1" target="_blank" rel="noopener noreferrer">http://jira.mycompany.org/issues/ISSUE-1</a> URL as shown here:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">page.open(&quot;open.issue&quot;, withParameters(&quot;ISSUE-1&quot;));</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You could also dispense entirely with the base URL in the named URL definition, and rely on the default values:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@DefaultUrl(&quot;http://jira.mycompany.org&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@NamedUrls(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @NamedUrl(name = &quot;open.issue&quot;, url = &quot;/issues/{1}&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class JiraIssuePage extends PageObject {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And naturally you can define more than one definition:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@NamedUrls(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          @NamedUrl(name = &quot;open.issue&quot;, url = &quot;/issues/{1}&quot;),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          @NamedUrl(name = &quot;close.issue&quot;, url = &quot;/issues/close/{1}&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You should never try to implement the <code>open()</code> method yourself. In fact, it is final. If you need your page to do something upon loading, such as waiting for a dynamic element to appear, you can use the @WhenPageOpens annotation.
Methods in the PageObject with this annotation will be invoked (in an unspecified order) after the URL has been opened. In this example, the <code>open()</code> method will not return until
the <code>dataSection</code> web element is visible:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@DefaultUrl(&quot;http://localhost:8080/client/list&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public class ClientList extends PageObject {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     @FindBy(id=&quot;data-section&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     WebElementFacade dataSection;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     @WhenPageOpens</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     public void waitUntilTitleAppears() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">         element(dataSection).waitUntilVisible();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="working-with-web-elements"></a>Working with web elements<a class="hash-link" href="#working-with-web-elements" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="checking-whether-elements-are-visible"></a>Checking whether elements are visible<a class="hash-link" href="#checking-whether-elements-are-visible" title="Direct link to heading">#</a></h3><p>The <code>WebElementFacade</code> class contains convenient fluent API for dealing with web elements, providing some commonly-used extra features that are not provided out-of-the-box by the WebDriver API.
<code>WebElementFacades</code> are largely interchangeable with WebElements: you just declare a variable of type <code>WebElementFacade</code> instead of type <code>WebElement</code>. For example, you can check that an element is visible as shown here:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">public class FindAJobPage extends PageObject {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    WebElementFacade searchButton;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean searchButtonIsVisible() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return searchButton.isVisible();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If the button is not present on the screen, the test will wait for a short period in case it appears due to some Ajax magic. If you don&#x27;t want the test to do this, you can use the faster version:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">public boolean searchButtonIsVisibleNow() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return searchButton.isCurrentlyVisible();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can turn this into an assert by using the <code>shouldBeVisible()</code> method instead:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">public void checkThatSearchButtonIsVisible() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    searchButton.shouldBeVisible();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This method will throw an assertion error if the search button is not visible to the end user.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="checking-whether-elements-are-enabled"></a>Checking whether elements are enabled<a class="hash-link" href="#checking-whether-elements-are-enabled" title="Direct link to heading">#</a></h3><p>You can also check whether an element is enabled or not:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">searchButton.isEnabled()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">searchButton.shouldBeEnabled()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>There are also equivalent negative methods:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">searchButton.shouldNotBeVisible();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">searchButton.shouldNotBeCurrentlyVisible();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">searchButton.shouldNotBeEnabled()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can also check for elements that are present on the page but not visible, e.g:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">searchButton.isPresent();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">searchButton.isNotPresent();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">searchButton.shouldBePresent();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">searchButton.shouldNotBePresent();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="manipulating-select-lists"></a>Manipulating select lists<a class="hash-link" href="#manipulating-select-lists" title="Direct link to heading">#</a></h3><p>There are also helper methods available for drop-down lists. Suppose you have the following dropdown on your page:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI xml"><pre tabindex="0" class="prism-code language-xml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">select</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">color</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">option</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">red</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Red</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">option</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">option</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">blue</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Blue</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">option</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">option</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">green</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Green</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">option</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">select</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You could write a page object to manipulate this dropdown as shown here:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">public class FindAJobPage extends PageObject {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @FindBy(id=&quot;color&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    WebElementFacade colorDropdown;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public selectDropdownValues() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        colorDropdown.selectByVisibleText(&quot;Blue&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertThat(colorDropdown.getSelectedVisibleTextValue(), is(&quot;Blue&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        colorDropdown.selectByValue(&quot;blue&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertThat(colorDropdown.getSelectedValue(), is(&quot;blue&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        colorDropdown.selectByIndex(2);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        assertThat(colorDropdown.getSelectedValue(), is(&quot;green&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="determining-focus"></a>Determining focus<a class="hash-link" href="#determining-focus" title="Direct link to heading">#</a></h3><p>You can determine whether a given field has the focus as follows:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">firstName.hasFocus()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can also wait for elements to appear, disappear, or become enabled or disabled:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">button.waitUntilEnabled()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">button.waitUntilDisabled()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>or</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">field.waitUntilVisible()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">button.waitUntilNotVisible()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="using-direct-xpath-and-css-selectors"></a>Using direct XPath and CSS selectors<a class="hash-link" href="#using-direct-xpath-and-css-selectors" title="Direct link to heading">#</a></h3><p>Another way to access a web element is to use an XPath or CSS expression. You can use the <code>$()</code> method with an XPath expression to do this more simply. For example, imagine your web application needs to click on a list item containing a given post code. One way would be as shown here:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">WebElement selectedSuburb = getDriver().findElement(By.xpath(&quot;//li/a[contains(.,&#x27;&quot; ` postcode ` &quot;&#x27;)]&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">selectedSuburb.click();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>However, a simpler option would be to do this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$(&quot;//li/a[contains(.,&#x27;&quot; ` postcode ` &quot;&#x27;)]&quot;).click();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="working-with-asynchronous-pages"></a>Working with Asynchronous Pages<a class="hash-link" href="#working-with-asynchronous-pages" title="Direct link to heading">#</a></h2><p>Asynchronous pages are those whose fields or data is not all displayed when the page is loaded. Sometimes, you need to wait for certain elements to appear, or to disappear, before being able to proceed with your tests. Serenity provides some handy methods in the PageObject base class to help with these scenarios. They are primarily designed to be used as part of your business methods in your page objects, though in the examples we will show them used as external calls on a PageObject instance for clarity.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="checking-whether-an-element-is-visible"></a>Checking whether an element is visible<a class="hash-link" href="#checking-whether-an-element-is-visible" title="Direct link to heading">#</a></h3><p>In WebDriver terms, there is a distinction between when an element is present on the screen (i.e. in the HTML source code), and when it is rendered (i.e. visible to the user). You may also need to check whether an element is visible on the screen. You can do this in two ways. Your first option is to use the isElementVisible method, which returns a boolean value based on whether the element is rendered (visible to the user) or not:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">isElementVisible(By.xpath(&quot;//h2[.=&#x27;A visible title&#x27;]&quot;))</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Your second option is to actively assert that the element should be visible:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">shouldBeVisible(By.xpath(&quot;//h2[.=&#x27;An invisible title&#x27;]&quot;));</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If the element does not appear immediately, you can wait for it to appear:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">waitForRenderedElements(By.xpath(&quot;//h2[.=&#x27;A title that is not immediately visible&#x27;]&quot;));</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>An alternative to the above syntax is to use the more fluid <code>waitFor</code> method which takes a css or xpath selector as argument:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">waitFor(&quot;#popup&quot;); //css selector</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">waitFor(&quot;//h2[.=&#x27;A title that is not immediately visible&#x27;]&quot;); //xpath selector</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If you just want to check if the element is present though not necessarily visible, you can use <code>waitForRenderedElementsToBePresent</code> :</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">waitForRenderedElementsToBePresent(By.xpath(&quot;//h2[.=&#x27;A title that is not immediately visible&#x27;]&quot;));</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>or its more expressive flavour, <code>waitForPresenceOf</code> which takes a css or xpath selector as argument.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">waitForPresenceOf(&quot;#popup&quot;); //css</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">waitForPresenceOf(&quot;//h2[.=&#x27;A title that is not immediately visible&#x27;]&quot;); //xpath</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can also wait for an element to disappear by using <code>waitForRenderedElementsToDisappear</code> or <code>waitForAbsenceOf</code> :</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">waitForRenderedElementsToDisappear(By.xpath(&quot;//h2[.=&#x27;A title that will soon disappear&#x27;]&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">waitForAbsenceOf(&quot;#popup&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">waitForAbsenceOf(&quot;//h2[.=&#x27;A title that will soon disappear&#x27;]&quot;);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For simplicity, you can also use the <code>waitForTextToAppear</code> and <code>waitForTextToDisappear</code> methods:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">waitForTextToDisappear(&quot;A visible bit of text&quot;);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If several possible texts may appear, you can use <code>waitForAnyTextToAppear</code> or `waitForAllTextToAppear+:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">waitForAnyTextToAppear(&quot;this might appear&quot;,&quot;or this&quot;, &quot;or even this&quot;);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If you need to wait for one of several possible elements to appear, you can also use the <code>waitForAnyRenderedElementOf</code> method:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">waitForAnyRenderedElementOf(By.id(&quot;color&quot;), By.id(&quot;taste&quot;), By.id(&quot;sound&quot;));</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="working-with-shadow-dom-elements"></a>Working with Shadow DOM elements<a class="hash-link" href="#working-with-shadow-dom-elements" title="Direct link to heading">#</a></h3><p>Selenium 4 introduced support for Shadow DOM elements, and Serenity BDD adds enhanced support for these elements. Suppose we have the following HTML structure containing shadow DOM elements.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI html"><pre tabindex="0" class="prism-code language-html codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">pre</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">shadow-host</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      #shadow-root</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">shadowedInput</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">nested-shadow-host</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          #shadow-root</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">input</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">nestedShadowedInput</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>To find the first input element inside a single-level shadow DOM, you need to provide the locator for the nested element and the locator for the shadow host element:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain"> ByShadow.cssSelector(&quot;#shadowedInput&quot;,&quot;#shadow-host&quot;)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>To find the input element inside the nested shadow DOM, you need to provide the locator for the shadowed element, as well as the list of parent shadow dom locators, from top to bottom:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">ByShadow.cssSelector(&quot;#nestedShadowedInput&quot;,&quot;#shadow-host&quot;, &quot;#nested-shadow-host&quot;)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="working-with-timeouts"></a>Working with timeouts<a class="hash-link" href="#working-with-timeouts" title="Direct link to heading">#</a></h2><p>Modern AJAX-based web applications add a great deal of complexity to web testing. The basic problem is, when you access a web element on a page, it may not be available yet. So you need to wait a bit. Indeed, many tests contain hard-coded pauses scattered through the code to cater for this sort of thing.</p><p>But hard-coded waits are evil. They slow down your test suite, and cause them to fail randomly if they are not long enough. Rather, you need to wait for a particular state or event. Selenium provides great support for this, and Serenity builds on this support to make it easier to use.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="implicit-waits"></a>Implicit Waits<a class="hash-link" href="#implicit-waits" title="Direct link to heading">#</a></h3><p>The first way you can manage how WebDriver handles tardy fields is to use the <code>webdriver.timeouts.implicitlywait</code> property. This determines how long, in milliseconds, WebDriver will wait if an element it tries to access is not present on the page. To quote the WebDriver documentation:</p><p>“An implicit wait is to tell WebDriver to poll the DOM for a certain amount of time when trying to find an element or elements if they are not immediately available.”</p><p>The default value in Serenity for this property is currently 2 seconds. This is different from standard WebDriver, where the default is zero.</p><p>Let’s look at an example. Suppose we have a PageObject with a field defined like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@FindBy(id=&quot;slow-loader&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public WebElementFacade slowLoadingField;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This field takes a little while to load, so won’t be ready immediately on the page.</p><p>Now suppose we set the <code>webdriver.timeouts.implicitlywait</code> value to 5000, and that our test uses the slowLoadingField:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">boolean loadingFinished = slowLoadingField.isDisplayed()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>When we access this field, two things can happen. If the field takes less than 5 seconds to load, all will be good. But if it takes more than 5 seconds, a NoSuchElementException (or something similar) will be thrown.</p><p>That this timeout also applies for lists. Suppose we have defined a field like this, which takes some time to dynamically load:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@FindBy(css=&quot;#elements option&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public List&lt;WebElementFacade&gt; elementItems;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now suppose we count the values of the element like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">int itemCount = elementItems.size()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The number of items returned will depend on the implicit wait value. If we set the <code>webdriver.timeouts.implicitlywait</code> value to a very small value, WebDriver may only load some of the values. But if we give the list enough time to load completely, we will get the full list.</p><p>The implicit wait value is set globally for each WebDriver instance, but you can override the value yourself. The simplest way to do this from within a Serenity PageObject is to use the setImplicitTimeout() method:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">setImplicitTimeout(5, SECONDS)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>But remember this is a global configuration, so will also affect other page objects. So once you are done, you should always reset the implicit timeout to its previous value. Serenity gives you a handy method to do this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">resetImplicitTimeout()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>See <a href="http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp#implicit-waits%5BSelenium" target="_blank" rel="noopener noreferrer">http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp#implicit-waits[Selenium</a> Documentation] for more details on how the WebDriver implicit waits work.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="using-custom-locator-factories"></a>Using custom locator factories<a class="hash-link" href="#using-custom-locator-factories" title="Direct link to heading">#</a></h3><p>Internally, Selenium uses the concept of Locator Factories
Normally, Serenity uses <code>SmartElementLocatorFactory</code>, an extension of the WebDriver <code>AjaxElementLocatorFactory</code>, when instantiating page objects. Among other things, this helps ensure that web elements are available and usable before they are used, allows field-by-field timeouts, and avoids long unnecessary waits on web elements after a step has failed.</p><p>The <code>SmartElementLocatorFactory</code> uses the default implicit wait, or the <code>timeoutInSeconds</code> attribute of the <code>@FindBy</code> annotation if this value has been specified (see below), or the default implicit wait value specified by the <code>webdriver.timeouts.implicitlywait</code> property.</p><p>In rare cases, you may need to customise this behaviour. To do this, you can use the <code>serenity.locator.factory</code> property to use one of the following alternative locator factories:</p><ul><li><p><code>AjaxElementLocatorFactory</code>: A WebDriver locator factory more suitable for Ajax applications. According to the WebDriver docs, this locator factory will return <em>an element locator that will wait for the specified number of seconds for an element to appear, rather than failing instantly if it&#x27;s not present. This works by polling the UI on a regular basis. The element returned will be present on the DOM, but may not actually be visible.</em></p></li><li><p><code>DefaultElementLocatorFactory</code>: the default WebDriver locator factory</p></li></ul><p>If you use the <code>AjaxElementLocatorFactory</code>, you can use the <code>webdriver.timeouts.implicitlywait</code> parameter is to specify the number of seconds to wait. If no value is specified, the default wait will be 5 seconds.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="explicit-timeouts"></a>Explicit Timeouts<a class="hash-link" href="#explicit-timeouts" title="Direct link to heading">#</a></h3><p>You can also programatically wait until an element is in a particular state. This is more flexible and useful when you need to wait for extra time in a specific situation. For example, we could wait until a field becomes visible:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">slowLoadingField.waitUntilVisible()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can also wait for more arbitrary conditions, e.g.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">waitFor(ExpectedConditions.alertIsPresent())</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The default time that Serenity will wait is determined by the <code>webdriver.wait.for.timeout</code> property. The default value for this property is 5 seconds.</p><p>Sometimes you want to give WebDriver some more time for a specific operation. From within a PageObject, you can override or extend the explicit timeout by using the withTimeoutOf() method. For example, you could wait for the #elements list to load for up to 5 seconds like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">withTimeoutOf(5, SECONDS).waitForPresenceOf(By.cssSelector(&quot;#elements option&quot;))</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can also specify the timeout for a field. For example, if you wanted to wait for up to 5 seconds for a button to become clickable before clicking on it, you could do the following:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">someButton.withTimeoutOf(5, SECONDS).waitUntilClickable().click()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can also use this approach to retrieve elements:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">elements = withTimeoutOf(5, SECONDS).findAll(&quot;#elements option&quot;)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Finally, if a specific element a PageObject needs to have a bit more time to load, you can use the timeoutInSeconds attribute in the Serenity @FindBy annotation, e.g.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">import net.serenitybdd.core.annotations.findby.FindBy;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@FindBy(name = &quot;country&quot;, timeoutInSeconds=&quot;10&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public WebElementFacade country;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can also wait for an element to be in a particular state, and then perform an action on the element. Here we wait for an element to be clickable before clicking on the element:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">addToCartButton.withTimeoutOf(5, SECONDS).waitUntilClickable().click()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Or, you can wait directly on a web element:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@FindBy(id=&quot;share1-fb-like&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">WebElementFacade facebookIcon;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public WebElementState facebookIcon() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return withTimeoutOf(5, TimeUnit.SECONDS).waitFor(facebookIcon);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Or even:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;WebElementFacade&gt; currencies = withTimeoutOf(5, TimeUnit.SECONDS)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                              .waitFor(currencyTab)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                              .thenFindAll(&quot;.currency-code&quot;);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="executing-javascript"></a>Executing Javascript<a class="hash-link" href="#executing-javascript" title="Direct link to heading">#</a></h2><p>There are times when you may find it useful to execute a little Javascript directly within the browser to get the job done. You can use the <code>evaluateJavascript()</code> method of the <code>PageObject</code> class to do this. For example, you might need to evaluate an expression and use the result in your tests. The following command will evaluate the document title and return it to the calling Java code:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">String result = (String) evaluateJavascript(&quot;return document.title&quot;);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Alternatively, you may just want to execute a Javascript command locally in the browser. In the following code, for example, we set the focus to the &#x27;firstname&#x27; input field:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    evaluateJavascript(&quot;document.getElementById(&#x27;firstname&#x27;).focus()&quot;);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And, if you are familiar with JQuery, you can also invoke JQuery expressions:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    evaluateJavascript(&quot;$(&#x27;#firstname&#x27;).focus()&quot;);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This is often a useful strategy if you need to trigger events such as mouse-overs that are not currently supported by the WebDriver API.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="uploading-files"></a>Uploading files<a class="hash-link" href="#uploading-files" title="Direct link to heading">#</a></h2><p>Uploading files is easy. Files to be uploaded can be either placed in a hard-coded location (bad) or stored on the classpath (better). Here is a simple example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">public class NewCompanyPage extends PageObject {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @FindBy(id=&quot;object_logo&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    WebElementFacade logoField;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public NewCompanyPage(WebDriver driver) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        super(driver);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void loadLogoFrom(String filename) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        upload(filename).to(logoField);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="using-fluent-matcher-expressions"></a>Using Fluent Matcher expressions<a class="hash-link" href="#using-fluent-matcher-expressions" title="Direct link to heading">#</a></h2><p>When writing acceptance tests, you often find yourself expressing expectations about individual domain objects or collections of domain objects. For example, if you are testing a multi-criteria search feature, you will want to know that the application finds the records you expected. You might be able to do this in a very precise manner (for example, knowing exactly what field values you expect), or you might want to make your tests more flexible by expressing the ranges of values that would be acceptable. Serenity provides a few features that make it easier to write acceptance tests for this sort of case.</p><p>In the rest of this section, we will study some examples based on tests for the Maven Central search site. This site lets you search the Maven repository for Maven artifacts, and view the details of a particular artifact.</p><p>We will use some imaginary regression tests for this site to illustrate how the Serenity matchers can be used to write more expressive tests. The first scenario we will consider is simply searching for an artifact by name, and making sure that only artifacts matching this name appear in the results list. We might express this acceptance criteria informally in the following way:</p><ul><li>Give that the developer is on the search page,</li><li>And the developer searches for artifacts called &#x27;Serenity&#x27;</li><li>Then the developer should see at least 16 Serenity artifacts, each with a unique artifact Id</li></ul><p>In JUnit, a Serenity test for this scenario might look like the one:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static net.thucydides.core.matchers.BeanMatchers.the_count;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static net.thucydides.core.matchers.BeanMatchers.each;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static net.thucydides.core.matchers.BeanMatchers.the;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static org.hamcrest.Matchers.greaterThanOrEqualTo;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static org.hamcrest.Matchers.is;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static org.hamcrest.Matchers.startsWith;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@RunWith(SerenityRunner.class)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WhenSearchingForArtifacts {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Managed</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    WebDriver driver;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Steps</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DeveloperSteps developer;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void should_find_the_right_number_of_artifacts() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        developer.opens_the_search_page();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        developer.searches_for(&quot;Serenity&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        developer.should_see_artifacts_where(the(&quot;GroupId&quot;, startsWith(&quot;net.thucydides&quot;)),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                             each(&quot;ArtifactId&quot;).isDifferent(),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                             the_count(is(greaterThanOrEqualTo(16))));</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Let&#x27;s see how the test in this class is implemented. The <code>should_find_the_right_number_of_artifacts()</code> test could be expressed as follows:</p><p>. When we open the search page</p><p>. And we search for artifacts containing the word &#x27;Serenity&#x27;</p><p>. Then we should see a list of artifacts where each Group ID starts with &quot;net.Serenity&quot;, each Artifact ID is unique, and that there are at least 16 such entries displayed.</p><p>The implementation of these steps is illustrated here:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static net.thucydides.core.matchers.BeanMatcherAsserts.shouldMatch;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class DeveloperSteps {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Step</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void opens_the_search_page() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        onSearchPage().open();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Step</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void searches_for(String search_terms) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        onSearchPage().enter_search_terms(search_terms);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        onSearchPage().starts_search();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Step</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void should_see_artifacts_where(BeanMatcher... matchers) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        shouldMatch(onSearchResultsPage().getSearchResults(), matchers);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private SearchPage onSearchPage() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return getPages().get(SearchPage.class);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private SearchResultsPage onSearchResultsPage() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return getPages().get(SearchResultsPage.class);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The first two steps are implemented by relatively simple methods. However the third step is more interesting. Let&#x27;s look at it more closely:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    @Step</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void should_see_artifacts_where(BeanMatcher... matchers) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        shouldMatch(onSearchResultsPage().getSearchResults(), matchers);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Here, we are passing an arbitrary number of expressions into the method. These expressions actually &#x27;matchers&#x27;, instances of the BeanMatcher class. Not that you usually have to worry about that level of detail - you create these matcher expressions using a set of static methods provided in the BeanMatchers class. So you typically would pass fairly readable expressions like <code>the(&quot;GroupId&quot;, startsWith(&quot;net.Serenity&quot;))</code> or `each(&quot;ArtifactId&quot;).isDifferent()+.</p><p>The <code>shouldMatch()</code> method from the BeanMatcherAsserts class takes either a single Java object, or a collection of Java objects, and checks that at least some of the objects match the constraints specified by the matchers. In the context of web testing, these objects are typically POJOs provided by the Page Object to represent the domain object or objects displayed on a screen.</p><p>There are a number of different matcher expressions to choose from. The most commonly used matcher just checks the value of a field in an object. For example, suppose you are using the domain object shown here:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">     public class Person {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private final String firstName;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private final String lastName;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Person(String firstName, String lastName) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.firstName = firstName;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.lastName = lastName;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public String getFirstName() {...}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public String getLastName() {...}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You could write a test to ensure that a list of Persons contained at least one person named &quot;Bill&quot; by using the &quot;the&quot; static method, as shown here:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;Person&gt; persons = Arrays.asList(new Person(&quot;Bill&quot;, &quot;Oddie&quot;), new Person(&quot;Tim&quot;, &quot;Brooke-Taylor&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    shouldMatch(persons, the(&quot;firstName&quot;, is(&quot;Bill&quot;))</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The second parameter in the the() method is a Hamcrest matcher, which gives you a great deal of flexibility with your expressions. For example, you could also write the following:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;Person&gt; persons = Arrays.asList(new Person(&quot;Bill&quot;, &quot;Oddie&quot;), new Person(&quot;Tim&quot;, &quot;Brooke-Taylor&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    shouldMatch(persons, the(&quot;firstName&quot;, is(not(&quot;Tim&quot;))));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    shouldMatch(persons, the(&quot;firstName&quot;, startsWith(&quot;B&quot;)));</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can also pass in multiple conditions:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;Person&gt; persons = Arrays.asList(new Person(&quot;Bill&quot;, &quot;Oddie&quot;), new Person(&quot;Tim&quot;, &quot;Brooke-Taylor&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    shouldMatch(persons, the(&quot;firstName&quot;, is(&quot;Bill&quot;), the(&quot;lastName&quot;, is(&quot;Oddie&quot;));</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Serenity also provides the DateMatchers class, which lets you apply Hamcrest matches to standard java Dates and <code>JodaTime</code> DateTimes. The following code samples illustrate how these might be used:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    DateTime january1st2010 = new DateTime(2010,01,01,12,0).toDate();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    DateTime may31st2010 = new DateTime(2010,05,31,12,0).toDate();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    the(&quot;purchaseDate&quot;, isBefore(january1st2010))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    the(&quot;purchaseDate&quot;, isAfter(january1st2010))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    the(&quot;purchaseDate&quot;, isSameAs(january1st2010))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    the(&quot;purchaseDate&quot;, isBetween(january1st2010, may31st2010))</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You sometimes also need to check constraints that apply to all of the elements under consideration. The simplest of these is to check that all of the field values for a particular field are unique. You can do this using the <code>each()</code> method:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    shouldMatch(persons, each(&quot;lastName&quot;).isDifferent())</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can also check that the number of matching elements corresponds to what you are expecting. For example, to check that there is only one person named Bill, you could do this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">     shouldMatch(persons, the(&quot;firstName&quot;, is(&quot;Bill&quot;), the_count(is(1)));</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can also check the minimum and maximum values using the max() and min() methods. For example, if the Person class had a <code>getAge()</code> method, we could ensure that every person is over 21 and under 65 by doing the following:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">     shouldMatch(persons, min(&quot;age&quot;, greaterThanOrEqualTo(21)),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                          max(&quot;age&quot;, lessThanOrEqualTo(65)));</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>These methods work with normal Java objects, but also with Maps. So the following code will also work:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    Map&lt;String, String&gt; person = new HashMap&lt;String, String&gt;();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    person.put(&quot;firstName&quot;, &quot;Bill&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    person.put(&quot;lastName&quot;, &quot;Oddie&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;Map&lt;String,String&gt;&gt; persons = Arrays.asList(person);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    shouldMatch(persons, the(&quot;firstName&quot;, is(&quot;Bill&quot;))</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The other nice thing about this approach is that the matchers play nicely with the Serenity reports. So when you use the BeanMatcher class as a parameter in your test steps, the conditions expressed in the step will be displayed in the test report.</p><p>There are two common usage patterns when building Page Objects and steps that use this sort of matcher. The first is to write a Page Object method that returns the list of domain objects (for example, Persons) displayed on the table. For example, the getSearchResults() method used in the should_see_artifacts_where() step could be implemented as follows:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    public List&lt;Artifact&gt; getSearchResults() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;WebElement&gt; rows = resultTable.findElements(By.xpath(&quot;.//tr[td]&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;Artifact&gt; artifacts = new ArrayList&lt;Artifact&gt;();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (WebElement row : rows) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            List&lt;WebElement&gt; cells = row.findElements(By.tagName(&quot;td&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            artifacts.add(new Artifact(cells.get(0).getText(),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                       cells.get(1).getText(),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                       cells.get(2).getText()));</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return artifacts;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The second is to access the HTML table contents directly, without explicitly modelling the data contained in the table. This approach is faster and more effective if you don&#x27;t expect to reuse the domain object in other pages. We will see how to do this next.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="working-with-html-tables"></a>Working with HTML Tables<a class="hash-link" href="#working-with-html-tables" title="Direct link to heading">#</a></h3><p>Since HTML tables are still widely used to represent sets of data on web applications, Serenity comes the HtmlTable class, which provides a number of useful methods that make it easier to write Page Objects that contain tables. For example, the rowsFrom method returns the contents of an HTML table as a list of Maps, where each map contains the cell values for a row indexed by the corresponding heading, as shown here:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static net.thucydides.core.pages.components.HtmlTable.rowsFrom;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SearchResultsPage extends PageObject {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    WebElement resultTable;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public SearchResultsPage(WebDriver driver) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        super(driver);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public List&lt;Map&lt;String, String&gt;&gt; getSearchResults() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return rowsFrom(resultTable);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This saves a lot of typing - our <code>getSearchResults()</code> method now looks like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    public List&lt;Map&lt;String, String&gt;&gt; getSearchResults() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return rowsFrom(resultTable);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And since the Serenity matchers work with both Java objects and Maps, the matcher expressions will be very similar. The only difference is that the Maps returned are indexed by the text values contained in the table headings, rather than by java-friendly property names.</p><p>You can also read tables without headers (i.e., <code>&lt;th&gt;</code> elements) by specifying your own headings using the <code>withColumns</code> method. For example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    List&lt;Map&lt;Object, String&gt;&gt; tableRows =</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    HtmlTable.withColumns(&quot;First Name&quot;,&quot;Last Name&quot;, &quot;Favorite Colour&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                             .readRowsFrom(page.table_with_no_headings);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can also use the HtmlTable class to select particular rows within a table to work with. For example, another test scenario for the Maven Search page involves clicking on an artifact and displaying the details for that artifact. The test for this might look something like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void clicking_on_artifact_should_display_details_page() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        developer.opens_the_search_page();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        developer.searches_for(&quot;Serenity&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        developer.open_artifact_where(the(&quot;ArtifactId&quot;, is(&quot;Serenity&quot;)),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                      the(&quot;GroupId&quot;, is(&quot;net.Serenity&quot;)));</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        developer.should_see_artifact_details_where(the(&quot;artifactId&quot;, is(&quot;Serenity&quot;)),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                    the(&quot;groupId&quot;, is(&quot;net.Serenity&quot;)));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now the open_artifact_where() method needs to click on a particular row in the table. This step looks like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    @Step</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void open_artifact_where(BeanMatcher... matchers) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        onSearchResultsPage().clickOnFirstRowMatching(matchers);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>So we are effectively delegating to the Page Object, who does the real work. The corresponding Page Object method looks like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">import static net.thucydides.core.pages.components.HtmlTable.filterRows;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void clickOnFirstRowMatching(BeanMatcher... matchers) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        List&lt;WebElement&gt; matchingRows = filterRows(resultTable, matchers);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        WebElement targetRow = matchingRows.get(0);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        WebElement detailsLink = targetRow.findElement(By.xpath(&quot;.//a[contains(@href,&#x27;artifactdetails&#x27;)]&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        detailsLink.click();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The interesting part here is the first line of the method, where we use the filterRows() method. This method will return a list of WebElements that match the matchers you have passed in. This method makes it fairly easy to select the rows you are interested in for special treatment.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="switching-to-another-page"></a>Switching to another page<a class="hash-link" href="#switching-to-another-page" title="Direct link to heading">#</a></h2><p>A method, switchToPage() is provided in PageObject class to make it convenient to return a new PageObject after navigation from within a method of a PageObject class. For example,</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@DefaultUrl(&quot;http://mail.acme.com/login.html&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class EmailLoginPage extends PageObject {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void forgotPassword() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        forgotPassword.click();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ForgotPasswordPage forgotPasswordPage = this.switchToPage(ForgotPasswordPage.class);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        forgotPasswordPage.open();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="webelement-collection-loading-strategies"></a>WebElement collection loading strategies<a class="hash-link" href="#webelement-collection-loading-strategies" title="Direct link to heading">#</a></h2><p>Selenium lets you use the <code>@FindBy</code> and <code>@FindAll</code> annotations to load collections of web elements, as illustrated here:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@FindBy(css=&#x27;#colors a&#x27;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;WebElement&gt; options</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If you are working with an asynchronous application, these lists may take time to load, so Selenium may give you an empty list because the elements have not loaded yet.</p><p>Serenity lets you find-tune this behaviour in two ways. The first is to use the wait DSL to load the elements directly, e.g.:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">withTimeoutOf(5, SECONDS).waitForPresenceOf(By.cssSelector(&quot;#colors a&quot;))</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Alternatively, you can use the <code>serenity.webdriver.collection_loading_strategy</code> property to define how Serenity loads collections of web elements when using the <code>@FindBy</code> and <code>@FindAll</code> annotations. There are three options:</p><ul><li>Optimistic</li><li>Pessimistic (default)</li><li>Paranoid</li></ul><p>Optimistic will only wait until the field is defined. This is the native Selenium behaviour.</p><p>Pessimistic will wait until at least the first element is displayed. This is currently the default.</p><p>Paranoid will wait until all of the elements are displayed. This can be slow for long lists.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="working-with-fixture-methods"></a>Working with fixture methods<a class="hash-link" href="#working-with-fixture-methods" title="Direct link to heading">#</a></h2><p>When a UI step fails in a Serenity test, the WebDriver instance is disabled for the rest of the test. This avoids unnecessary waits as the test steps through the subsequent steps (which it needs to do to document the test steps). The exception to this rule is in the case of fixture methods, such as methods annotated with the <code>@After</code> annotation in JUnit or Cucumber.</p><p>In these methods, the WebDriver instance can be used normally. In addition to the known JUnit and Cucumber annotations, any annotation starting with the word <code>After</code> will be considered a fixture method.</p><p>For example, suppose you need to delete the customer accounts via the UI at the end of each test. You already have an <code>AdminSteps</code> step library with a <code>deleteAllCustomerAccounts()</code> method that performs this task. You could ensure that all of the customer accounts are deleted like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@Steps</span></span><span class="token-line" style="color:#393A34"><span class="token plain">AdminSteps asAdministrator;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@After</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public void deleteUserAccounts() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    asAdministrator.deleteAllCustomerAccounts();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This makes it easy to perform teardown or cleanup operations that use the user interface, potentially reusing steps or tasks that are used elsewhere in the tests.</p><p>You can also override this behaviour at any point by calling the <code>reenableDrivers()</code> method, as shown here:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">Serenity.webdriver().reenableDrivers();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="extending-serenity-webdriver-integration"></a>Extending Serenity WebDriver Integration<a class="hash-link" href="#extending-serenity-webdriver-integration" title="Direct link to heading">#</a></h2><p>Serenity offers a simple way to extend the default WebDriver capabilities and customise the driver creation and teardown activities. Simply implement the <code>BeforeAWebdriverScenario</code> and/or the <code>AfterAWebDriverScenario</code> interfaces (both are in the <code>net.serenitybdd.core.webdriver.enhancers</code> package). Serenity will execute <code>BeforeAWebdriverScenario</code> classes just before a driver instance is created, allowing you to add customised options to the driver capabilities. Any <code>AfterAWebDriverScenario</code> are executed at the end of a test, just before the driver is closed.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="the-beforeawebdriverscenario-interface"></a>The BeforeAWebdriverScenario interface<a class="hash-link" href="#the-beforeawebdriverscenario-interface" title="Direct link to heading">#</a></h3><p>The <code>BeforeAWebdriverScenario</code> is used to enhance the <code>Capabilities</code> object that will be passed to the WebDriver instance when a new driver is created. The method call passes in the requested driver and the <code>TestOutcome</code> object, which contains information about the name and tags used for this test. It also passes in the <code>EnvironmentVariables</code>, which gives you access to the current environment configuration. An example of a simple <code>BeforeAWebdriverScenario</code> is shown below:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">public class MyCapabilityEnhancer implements BeforeAWebdriverScenario {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DesiredCapabilities apply(EnvironmentVariables environmentVariables,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     SupportedWebDriver driver,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     TestOutcome testOutcome,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     MutableCapabilities capabilities) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        capabilities.setCapability(&quot;name&quot;, testOutcome.getStoryTitle() + &quot; - &quot; + testOutcome.getTitle());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return capabilities;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="the-afterawebdriverscenario-interface"></a>The AfterAWebdriverScenario interface<a class="hash-link" href="#the-afterawebdriverscenario-interface" title="Direct link to heading">#</a></h3><p>The <code>AfterAWebdriverScenario</code> is called at the end of a test, just before the driver is closed, and once the result of the test is known. The test result (and other details) can be obtained from the <code>TestOutcome</code> parameter. This allows any last manipulations or checks to be performed on the driver, before the end of the test. The following example checks the result of the test that has just finished, and adds a cookie with a value depending on the test outcome:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">public class MyTestResultUpdater implements AfterAWebdriverScenario {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    void apply(EnvironmentVariables environmentVariables,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">               TestOutcome testOutcome,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">               WebDriver driver) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">       if ((driver == null) || (!RemoteDriver.isARemoteDriver(driver))) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">           return;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">       }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">       Cookie cookie = new Cookie(&quot;testPassed&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                   testOutcome.isFailure() || testOutcome.isError() || testOutcome.isCompromised() ? &quot;false&quot; : &quot;true&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">       driver.manage().addCookie(cookie);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="driver-enhancers"></a>Driver Enhancers<a class="hash-link" href="#driver-enhancers" title="Direct link to heading">#</a></h3><p>If you need to perform some action on the driver instance before each test, you can implement the <code>CustomDriverEnhancer</code> class. Note that this will be called immediately after the driver is created, and before any page is opened, so the number of actions is relatively limited.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="configuring-the-extension-packages"></a>Configuring the extension packages<a class="hash-link" href="#configuring-the-extension-packages" title="Direct link to heading">#</a></h3><p>The last thing you need to do is to tell Serenity what package it needs to look for your extension classes. Add the package, or a parent package to your Serenity configuration using the <code>serenity.extension.packages</code>.</p><p><code>serenity.extension.packages=com.acme.myserenityextensions</code></p><p>You can find an example of how these classes are implemented in a real-world use case in the <a href="https://github.com/serenity-bdd/serenity-core/tree/master/serenity-browserstack/src/main/java/net/serenitybdd/browserstack" target="_blank" rel="noopener noreferrer">serenity-browserstack</a> module on Github.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="custom-webdriver-implementations"></a>Custom WebDriver implementations<a class="hash-link" href="#custom-webdriver-implementations" title="Direct link to heading">#</a></h3><p>You can add your own custom WebDriver provider by implementing the DriverSource interface. First, you need to set up the following system properties (e.g. in your <code>serenity.properties</code> file):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">webdriver.driver = provided</span></span><span class="token-line" style="color:#393A34"><span class="token plain">webdriver.provided.type = mydriver</span></span><span class="token-line" style="color:#393A34"><span class="token plain">webdriver.provided.mydriver = com.acme.MyPhantomJSDriver</span></span><span class="token-line" style="color:#393A34"><span class="token plain">thucydides.driver.capabilities = mydriver</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Your custom driver must implement the DriverSource interface, as shown here:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">public class MyPhantomJSDriver implements DriverSource {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public WebDriver newDriver() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            DesiredCapabilities capabilities = DesiredCapabilities.phantomjs();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Add</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return new PhantomJSDriver(ResolvingPhantomJSDriverService.createDefaultService(), capabilities);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        catch (IOException e) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw new Error(e);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public boolean takesScreenshots() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Note that if you use custom drivers you will be entirely responsible for configuring and instantiating the browser instance, and the driver-related Serenity configuration options will not apply. We generally recommend using custom drivers only for very exceptional circumstances, and using <code>BeforeAWebdriverScenario</code> classes for most custom configuration requirements.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="using-the-hasauthentication-interface"></a>Using the HasAuthentication interface<a class="hash-link" href="#using-the-hasauthentication-interface" title="Direct link to heading">#</a></h2><p>Selenium 4 supports the <code>HasAuthentication</code> interface, which indicates that a driver supports authenticating to a website in some way. Serenity drivers integrate seemlessly with the <code>HasAuthentication</code> interface, so you can use it in the same way as you would in Selenium 4. For example, to register a username and password to use on all pages, you could add the following code before opening a site:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    getDriver().register(UsernameAndPassword.of(&quot;scott&quot;, &quot;tiger&quot;)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If authentication is only required on certain pages, you can also use a predicate:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">        Predicate&lt;URI&gt; onlyAuthenticateOnTheLoginPage = uri -&gt; uri.getPath().endsWith(&quot;/login&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        getDriver().register(onlyAuthenticateOnTheLoginPage, UsernameAndPassword.of(&quot;scott&quot;, &quot;tiger&quot;));</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/guide/page_objects.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/guide/step_libraries"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Step Libraries</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/guide/page_elements"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Serenity Page Elements »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#page-objects" class="table-of-contents__link">Page Objects</a></li><li><a href="#using-pages-in-a-step-library" class="table-of-contents__link">Using pages in a step library</a></li><li><a href="#opening-the-page" class="table-of-contents__link">Opening the page</a></li><li><a href="#working-with-web-elements" class="table-of-contents__link">Working with web elements</a><ul><li><a href="#checking-whether-elements-are-visible" class="table-of-contents__link">Checking whether elements are visible</a></li><li><a href="#checking-whether-elements-are-enabled" class="table-of-contents__link">Checking whether elements are enabled</a></li><li><a href="#manipulating-select-lists" class="table-of-contents__link">Manipulating select lists</a></li><li><a href="#determining-focus" class="table-of-contents__link">Determining focus</a></li><li><a href="#using-direct-xpath-and-css-selectors" class="table-of-contents__link">Using direct XPath and CSS selectors</a></li></ul></li><li><a href="#working-with-asynchronous-pages" class="table-of-contents__link">Working with Asynchronous Pages</a><ul><li><a href="#checking-whether-an-element-is-visible" class="table-of-contents__link">Checking whether an element is visible</a></li><li><a href="#working-with-shadow-dom-elements" class="table-of-contents__link">Working with Shadow DOM elements</a></li></ul></li><li><a href="#working-with-timeouts" class="table-of-contents__link">Working with timeouts</a><ul><li><a href="#implicit-waits" class="table-of-contents__link">Implicit Waits</a></li><li><a href="#using-custom-locator-factories" class="table-of-contents__link">Using custom locator factories</a></li><li><a href="#explicit-timeouts" class="table-of-contents__link">Explicit Timeouts</a></li></ul></li><li><a href="#executing-javascript" class="table-of-contents__link">Executing Javascript</a></li><li><a href="#uploading-files" class="table-of-contents__link">Uploading files</a></li><li><a href="#using-fluent-matcher-expressions" class="table-of-contents__link">Using Fluent Matcher expressions</a><ul><li><a href="#working-with-html-tables" class="table-of-contents__link">Working with HTML Tables</a></li></ul></li><li><a href="#switching-to-another-page" class="table-of-contents__link">Switching to another page</a></li><li><a href="#webelement-collection-loading-strategies" class="table-of-contents__link">WebElement collection loading strategies</a></li><li><a href="#working-with-fixture-methods" class="table-of-contents__link">Working with fixture methods</a></li><li><a href="#extending-serenity-webdriver-integration" class="table-of-contents__link">Extending Serenity WebDriver Integration</a><ul><li><a href="#the-beforeawebdriverscenario-interface" class="table-of-contents__link">The BeforeAWebdriverScenario interface</a></li><li><a href="#the-afterawebdriverscenario-interface" class="table-of-contents__link">The AfterAWebdriverScenario interface</a></li><li><a href="#driver-enhancers" class="table-of-contents__link">Driver Enhancers</a></li><li><a href="#configuring-the-extension-packages" class="table-of-contents__link">Configuring the extension packages</a></li><li><a href="#custom-webdriver-implementations" class="table-of-contents__link">Custom WebDriver implementations</a></li></ul></li><li><a href="#using-the-hasauthentication-interface" class="table-of-contents__link">Using the HasAuthentication interface</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/first_test">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://gitter.im/serenity-bdd/serenity-core" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Gitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/serenity-bdd" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Learn Serenity BDD</div><ul class="footer__items"><li class="footer__item"><a href="http://expansion.serenity-dojo.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>The Serenity Dojo Training Library<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.serenity-dojo.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Personalised Serenity BDD Coaching<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/serenity-bdd/serenity-core" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Serenity Dojo Ltd.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b226eb74.js"></script>
<script src="/assets/js/main.156fa54c.js"></script>
</body>
</html>
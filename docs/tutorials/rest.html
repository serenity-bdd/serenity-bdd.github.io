<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Serenity BDD User Manual Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Serenity BDD User Manual Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Serenity BDD User Manual" href="/opensearch.xml"><title data-react-helmet="true">Your First API Test | Serenity BDD User Manual</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://serenity-bdd.github.io/docs/tutorials/rest"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Your First API Test | Serenity BDD User Manual"><meta data-react-helmet="true" name="description" content="In the previous tutorial we looked at how to write a simple web test with Serenity BDD. But Serenity isn&#x27;t just for web tests: Serenity BDD also provides tight integration with Rest Assured, a popular open source library for testing REST APIs."><meta data-react-helmet="true" property="og:description" content="In the previous tutorial we looked at how to write a simple web test with Serenity BDD. But Serenity isn&#x27;t just for web tests: Serenity BDD also provides tight integration with Rest Assured, a popular open source library for testing REST APIs."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://serenity-bdd.github.io/docs/tutorials/rest"><link data-react-helmet="true" rel="alternate" href="https://serenity-bdd.github.io/docs/tutorials/rest" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://serenity-bdd.github.io/docs/tutorials/rest" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://V10PILA8X2-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.2ac391e8.css">
<link rel="preload" href="/assets/js/runtime~main.cbe41caf.js" as="script">
<link rel="preload" href="/assets/js/main.5e51d6ba.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/serenity-bdd-small.png" alt="Serenity BDD Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/serenity-bdd-small.png" alt="Serenity BDD Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Home</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/tutorials/first_test">Tutorials</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/guide/user_guide_intro">User Manual</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://www.serenitydojo.academy/serenity-bdd-support-packages" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Get Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">Learn Serenity BDD</a><ul class="dropdown__menu"><li><a href="https://expansion.serenity-dojo.com/courses/testing-web-applications-with-serenity-bdd" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Serenity BDD Online Training<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://expansion.serenity-dojo.com/courses/testing-web-applications-with-serenity-bdd" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>BDD and Requirements Discovery Training<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.serenity-dojo.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>BDD And Test Automation Coaching<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Your First Steps with Serenity BDD</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/first_test">Your First Web Test</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/screenplay">Your First Screenplay Scenario</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorials/rest">Your First API Test</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/cucumber-screenplay">Getting Started With Cucumber using Serenity BDD and Screenplay</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/migrating_to_serenity_4">Migrating From Serenity BDD 3.x to Serenity BDD 4.x</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/running_cucumber_scenarios_in_parallel">How to Do Parallel Test Execution in Cucumber with Serenity</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/streamlining_your_serenity_reports">Three Strategies to Optimize Your Serenity BDD Reports</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Serenity Fundamentals</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">The Screenplay Pattern</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Integrating in Spring</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reporting and Living Documentation</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Scaling Serenity</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Mobile Testing with Serenity</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Your First API Test</h1></header><p>In the previous tutorial we looked at how to write a simple web test with Serenity BDD. But Serenity isn&#x27;t just for web tests: Serenity BDD also provides tight integration with <a href="https://rest-assured.io/" target="_blank" rel="noopener noreferrer">Rest Assured</a>, a popular open source library for testing REST APIs.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="pre-requisites"></a>Pre-requisites<a class="hash-link" href="#pre-requisites" title="Direct link to heading">#</a></h2><p>To run this tutorial, you will need a few things installed on your machine:</p><ul><li><strong>Java</strong>: Serenity BDD is a Java library, so you&#x27;ll need a recent JDK installed. JDK 1.8 or higher should be fine.</li><li><strong>Maven</strong>: You will need Maven 3 or higher installed in your computer.  This acts as a build tool that also downloads the dependencies while building.</li><li><strong>A Java IDE</strong>: You&#x27;ll also need a Java Development Environment such as IntelliJ or Eclipse (and a working knowledge of Java).</li><li><strong>Git</strong>: We&#x27;ll be using a starter project on Github, and the sample code for this project lives on Github too, so I&#x27;ll be assuming you have a basic understanding of Git.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="creating-your-project"></a>Creating your project<a class="hash-link" href="#creating-your-project" title="Direct link to heading">#</a></h2><p>We will be using the <strong><a href="https://github.com/serenity-bdd/serenity-junit-starter" target="_blank" rel="noopener noreferrer">Serenity BDD Junit Starter</a></strong> template project to get a simple project up and running quickly.</p><p>This project comes with a sample test based on Junit 5 already implemented for our reference.  For now, we are going to ignore that and start writing a new test from scratch.</p><p>Go to the <a href="https://github.com/serenity-bdd/serenity-junit-starter" target="_blank" rel="noopener noreferrer">project template page on Github</a> and click on <a href="https://github.com/serenity-bdd/serenity-junit-starter/generate" target="_blank" rel="noopener noreferrer">Use This Template</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="deleting-the-unnecessary-files"></a>Deleting the unnecessary files<a class="hash-link" href="#deleting-the-unnecessary-files" title="Direct link to heading">#</a></h2><p>Just to make sure that the starter template&#x27;s sample files do not interfere with our experience in this tutorial, <strong>delete</strong> the <code>src/test/java/starter/wikipedia</code> directory.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="adding-the-serenity-restassured-dependency"></a>Adding the Serenity RestAssured Dependency<a class="hash-link" href="#adding-the-serenity-restassured-dependency" title="Direct link to heading">#</a></h2><p>Open the <code>pom.xml</code> file in the root directory and add the following lines in the <code>&lt;dependencies&gt;</code> section, similar to the ones already in the file. </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI xml"><pre tabindex="0" class="prism-code language-xml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">net.serenity-bdd</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">serenity-rest-assured</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${serenity.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">test</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="enabling-detailed-html-reports"></a>Enabling Detailed HTML reports<a class="hash-link" href="#enabling-detailed-html-reports" title="Direct link to heading">#</a></h2><p>When we use the template&#x27;s default configuration, we get only a single-page HTML report.  We want to generate a detailed HTML report in this tutorial.  So, let us <strong>delete</strong> the following line from the <code>pom.xml</code> file.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI xml"><pre tabindex="0" class="prism-code language-xml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">reports</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">single-page-html</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">reports</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- DELETE the line above. Yes, delete it! --&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can find this in the configuration section of <code>serenity-maven-plugin</code> plugin.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="the-project-directory-structure"></a>The project directory structure<a class="hash-link" href="#the-project-directory-structure" title="Direct link to heading">#</a></h2><p>We will use some simple conventions to organise our feature files and the supporting Java classes, based on the standard Maven project structure outlined below:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€â”€src</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€â”€main</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â””â”€â”€â”€java</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚       â””â”€â”€â”€starter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€â”€test</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â”œâ”€â”€â”€java</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â”‚   â””â”€â”€â”€starter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â”‚       â””â”€â”€â”€petstore</span></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â””â”€â”€â”€resources</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Here are some points to note about the directory structure.</p><ol><li>Since we will test the publicly available <a href="https://petstore.swagger.io/" target="_blank" rel="noopener noreferrer">Pet Store API</a>, we will not have any code in the <code>src/main</code> directory.</li><li>We will re-use (from the template) the contents that are already there in the <code>src/test/resources/</code> directory.</li><li>We will create a new directory <code>petstore</code> under <code>src/test/java/starter</code> directory to store our test class and its helpers.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="writing-an-api-test"></a>Writing an API test<a class="hash-link" href="#writing-an-api-test" title="Direct link to heading">#</a></h2><p>Let us start with writing our API test.  In this test, we will test the <a href="https://petstore.swagger.io/#/pet/getPetById" target="_blank" rel="noopener noreferrer"><code>GET /pet/{petId}</code></a> API.  This API will return a pet when you give its <code>id</code> in the URL.</p><p>However, we cannot call this API directly without any <code>id</code>.  Hence, our test needs to first create a Pet and get its <code>id</code> before it calling the <code>GET /pet/{petId}</code> API end point.</p><p>In other words, we could write our test in the <code>Given-When-Then</code> format as follows.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI Gherkin"><pre tabindex="0" class="prism-code language-Gherkin codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">Given Kitty is available in the pet store</span></span><span class="token-line" style="color:#393A34"><span class="token plain">When I ask for a pet using Kitty&#x27;s ID</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Then I get Kitty as result</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="basic-test-structure"></a>Basic test structure<a class="hash-link" href="#basic-test-structure" title="Direct link to heading">#</a></h3><p>Now we create a new test class (let&#x27;s call it <code>WhenFetchingAlreadyAvailablePet</code>), and an empty test case (we can call it <code>fetchAlreadyAvailablePet</code>).</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package starter.petstore;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import net.serenitybdd.junit5.SerenityJUnit5Extension;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.junit.jupiter.api.Test;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.junit.jupiter.api.extension.ExtendWith;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@ExtendWith(SerenityJUnit5Extension.class)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WhenFetchingAlreadyAvailablePet {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Test</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public void fetchAlreadyAvailablePet() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>There are a few things to note here:</p><ul><li>The <code>@ExtendWith</code> annotation tells JUnit that this test uses Serenity - don&#x27;t forget this annotation or your test won&#x27;t be recognised as a Serenity test</li><li>The <code>@Test</code> annotation uses the <code>org.junit.jupiter.api.Test</code> class, from JUnit 5. Be careful not to get this mixed up with the JUnit 4 annotation of the same name (<code>org.junit.Test</code>), otherwise your test won&#x27;t run.</li><li>Note that the name of the test class starts with <code>When</code>.  This is one of the ways to make sure it is recognized as a test to be run in the Maven build process.  See the <code>pom.xml</code> file&#x27;s <code>configuration</code> section for <code>maven-failsafe-plugin</code> for more details on this.</li></ul></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="creating-action-classes"></a>Creating Action Classes<a class="hash-link" href="#creating-action-classes" title="Direct link to heading">#</a></h3><p>We could simply start writing the entire test&#x27;s code inside our <code>fetchAlreadyAvailablePet()</code> method. That would work fine. But keeping your test code well organised and well-structured is essential to keeping maintenance costs down. And Serenity BDD gives us a number of ways to do this.</p><p>One of the simplest ways to do this is called <em>Action Classes</em>. Action Classes are small, reusable classes with methods that encapsulate key user actions.  We will use these classes to call the HTTP APIs.</p><p>For example, we could break our <code>fetchAlreadyAvailablePet()</code> test down into three steps:</p><ol><li><strong>Arrange (Given):</strong> Set the stage to call the GET api by pre-loading the pet named &#x27;Kitty&#x27; using a HTTP POST call documented <a href="https://petstore.swagger.io/#/pet/addPet" target="_blank" rel="noopener noreferrer">here</a>.</li><li><strong>Act (When):</strong> Call the API under test using the ID of &#x27;Kitty&#x27;</li><li><strong>Assert (Then):</strong> Check that the API returns a pet with name &#x27;Kitty&#x27;</li></ol><p>Let us create an action class named <code>PetApiActions</code> with the following skeleton code, in the same <code>petstore</code> package where the test lives.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package starter.petstore;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.cucumber.java.en.Given;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.cucumber.java.en.Then;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.cucumber.java.en.When;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import net.serenitybdd.core.steps.UIInteractions;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PetApiActions extends UIInteractions {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Given(&quot;Kitty is available in the pet store&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Long givenKittyIsAvailableInPetStore() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @When(&quot;I ask for a pet using Kitty&#x27;s ID: {0}&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void whenIAskForAPetWithId(Long id) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Then(&quot;I get Kitty as result&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void thenISeeKittyAsResult() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p><strong>Points to note</strong></p><ol><li>Since we want to use the ID generated by the API in our upcoming step, we return the ID as a Long return value.</li><li>We extend the <code>UIInteractions</code> class that comes with the Serenity BDD to help us interact with APIs.</li></ol></div></div><p>Let&#x27;s start with implementing the first action: Setting the stage by pre-creating a pet with name <code>&quot;Kitty&quot;</code> by calling the POST API.</p><p>Since we need to create a Java object to hold the <code>Pet</code>, we can create a class <code>Pet.java</code> under <code>starter.petstore</code> package with the following code.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package starter.petstore;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Pet {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String status;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Long id;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Pet(String name, String status, Long id) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.name = name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.status = status;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.id = id;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Pet(String name, String status) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.name = name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.status = status;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String getName() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return this.name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String getStatus() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return this.status;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Long getId() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return id;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setName(String name) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.name = name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setStatus(String status) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.status = status;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setId(Long id) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.id = id;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now that we have a way to represent a Pet in our code, let us write our first action in function <code>givenKittyIsAvailableInPetStore()</code>  of the class <code>PetApiActions</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package starter.petstore;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.cucumber.java.en.Given;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.cucumber.java.en.Then;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.cucumber.java.en.When;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.restassured.http.ContentType;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.restassured.mapper.ObjectMapperType;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static net.serenitybdd.rest.SerenityRest.given;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import net.serenitybdd.core.steps.UIInteractions;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static net.serenitybdd.rest.SerenityRest.*;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PetApiActions extends UIInteractions {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Given(&quot;Kitty is available in the pet store&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Long givenKittyIsAvailableInPetStore() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Pet pet = new Pet(&quot;Kitty&quot;, &quot;available&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Long newId = given()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .baseUri(&quot;https://petstore.swagger.io&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .basePath(&quot;/v2/pet&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .body(pet, ObjectMapperType.GSON)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .accept(ContentType.JSON)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .contentType(ContentType.JSON).post().getBody().as(Pet.class, ObjectMapperType.GSON).getId();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return newId;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @When(&quot;I ask for a pet using Kitty&#x27;s ID: {0}&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void whenIAskForAPetWithId(Long id) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Then(&quot;I get Kitty as result&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void thenISeeKittyAsResult() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Next, let us write the implementation for the <code>whenIAskForAPetWithId</code> function.  This will include just calling the GET API that needs to be tested.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    @When(&quot;I ask for a pet using Kitty&#x27;s ID: {0}&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void whenIAskForAPetWithId(Long id) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        when().get(&quot;/&quot; + id);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p><strong>Points to note</strong></p><ol><li>In the <code>get</code> method call above, the <code>baseUri</code> and <code>basePath</code> from the <code>given()</code> section is reused.  This is why you did not have to repeat those details in this method.</li><li>Since we are using the <code>id</code> as an input parameter, we are using <code>{0}</code> in the description so that it can appear in our reports.   </li></ol></div></div><p>Next, let us write the implementation for the <code>thenISeeKittyAsResult</code> method as follows.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    @Then(&quot;I get Kitty as result&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void thenISeeKittyAsResult() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        then().body(&quot;name&quot;, Matchers.equalTo(&quot;Kitty&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Putting everything together, the <code>PetApiActions.java</code> file looks as follows.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package starter.petstore;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.cucumber.java.en.Given;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.cucumber.java.en.Then;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.cucumber.java.en.When;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.restassured.http.ContentType;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import io.restassured.mapper.ObjectMapperType;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static net.serenitybdd.rest.SerenityRest.then;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static net.serenitybdd.rest.SerenityRest.when;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static net.serenitybdd.rest.SerenityRest.given;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import net.serenitybdd.core.steps.UIInteractions;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.hamcrest.Matchers;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static net.serenitybdd.rest.SerenityRest.*;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PetApiActions extends UIInteractions {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Given(&quot;Kitty is available in the pet store&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Long givenKittyIsAvailableInPetStore() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Pet pet = new Pet(&quot;Kitty&quot;, &quot;available&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Long newId = given()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .baseUri(&quot;https://petstore.swagger.io&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .basePath(&quot;/v2/pet&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .body(pet, ObjectMapperType.GSON)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .accept(ContentType.JSON)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .contentType(ContentType.JSON).post().getBody().as(Pet.class, ObjectMapperType.GSON).getId();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return newId;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @When(&quot;I ask for a pet using Kitty&#x27;s ID: {0}&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void whenIAskForAPetWithId(Long id) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        when().get(&quot;/&quot; + id);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Then(&quot;I get Kitty as result&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void thenISeeKittyAsResult() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        then().body(&quot;name&quot;, Matchers.equalTo(&quot;Kitty&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="completing-our-test-case"></a>Completing our test case<a class="hash-link" href="#completing-our-test-case" title="Direct link to heading">#</a></h3><p>Now that we have our Actions class ready, let us finish writing our test case in the <code>WhenFetchingAlreadyAvailablePet</code> class.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package starter.petstore;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import net.serenitybdd.junit5.SerenityJUnit5Extension;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.junit.jupiter.api.Test;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import org.junit.jupiter.api.extension.ExtendWith;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@ExtendWith(SerenityJUnit5Extension.class)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WhenFetchingAlreadyAvailablePet {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Long newPetId = null;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    PetApiActions petApi;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Test</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void fetchAlreadyAvailablePet() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        newPetId = petApi.givenKittyIsAvailableInPetStore();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        petApi.whenIAskForAPetWithId(newPetId);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        petApi.thenISeeKittyAsResult();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Let us try running the Maven build to see the result.  If the API works as expected, we expect the test to pass and a detailed HTML report to be generated.</p><p>Run the following command in a terminal or command prompt.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mvn clean verify</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Once the command completes, you can see output similar to the following.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 10.009 s - in starter.petstore.WhenFetchingAlreadyAvailablePet</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] </span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] Results:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] -----------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO]  SERENITY TESTS: SUCCESS</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] -----------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] | Test cases executed    | 1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] | Tests executed         | 1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] | Tests passed           | 1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] | Tests failed           | 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] | Tests with errors      | 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] | Tests compromised      | 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] | Tests aborted          | 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] | Tests pending          | 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] | Tests ignored/skipped  | 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] ------------------------ | --------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] | Total Duration         | 9s 212ms</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] | Fastest test took      | 9s 212ms</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] | Slowest test took      | 9s 212ms</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] -----------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] SERENITY REPORTS</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO]   - Full Report: file:///C:/Users/calib/source-codes/temp/serenity-junit-starter/target/site/serenity/index.html</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] --- maven-failsafe-plugin:3.0.0-M5:verify (default) @ serenity-junit-starter ---</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] ------------------------------------------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] BUILD SUCCESS</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] ------------------------------------------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] Total time:  39.104 s</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] Finished at: 2022-09-02T17:33:14+05:30</span></span><span class="token-line" style="color:#393A34"><span class="token plain">[INFO] ------------------------------------------------------------------------</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Yes, the test passed and the build is successful now.  We have managed to test our API successfully ðŸŽ‰</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="reporting-and-living-documentation"></a>Reporting and Living Documentation<a class="hash-link" href="#reporting-and-living-documentation" title="Direct link to heading">#</a></h2><p>If you notice carefully, the output of the <code>mvn clean verify</code> command informed us that a report is created in <code>target/site/serenity/index.html</code></p><p>When you open this file in a web browser, you see a beautiful report like this.</p><p><img alt="Report Home Page" src="/assets/images/rest-report-home-a2aa1a51d9d3c6af7f8263bf8021803a.png"></p><p>You can also find the test-wise results detailing the steps in the <code>Stories</code> tab, detailing the REST API calls.</p><p><img alt="Report" src="/assets/images/rest-report-stories-67c1feb64856b4eb56f3490782e91a7e.jpg"></p><p>If you want to look at the exact details used in the HTTP requests, you can click on the link circled in the above screenshot.  This will show you the details as shown below.</p><p><img alt="Report with HTTP requests" src="/assets/images/rest-report-http-requests-69463f8dc1251640a8c70994e2500b81.png"></p><p>Feel free to navigate the links in this report and look around.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="conclusion"></a>Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>In this tutorial, you created your own API test cases and ran them using Serenity BDD to generate a beautiful report.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/tutorials/rest.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/tutorials/screenplay"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Your First Screenplay Scenario</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/tutorials/cucumber-screenplay"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Getting Started With Cucumber using Serenity BDD and Screenplay Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pre-requisites" class="table-of-contents__link">Pre-requisites</a></li><li><a href="#creating-your-project" class="table-of-contents__link">Creating your project</a></li><li><a href="#deleting-the-unnecessary-files" class="table-of-contents__link">Deleting the unnecessary files</a></li><li><a href="#adding-the-serenity-restassured-dependency" class="table-of-contents__link">Adding the Serenity RestAssured Dependency</a></li><li><a href="#enabling-detailed-html-reports" class="table-of-contents__link">Enabling Detailed HTML reports</a></li><li><a href="#the-project-directory-structure" class="table-of-contents__link">The project directory structure</a></li><li><a href="#writing-an-api-test" class="table-of-contents__link">Writing an API test</a><ul><li><a href="#basic-test-structure" class="table-of-contents__link">Basic test structure</a></li><li><a href="#creating-action-classes" class="table-of-contents__link">Creating Action Classes</a></li><li><a href="#completing-our-test-case" class="table-of-contents__link">Completing our test case</a></li></ul></li><li><a href="#reporting-and-living-documentation" class="table-of-contents__link">Reporting and Living Documentation</a></li><li><a href="#conclusion" class="table-of-contents__link">Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/first_test">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://gitter.im/serenity-bdd/serenity-core" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Gitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/serenity-bdd" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Learn Serenity BDD</div><ul class="footer__items"><li class="footer__item"><a href="http://expansion.serenity-dojo.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>The Serenity Dojo Training Library<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.serenity-dojo.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Personalised Serenity BDD Coaching<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/serenity-bdd/serenity-core" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 Serenity Dojo Ltd.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.cbe41caf.js"></script>
<script src="/assets/js/main.5e51d6ba.js"></script>
</body>
</html>
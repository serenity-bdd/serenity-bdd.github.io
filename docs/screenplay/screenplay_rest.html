<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Serenity BDD Users Manual Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Serenity BDD Users Manual Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Serenity BDD Users Manual" href="/opensearch.xml"><title data-react-helmet="true">Working with REST APIs using Serenity Screenplay | Serenity BDD Users Manual</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://serenity-bdd.github.io/docs/screenplay/screenplay_rest"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Working with REST APIs using Serenity Screenplay | Serenity BDD Users Manual"><meta data-react-helmet="true" name="description" content="The Screenplay pattern is an approach to writing automated acceptance tests that helps us write cleaner, more maintainable, more scalable automation code. A Screenplay test talks first and foremost about the tasks a user performs, in business language, rather than diving into the details about buttons, clicks and input fields. Focusing on the business tasks makes our tests more readable, more maintainable, and easier to scale."><meta data-react-helmet="true" property="og:description" content="The Screenplay pattern is an approach to writing automated acceptance tests that helps us write cleaner, more maintainable, more scalable automation code. A Screenplay test talks first and foremost about the tasks a user performs, in business language, rather than diving into the details about buttons, clicks and input fields. Focusing on the business tasks makes our tests more readable, more maintainable, and easier to scale."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://serenity-bdd.github.io/docs/screenplay/screenplay_rest"><link data-react-helmet="true" rel="alternate" href="https://serenity-bdd.github.io/docs/screenplay/screenplay_rest" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://serenity-bdd.github.io/docs/screenplay/screenplay_rest" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://V10PILA8X2-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.4fb1788f.css">
<link rel="preload" href="/assets/js/runtime~main.6e28c29c.js" as="script">
<link rel="preload" href="/assets/js/main.61d6afda.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/serenity-bdd-small.png" alt="Serenity BDD Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/serenity-bdd-small.png" alt="Serenity BDD Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Home</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/tutorials/first_test">Tutorials</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/guide/user_guide_intro">User Manual</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://johnfergusonsmart.com/serenity-bdd-mentoring/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Get Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">Learn Serenity BDD</a><ul class="dropdown__menu"><li><a href="https://expansion.serenity-dojo.com/courses/testing-web-applications-with-serenity-bdd" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>Serenity BDD Online Training<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="http://learnbdd.com/requirements-discovery-training" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>BDD Requirements Discovery Training<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://www.serenity-dojo.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>BDD And Test Automation Coaching<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Your First Steps with Serenity BDD</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Serenity Fundamentals</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">The Screenplay Pattern</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/screenplay/screenplay_fundamentals">Screenplay Fundamentals</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/screenplay/screenplay_webdriver">Web Testing with Serenity Screenplay</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/screenplay/screenplay_rest">Working with REST APIs using Serenity Screenplay</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/screenplay/screenplay_ensure">Making Screenplay Assertions with Serenity Ensure</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Integrating in Spring</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reporting and Living Documentation</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Scaling Serenity</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Mobile Testing with Serenity</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Working with REST APIs using Serenity Screenplay</h1></header><p>The Screenplay pattern is an approach to writing automated acceptance tests that helps us write cleaner, more maintainable, more scalable automation code. A Screenplay test talks first and foremost about the tasks a user performs, in business language, rather than diving into the details about buttons, clicks and input fields. Focusing on the business tasks makes our tests more readable, more maintainable, and easier to scale.</p><p>Screenplay is often associated with UI testing. Interestingly, the name of the pattern is actually unrelated to screens or user interfaces; it comes from a theatre metaphor, where actors play roles on a stage following a predefined script (the &quot;screenplay&quot;), and was coined by Antony Marcano and Andy Palmer around 2015. The pattern itself goes back further than that, and has been around in various forms since it was first proposed by Antony Marcano in 2007.</p><p>But Screenplay is also a great fit for API or web service tests. In particular, Screenplay is ideal when we want to include API and UI activities in the same test. For example, we might have an API task to set up some test data, a UI task to illustrate how a user interacts with this data, then another API task to check the new state of the database.</p><p>You can get a taste of what REST API interactions using Serenity Screenplay look like here:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public void list_all_users() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Actor sam = Actor.named(&quot;Sam the supervisor&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                     .whoCan(CallAnApi.at(theRestApiBaseUrl));</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    sam.attemptsTo(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Get.resource(&quot;/users&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    sam.should(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            seeThatResponse(&quot;all the expected users should be returned&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    response -&gt; response.statusCode(200)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        .body(&quot;data.first_name&quot;, hasItems(&quot;George&quot;, &quot;Janet&quot;, &quot;Emma&quot;)))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Serenity Screenplay uses <a href="https://rest-assured.io" target="_blank" rel="noopener noreferrer">Rest-Assured</a> to interact with rest endpoints, and to query the responses. Rest-Assured provides us with a simple but extremely powerful Java DSL that allows us to test and virtually any kind of REST end point. Its highly readable code is also an ideal fit for Screenplay.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="setting-up-your-project"></a>Setting up your project<a class="hash-link" href="#setting-up-your-project" title="Direct link to heading">#</a></h2><p>To test REST API services with Screenplay, you need to add the <code>serenity-screenplay-rest</code> dependency to your project. In Maven, add the following to the dependencies in your <code>pom.xml</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI xml"><pre tabindex="0" class="prism-code language-xml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">net.serenity-bdd</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">serenity-screenplay-rest</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${serenity.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">test</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And for Gradle, you can add the same dependency to your <code>build.gradle</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">testCompile &quot;net.serenity-bdd:serenity-screenplay-rest:${serenityVersion}&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="defining-a-base-uri"></a>Defining a base URI<a class="hash-link" href="#defining-a-base-uri" title="Direct link to heading">#</a></h2><p>When you test a REST API, it is convenient to be able to use the same tests against different environments. You may want to run your tests against a server running on your local machine, against a QA server, or even against a production box. And you don&#x27;t want to have to change your tests whenever you test against a different environment.</p><p>For example, in this chapter, we will be demonstrating the features of <code>serenity-screenplay-rest</code> using the <a href="https://reqres.in" target="_blank" rel="noopener noreferrer">ResReq</a> application (see below). If you have a reliable internet connection, you can run your tests against the live ResReq server at <a href="https://reqres.in/api/" target="_blank" rel="noopener noreferrer">https://reqres.in/api/</a>. Or if you are running the ResReq server locally, you would access endpoints at http://localhost:5000/api.</p><p><strong>The ResReq test application</strong></p><p>The <a href="https://reqres.in" target="_blank" rel="noopener noreferrer">ResReq</a> application is an open source application written by <a href="http://benhowdle.im/" target="_blank" rel="noopener noreferrer">Ben Howdle</a> that makes it easy to experiment with REST APIs. It is hosted on Digital Ocean, where you can access it online at <a href="https://reqres.in/api/" target="_blank" rel="noopener noreferrer">https://reqres.in/api/</a>. Alternatively, you can also download the application from the project&#x27;s <a href="https://github.com/benhowdle89/reqres" target="_blank" rel="noopener noreferrer">repository on Github</a>, and run it locally. When you run the application on your own machine, the REST API will be available at http://localhost:5000/api.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="reading-from-the-serenity-config-file"></a>Reading from the Serenity config file<a class="hash-link" href="#reading-from-the-serenity-config-file" title="Direct link to heading">#</a></h3><p>In Serenity BDD, you can define the base URL for your REST API directly in the <code>serenity.properties</code> or <code>serenity.conf</code> file for your project.
Here is an example from a <code>serenity.conf</code> file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">restapi </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      baseurl = </span><span class="token string" style="color:#e3116c">&quot;https://reqres.in/api&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Any test can read values from the Serenity configuration files simply by creating a field of type <code>EnvironmentVariables</code> in the test.
You can then fetch the property, and provide a default value to use if the property hasn&#x27;t been defined, as shown below:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">theRestApiBaseUrl = environmentVariables.optionalProperty(&quot;restapi.baseurl&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        .orElse(&quot;https://reqres.in/api&quot;);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="setting-the-api-url-from-the-command-line"></a>Setting the API Url from the command line<a class="hash-link" href="#setting-the-api-url-from-the-command-line" title="Direct link to heading">#</a></h3><p>You can override the default URL defined this way simply by providing a system property on the command line, like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mvn verify -Drestapi.baseurl=http://localhost:5000/api</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="configuring-the-base-api-url-in-maven"></a>Configuring the base API URL in Maven<a class="hash-link" href="#configuring-the-base-api-url-in-maven" title="Direct link to heading">#</a></h3><p>If you are using Maven, a more convenient approach may be to use <a href="http://maven.apache.org/guides/introduction/introduction-to-profiles.html" target="_blank" rel="noopener noreferrer">Maven Profiles</a>.
In your <code>pom.xml</code> file, you define up different Maven profiles for each environment, and set the <code>restapi.baseurl</code> property accordingly:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI xml"><pre tabindex="0" class="prism-code language-xml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">profiles</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">profile</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">dev</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">properties</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">restapi.baseurl</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">http://localhost:5000/api</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">restapi.baseurl</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">properties</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">profile</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">profile</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">prod</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">properties</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">restapi.baseurl</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">https://reqres.in/api</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">restapi.baseurl</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">properties</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">profile</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">profiles</span><span class="token tag punctuation" style="color:#393A34">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For this to work properly, you also need to ensure that the <code>restapi.baseurl</code> is passed correctly to your tests.
You do this by using the <code>systemPropertyVariables</code> tag in the `maven-failsafe-plugin&#x27; configuration, as shown here:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI xml"><pre tabindex="0" class="prism-code language-xml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">build</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugins</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">maven-failsafe-plugin</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">2.20</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">configuration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">includes</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">include</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">**/When*.java</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">include</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">include</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">**/*Feature.java</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">include</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">includes</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">systemPropertyVariables</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">restapi.baseurl</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${restapi.baseurl}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">restapi.baseurl</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">systemPropertyVariables</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">configuration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">executions</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">execution</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">goals</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">goal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">integration-test</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">goal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">goal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">verify</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">goal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">goals</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">execution</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">executions</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can then run the tests with Maven using the <code>-P</code> option:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">$ mvn verify -Pdev</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="configuring-the-actor---the-callanapi-ability"></a>Configuring the actor - the CallAnApi ability<a class="hash-link" href="#configuring-the-actor---the-callanapi-ability" title="Direct link to heading">#</a></h2><p>In Screenplay, tests describe behaviour in terms of <em>actors</em>, who achieve their business goals by performing <em>tasks</em>.
These tasks usually involve <em>interacting</em> with the application in some way.
And to perform these tasks, we give the actors various <em>abilities</em>.</p><p>The <code>CallAnApi</code> ability gives actors the ability to interact with a REST web service using <a href="https://rest-assured.io" target="_blank" rel="noopener noreferrer">Rest-Assured</a>.
This includes both invoking REST end-points and querying the results.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">private String theRestApiBaseUrl;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">private EnvironmentVariables environmentVariables; </span></span><span class="token-line" style="color:#393A34"><span class="token plain">private Actor sam; </span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@Before</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public void configureBaseUrl() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    theRestApiBaseUrl = environmentVariables.optionalProperty(&quot;restapi.baseurl&quot;) </span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                   .orElse(&quot;https://reqres.in/api&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    sam = Actor.named(&quot;Sam the supervisor&quot;).whoCan(CallAnApi.at(theRestApiBaseUrl)); </span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <code>CallAnApi</code> ability allows the actor to perform the bundled Serenity REST interaction classes. This include:</p><ul><li>Get.resource()</li><li>Post.to()</li><li>Put.to()</li><li>Delete.from()</li></ul><p>The simplest of these is <code>Get</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="get-interactions"></a>GET Interactions<a class="hash-link" href="#get-interactions" title="Direct link to heading">#</a></h2><p>In a REST API, GET requests are used to query a REST resource.
Let&#x27;s see how we can do this using Serenity Screenplay.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="simple-get-requests"></a>Simple GET requests<a class="hash-link" href="#simple-get-requests" title="Direct link to heading">#</a></h3><p>In our demo application, the <code>/users</code> resource represents application users.
We can retrieve the details of a particular user by appending the user ID, like this: <code>/users/1</code>.
The structure of a user record is shown below:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;data&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;first_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;George&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;last_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Bluth&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;avatar&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://s3.amazonaws.com/uifaces/faces/twitter/calebogden/128.jpg&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Suppose we need to write a scenario that retrieves a particular user, and checks some of the user&#x27;s details, such as first_name and last_name.
Such a test might look like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public void find_an_individual_user() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    sam.attemptsTo(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Get.resource(&quot;/users/1&quot;) </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    sam.should(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            seeThatResponse( &quot;User details should be correct&quot;, </span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    response -&gt; response.statusCode(200) </span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        .body(&quot;data.first_name&quot;, equalTo(&quot;George&quot;)) </span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        .body(&quot;data.last_name&quot;, equalTo(&quot;Bluth&quot;)) </span></span><span class="token-line" style="color:#393A34"><span class="token plain">            )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>As you can see, this code is fairly self-explanatory.
Like any other Screenplay test, we use the actor&#x27;s <code>attemptsTo()</code> method to perform the action we want to test.
In this case, we use the <code>Get</code> interaction class, which comes bundled with <code>serenity-screenplay-rest</code>.</p><p>Next we check the response using the <code>seeThatResponse</code> method.
This method takes a Lambda expression and allows us to access the full RestAssured API.
In particular, we can use <a href="http://static.javadoc.io/io.restassured/json-path/3.1.0/io/restassured/path/json/JsonPath.html" target="_blank" rel="noopener noreferrer">jsonPath</a> expressions to query the JSON structure we receive.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="retrieving-objects"></a>Retrieving objects<a class="hash-link" href="#retrieving-objects" title="Direct link to heading">#</a></h3><p>Sometimes we need to fetch a value from a REST response, and keep it for use later on. RestAssured makes it relatively easy to convert a JSON structure to a Java object, which you can use later on in your tests.</p><p>For example, suppose we have a class like the one below, which corresponds to the user details returned by our endpoint:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package examples.screenplay.rest.model;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class User {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String id;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String first_name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String last_name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public User(String first_name, String last_name) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.first_name = first_name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.last_name = last_name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String getId() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return id;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String getFirstName() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return first_name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String getLastName() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return last_name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We could retrieve the user as an instance of this class by calling the <code>jsonPath().getObject()</code> method on the received response. This method will convert the JSON data on a given path to a corresponding Java structure:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">@Test</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public void retrieve_an_element_from_the_json_structure() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    sam.attemptsTo(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Get.resource(&quot;/users/1&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    User user = SerenityRest.lastResponse() </span></span><span class="token-line" style="color:#393A34"><span class="token plain">                            .jsonPath()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                            .getObject(&quot;data&quot;, User.class); </span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertThat(user.getFirstName()).isEqualTo(&quot;George&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assertThat(user.getLastName()).isEqualTo(&quot;Bluth&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="retrieving-lists"></a>Retrieving lists<a class="hash-link" href="#retrieving-lists" title="Direct link to heading">#</a></h3><p>Oftentimes we need to retrieve not a single item, but a list of items.
Retrieving a list is little different to retrieving a single item:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sam.attemptsTo(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Get.resource(&quot;/users&quot;) </span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">sam.should(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        seeThatResponse(&quot;all the expected users should be returned&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                response -&gt; response.body(&quot;data.first_name&quot;, hasItems(&quot;George&quot;, &quot;Janet&quot;, &quot;Emma&quot;))) </span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The difference happens when we query the results.
In this case, we use a jsonPath expression (<code>data.first_name</code>) that will return <em>all</em> of the first_name field values.
The Hamcrest matcher <code>hasItems</code> will compare the collection of first names that the jsonPath query returns, and check that it contains (at least) the names &quot;George&quot;, &quot;Janet&quot; and &quot;Emma&quot;.</p><p>But what if we want to capture the data we retrieve, rather than simply make an assertion about the contents?
We can do that using the <code>SerenityRest.lastResponse()</code> method, like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">List&lt;String&gt; userSurnames = SerenityRest.lastResponse().path(&quot;data.last_name&quot;); </span></span><span class="token-line" style="color:#393A34"><span class="token plain">assertThat(userSurnames).contains(&quot;Bluth&quot;, &quot;Weaver&quot;, &quot;Wong&quot;);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We can also retrieve lists of objects, just as we retrieved a single <code>User</code> instance in the previous section.
Simply use the <code>jsonPath.getList()</code> method as shown below:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sam.attemptsTo(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Get.resource(&quot;/users&quot;) </span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">sam.should(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        seeThatResponse(&quot;all the expected users should be returned&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                response -&gt; response.body(&quot;data.first_name&quot;, hasItems(&quot;George&quot;, &quot;Janet&quot;, &quot;Emma&quot;))) </span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="using-path-parameters"></a>Using Path Parameters<a class="hash-link" href="#using-path-parameters" title="Direct link to heading">#</a></h3><p>In the previous example, we hard-coded the path element in the request.
For a more flexible approach, we can supply the path parameter when we submit the query:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sam.attemptsTo(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Get.resource(&quot;/users/{id}&quot;).with( request -&gt; request.pathParam(&quot;id&quot;, 1)) </span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Here we are using the <code>Get.resource(...).with(...)</code> structure to pass the RestAssured <code>RequestSpecification</code> object into a lambda expression.
Once again, this gives us access to all the richness of the RestAssert library</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="using-query-parameters"></a>Using Query Parameters<a class="hash-link" href="#using-query-parameters" title="Direct link to heading">#</a></h3><p>Some REST APIs take query parameters as well as path parameters. Query parameters are commonly used to filter results or implement pagination. For example, we could get the second page of users from our <code>/users</code> API by using the <code>page</code> query parameter like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">/users?page=2</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In our test code, we use the <code>queryParam()</code> method to provide a value for the <code>page</code> parameter:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sam.attemptsTo(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Get.resource(&quot;/users&quot;).with( request -&gt; request.queryParam(&quot;page&quot;, 2)) </span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">sam.should(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        seeThatResponse(&quot;All users on page 2 should be returned&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                response -&gt; response.body(&quot;data.first_name&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                     hasItems(&quot;Eve&quot;, &quot;Charles&quot;, &quot;Tracey&quot;))) </span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="post-queries"></a>Post queries<a class="hash-link" href="#post-queries" title="Direct link to heading">#</a></h2><p>We can send POST requests to a REST end-point using the <code>Post</code> interaction class. Here is a simple example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sam.attemptsTo(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Post.to(&quot;/users&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .with(request -&gt; request.header(&quot;Content-Type&quot;, &quot;application/json&quot;) </span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        .body(&quot;{\&quot;firstName\&quot;: \&quot;Sarah-Jane\&quot;,\&quot;lastName\&quot;: \&quot;Smith\&quot;}&quot;) </span></span><span class="token-line" style="color:#393A34"><span class="token plain">                )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">sam.should(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        seeThatResponse(&quot;The user should have been successfully added&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        response -&gt; response.statusCode(201))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Alternatively, we can post an object, letting RestAssured convert the object fields into JSON for us:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">User newUser = new User(&quot;Sarah-Jane&quot;, &quot;Smith&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">sam.attemptsTo(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Post.to(&quot;/users&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .with(request -&gt; request.header(&quot;Content-Type&quot;, &quot;application/json&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        .body(newUser) </span></span><span class="token-line" style="color:#393A34"><span class="token plain">                )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="other-types-of-queries"></a>Other types of queries<a class="hash-link" href="#other-types-of-queries" title="Direct link to heading">#</a></h2><p>Other query types are similar to <code>GET</code> and <code>POST</code> queries.
For example, <code>PUT</code> requests are often used to update resources.
In the following example, we use a <code>PUT</code> request to update a user&#x27;s details:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sam.attemptsTo(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Put.to(&quot;/users&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .with(request -&gt; request.header(&quot;Content-Type&quot;, &quot;application/json&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .body(&quot;{\&quot;firstName\&quot;: \&quot;jack\&quot;,\&quot;lastName\&quot;: \&quot;smith\&quot;}&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">sam.should(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        seeThatResponse(response -&gt; response.statusCode(200)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            .body(&quot;updatedAt&quot;, not(isEmptyString())))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Or you can delete a user using the <code>DELETE</code> query as shown here:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sam.attemptsTo(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Delete.from(&quot;/users/1&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">sam.should(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        seeThatResponse(response -&gt; response.statusCode(204))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="higher-level-tasks"></a>Higher level tasks<a class="hash-link" href="#higher-level-tasks" title="Direct link to heading">#</a></h2><p>The interactions we have seen so far are readable but still quite low level.
Screenplay allows us to build higher level tasks that represent the business intent behind these interactions.</p><p>For example, you could define a task that encapsulates listing all users like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package examples.screenplay.rest.tasks;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import net.serenitybdd.screenplay.Task;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import net.serenitybdd.screenplay.rest.interactions.Get;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserTasks {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static Task listAllUsers() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Task.where(&quot;{0} lists all users&quot;,  </span></span><span class="token-line" style="color:#393A34"><span class="token plain">                Get.resource(&quot;/users&quot;) </span></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We can then use a static import to refactor our first test as follows:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sam.attemptsTo(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        listAllUsers()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>For a bit more flexibility, we can also write a custom <code>Task</code> class. For example, we could write a <code>FindAUser</code> task to find a user by ID:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package examples.screenplay.rest.tasks;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import net.serenitybdd.screenplay.Actor;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import net.serenitybdd.screenplay.Task;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import net.serenitybdd.screenplay.rest.interactions.Get;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import net.thucydides.core.annotations.Step;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import static net.serenitybdd.screenplay.Tasks.instrumented;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class FindAUser implements Task{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final int id;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public FindAUser(int id) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.id = id;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static FindAUser withId(int id) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return instrumented(FindAUser.class, id);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Step(&quot;{0} fetches the user with id #id&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public &lt;T extends Actor&gt; void performAs(T actor) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        actor.attemptsTo(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                Get.resource(&quot;/users/{id}&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                   .with(request -&gt; request.pathParam(&quot;id&quot;, id))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Using this class, we could refactor our original class to read like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">sam.attemptsTo(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        FindAUser.withId(1)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Using tasks to encapsulate REST interactions results in a clear, layered reporting structure, that first describes what the user is doing, and they how they go about it. The test report for the previous scenario is shown here:</p><p><img src="/assets/images/find-a-user-by-id-027d199be318af7f5c3207b9d63806ba.png"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/screenplay/screenplay-rest.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/screenplay/screenplay_webdriver"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Web Testing with Serenity Screenplay</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/screenplay/screenplay_ensure"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Making Screenplay Assertions with Serenity Ensure Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setting-up-your-project" class="table-of-contents__link">Setting up your project</a></li><li><a href="#defining-a-base-uri" class="table-of-contents__link">Defining a base URI</a><ul><li><a href="#reading-from-the-serenity-config-file" class="table-of-contents__link">Reading from the Serenity config file</a></li><li><a href="#setting-the-api-url-from-the-command-line" class="table-of-contents__link">Setting the API Url from the command line</a></li><li><a href="#configuring-the-base-api-url-in-maven" class="table-of-contents__link">Configuring the base API URL in Maven</a></li></ul></li><li><a href="#configuring-the-actor---the-callanapi-ability" class="table-of-contents__link">Configuring the actor - the CallAnApi ability</a></li><li><a href="#get-interactions" class="table-of-contents__link">GET Interactions</a><ul><li><a href="#simple-get-requests" class="table-of-contents__link">Simple GET requests</a></li><li><a href="#retrieving-objects" class="table-of-contents__link">Retrieving objects</a></li><li><a href="#retrieving-lists" class="table-of-contents__link">Retrieving lists</a></li><li><a href="#using-path-parameters" class="table-of-contents__link">Using Path Parameters</a></li><li><a href="#using-query-parameters" class="table-of-contents__link">Using Query Parameters</a></li></ul></li><li><a href="#post-queries" class="table-of-contents__link">Post queries</a></li><li><a href="#other-types-of-queries" class="table-of-contents__link">Other types of queries</a></li><li><a href="#higher-level-tasks" class="table-of-contents__link">Higher level tasks</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/first_test">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://gitter.im/serenity-bdd/serenity-core" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Gitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/serenity-bdd" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Learn Serenity BDD</div><ul class="footer__items"><li class="footer__item"><a href="http://expansion.serenity-dojo.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>The Serenity Dojo Training Library<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.serenity-dojo.com/apply" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Personalised Serenity BDD Coaching<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/serenity-bdd/serenity-core" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Serenity Dojo Ltd.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.6e28c29c.js"></script>
<script src="/assets/js/main.61d6afda.js"></script>
</body>
</html>
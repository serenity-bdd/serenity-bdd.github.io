"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[5918],{8095(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>g,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"playwright/playwright_configuration","title":"Configuration","description":"Serenity Playwright can be configured through various means to customize browser behavior, screenshot capture, and reporting.","source":"@site/docs/playwright/configuration.md","sourceDirName":"playwright","slug":"/playwright/playwright_configuration","permalink":"/es/docs/playwright/playwright_configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/playwright/configuration.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"playwright_configuration","title":"Configuration","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Step Libraries","permalink":"/es/docs/playwright/playwright_step_libraries"},"next":{"title":"Best Practices","permalink":"/es/docs/playwright/playwright_best_practices"}}');var i=r(4848),o=r(8453);const s={id:"playwright_configuration",title:"Configuration",sidebar_position:5},a="Configuration Options",l={},c=[{value:"Serenity Configuration",id:"serenity-configuration",level:2},{value:"serenity.conf",id:"serenityconf",level:3},{value:"Screenshot Strategies",id:"screenshot-strategies",level:3},{value:"Using Environment Properties",id:"using-environment-properties",level:3},{value:"Playwright Configuration",id:"playwright-configuration",level:2},{value:"Browser Options",id:"browser-options",level:3},{value:"Headless vs Headed Mode",id:"headless-vs-headed-mode",level:3},{value:"Browser Context Options",id:"browser-context-options",level:3},{value:"Device Emulation",id:"device-emulation",level:3},{value:"Network Configuration",id:"network-configuration",level:3},{value:"Request Interception",id:"request-interception",level:4},{value:"Timeout Configuration",id:"timeout-configuration",level:4},{value:"Multi-Browser Testing",id:"multi-browser-testing",level:2},{value:"Running on Different Browsers",id:"running-on-different-browsers",level:3},{value:"Browser Selection via Property",id:"browser-selection-via-property",level:3},{value:"Parallel Execution",id:"parallel-execution",level:2},{value:"JUnit 5 Parallel Configuration",id:"junit-5-parallel-configuration",level:3},{value:"Thread-Safe Browser Management",id:"thread-safe-browser-management",level:3},{value:"Logging Configuration",id:"logging-configuration",level:2},{value:"Logback Configuration",id:"logback-configuration",level:3},{value:"Debug Logging",id:"debug-logging",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"configuration-options",children:"Configuration Options"})}),"\n",(0,i.jsx)(n.p,{children:"Serenity Playwright can be configured through various means to customize browser behavior, screenshot capture, and reporting."}),"\n",(0,i.jsx)(n.h2,{id:"serenity-configuration",children:"Serenity Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"serenityconf",children:"serenity.conf"}),"\n",(0,i.jsxs)(n.p,{children:["Create a ",(0,i.jsx)(n.code,{children:"serenity.conf"})," file in ",(0,i.jsx)(n.code,{children:"src/test/resources"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hocon",children:'serenity {\n  # Project name shown in reports\n  project.name = "My Playwright Tests"\n\n  # Screenshot capture strategy\n  # Options: FOR_EACH_ACTION, BEFORE_AND_AFTER_EACH_STEP, FOR_FAILURES, DISABLED\n  take.screenshots = FOR_EACH_ACTION\n\n  # Output directory for reports\n  outputDirectory = target/site/serenity\n\n  # Report title\n  report.title = "Test Results"\n}\n\n# Environment-specific settings\nenvironments {\n  default {\n    base.url = "https://www.example.com"\n  }\n  staging {\n    base.url = "https://staging.example.com"\n  }\n  production {\n    base.url = "https://www.example.com"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"screenshot-strategies",children:"Screenshot Strategies"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Strategy"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"FOR_EACH_ACTION"})}),(0,i.jsx)(n.td,{children:"Screenshot after every step (default)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"BEFORE_AND_AFTER_EACH_STEP"})}),(0,i.jsx)(n.td,{children:"Screenshot before and after each step"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"FOR_FAILURES"})}),(0,i.jsx)(n.td,{children:"Screenshot only when a step fails"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"DISABLED"})}),(0,i.jsx)(n.td,{children:"No automatic screenshots"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"using-environment-properties",children:"Using Environment Properties"}),"\n",(0,i.jsx)(n.p,{children:"Access environment-specific configuration in your tests:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'import net.thucydides.model.environment.SystemEnvironmentVariables;\n\npublic class ConfiguredSteps {\n    private final String baseUrl;\n\n    public ConfiguredSteps() {\n        EnvironmentVariables env = SystemEnvironmentVariables.currentEnvironmentVariables();\n        this.baseUrl = env.getProperty("environments.default.base.url");\n    }\n\n    @Step("Open the application")\n    public void openApplication(Page page) {\n        page.navigate(baseUrl);\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Run with a specific environment:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mvn verify -Denvironment=staging\n"})}),"\n",(0,i.jsx)(n.h2,{id:"playwright-configuration",children:"Playwright Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"browser-options",children:"Browser Options"}),"\n",(0,i.jsx)(n.p,{children:"Configure browser launch options in your test setup:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@BeforeAll\nstatic void setupBrowser() {\n    playwright = Playwright.create();\n\n    BrowserType.LaunchOptions options = new BrowserType.LaunchOptions()\n        .setHeadless(true)           // Run headless\n        .setSlowMo(100)              // Slow down actions by 100ms\n        .setTimeout(30000)           // Browser launch timeout\n        .setDevtools(false);         // Don't open DevTools\n\n    browser = playwright.chromium().launch(options);\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"headless-vs-headed-mode",children:"Headless vs Headed Mode"}),"\n",(0,i.jsx)(n.p,{children:"Control headless mode via system property:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@BeforeAll\nstatic void setupBrowser() {\n    boolean headless = Boolean.parseBoolean(\n        System.getProperty("playwright.headless", "true")\n    );\n\n    browser = playwright.chromium().launch(\n        new BrowserType.LaunchOptions().setHeadless(headless)\n    );\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Run with visible browser:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mvn verify -Dplaywright.headless=false\n"})}),"\n",(0,i.jsx)(n.h3,{id:"browser-context-options",children:"Browser Context Options"}),"\n",(0,i.jsx)(n.p,{children:"Configure browser context for each test:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@BeforeEach\nvoid setupPage() {\n    Browser.NewContextOptions contextOptions = new Browser.NewContextOptions()\n        .setViewportSize(1920, 1080)        // Browser window size\n        .setLocale("en-US")                  // Locale\n        .setTimezoneId("America/New_York")   // Timezone\n        .setGeolocation(40.7128, -74.0060)   // Geolocation\n        .setPermissions(Arrays.asList("geolocation")); // Permissions\n\n    BrowserContext context = browser.newContext(contextOptions);\n    page = context.newPage();\n    PlaywrightSerenity.registerPage(page);\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"device-emulation",children:"Device Emulation"}),"\n",(0,i.jsx)(n.p,{children:"Test on mobile devices:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@BeforeEach\nvoid setupMobilePage() {\n    // Use Playwright\'s device descriptors\n    BrowserContext context = browser.newContext(\n        new Browser.NewContextOptions()\n            .setUserAgent("Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X)...")\n            .setViewportSize(375, 812)\n            .setDeviceScaleFactor(3)\n            .setIsMobile(true)\n            .setHasTouch(true)\n    );\n\n    page = context.newPage();\n    PlaywrightSerenity.registerPage(page);\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"network-configuration",children:"Network Configuration"}),"\n",(0,i.jsx)(n.h4,{id:"request-interception",children:"Request Interception"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@BeforeEach\nvoid setupWithMocking() {\n    page = browser.newPage();\n\n    // Mock API responses\n    page.route("**/api/products", route -> {\n        route.fulfill(new Route.FulfillOptions()\n            .setStatus(200)\n            .setContentType("application/json")\n            .setBody("[{\\"id\\": 1, \\"name\\": \\"Test Product\\"}]")\n        );\n    });\n\n    PlaywrightSerenity.registerPage(page);\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"timeout-configuration",children:"Timeout Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// Global timeout for all actions\npage.setDefaultTimeout(30000);  // 30 seconds\n\n// Timeout for navigation\npage.setDefaultNavigationTimeout(60000);  // 60 seconds\n\n// Per-action timeout\npage.locator("#slow-element").click(\n    new Locator.ClickOptions().setTimeout(10000)\n);\n'})}),"\n",(0,i.jsx)(n.h2,{id:"multi-browser-testing",children:"Multi-Browser Testing"}),"\n",(0,i.jsx)(n.h3,{id:"running-on-different-browsers",children:"Running on Different Browsers"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@ParameterizedTest\n@ValueSource(strings = {"chromium", "firefox", "webkit"})\nvoid shouldWorkOnAllBrowsers(String browserType) {\n    Browser browser = switch (browserType) {\n        case "chromium" -> playwright.chromium().launch();\n        case "firefox" -> playwright.firefox().launch();\n        case "webkit" -> playwright.webkit().launch();\n        default -> throw new IllegalArgumentException("Unknown browser: " + browserType);\n    };\n\n    Page page = browser.newPage();\n    PlaywrightSerenity.registerPage(page);\n\n    // Run test...\n\n    PlaywrightSerenity.unregisterPage(page);\n    page.close();\n    browser.close();\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"browser-selection-via-property",children:"Browser Selection via Property"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@BeforeAll\nstatic void setupBrowser() {\n    String browserName = System.getProperty("browser", "chromium");\n\n    browser = switch (browserName.toLowerCase()) {\n        case "firefox" -> playwright.firefox().launch(launchOptions);\n        case "webkit" -> playwright.webkit().launch(launchOptions);\n        default -> playwright.chromium().launch(launchOptions);\n    };\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Run with specific browser:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mvn verify -Dbrowser=firefox\n"})}),"\n",(0,i.jsx)(n.h2,{id:"parallel-execution",children:"Parallel Execution"}),"\n",(0,i.jsx)(n.h3,{id:"junit-5-parallel-configuration",children:"JUnit 5 Parallel Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"junit-platform.properties"})," in ",(0,i.jsx)(n.code,{children:"src/test/resources"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"junit.jupiter.execution.parallel.enabled = true\njunit.jupiter.execution.parallel.mode.default = concurrent\njunit.jupiter.execution.parallel.mode.classes.default = concurrent\njunit.jupiter.execution.parallel.config.strategy = fixed\njunit.jupiter.execution.parallel.config.fixed.parallelism = 4\n"})}),"\n",(0,i.jsx)(n.h3,{id:"thread-safe-browser-management",children:"Thread-Safe Browser Management"}),"\n",(0,i.jsx)(n.p,{children:"For parallel tests, each test needs its own browser context:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@ExtendWith(SerenityJUnit5Extension.class)\nclass ParallelTest {\n\n    // Use ThreadLocal for thread safety\n    private static final ThreadLocal<Playwright> playwrightHolder = new ThreadLocal<>();\n    private static final ThreadLocal<Browser> browserHolder = new ThreadLocal<>();\n\n    private Page page;\n\n    @BeforeEach\n    void setup() {\n        if (playwrightHolder.get() == null) {\n            playwrightHolder.set(Playwright.create());\n            browserHolder.set(playwrightHolder.get().chromium().launch());\n        }\n\n        page = browserHolder.get().newPage();\n        PlaywrightSerenity.registerPage(page);\n    }\n\n    @AfterEach\n    void cleanup() {\n        PlaywrightSerenity.unregisterPage(page);\n        if (page != null) page.close();\n    }\n\n    @AfterAll\n    static void teardown() {\n        // Cleanup happens per thread\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"logging-configuration",children:"Logging Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"logback-configuration",children:"Logback Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"logback-test.xml"})," in ",(0,i.jsx)(n.code,{children:"src/test/resources"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="UTF-8"?>\n<configuration>\n    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">\n        <encoder>\n            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>\n        </encoder>\n    </appender>\n\n    \x3c!-- Serenity logging --\x3e\n    <logger name="net.serenitybdd" level="INFO"/>\n    <logger name="net.thucydides" level="INFO"/>\n\n    \x3c!-- Playwright logging --\x3e\n    <logger name="com.microsoft.playwright" level="WARN"/>\n\n    \x3c!-- Your test logging --\x3e\n    <logger name="com.example.tests" level="DEBUG"/>\n\n    <root level="INFO">\n        <appender-ref ref="STDOUT"/>\n    </root>\n</configuration>\n'})}),"\n",(0,i.jsx)(n.h3,{id:"debug-logging",children:"Debug Logging"}),"\n",(0,i.jsx)(n.p,{children:"Enable verbose logging for troubleshooting:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mvn verify -Dlogback.configurationFile=logback-debug.xml\n"})}),"\n",(0,i.jsxs)(n.p,{children:["With ",(0,i.jsx)(n.code,{children:"logback-debug.xml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<logger name="net.serenitybdd" level="DEBUG"/>\n<logger name="com.microsoft.playwright" level="DEBUG"/>\n'})})]})}function g(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,r){r.d(n,{R:()=>s,x:()=>a});var t=r(6540);const i={},o=t.createContext(i);function s(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);
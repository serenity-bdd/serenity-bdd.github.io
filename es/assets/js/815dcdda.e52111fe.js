"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[8561],{8014(e,n,a){a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"playwright/playwright_configuration","title":"Configuracion","description":"Serenity Playwright puede configurarse a traves de varios medios para personalizar el comportamiento del navegador, la captura de pantallas y los reportes.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/playwright/configuration.md","sourceDirName":"playwright","slug":"/playwright/playwright_configuration","permalink":"/es/docs/playwright/playwright_configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/playwright/configuration.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"playwright_configuration","title":"Configuracion","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Step Library","permalink":"/es/docs/playwright/playwright_step_libraries"},"next":{"title":"Mejores practicas","permalink":"/es/docs/playwright/playwright_best_practices"}}');var i=a(4848),o=a(8453);const s={id:"playwright_configuration",title:"Configuracion",sidebar_position:5},t="Opciones de configuracion",l={},c=[{value:"Configuracion de Serenity",id:"configuracion-de-serenity",level:2},{value:"serenity.conf",id:"serenityconf",level:3},{value:"Estrategias de captura de pantallas",id:"estrategias-de-captura-de-pantallas",level:3},{value:"Uso de propiedades de entorno",id:"uso-de-propiedades-de-entorno",level:3},{value:"Configuracion de Playwright",id:"configuracion-de-playwright",level:2},{value:"Opciones de navegador",id:"opciones-de-navegador",level:3},{value:"Modo headless vs con interfaz grafica",id:"modo-headless-vs-con-interfaz-grafica",level:3},{value:"Opciones de contexto de navegador",id:"opciones-de-contexto-de-navegador",level:3},{value:"Emulacion de dispositivos",id:"emulacion-de-dispositivos",level:3},{value:"Configuracion de red",id:"configuracion-de-red",level:3},{value:"Intercepcion de peticiones",id:"intercepcion-de-peticiones",level:4},{value:"Configuracion de tiempos de espera",id:"configuracion-de-tiempos-de-espera",level:4},{value:"Pruebas en multiples navegadores",id:"pruebas-en-multiples-navegadores",level:2},{value:"Ejecucion en diferentes navegadores",id:"ejecucion-en-diferentes-navegadores",level:3},{value:"Seleccion de navegador via propiedad",id:"seleccion-de-navegador-via-propiedad",level:3},{value:"Ejecucion en paralelo",id:"ejecucion-en-paralelo",level:2},{value:"Configuracion de JUnit 5 para ejecucion en paralelo",id:"configuracion-de-junit-5-para-ejecucion-en-paralelo",level:3},{value:"Gestion de navegador thread-safe",id:"gestion-de-navegador-thread-safe",level:3},{value:"Configuracion de logs",id:"configuracion-de-logs",level:2},{value:"Configuracion de Logback",id:"configuracion-de-logback",level:3},{value:"Logging de depuracion",id:"logging-de-depuracion",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"opciones-de-configuracion",children:"Opciones de configuracion"})}),"\n",(0,i.jsx)(n.p,{children:"Serenity Playwright puede configurarse a traves de varios medios para personalizar el comportamiento del navegador, la captura de pantallas y los reportes."}),"\n",(0,i.jsx)(n.h2,{id:"configuracion-de-serenity",children:"Configuracion de Serenity"}),"\n",(0,i.jsx)(n.h3,{id:"serenityconf",children:"serenity.conf"}),"\n",(0,i.jsxs)(n.p,{children:["Crea un archivo ",(0,i.jsx)(n.code,{children:"serenity.conf"})," en ",(0,i.jsx)(n.code,{children:"src/test/resources"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hocon",children:'serenity {\n  # Nombre del proyecto mostrado en reportes\n  project.name = "My Playwright Tests"\n\n  # Estrategia de captura de pantallas\n  # Opciones: FOR_EACH_ACTION, BEFORE_AND_AFTER_EACH_STEP, FOR_FAILURES, DISABLED\n  take.screenshots = FOR_EACH_ACTION\n\n  # Directorio de salida para reportes\n  outputDirectory = target/site/serenity\n\n  # Titulo del reporte\n  report.title = "Test Results"\n}\n\n# Configuraciones especificas por entorno\nenvironments {\n  default {\n    base.url = "https://www.example.com"\n  }\n  staging {\n    base.url = "https://staging.example.com"\n  }\n  production {\n    base.url = "https://www.example.com"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"estrategias-de-captura-de-pantallas",children:"Estrategias de captura de pantallas"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Estrategia"}),(0,i.jsx)(n.th,{children:"Descripcion"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"FOR_EACH_ACTION"})}),(0,i.jsx)(n.td,{children:"Captura despues de cada paso (por defecto)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"BEFORE_AND_AFTER_EACH_STEP"})}),(0,i.jsx)(n.td,{children:"Captura antes y despues de cada paso"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"FOR_FAILURES"})}),(0,i.jsx)(n.td,{children:"Captura solo cuando un paso falla"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"DISABLED"})}),(0,i.jsx)(n.td,{children:"Sin capturas automaticas"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"uso-de-propiedades-de-entorno",children:"Uso de propiedades de entorno"}),"\n",(0,i.jsx)(n.p,{children:"Accede a la configuracion especifica del entorno en tus pruebas:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'import net.thucydides.model.environment.SystemEnvironmentVariables;\n\npublic class ConfiguredSteps {\n    private final String baseUrl;\n\n    public ConfiguredSteps() {\n        EnvironmentVariables env = SystemEnvironmentVariables.currentEnvironmentVariables();\n        this.baseUrl = env.getProperty("environments.default.base.url");\n    }\n\n    @Step("Open the application")\n    public void openApplication(Page page) {\n        page.navigate(baseUrl);\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Ejecuta con un entorno especifico:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mvn verify -Denvironment=staging\n"})}),"\n",(0,i.jsx)(n.h2,{id:"configuracion-de-playwright",children:"Configuracion de Playwright"}),"\n",(0,i.jsx)(n.h3,{id:"opciones-de-navegador",children:"Opciones de navegador"}),"\n",(0,i.jsx)(n.p,{children:"Configura las opciones de lanzamiento del navegador en la configuracion de tu prueba:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@BeforeAll\nstatic void setupBrowser() {\n    playwright = Playwright.create();\n\n    BrowserType.LaunchOptions options = new BrowserType.LaunchOptions()\n        .setHeadless(true)           // Ejecutar sin interfaz grafica\n        .setSlowMo(100)              // Ralentizar acciones en 100ms\n        .setTimeout(30000)           // Tiempo de espera para lanzar navegador\n        .setDevtools(false);         // No abrir DevTools\n\n    browser = playwright.chromium().launch(options);\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"modo-headless-vs-con-interfaz-grafica",children:"Modo headless vs con interfaz grafica"}),"\n",(0,i.jsx)(n.p,{children:"Controla el modo headless via propiedad del sistema:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@BeforeAll\nstatic void setupBrowser() {\n    boolean headless = Boolean.parseBoolean(\n        System.getProperty("playwright.headless", "true")\n    );\n\n    browser = playwright.chromium().launch(\n        new BrowserType.LaunchOptions().setHeadless(headless)\n    );\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Ejecuta con navegador visible:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mvn verify -Dplaywright.headless=false\n"})}),"\n",(0,i.jsx)(n.h3,{id:"opciones-de-contexto-de-navegador",children:"Opciones de contexto de navegador"}),"\n",(0,i.jsx)(n.p,{children:"Configura el contexto de navegador para cada prueba:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@BeforeEach\nvoid setupPage() {\n    Browser.NewContextOptions contextOptions = new Browser.NewContextOptions()\n        .setViewportSize(1920, 1080)        // Tamano de ventana del navegador\n        .setLocale("en-US")                  // Idioma\n        .setTimezoneId("America/New_York")   // Zona horaria\n        .setGeolocation(40.7128, -74.0060)   // Geolocalizacion\n        .setPermissions(Arrays.asList("geolocation")); // Permisos\n\n    BrowserContext context = browser.newContext(contextOptions);\n    page = context.newPage();\n    PlaywrightSerenity.registerPage(page);\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"emulacion-de-dispositivos",children:"Emulacion de dispositivos"}),"\n",(0,i.jsx)(n.p,{children:"Prueba en dispositivos moviles:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@BeforeEach\nvoid setupMobilePage() {\n    // Usa los descriptores de dispositivos de Playwright\n    BrowserContext context = browser.newContext(\n        new Browser.NewContextOptions()\n            .setUserAgent("Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X)...")\n            .setViewportSize(375, 812)\n            .setDeviceScaleFactor(3)\n            .setIsMobile(true)\n            .setHasTouch(true)\n    );\n\n    page = context.newPage();\n    PlaywrightSerenity.registerPage(page);\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"configuracion-de-red",children:"Configuracion de red"}),"\n",(0,i.jsx)(n.h4,{id:"intercepcion-de-peticiones",children:"Intercepcion de peticiones"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@BeforeEach\nvoid setupWithMocking() {\n    page = browser.newPage();\n\n    // Simular respuestas de API\n    page.route("**/api/products", route -> {\n        route.fulfill(new Route.FulfillOptions()\n            .setStatus(200)\n            .setContentType("application/json")\n            .setBody("[{\\"id\\": 1, \\"name\\": \\"Test Product\\"}]")\n        );\n    });\n\n    PlaywrightSerenity.registerPage(page);\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"configuracion-de-tiempos-de-espera",children:"Configuracion de tiempos de espera"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// Tiempo de espera global para todas las acciones\npage.setDefaultTimeout(30000);  // 30 segundos\n\n// Tiempo de espera para navegacion\npage.setDefaultNavigationTimeout(60000);  // 60 segundos\n\n// Tiempo de espera por accion\npage.locator("#slow-element").click(\n    new Locator.ClickOptions().setTimeout(10000)\n);\n'})}),"\n",(0,i.jsx)(n.h2,{id:"pruebas-en-multiples-navegadores",children:"Pruebas en multiples navegadores"}),"\n",(0,i.jsx)(n.h3,{id:"ejecucion-en-diferentes-navegadores",children:"Ejecucion en diferentes navegadores"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@ParameterizedTest\n@ValueSource(strings = {"chromium", "firefox", "webkit"})\nvoid shouldWorkOnAllBrowsers(String browserType) {\n    Browser browser = switch (browserType) {\n        case "chromium" -> playwright.chromium().launch();\n        case "firefox" -> playwright.firefox().launch();\n        case "webkit" -> playwright.webkit().launch();\n        default -> throw new IllegalArgumentException("Unknown browser: " + browserType);\n    };\n\n    Page page = browser.newPage();\n    PlaywrightSerenity.registerPage(page);\n\n    // Ejecutar prueba...\n\n    PlaywrightSerenity.unregisterPage(page);\n    page.close();\n    browser.close();\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"seleccion-de-navegador-via-propiedad",children:"Seleccion de navegador via propiedad"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@BeforeAll\nstatic void setupBrowser() {\n    String browserName = System.getProperty("browser", "chromium");\n\n    browser = switch (browserName.toLowerCase()) {\n        case "firefox" -> playwright.firefox().launch(launchOptions);\n        case "webkit" -> playwright.webkit().launch(launchOptions);\n        default -> playwright.chromium().launch(launchOptions);\n    };\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Ejecuta con un navegador especifico:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mvn verify -Dbrowser=firefox\n"})}),"\n",(0,i.jsx)(n.h2,{id:"ejecucion-en-paralelo",children:"Ejecucion en paralelo"}),"\n",(0,i.jsx)(n.h3,{id:"configuracion-de-junit-5-para-ejecucion-en-paralelo",children:"Configuracion de JUnit 5 para ejecucion en paralelo"}),"\n",(0,i.jsxs)(n.p,{children:["Crea ",(0,i.jsx)(n.code,{children:"junit-platform.properties"})," en ",(0,i.jsx)(n.code,{children:"src/test/resources"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"junit.jupiter.execution.parallel.enabled = true\njunit.jupiter.execution.parallel.mode.default = concurrent\njunit.jupiter.execution.parallel.mode.classes.default = concurrent\njunit.jupiter.execution.parallel.config.strategy = fixed\njunit.jupiter.execution.parallel.config.fixed.parallelism = 4\n"})}),"\n",(0,i.jsx)(n.h3,{id:"gestion-de-navegador-thread-safe",children:"Gestion de navegador thread-safe"}),"\n",(0,i.jsx)(n.p,{children:"Para pruebas en paralelo, cada prueba necesita su propio contexto de navegador:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@ExtendWith(SerenityJUnit5Extension.class)\nclass ParallelTest {\n\n    // Usa ThreadLocal para seguridad entre hilos\n    private static final ThreadLocal<Playwright> playwrightHolder = new ThreadLocal<>();\n    private static final ThreadLocal<Browser> browserHolder = new ThreadLocal<>();\n\n    private Page page;\n\n    @BeforeEach\n    void setup() {\n        if (playwrightHolder.get() == null) {\n            playwrightHolder.set(Playwright.create());\n            browserHolder.set(playwrightHolder.get().chromium().launch());\n        }\n\n        page = browserHolder.get().newPage();\n        PlaywrightSerenity.registerPage(page);\n    }\n\n    @AfterEach\n    void cleanup() {\n        PlaywrightSerenity.unregisterPage(page);\n        if (page != null) page.close();\n    }\n\n    @AfterAll\n    static void teardown() {\n        // La limpieza ocurre por hilo\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"configuracion-de-logs",children:"Configuracion de logs"}),"\n",(0,i.jsx)(n.h3,{id:"configuracion-de-logback",children:"Configuracion de Logback"}),"\n",(0,i.jsxs)(n.p,{children:["Crea ",(0,i.jsx)(n.code,{children:"logback-test.xml"})," en ",(0,i.jsx)(n.code,{children:"src/test/resources"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="UTF-8"?>\n<configuration>\n    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">\n        <encoder>\n            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>\n        </encoder>\n    </appender>\n\n    \x3c!-- Logging de Serenity --\x3e\n    <logger name="net.serenitybdd" level="INFO"/>\n    <logger name="net.thucydides" level="INFO"/>\n\n    \x3c!-- Logging de Playwright --\x3e\n    <logger name="com.microsoft.playwright" level="WARN"/>\n\n    \x3c!-- Logging de tus pruebas --\x3e\n    <logger name="com.example.tests" level="DEBUG"/>\n\n    <root level="INFO">\n        <appender-ref ref="STDOUT"/>\n    </root>\n</configuration>\n'})}),"\n",(0,i.jsx)(n.h3,{id:"logging-de-depuracion",children:"Logging de depuracion"}),"\n",(0,i.jsx)(n.p,{children:"Habilita logging detallado para diagnostico:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mvn verify -Dlogback.configurationFile=logback-debug.xml\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Con ",(0,i.jsx)(n.code,{children:"logback-debug.xml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<logger name="net.serenitybdd" level="DEBUG"/>\n<logger name="com.microsoft.playwright" level="DEBUG"/>\n'})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,a){a.d(n,{R:()=>s,x:()=>t});var r=a(6540);const i={},o=r.createContext(i);function s(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);
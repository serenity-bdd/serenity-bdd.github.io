"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[1820],{6157(e,a,n){n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"playwright/playwright_page_objects","title":"Page Object","description":"Los Page Object son un patron de diseno que encapsula la estructura y el comportamiento de una pagina web. Con Playwright y Serenity, los Page Object proporcionan una separacion limpia entre la logica de tus pruebas y los detalles de implementacion de la pagina.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/playwright/page-objects.md","sourceDirName":"playwright","slug":"/playwright/playwright_page_objects","permalink":"/es/docs/playwright/playwright_page_objects","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/playwright/page-objects.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"playwright_page_objects","title":"Page Object","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Primeros pasos","permalink":"/es/docs/playwright/playwright_getting_started"},"next":{"title":"Screenplay Pattern con Playwright","permalink":"/es/docs/playwright/playwright_screenplay"}}');var i=n(4848),r=n(8453);const s={id:"playwright_page_objects",title:"Page Object",sidebar_position:3},o="Page Object con Playwright",c={},l=[{value:"Por que usar Page Object?",id:"por-que-usar-page-object",level:2},{value:"Estructura de un Page Object",id:"estructura-de-un-page-object",level:2},{value:"Principios clave",id:"principios-clave",level:3},{value:"Estrategias de localizacion en Playwright",id:"estrategias-de-localizacion-en-playwright",level:2},{value:"Localizadores basados en roles (Recomendado)",id:"localizadores-basados-en-roles-recomendado",level:3},{value:"Localizadores basados en texto",id:"localizadores-basados-en-texto",level:3},{value:"Localizadores basados en etiquetas",id:"localizadores-basados-en-etiquetas",level:3},{value:"Localizadores con Test ID",id:"localizadores-con-test-id",level:3},{value:"CSS y XPath (Ultimo recurso)",id:"css-y-xpath-ultimo-recurso",level:3},{value:"Patrones de Page Object",id:"patrones-de-page-object",level:2},{value:"Metodos de navegacion",id:"metodos-de-navegacion",level:3},{value:"Transiciones de pagina",id:"transiciones-de-pagina",level:3},{value:"Objetos de componente",id:"objetos-de-componente",level:3},{value:"Estrategias de espera",id:"estrategias-de-espera",level:3},{value:"Integracion con Step Library",id:"integracion-con-step-library",level:2},{value:"Mejores practicas",id:"mejores-practicas",level:2},{value:"1. Un Page Object por pagina/vista",id:"1-un-page-object-por-paginavista",level:3},{value:"2. Usa nombres de metodos descriptivos",id:"2-usa-nombres-de-metodos-descriptivos",level:3},{value:"3. Evita exponer localizadores",id:"3-evita-exponer-localizadores",level:3},{value:"4. Maneja contenido dinamico",id:"4-maneja-contenido-dinamico",level:3}];function d(e){const a={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.header,{children:(0,i.jsx)(a.h1,{id:"page-object-con-playwright",children:"Page Object con Playwright"})}),"\n",(0,i.jsx)(a.p,{children:"Los Page Object son un patron de diseno que encapsula la estructura y el comportamiento de una pagina web. Con Playwright y Serenity, los Page Object proporcionan una separacion limpia entre la logica de tus pruebas y los detalles de implementacion de la pagina."}),"\n",(0,i.jsx)(a.h2,{id:"por-que-usar-page-object",children:"Por que usar Page Object?"}),"\n",(0,i.jsx)(a.p,{children:"Sin Page Object, las pruebas se vuelven fragiles y dificiles de mantener:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'// \u274c Mal: Localizadores dispersos por las pruebas\n@Test\nvoid searchTest() {\n    page.locator("input[name=\'q\']").fill("search term");\n    page.locator("button.search-btn").click();\n    assertThat(page.locator(".results-count").textContent()).contains("10");\n}\n'})}),"\n",(0,i.jsx)(a.p,{children:"Con Page Object, las pruebas son limpias y mantenibles:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'// \u2705 Bien: Localizadores encapsulados en Page Object\n@Test\nvoid searchTest() {\n    searchPage.searchFor("search term");\n    assertThat(searchPage.getResultCount()).isEqualTo(10);\n}\n'})}),"\n",(0,i.jsx)(a.h2,{id:"estructura-de-un-page-object",children:"Estructura de un Page Object"}),"\n",(0,i.jsx)(a.p,{children:"Un Page Object bien disenado tiene tres secciones:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'public class ProductPage {\n    private final Page page;\n\n    public ProductPage(Page page) {\n        this.page = page;\n    }\n\n    // ========== LOCALIZADORES (privados) ==========\n    // Encapsulan como se encuentran los elementos\n\n    private Locator productTitle() {\n        return page.locator("h1.product-title");\n    }\n\n    private Locator addToCartButton() {\n        return page.getByRole(AriaRole.BUTTON,\n            new Page.GetByRoleOptions().setName("Add to Cart"));\n    }\n\n    private Locator quantityInput() {\n        return page.locator("#quantity");\n    }\n\n    // ========== ACCIONES (publicas) ==========\n    // Representan interacciones del usuario\n\n    public void addToCart() {\n        addToCartButton().click();\n    }\n\n    public void setQuantity(int quantity) {\n        quantityInput().fill(String.valueOf(quantity));\n    }\n\n    // ========== CONSULTAS (publicas) ==========\n    // Devuelven informacion sobre el estado de la pagina\n\n    public String getProductTitle() {\n        return productTitle().textContent();\n    }\n\n    public boolean isAddToCartEnabled() {\n        return addToCartButton().isEnabled();\n    }\n}\n'})}),"\n",(0,i.jsx)(a.h3,{id:"principios-clave",children:"Principios clave"}),"\n",(0,i.jsxs)(a.ol,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Los localizadores son privados"})," - Solo el Page Object sabe como encontrar elementos"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Las acciones son publicas"})," - Exponen interacciones significativas del usuario"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Las consultas son publicas"})," - Exponen formas de verificar el estado de la pagina"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Sin aserciones en Page Object"})," - Deja que quien llama decida que verificar"]}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"estrategias-de-localizacion-en-playwright",children:"Estrategias de localizacion en Playwright"}),"\n",(0,i.jsx)(a.p,{children:"Playwright ofrece varias formas de localizar elementos. Usa la estrategia mas resistente para cada caso:"}),"\n",(0,i.jsx)(a.h3,{id:"localizadores-basados-en-roles-recomendado",children:"Localizadores basados en roles (Recomendado)"}),"\n",(0,i.jsx)(a.p,{children:"Son los mas resistentes ya que usan semantica de accesibilidad:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'// Buscar por rol ARIA y nombre accesible\nprivate Locator searchButton() {\n    return page.getByRole(AriaRole.BUTTON,\n        new Page.GetByRoleOptions().setName("Search"));\n}\n\nprivate Locator emailField() {\n    return page.getByRole(AriaRole.TEXTBOX,\n        new Page.GetByRoleOptions().setName("Email"));\n}\n\nprivate Locator mainNavigation() {\n    return page.getByRole(AriaRole.NAVIGATION);\n}\n'})}),"\n",(0,i.jsx)(a.h3,{id:"localizadores-basados-en-texto",children:"Localizadores basados en texto"}),"\n",(0,i.jsx)(a.p,{children:"Buenos para encontrar elementos por texto visible:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'private Locator submitButton() {\n    return page.getByText("Submit Order");\n}\n\nprivate Locator welcomeMessage() {\n    return page.getByText("Welcome back", new Page.GetByTextOptions().setExact(false));\n}\n'})}),"\n",(0,i.jsx)(a.h3,{id:"localizadores-basados-en-etiquetas",children:"Localizadores basados en etiquetas"}),"\n",(0,i.jsx)(a.p,{children:"Encuentran campos de formulario por sus etiquetas asociadas:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'private Locator usernameField() {\n    return page.getByLabel("Username");\n}\n\nprivate Locator rememberMeCheckbox() {\n    return page.getByLabel("Remember me");\n}\n'})}),"\n",(0,i.jsx)(a.h3,{id:"localizadores-con-test-id",children:"Localizadores con Test ID"}),"\n",(0,i.jsx)(a.p,{children:"Usa atributos data-testid para elementos sin buenos identificadores semanticos:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'private Locator shoppingCart() {\n    return page.getByTestId("shopping-cart");\n}\n\nprivate Locator productCard(String productId) {\n    return page.getByTestId("product-" + productId);\n}\n'})}),"\n",(0,i.jsx)(a.h3,{id:"css-y-xpath-ultimo-recurso",children:"CSS y XPath (Ultimo recurso)"}),"\n",(0,i.jsx)(a.p,{children:"Usa solo cuando otras estrategias no esten disponibles:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:"private Locator legacyWidget() {\n    return page.locator(\"div.legacy-widget > span.value\");\n}\n\nprivate Locator complexElement() {\n    return page.locator(\"xpath=//div[@class='container']//span[contains(text(),'Total')]\");\n}\n"})}),"\n",(0,i.jsx)(a.h2,{id:"patrones-de-page-object",children:"Patrones de Page Object"}),"\n",(0,i.jsx)(a.h3,{id:"metodos-de-navegacion",children:"Metodos de navegacion"}),"\n",(0,i.jsx)(a.p,{children:"Incluye metodos para navegar a la pagina:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'public class LoginPage {\n    private final Page page;\n    private static final String URL = "/login";\n\n    public void open() {\n        page.navigate(URL);\n    }\n\n    public void openWithRedirect(String returnUrl) {\n        page.navigate(URL + "?redirect=" + returnUrl);\n    }\n}\n'})}),"\n",(0,i.jsx)(a.h3,{id:"transiciones-de-pagina",children:"Transiciones de pagina"}),"\n",(0,i.jsx)(a.p,{children:"Devuelve nuevos Page Object cuando las acciones navegan a diferentes paginas:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'public class LoginPage {\n    public DashboardPage loginAs(String username, String password) {\n        usernameField().fill(username);\n        passwordField().fill(password);\n        loginButton().click();\n        return new DashboardPage(page);\n    }\n}\n\n// Uso:\nDashboardPage dashboard = loginPage.loginAs("user", "pass");\nassertThat(dashboard.getWelcomeMessage()).contains("Welcome");\n'})}),"\n",(0,i.jsx)(a.h3,{id:"objetos-de-componente",children:"Objetos de componente"}),"\n",(0,i.jsx)(a.p,{children:"Reutiliza componentes de UI comunes entre paginas:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'public class HeaderComponent {\n    private final Page page;\n\n    public HeaderComponent(Page page) {\n        this.page = page;\n    }\n\n    private Locator searchBox() {\n        return page.locator("header input[type=\'search\']");\n    }\n\n    private Locator cartIcon() {\n        return page.locator("header .cart-icon");\n    }\n\n    public void search(String term) {\n        searchBox().fill(term);\n        searchBox().press("Enter");\n    }\n\n    public int getCartItemCount() {\n        String text = cartIcon().textContent();\n        return Integer.parseInt(text);\n    }\n}\n\n// Usar en Page Object:\npublic class ProductPage {\n    private final Page page;\n    private final HeaderComponent header;\n\n    public ProductPage(Page page) {\n        this.page = page;\n        this.header = new HeaderComponent(page);\n    }\n\n    public HeaderComponent header() {\n        return header;\n    }\n}\n'})}),"\n",(0,i.jsx)(a.h3,{id:"estrategias-de-espera",children:"Estrategias de espera"}),"\n",(0,i.jsx)(a.p,{children:"Playwright espera automaticamente, pero a veces necesitas esperas explicitas:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:"public class SearchResultsPage {\n    public void waitForResults() {\n        // Esperar a que los resultados carguen\n        resultsContainer().waitFor();\n    }\n\n    public void waitForMinimumResults(int count) {\n        // Esperar hasta tener suficientes resultados\n        page.waitForCondition(() -> getResultCount() >= count);\n    }\n\n    public void waitForLoadingToComplete() {\n        // Esperar a que el spinner de carga desaparezca\n        loadingSpinner().waitFor(new Locator.WaitForOptions()\n            .setState(WaitForSelectorState.HIDDEN));\n    }\n}\n"})}),"\n",(0,i.jsx)(a.h2,{id:"integracion-con-step-library",children:"Integracion con Step Library"}),"\n",(0,i.jsx)(a.p,{children:"Los Page Object funcionan junto con las Step Library. La Step Library maneja los reportes de Serenity mientras que el Page Object maneja las interacciones con la pagina:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'public class CheckoutSteps {\n    private CheckoutPage checkoutPage;\n    private OrderConfirmationPage confirmationPage;\n\n    @Step("Enter shipping address")\n    public void enterShippingAddress(Address address) {\n        checkoutPage.enterAddress(address);\n    }\n\n    @Step("Complete the order")\n    public void completeOrder() {\n        confirmationPage = checkoutPage.submitOrder();\n    }\n\n    @Step("Verify order confirmation number is displayed")\n    public void verifyOrderConfirmationDisplayed() {\n        assertThat(confirmationPage.getOrderNumber())\n            .isNotEmpty();\n    }\n}\n'})}),"\n",(0,i.jsx)(a.h2,{id:"mejores-practicas",children:"Mejores practicas"}),"\n",(0,i.jsx)(a.h3,{id:"1-un-page-object-por-paginavista",children:"1. Un Page Object por pagina/vista"}),"\n",(0,i.jsx)(a.p,{children:"No intentes representar multiples paginas en una clase:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:"// \u274c Mal\npublic class AllPages { /* demasiadas responsabilidades */ }\n\n// \u2705 Bien\npublic class LoginPage { /* solo login */ }\npublic class DashboardPage { /* solo dashboard */ }\n"})}),"\n",(0,i.jsx)(a.h3,{id:"2-usa-nombres-de-metodos-descriptivos",children:"2. Usa nombres de metodos descriptivos"}),"\n",(0,i.jsx)(a.p,{children:"Los nombres de los metodos deben describir la intencion del usuario:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:"// \u274c Mal\npublic void click1() { ... }\npublic void fillForm() { ... }\n\n// \u2705 Bien\npublic void addToWishlist() { ... }\npublic void submitContactForm(String name, String email, String message) { ... }\n"})}),"\n",(0,i.jsx)(a.h3,{id:"3-evita-exponer-localizadores",children:"3. Evita exponer localizadores"}),"\n",(0,i.jsx)(a.p,{children:"Nunca devuelvas objetos Locator crudos:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'// \u274c Mal - expone implementacion\npublic Locator getSubmitButton() {\n    return page.locator("#submit");\n}\n\n// \u2705 Bien - expone comportamiento\npublic void submitForm() {\n    submitButton().click();\n}\n\npublic boolean isSubmitEnabled() {\n    return submitButton().isEnabled();\n}\n'})}),"\n",(0,i.jsx)(a.h3,{id:"4-maneja-contenido-dinamico",children:"4. Maneja contenido dinamico"}),"\n",(0,i.jsx)(a.p,{children:"Usa localizadores parametrizados para elementos dinamicos:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:"public class ProductListPage {\n    public void selectProduct(String productName) {\n        page.getByRole(AriaRole.LINK,\n            new Page.GetByRoleOptions().setName(productName)).click();\n    }\n\n    public String getPriceFor(String productName) {\n        return page.locator(String.format(\n            \"[data-product='%s'] .price\", productName)).textContent();\n    }\n}\n"})})]})}function p(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,a,n){n.d(a,{R:()=>s,x:()=>o});var t=n(6540);const i={},r=t.createContext(i);function s(e){const a=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:a},e.children)}}}]);
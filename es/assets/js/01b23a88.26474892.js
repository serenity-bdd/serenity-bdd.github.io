"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[3734],{151(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>t,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"tutorials/cicd-integration","title":"Integraci\xf3n de CI/CD con Serenity BDD","description":"Esta gu\xeda te muestra c\xf3mo integrar pruebas de Serenity BDD en plataformas populares de CI/CD, incluyendo GitHub Actions, Jenkins y GitLab CI. Aprende a ejecutar pruebas autom\xe1ticamente, publicar reportes y obtener retroalimentaci\xf3n r\xe1pida sobre los cambios en tu c\xf3digo.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/tutorials/cicd-integration.md","sourceDirName":"tutorials","slug":"/tutorials/cicd-integration","permalink":"/es/docs/tutorials/cicd-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/tutorials/cicd-integration.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"cicd-integration","title":"Integraci\xf3n de CI/CD con Serenity BDD","sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Migraci\xf3n de Serenity BDD 3.x a Serenity BDD 4.x","permalink":"/es/docs/tutorials/migrating_to_serenity_4"},"next":{"title":"C\xf3mo ejecutar pruebas en paralelo con Cucumber y Serenity","permalink":"/es/docs/tutorials/running_cucumber_scenarios_in_parallel"}}');var i=s(4848),r=s(8453);const t={id:"cicd-integration",title:"Integraci\xf3n de CI/CD con Serenity BDD",sidebar_position:6},l="Integraci\xf3n de CI/CD con Serenity BDD",o={},c=[{value:"Prerrequisitos",id:"prerrequisitos",level:2},{value:"Lista de verificaci\xf3n para inicio r\xe1pido",id:"lista-de-verificaci\xf3n-para-inicio-r\xe1pido",level:2},{value:"GitHub Actions",id:"github-actions",level:2},{value:"Configuraci\xf3n b\xe1sica",id:"configuraci\xf3n-b\xe1sica",level:3},{value:"Versi\xf3n para Gradle",id:"versi\xf3n-para-gradle",level:3},{value:"Publicaci\xf3n de reportes en GitHub Pages",id:"publicaci\xf3n-de-reportes-en-github-pages",level:3},{value:"Ejecuci\xf3n paralela en GitHub Actions",id:"ejecuci\xf3n-paralela-en-github-actions",level:3},{value:"Configuraci\xf3n avanzada con variables de entorno",id:"configuraci\xf3n-avanzada-con-variables-de-entorno",level:3},{value:"Notificaciones",id:"notificaciones",level:3},{value:"Jenkins",id:"jenkins",level:2},{value:"Pipeline declarativo",id:"pipeline-declarativo",level:3},{value:"Pipeline para Gradle",id:"pipeline-para-gradle",level:3},{value:"Ejecuci\xf3n paralela en Jenkins",id:"ejecuci\xf3n-paralela-en-jenkins",level:3},{value:"Configuraci\xf3n de Jenkins con par\xe1metros",id:"configuraci\xf3n-de-jenkins-con-par\xe1metros",level:3},{value:"Instalaci\xf3n de plugins de Jenkins",id:"instalaci\xf3n-de-plugins-de-jenkins",level:3},{value:"GitLab CI",id:"gitlab-ci",level:2},{value:"Configuraci\xf3n b\xe1sica",id:"configuraci\xf3n-b\xe1sica-1",level:3},{value:"Versi\xf3n para Gradle",id:"versi\xf3n-para-gradle-1",level:3},{value:"M\xfaltiples entornos",id:"m\xfaltiples-entornos",level:3},{value:"Jobs paralelos",id:"jobs-paralelos",level:3},{value:"Azure Pipelines",id:"azure-pipelines",level:2},{value:"Integraci\xf3n con Docker",id:"integraci\xf3n-con-docker",level:2},{value:"Dockerfile para pruebas",id:"dockerfile-para-pruebas",level:3},{value:"Docker Compose",id:"docker-compose",level:3},{value:"GitHub Actions con Docker",id:"github-actions-con-docker",level:3},{value:"Mejores pr\xe1cticas",id:"mejores-pr\xe1cticas",level:2},{value:"1. Usa navegadores en modo headless",id:"1-usa-navegadores-en-modo-headless",level:3},{value:"2. Optimiza los tiempos de compilaci\xf3n",id:"2-optimiza-los-tiempos-de-compilaci\xf3n",level:3},{value:"3. Falla r\xe1pido",id:"3-falla-r\xe1pido",level:3},{value:"4. Ejecuci\xf3n basada en etiquetas",id:"4-ejecuci\xf3n-basada-en-etiquetas",level:3},{value:"5. Separa las etapas de pruebas",id:"5-separa-las-etapas-de-pruebas",level:3},{value:"6. Gestiona los secretos de forma segura",id:"6-gestiona-los-secretos-de-forma-segura",level:3},{value:"7. Reintenta pruebas inestables",id:"7-reintenta-pruebas-inestables",level:3},{value:"8. Genera insignias de estado del build",id:"8-genera-insignias-de-estado-del-build",level:3},{value:"Soluci\xf3n de problemas",id:"soluci\xf3n-de-problemas",level:2},{value:"Problema: Las pruebas fallan solo en CI",id:"problema-las-pruebas-fallan-solo-en-ci",level:3},{value:"Problema: Los reportes no se publican",id:"problema-los-reportes-no-se-publican",level:3},{value:"Problema: Compilaciones lentas",id:"problema-compilaciones-lentas",level:3},{value:"Ejemplo completo: GitHub Actions con todas las funcionalidades",id:"ejemplo-completo-github-actions-con-todas-las-funcionalidades",level:2},{value:"Siguientes pasos",id:"siguientes-pasos",level:2},{value:"Recursos adicionales",id:"recursos-adicionales",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"integraci\xf3n-de-cicd-con-serenity-bdd",children:"Integraci\xf3n de CI/CD con Serenity BDD"})}),"\n",(0,i.jsx)(n.p,{children:"Esta gu\xeda te muestra c\xf3mo integrar pruebas de Serenity BDD en plataformas populares de CI/CD, incluyendo GitHub Actions, Jenkins y GitLab CI. Aprende a ejecutar pruebas autom\xe1ticamente, publicar reportes y obtener retroalimentaci\xf3n r\xe1pida sobre los cambios en tu c\xf3digo."}),"\n",(0,i.jsx)(n.h2,{id:"prerrequisitos",children:"Prerrequisitos"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Proyecto de Serenity BDD configurado con Maven o Gradle"}),"\n",(0,i.jsx)(n.li,{children:"Repositorio con control de versiones (Git)"}),"\n",(0,i.jsx)(n.li,{children:"Acceso a una plataforma de CI/CD"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"lista-de-verificaci\xf3n-para-inicio-r\xe1pido",children:"Lista de verificaci\xf3n para inicio r\xe1pido"}),"\n",(0,i.jsx)(n.p,{children:"Antes de configurar CI/CD, aseg\xfarate de que tu proyecto:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Ejecuta correctamente de forma local con ",(0,i.jsx)(n.code,{children:"mvn clean verify"})," o ",(0,i.jsx)(n.code,{children:"gradle clean test"})]}),"\n",(0,i.jsx)(n.li,{children:"Tiene todas las dependencias correctamente configuradas"}),"\n",(0,i.jsx)(n.li,{children:"Usa el modo headless del navegador para pruebas web"}),"\n",(0,i.jsx)(n.li,{children:"Tiene tiempos de espera razonables para la ejecuci\xf3n de pruebas"}),"\n",(0,i.jsxs)(n.li,{children:["Genera reportes de Serenity en ",(0,i.jsx)(n.code,{children:"target/site/serenity"})," (Maven) o ",(0,i.jsx)(n.code,{children:"build/reports/serenity"})," (Gradle)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"github-actions",children:"GitHub Actions"}),"\n",(0,i.jsx)(n.p,{children:"GitHub Actions es la forma m\xe1s f\xe1cil de configurar CI/CD para proyectos alojados en GitHub."}),"\n",(0,i.jsx)(n.h3,{id:"configuraci\xf3n-b\xe1sica",children:"Configuraci\xf3n b\xe1sica"}),"\n",(0,i.jsxs)(n.p,{children:["Crea ",(0,i.jsx)(n.code,{children:".github/workflows/serenity-tests.yml"})," en tu repositorio:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"name: Serenity BDD Tests\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main, develop ]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run Serenity tests\n      run: mvn clean verify\n\n    - name: Publish Serenity Report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: serenity-report\n        path: target/site/serenity\n        retention-days: 30\n"})}),"\n",(0,i.jsx)(n.h3,{id:"versi\xf3n-para-gradle",children:"Versi\xf3n para Gradle"}),"\n",(0,i.jsx)(n.p,{children:"Para proyectos con Gradle:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"name: Serenity BDD Tests\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main, develop ]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'temurin'\n        cache: 'gradle'\n\n    - name: Run Serenity tests\n      run: ./gradlew clean test aggregate\n\n    - name: Publish Serenity Report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: serenity-report\n        path: build/reports/serenity\n        retention-days: 30\n"})}),"\n",(0,i.jsx)(n.h3,{id:"publicaci\xf3n-de-reportes-en-github-pages",children:"Publicaci\xf3n de reportes en GitHub Pages"}),"\n",(0,i.jsx)(n.p,{children:"Publica autom\xe1ticamente los reportes de Serenity como un sitio web:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"name: Serenity Tests with GitHub Pages\n\non:\n  push:\n    branches: [ main ]\n\npermissions:\n  contents: write\n  pages: write\n  id-token: write\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run Serenity tests\n      run: mvn clean verify\n\n    - name: Deploy to GitHub Pages\n      if: always()\n      uses: peaceiris/actions-gh-pages@v3\n      with:\n        github_token: ${{ secrets.GITHUB_TOKEN }}\n        publish_dir: ./target/site/serenity\n        destination_dir: reports/${{ github.run_number }}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Accede a tus reportes en:"})," ",(0,i.jsx)(n.code,{children:"https://<username>.github.io/<repository>/reports/<run-number>"})]}),"\n",(0,i.jsx)(n.h3,{id:"ejecuci\xf3n-paralela-en-github-actions",children:"Ejecuci\xf3n paralela en GitHub Actions"}),"\n",(0,i.jsx)(n.p,{children:"Ejecuta pruebas en paralelo usando una estrategia de matriz:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"name: Serenity Parallel Tests\n\non:\n  push:\n    branches: [ main ]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        browser: [chrome, firefox, edge]\n        test-suite: [smoke, regression]\n      fail-fast: false\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run tests\n      run: mvn verify -Dwebdriver.driver=${{ matrix.browser }} -Dtags=${{ matrix.test-suite }}\n\n    - name: Upload Report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: report-${{ matrix.browser }}-${{ matrix.test-suite }}\n        path: target/site/serenity\n"})}),"\n",(0,i.jsx)(n.h3,{id:"configuraci\xf3n-avanzada-con-variables-de-entorno",children:"Configuraci\xf3n avanzada con variables de entorno"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"name: Serenity Tests - All Environments\n\non:\n  push:\n    branches: [ main ]\n  workflow_dispatch:\n    inputs:\n      environment:\n        description: 'Environment to test'\n        required: true\n        type: choice\n        options:\n          - dev\n          - staging\n          - production\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run tests\n      env:\n        BASE_URL: ${{ secrets[format('{0}_BASE_URL', github.event.inputs.environment || 'dev')] }}\n        API_KEY: ${{ secrets[format('{0}_API_KEY', github.event.inputs.environment || 'dev')] }}\n        TEST_USER: ${{ secrets.TEST_USER }}\n        TEST_PASSWORD: ${{ secrets.TEST_PASSWORD }}\n      run: |\n        mvn clean verify \\\n          -Dwebdriver.base.url=$BASE_URL \\\n          -Dapi.key=$API_KEY \\\n          -Dtest.user=$TEST_USER \\\n          -Dtest.password=$TEST_PASSWORD\n\n    - name: Upload Report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: serenity-report-${{ github.event.inputs.environment || 'dev' }}\n        path: target/site/serenity\n"})}),"\n",(0,i.jsx)(n.h3,{id:"notificaciones",children:"Notificaciones"}),"\n",(0,i.jsx)(n.p,{children:"Env\xeda notificaciones a Slack sobre los resultados de las pruebas:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'    - name: Notify Slack on Success\n      if: success()\n      uses: slackapi/slack-github-action@v1\n      with:\n        webhook-url: ${{ secrets.SLACK_WEBHOOK }}\n        payload: |\n          {\n            "text": "\u2705 Serenity Tests Passed - Build #${{ github.run_number }}"\n          }\n\n    - name: Notify Slack on Failure\n      if: failure()\n      uses: slackapi/slack-github-action@v1\n      with:\n        webhook-url: ${{ secrets.SLACK_WEBHOOK }}\n        payload: |\n          {\n            "text": "\u274c Serenity Tests Failed - Build #${{ github.run_number }}\\nView: ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}"\n          }\n'})}),"\n",(0,i.jsx)(n.h2,{id:"jenkins",children:"Jenkins"}),"\n",(0,i.jsx)(n.p,{children:"Jenkins es una plataforma de CI/CD autoalojada muy popular con amplio soporte de plugins."}),"\n",(0,i.jsx)(n.h3,{id:"pipeline-declarativo",children:"Pipeline declarativo"}),"\n",(0,i.jsxs)(n.p,{children:["Crea un ",(0,i.jsx)(n.code,{children:"Jenkinsfile"})," en la ra\xedz de tu repositorio:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-groovy",children:"pipeline {\n    agent any\n\n    tools {\n        maven 'Maven-3.9'\n        jdk 'JDK-17'\n    }\n\n    stages {\n        stage('Checkout') {\n            steps {\n                checkout scm\n            }\n        }\n\n        stage('Build and Test') {\n            steps {\n                sh 'mvn clean verify'\n            }\n        }\n\n        stage('Publish Reports') {\n            steps {\n                publishHTML([\n                    reportDir: 'target/site/serenity',\n                    reportFiles: 'index.html',\n                    reportName: 'Serenity Report',\n                    keepAll: true,\n                    alwaysLinkToLastBuild: true,\n                    allowMissing: false\n                ])\n            }\n        }\n    }\n\n    post {\n        always {\n            junit '**/target/failsafe-reports/*.xml'\n            archiveArtifacts artifacts: 'target/site/serenity/**/*', allowEmptyArchive: true\n        }\n        failure {\n            emailext(\n                subject: \"Failed: ${currentBuild.fullDisplayName}\",\n                body: \"Test execution failed. Check console output at ${env.BUILD_URL}\",\n                to: 'team@example.com'\n            )\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"pipeline-para-gradle",children:"Pipeline para Gradle"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-groovy",children:"pipeline {\n    agent any\n\n    tools {\n        gradle 'Gradle-8'\n        jdk 'JDK-17'\n    }\n\n    stages {\n        stage('Checkout') {\n            steps {\n                checkout scm\n            }\n        }\n\n        stage('Build and Test') {\n            steps {\n                sh './gradlew clean test aggregate'\n            }\n        }\n\n        stage('Publish Reports') {\n            steps {\n                publishHTML([\n                    reportDir: 'build/reports/serenity',\n                    reportFiles: 'index.html',\n                    reportName: 'Serenity Report',\n                    keepAll: true,\n                    alwaysLinkToLastBuild: true\n                ])\n            }\n        }\n    }\n\n    post {\n        always {\n            junit '**/build/test-results/test/*.xml'\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"ejecuci\xf3n-paralela-en-jenkins",children:"Ejecuci\xf3n paralela en Jenkins"}),"\n",(0,i.jsx)(n.p,{children:"Ejecuta pruebas en paralelo a trav\xe9s de m\xfaltiples nodos:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-groovy",children:"pipeline {\n    agent none\n\n    stages {\n        stage('Parallel Tests') {\n            parallel {\n                stage('Chrome Tests') {\n                    agent { label 'chrome' }\n                    steps {\n                        sh 'mvn verify -Dwebdriver.driver=chrome'\n                    }\n                }\n                stage('Firefox Tests') {\n                    agent { label 'firefox' }\n                    steps {\n                        sh 'mvn verify -Dwebdriver.driver=firefox'\n                    }\n                }\n                stage('Edge Tests') {\n                    agent { label 'edge' }\n                    steps {\n                        sh 'mvn verify -Dwebdriver.driver=edge'\n                    }\n                }\n            }\n        }\n\n        stage('Aggregate Reports') {\n            agent any\n            steps {\n                publishHTML([\n                    reportDir: 'target/site/serenity',\n                    reportFiles: 'index.html',\n                    reportName: 'Consolidated Serenity Report'\n                ])\n            }\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"configuraci\xf3n-de-jenkins-con-par\xe1metros",children:"Configuraci\xf3n de Jenkins con par\xe1metros"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-groovy",children:"pipeline {\n    agent any\n\n    parameters {\n        choice(\n            name: 'ENVIRONMENT',\n            choices: ['dev', 'staging', 'production'],\n            description: 'Environment to test'\n        )\n        choice(\n            name: 'BROWSER',\n            choices: ['chrome', 'firefox', 'edge'],\n            description: 'Browser to use'\n        )\n        string(\n            name: 'TAGS',\n            defaultValue: '',\n            description: 'Tags to filter tests (e.g., @smoke, @regression)'\n        )\n    }\n\n    stages {\n        stage('Test') {\n            steps {\n                script {\n                    def baseUrl = \"\"\n                    switch(params.ENVIRONMENT) {\n                        case 'dev':\n                            baseUrl = 'https://dev.example.com'\n                            break\n                        case 'staging':\n                            baseUrl = 'https://staging.example.com'\n                            break\n                        case 'production':\n                            baseUrl = 'https://www.example.com'\n                            break\n                    }\n\n                    sh \"\"\"\n                        mvn clean verify \\\n                        -Dwebdriver.driver=${params.BROWSER} \\\n                        -Dwebdriver.base.url=${baseUrl} \\\n                        -Dcucumber.filter.tags='${params.TAGS}'\n                    \"\"\"\n                }\n            }\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"instalaci\xf3n-de-plugins-de-jenkins",children:"Instalaci\xf3n de plugins de Jenkins"}),"\n",(0,i.jsx)(n.p,{children:"Plugins requeridos:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Instala mediante CLI de Jenkins o la interfaz de usuario\n- HTML Publisher Plugin\n- JUnit Plugin\n- Pipeline Plugin\n- Git Plugin\n- Email Extension Plugin\n"})}),"\n",(0,i.jsx)(n.h2,{id:"gitlab-ci",children:"GitLab CI"}),"\n",(0,i.jsx)(n.p,{children:"GitLab CI est\xe1 integrado directamente en los repositorios de GitLab."}),"\n",(0,i.jsx)(n.h3,{id:"configuraci\xf3n-b\xe1sica-1",children:"Configuraci\xf3n b\xe1sica"}),"\n",(0,i.jsxs)(n.p,{children:["Crea ",(0,i.jsx)(n.code,{children:".gitlab-ci.yml"})," en la ra\xedz de tu repositorio:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'image: maven:3.9-eclipse-temurin-17\n\nstages:\n  - test\n  - report\n\nvariables:\n  MAVEN_OPTS: "-Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository"\n\ncache:\n  paths:\n    - .m2/repository\n\ntest:\n  stage: test\n  script:\n    - mvn clean verify\n  artifacts:\n    when: always\n    paths:\n      - target/site/serenity\n    expire_in: 30 days\n    reports:\n      junit:\n        - target/failsafe-reports/TEST-*.xml\n\npages:\n  stage: report\n  script:\n    - mkdir -p public\n    - cp -r target/site/serenity/* public/\n  artifacts:\n    paths:\n      - public\n  only:\n    - main\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Los reportes estar\xe1n disponibles en:"})," ",(0,i.jsx)(n.code,{children:"https://<username>.gitlab.io/<project>/"})]}),"\n",(0,i.jsx)(n.h3,{id:"versi\xf3n-para-gradle-1",children:"Versi\xf3n para Gradle"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'image: gradle:8-jdk17\n\nstages:\n  - test\n  - report\n\nvariables:\n  GRADLE_OPTS: "-Dorg.gradle.daemon=false"\n\ncache:\n  paths:\n    - .gradle\n\ntest:\n  stage: test\n  script:\n    - gradle clean test aggregate\n  artifacts:\n    when: always\n    paths:\n      - build/reports/serenity\n    expire_in: 30 days\n    reports:\n      junit:\n        - build/test-results/test/TEST-*.xml\n\npages:\n  stage: report\n  script:\n    - mkdir -p public\n    - cp -r build/reports/serenity/* public/\n  artifacts:\n    paths:\n      - public\n  only:\n    - main\n'})}),"\n",(0,i.jsx)(n.h3,{id:"m\xfaltiples-entornos",children:"M\xfaltiples entornos"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'stages:\n  - test\n\n.test_template:\n  image: maven:3.9-eclipse-temurin-17\n  script:\n    - mvn clean verify -Dwebdriver.base.url=$BASE_URL\n  artifacts:\n    when: always\n    paths:\n      - target/site/serenity\n    expire_in: 7 days\n\ntest:dev:\n  extends: .test_template\n  variables:\n    BASE_URL: "https://dev.example.com"\n  only:\n    - develop\n\ntest:staging:\n  extends: .test_template\n  variables:\n    BASE_URL: "https://staging.example.com"\n  only:\n    - staging\n\ntest:production:\n  extends: .test_template\n  variables:\n    BASE_URL: "https://www.example.com"\n  only:\n    - main\n  when: manual\n'})}),"\n",(0,i.jsx)(n.h3,{id:"jobs-paralelos",children:"Jobs paralelos"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"test:\n  stage: test\n  parallel:\n    matrix:\n      - BROWSER: [chrome, firefox]\n        SUITE: [smoke, regression]\n  script:\n    - mvn verify -Dwebdriver.driver=$BROWSER -Dtags=@$SUITE\n  artifacts:\n    when: always\n    paths:\n      - target/site/serenity\n    reports:\n      junit:\n        - target/failsafe-reports/TEST-*.xml\n"})}),"\n",(0,i.jsx)(n.h2,{id:"azure-pipelines",children:"Azure Pipelines"}),"\n",(0,i.jsx)(n.p,{children:"Para proyectos alojados en Azure DevOps:"}),"\n",(0,i.jsxs)(n.p,{children:["Crea ",(0,i.jsx)(n.code,{children:"azure-pipelines.yml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"trigger:\n  - main\n  - develop\n\npool:\n  vmImage: 'ubuntu-latest'\n\nvariables:\n  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n\nsteps:\n- task: JavaToolInstaller@0\n  inputs:\n    versionSpec: '17'\n    jdkArchitectureOption: 'x64'\n    jdkSourceOption: 'PreInstalled'\n\n- task: Cache@2\n  inputs:\n    key: 'maven | \"$(Agent.OS)\" | **/pom.xml'\n    path: $(MAVEN_CACHE_FOLDER)\n  displayName: Cache Maven packages\n\n- task: Maven@3\n  inputs:\n    mavenPomFile: 'pom.xml'\n    goals: 'clean verify'\n    options: '-B'\n  displayName: 'Run Serenity Tests'\n\n- task: PublishTestResults@2\n  condition: always()\n  inputs:\n    testResultsFormat: 'JUnit'\n    testResultsFiles: '**/target/failsafe-reports/TEST-*.xml'\n    testRunTitle: 'Serenity Test Results'\n\n- task: PublishBuildArtifacts@1\n  condition: always()\n  inputs:\n    PathtoPublish: 'target/site/serenity'\n    ArtifactName: 'serenity-report'\n  displayName: 'Publish Serenity Report'\n"})}),"\n",(0,i.jsx)(n.h2,{id:"integraci\xf3n-con-docker",children:"Integraci\xf3n con Docker"}),"\n",(0,i.jsx)(n.p,{children:"Ejecuta pruebas en contenedores Docker para mayor consistencia."}),"\n",(0,i.jsx)(n.h3,{id:"dockerfile-para-pruebas",children:"Dockerfile para pruebas"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-dockerfile",children:'FROM maven:3.9-eclipse-temurin-17\n\n# Instalar Chrome\nRUN wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add - \\\n    && echo "deb http://dl.google.com/linux/chrome/deb/ stable main" >> /etc/apt/sources.list.d/google.list \\\n    && apt-get update \\\n    && apt-get install -y google-chrome-stable \\\n    && rm -rf /var/lib/apt/lists/*\n\nWORKDIR /app\n\nCOPY pom.xml .\nRUN mvn dependency:go-offline\n\nCOPY src ./src\n\nCMD ["mvn", "clean", "verify"]\n'})}),"\n",(0,i.jsx)(n.h3,{id:"docker-compose",children:"Docker Compose"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"version: '3.8'\n\nservices:\n  serenity-tests:\n    build: .\n    volumes:\n      - ./target:/app/target\n    environment:\n      - WEBDRIVER_DRIVER=chrome\n      - WEBDRIVER_BASE_URL=https://example.com\n"})}),"\n",(0,i.jsx)(n.h3,{id:"github-actions-con-docker",children:"GitHub Actions con Docker"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"- name: Build and run tests in Docker\n  run: |\n    docker build -t serenity-tests .\n    docker run --rm -v $PWD/target:/app/target serenity-tests\n"})}),"\n",(0,i.jsx)(n.h2,{id:"mejores-pr\xe1cticas",children:"Mejores pr\xe1cticas"}),"\n",(0,i.jsx)(n.h3,{id:"1-usa-navegadores-en-modo-headless",children:"1. Usa navegadores en modo headless"}),"\n",(0,i.jsx)(n.p,{children:"Configura el modo headless para entornos CI:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"serenity.conf:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-hocon",children:'webdriver {\n  driver = chrome\n  capabilities {\n    browserName = "chrome"\n    "goog:chromeOptions" {\n      args = ["--headless", "--no-sandbox", "--disable-dev-shm-usage", "--disable-gpu"]\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"2-optimiza-los-tiempos-de-compilaci\xf3n",children:"2. Optimiza los tiempos de compilaci\xf3n"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Almacena dependencias en cach\xe9:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# GitHub Actions\n- uses: actions/cache@v3\n  with:\n    path: ~/.m2/repository\n    key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n\n# GitLab CI\ncache:\n  paths:\n    - .m2/repository\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Omite fases innecesarias:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mvn verify -DskipTests  # Omitir ejecuci\xf3n de pruebas\nmvn verify -Dmaven.test.skip=true  # Omitir compilaci\xf3n de pruebas\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-falla-r\xe1pido",children:"3. Falla r\xe1pido"}),"\n",(0,i.jsx)(n.p,{children:"Configura las compilaciones para fallar r\xe1pidamente ante errores cr\xedticos:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"strategy:\n  fail-fast: true  # Detener todos los jobs si uno falla\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-ejecuci\xf3n-basada-en-etiquetas",children:"4. Ejecuci\xf3n basada en etiquetas"}),"\n",(0,i.jsx)(n.p,{children:"Ejecuta diferentes suites de pruebas en diferentes pipelines:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Pruebas de humo en cada commit\nmvn verify -Dcucumber.filter.tags="@smoke"\n\n# Regresi\xf3n completa en la rama main\nmvn verify -Dcucumber.filter.tags="@regression"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"5-separa-las-etapas-de-pruebas",children:"5. Separa las etapas de pruebas"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"stages:\n  - unit-tests\n  - integration-tests\n  - smoke-tests\n  - regression-tests\n"})}),"\n",(0,i.jsx)(n.h3,{id:"6-gestiona-los-secretos-de-forma-segura",children:"6. Gestiona los secretos de forma segura"}),"\n",(0,i.jsx)(n.p,{children:"Nunca hagas commit de credenciales:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# GitHub Actions\nenv:\n  API_KEY: ${{ secrets.API_KEY }}\n\n# GitLab CI\nvariables:\n  API_KEY: ${{ secrets.API_KEY }}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"7-reintenta-pruebas-inestables",children:"7. Reintenta pruebas inestables"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-groovy",children:"// Jenkins\nretry(3) {\n    sh 'mvn verify'\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# GitLab CI\ntest:\n  retry:\n    max: 2\n    when: runner_system_failure\n"})}),"\n",(0,i.jsx)(n.h3,{id:"8-genera-insignias-de-estado-del-build",children:"8. Genera insignias de estado del build"}),"\n",(0,i.jsx)(n.p,{children:"Agrega insignias de estado a tu README:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"GitHub Actions:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-markdown",children:"![Tests](https://github.com/username/repo/actions/workflows/serenity-tests.yml/badge.svg)\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"GitLab CI:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-markdown",children:"![pipeline status](https://gitlab.com/username/project/badges/main/pipeline.svg)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"soluci\xf3n-de-problemas",children:"Soluci\xf3n de problemas"}),"\n",(0,i.jsx)(n.h3,{id:"problema-las-pruebas-fallan-solo-en-ci",children:"Problema: Las pruebas fallan solo en CI"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Causas comunes:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Navegador no instalado o versi\xf3n incompatible"}),"\n",(0,i.jsx)(n.li,{children:"Servidor de pantalla ausente (X11)"}),"\n",(0,i.jsx)(n.li,{children:"Memoria insuficiente"}),"\n",(0,i.jsx)(n.li,{children:"Problemas de red/firewall"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Soluciones:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'# Agregar servidor de pantalla para Linux\nbefore_script:\n  - export DISPLAY=:99\n  - Xvfb :99 -screen 0 1920x1080x24 &\n\n# Aumentar memoria\nenv:\n  MAVEN_OPTS: "-Xmx2g"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"problema-los-reportes-no-se-publican",children:"Problema: Los reportes no se publican"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Verifica:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ruta correcta al directorio de reportes"}),"\n",(0,i.jsxs)(n.li,{children:["La condici\xf3n ",(0,i.jsx)(n.code,{children:"if: always()"})," est\xe1 configurada"]}),"\n",(0,i.jsx)(n.li,{children:"Permisos suficientes"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"problema-compilaciones-lentas",children:"Problema: Compilaciones lentas"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Soluciones:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Almacena dependencias en cach\xe9"}),"\n",(0,i.jsx)(n.li,{children:"Usa ejecuci\xf3n paralela"}),"\n",(0,i.jsx)(n.li,{children:"Ejecuta un subconjunto de pruebas (primero las pruebas de humo)"}),"\n",(0,i.jsx)(n.li,{children:"Usa cach\xe9 de capas de Docker"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"ejemplo-completo-github-actions-con-todas-las-funcionalidades",children:"Ejemplo completo: GitHub Actions con todas las funcionalidades"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"name: Serenity BDD - Production Ready\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n  schedule:\n    - cron: '0 2 * * *'  # Diariamente a las 2 AM\n  workflow_dispatch:\n\nenv:\n  JAVA_VERSION: '17'\n  MAVEN_OPTS: '-Xmx2g'\n\njobs:\n  smoke-tests:\n    name: Smoke Tests\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v4\n\n    - name: Set up JDK\n      uses: actions/setup-java@v4\n      with:\n        java-version: ${{ env.JAVA_VERSION }}\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run smoke tests\n      run: mvn verify -Dcucumber.filter.tags=\"@smoke\"\n\n    - name: Upload smoke test report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: smoke-test-report\n        path: target/site/serenity\n\n  regression-tests:\n    name: Regression Tests\n    runs-on: ubuntu-latest\n    needs: smoke-tests\n    if: github.ref == 'refs/heads/main'\n\n    strategy:\n      matrix:\n        browser: [chrome, firefox]\n      fail-fast: false\n\n    steps:\n    - uses: actions/checkout@v4\n\n    - name: Set up JDK\n      uses: actions/setup-java@v4\n      with:\n        java-version: ${{ env.JAVA_VERSION }}\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run regression tests\n      run: mvn verify -Dwebdriver.driver=${{ matrix.browser }}\n\n    - name: Upload report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: report-${{ matrix.browser }}\n        path: target/site/serenity\n\n  publish-report:\n    name: Publish Report to GitHub Pages\n    runs-on: ubuntu-latest\n    needs: [smoke-tests, regression-tests]\n    if: always() && github.ref == 'refs/heads/main'\n\n    permissions:\n      contents: write\n      pages: write\n\n    steps:\n    - uses: actions/download-artifact@v4\n      with:\n        name: smoke-test-report\n        path: reports/smoke\n\n    - name: Deploy to GitHub Pages\n      uses: peaceiris/actions-gh-pages@v3\n      with:\n        github_token: ${{ secrets.GITHUB_TOKEN }}\n        publish_dir: ./reports\n"})}),"\n",(0,i.jsx)(n.h2,{id:"siguientes-pasos",children:"Siguientes pasos"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Aprende sobre ",(0,i.jsx)(n.a,{href:"/docs/junit5/parallel-execution",children:"Ejecuci\xf3n Paralela"})," para acelerar las compilaciones de CI"]}),"\n",(0,i.jsxs)(n.li,{children:["Explora ",(0,i.jsx)(n.a,{href:"/docs/tutorials/data-driven-testing",children:"Pruebas basadas en datos"})," para una cobertura de pruebas integral"]}),"\n",(0,i.jsxs)(n.li,{children:["Consulta ",(0,i.jsx)(n.a,{href:"/docs/reference/serenity-properties",children:"Configuraci\xf3n de Serenity"})," para optimizar el rendimiento en CI"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"recursos-adicionales",children:"Recursos adicionales"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.github.com/en/actions",children:"Documentaci\xf3n de GitHub Actions"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.jenkins.io/doc/book/pipeline/",children:"Documentaci\xf3n de Jenkins Pipeline"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.gitlab.com/ee/ci/",children:"Documentaci\xf3n de GitLab CI/CD"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://hub.docker.com/r/serenity",children:"Serenity BDD en Docker Hub"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>l});var a=s(6540);const i={},r=a.createContext(i);function t(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);
"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[127],{3981(e,n,a){a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"playwright/playwright_cucumber","title":"Integracion con Cucumber","description":"Cucumber proporciona una sintaxis de lenguaje natural para escribir pruebas basadas en comportamiento. Cuando se combina con la implementacion de Screenplay de Serenity Playwright, obtienes escenarios BDD expresivos que impulsan automatizacion de navegadores confiable.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/playwright/cucumber-integration.md","sourceDirName":"playwright","slug":"/playwright/playwright_cucumber","permalink":"/es/docs/playwright/playwright_cucumber","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/playwright/cucumber-integration.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"id":"playwright_cucumber","title":"Integracion con Cucumber","sidebar_position":9},"sidebar":"tutorialSidebar","previous":{"title":"Tutorial: Screenplay con TodoMVC","permalink":"/es/docs/playwright/playwright_screenplay_tutorial"},"next":{"title":"Pruebas de integracion con Spring","permalink":"/es/docs/spring/integration_testing_spring"}}');var t=a(4848),r=a(8453);const i={id:"playwright_cucumber",title:"Integracion con Cucumber",sidebar_position:9},s="Integracion de Cucumber con Playwright Screenplay",c={},d=[{value:"Configuracion del proyecto",id:"configuracion-del-proyecto",level:2},{value:"Dependencias de Maven",id:"dependencias-de-maven",level:3},{value:"Instalar navegadores de Playwright",id:"instalar-navegadores-de-playwright",level:3},{value:"Estructura del proyecto",id:"estructura-del-proyecto",level:2},{value:"Paso 1: Crear el ejecutor de pruebas",id:"paso-1-crear-el-ejecutor-de-pruebas",level:2},{value:"Paso 2: Crear hooks de Playwright",id:"paso-2-crear-hooks-de-playwright",level:2},{value:"Entendiendo los hooks",id:"entendiendo-los-hooks",level:3},{value:"Paso 3: Escribir archivos Feature",id:"paso-3-escribir-archivos-feature",level:2},{value:"Paso 4: Crear Step Definition",id:"paso-4-crear-step-definition",level:2},{value:"Patrones clave en Step Definition",id:"patrones-clave-en-step-definition",level:3},{value:"Paso 5: Crear Task de Screenplay",id:"paso-5-crear-task-de-screenplay",level:2},{value:"Paso 6: Crear Question de Screenplay",id:"paso-6-crear-question-de-screenplay",level:2},{value:"Paso 7: Definir Target de UI",id:"paso-7-definir-target-de-ui",level:2},{value:"Ejecutando las pruebas",id:"ejecutando-las-pruebas",level:2},{value:"Ejecutar todas las pruebas de Cucumber",id:"ejecutar-todas-las-pruebas-de-cucumber",level:3},{value:"Ejecutar pruebas con etiquetas especificas",id:"ejecutar-pruebas-con-etiquetas-especificas",level:3},{value:"Ejecutar un solo Scenario",id:"ejecutar-un-solo-scenario",level:3},{value:"Ver reportes",id:"ver-reportes",level:3},{value:"Configuracion",id:"configuracion",level:2},{value:"serenity.properties",id:"serenityproperties",level:3},{value:"cucumber.properties",id:"cucumberproperties",level:3},{value:"Configuracion avanzada",id:"configuracion-avanzada",level:2},{value:"Configuracion de navegador personalizada",id:"configuracion-de-navegador-personalizada",level:3},{value:"Multiples Actor",id:"multiples-actor",level:3},{value:"Solucion de problemas",id:"solucion-de-problemas",level:2},{value:"Filtracion de estado entre Scenario",id:"filtracion-de-estado-entre-scenario",level:3},{value:"Elemento no encontrado",id:"elemento-no-encontrado",level:3},{value:"Capturas de pantalla no capturadas",id:"capturas-de-pantalla-no-capturadas",level:3},{value:"Repositorio de ejemplo",id:"repositorio-de-ejemplo",level:2},{value:"Ver tambien",id:"ver-tambien",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"integracion-de-cucumber-con-playwright-screenplay",children:"Integracion de Cucumber con Playwright Screenplay"})}),"\n",(0,t.jsx)(n.p,{children:"Cucumber proporciona una sintaxis de lenguaje natural para escribir pruebas basadas en comportamiento. Cuando se combina con la implementacion de Screenplay de Serenity Playwright, obtienes escenarios BDD expresivos que impulsan automatizacion de navegadores confiable."}),"\n",(0,t.jsx)(n.p,{children:"Esta guia te muestra como integrar Cucumber con Serenity Playwright usando el Screenplay Pattern."}),"\n",(0,t.jsx)(n.h2,{id:"configuracion-del-proyecto",children:"Configuracion del proyecto"}),"\n",(0,t.jsx)(n.h3,{id:"dependencias-de-maven",children:"Dependencias de Maven"}),"\n",(0,t.jsxs)(n.p,{children:["Agrega las siguientes dependencias a tu ",(0,t.jsx)(n.code,{children:"pom.xml"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:"<properties>\n    <serenity.version>5.1.1</serenity.version>\n    <playwright.version>1.58.0</playwright.version>\n    <cucumber.version>7.34.2</cucumber.version>\n    <junit.version>5.11.4</junit.version>\n</properties>\n\n<dependencyManagement>\n    <dependencies>\n        \x3c!-- Usa BOMs para gestion de versiones --\x3e\n        <dependency>\n            <groupId>org.junit</groupId>\n            <artifactId>junit-bom</artifactId>\n            <version>${junit.version}</version>\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n        <dependency>\n            <groupId>io.cucumber</groupId>\n            <artifactId>cucumber-bom</artifactId>\n            <version>${cucumber.version}</version>\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n    </dependencies>\n</dependencyManagement>\n\n<dependencies>\n    \x3c!-- Serenity Screenplay con Playwright --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-screenplay-playwright</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Integracion Serenity Cucumber --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-cucumber</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Cucumber (versiones gestionadas por cucumber-bom) --\x3e\n    <dependency>\n        <groupId>io.cucumber</groupId>\n        <artifactId>cucumber-java</artifactId>\n        <scope>test</scope>\n    </dependency>\n\n    <dependency>\n        <groupId>io.cucumber</groupId>\n        <artifactId>cucumber-junit-platform-engine</artifactId>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- JUnit Platform Suite --\x3e\n    <dependency>\n        <groupId>org.junit.platform</groupId>\n        <artifactId>junit-platform-suite</artifactId>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Serenity Ensure para aserciones --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-ensure</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n</dependencies>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"instalar-navegadores-de-playwright",children:"Instalar navegadores de Playwright"}),"\n",(0,t.jsx)(n.p,{children:"Antes de ejecutar pruebas, instala los navegadores de Playwright:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'mvn exec:java -e -D exec.mainClass=com.microsoft.playwright.CLI -D exec.args="install"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"estructura-del-proyecto",children:"Estructura del proyecto"}),"\n",(0,t.jsx)(n.p,{children:"Una estructura de proyecto tipica se ve asi:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"src/test/\n\u251c\u2500\u2500 java/\n\u2502   \u2514\u2500\u2500 yourpackage/\n\u2502       \u251c\u2500\u2500 cucumber/\n\u2502       \u2502   \u251c\u2500\u2500 CucumberTestSuite.java      # Ejecutor de pruebas\n\u2502       \u2502   \u251c\u2500\u2500 PlaywrightHooks.java        # Hooks de Cucumber\n\u2502       \u2502   \u2514\u2500\u2500 StepDefinitions.java        # Step Definition\n\u2502       \u2514\u2500\u2500 screenplay/\n\u2502           \u251c\u2500\u2500 tasks/                       # Task reutilizables\n\u2502           \u2502   \u251c\u2500\u2500 OpenTheApplication.java\n\u2502           \u2502   \u2514\u2500\u2500 AddATodoItem.java\n\u2502           \u251c\u2500\u2500 questions/                   # Question reutilizables\n\u2502           \u2502   \u2514\u2500\u2500 TheVisibleTodos.java\n\u2502           \u2514\u2500\u2500 ui/                          # Definiciones de Target\n\u2502               \u2514\u2500\u2500 TodoList.java\n\u2514\u2500\u2500 resources/\n    \u251c\u2500\u2500 features/\n    \u2502   \u2514\u2500\u2500 managing_todos.feature          # Archivos Feature\n    \u2514\u2500\u2500 serenity.properties                  # Configuracion\n"})}),"\n",(0,t.jsx)(n.h2,{id:"paso-1-crear-el-ejecutor-de-pruebas",children:"Paso 1: Crear el ejecutor de pruebas"}),"\n",(0,t.jsx)(n.p,{children:"El ejecutor de pruebas configura Cucumber para trabajar con Serenity:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package yourpackage.cucumber;\n\nimport org.junit.platform.suite.api.*;\nimport static io.cucumber.junit.platform.engine.Constants.*;\n\n@Suite\n@IncludeEngines("cucumber")\n@SelectPackages("yourpackage.cucumber")\n@ConfigurationParameter(key = PLUGIN_PROPERTY_NAME,\n    value = "net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel,pretty")\n@ConfigurationParameter(key = GLUE_PROPERTY_NAME,\n    value = "yourpackage.cucumber,net.serenitybdd.cucumber.actors")\n@ConfigurationParameter(key = FEATURES_PROPERTY_NAME,\n    value = "src/test/resources/features")\npublic class CucumberTestSuite {\n}\n'})}),"\n",(0,t.jsx)(n.admonition,{title:"Configuracion del Glue Path",type:"important",children:(0,t.jsxs)(n.p,{children:["Siempre incluye ",(0,t.jsx)(n.code,{children:"net.serenitybdd.cucumber.actors"})," en tu glue path. Esto registra el ",(0,t.jsx)(n.code,{children:"StageDirector"})," de Serenity que automaticamente llama a ",(0,t.jsx)(n.code,{children:"OnStage.drawTheCurtain()"})," despues de cada Scenario para limpiar los recursos del navegador."]})}),"\n",(0,t.jsx)(n.h2,{id:"paso-2-crear-hooks-de-playwright",children:"Paso 2: Crear hooks de Playwright"}),"\n",(0,t.jsx)(n.p,{children:"La clase de hooks configura el escenario de Playwright antes de cada Scenario:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package yourpackage.cucumber;\n\nimport io.cucumber.java.Before;\nimport io.cucumber.java.ParameterType;\nimport io.cucumber.java.Scenario;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.actors.OnStage;\nimport net.serenitybdd.screenplay.playwright.actors.PlaywrightCast;\n\npublic class PlaywrightHooks {\n\n    /**\n     * Configura el escenario de Playwright antes de cada Scenario.\n     * Order 0 asegura que esto se ejecute primero entre todos los hooks @Before.\n     */\n    @Before(order = 0)\n    public void setTheStage(Scenario scenario) {\n        OnStage.setTheStage(new PlaywrightCast());\n    }\n\n    /**\n     * Define el tipo de parametro {actor} para los pasos de Cucumber.\n     * Esto permite que pasos como "Given Toby is on the application"\n     * resuelvan automaticamente "Toby" a una instancia de Actor.\n     */\n    @ParameterType(".*")\n    public Actor actor(String actorName) {\n        return OnStage.theActorCalled(actorName);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"entendiendo-los-hooks",children:"Entendiendo los hooks"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"@Before(order = 0)"})}),": El ",(0,t.jsx)(n.code,{children:"order = 0"})," asegura que el escenario se configure antes de que cualquier otro hook se ejecute. Esto es importante si tienes otros hooks ",(0,t.jsx)(n.code,{children:"@Before"})," que dependen de los Actor."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:'@ParameterType(".*")'})}),": Esto crea un tipo de parametro personalizado que convierte nombres de Actor en archivos Feature a instancias de ",(0,t.jsx)(n.code,{children:"Actor"}),". El patron ",(0,t.jsx)(n.code,{children:".*"})," coincide con cualquier cadena."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Limpieza automatica"}),": No necesitas un hook ",(0,t.jsx)(n.code,{children:"@After"})," para limpieza. El ",(0,t.jsx)(n.code,{children:"StageDirector"})," (incluido via el glue path) maneja automaticamente la limpieza llamando a ",(0,t.jsx)(n.code,{children:"OnStage.drawTheCurtain()"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"paso-3-escribir-archivos-feature",children:"Paso 3: Escribir archivos Feature"}),"\n",(0,t.jsx)(n.p,{children:"Los archivos Feature describen comportamiento en sintaxis Gherkin:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gherkin",children:'# src/test/resources/features/managing_todos.feature\n@playwright\nFeature: Managing Todo Items\n  As a busy person\n  I want to manage my todo list\n  So that I can keep track of what I need to do\n\n  Background:\n    Given Toby is on the TodoMVC application\n\n  Scenario: Adding a single todo item\n    When Toby adds a todo item called "Buy milk"\n    Then the todo list should contain "Buy milk"\n    And the remaining item count should be 1\n\n  Scenario: Adding multiple todo items\n    When Toby adds the following todo items:\n      | Buy milk     |\n      | Walk the dog |\n      | Do laundry   |\n    Then the todo list should contain:\n      | Buy milk     |\n      | Walk the dog |\n      | Do laundry   |\n    And the remaining item count should be 3\n\n  Scenario: Completing a todo item\n    Given Toby has added the following todo items:\n      | Buy milk     |\n      | Walk the dog |\n    When Toby completes the todo item "Walk the dog"\n    Then the remaining item count should be 1\n\n  Scenario: Filtering to show only active todos\n    Given Toby has added the following todo items:\n      | Buy milk     |\n      | Walk the dog |\n    And Toby has completed the todo item "Walk the dog"\n    When Toby filters to show "Active" todos\n    Then the visible todo list should contain:\n      | Buy milk |\n'})}),"\n",(0,t.jsx)(n.h2,{id:"paso-4-crear-step-definition",children:"Paso 4: Crear Step Definition"}),"\n",(0,t.jsx)(n.p,{children:"Las Step Definition conectan los archivos Feature con los Task de Screenplay:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package yourpackage.cucumber;\n\nimport io.cucumber.java.en.*;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.actors.OnStage;\nimport net.serenitybdd.screenplay.ensure.Ensure;\nimport yourpackage.screenplay.tasks.*;\nimport yourpackage.screenplay.questions.*;\n\nimport java.util.List;\n\npublic class TodoStepDefinitions {\n\n    @Given("{actor} is on the TodoMVC application")\n    public void actorIsOnTheTodoMvcApplication(Actor actor) {\n        actor.attemptsTo(\n            OpenTheApplication.onTheTodoMvcHomePage()\n        );\n    }\n\n    @When("{actor} adds a todo item called {string}")\n    public void actorAddsTodoItemCalled(Actor actor, String todoItem) {\n        actor.attemptsTo(\n            AddATodoItem.called(todoItem)\n        );\n    }\n\n    @When("{actor} adds the following todo items:")\n    public void actorAddsTheFollowingTodoItems(Actor actor, List<String> todoItems) {\n        for (String item : todoItems) {\n            actor.attemptsTo(\n                AddATodoItem.called(item)\n            );\n        }\n    }\n\n    @Given("{actor} has added the following todo items:")\n    public void actorHasAddedTheFollowingTodoItems(Actor actor, List<String> todoItems) {\n        actorIsOnTheTodoMvcApplication(actor);\n        actorAddsTheFollowingTodoItems(actor, todoItems);\n    }\n\n    @When("{actor} completes the todo item {string}")\n    public void actorCompletesTheTodoItem(Actor actor, String todoItem) {\n        actor.attemptsTo(\n            Complete.todoItem(todoItem)\n        );\n    }\n\n    @Given("{actor} has completed the todo item {string}")\n    public void actorHasCompletedTheTodoItem(Actor actor, String todoItem) {\n        actorCompletesTheTodoItem(actor, todoItem);\n    }\n\n    @When("{actor} filters to show {string} todos")\n    public void actorFiltersToShow(Actor actor, String filterType) {\n        actor.attemptsTo(\n            FilterTodos.toShow(filterType)\n        );\n    }\n\n    @Then("the todo list should contain {string}")\n    public void theTodoListShouldContain(String expectedItem) {\n        Actor actor = OnStage.theActorInTheSpotlight();\n        actor.attemptsTo(\n            Ensure.that(TheVisibleTodos.displayed()).contains(expectedItem)\n        );\n    }\n\n    @Then("the todo list should contain:")\n    public void theTodoListShouldContainItems(List<String> expectedItems) {\n        Actor actor = OnStage.theActorInTheSpotlight();\n        actor.attemptsTo(\n            Ensure.that(TheVisibleTodos.displayed())\n                  .containsExactlyElementsFrom(expectedItems)\n        );\n    }\n\n    @Then("the visible todo list should contain:")\n    public void theVisibleTodoListShouldContain(List<String> expectedItems) {\n        Actor actor = OnStage.theActorInTheSpotlight();\n        actor.attemptsTo(\n            Ensure.that(TheVisibleTodos.displayed())\n                  .containsExactlyElementsFrom(expectedItems)\n        );\n    }\n\n    @Then("the remaining item count should be {int}")\n    public void theRemainingItemCountShouldBe(int expectedCount) {\n        Actor actor = OnStage.theActorInTheSpotlight();\n        actor.attemptsTo(\n            Ensure.that(TheRemainingCount.value()).isEqualTo(expectedCount)\n        );\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"patrones-clave-en-step-definition",children:"Patrones clave en Step Definition"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Parametro Actor"}),": El parametro ",(0,t.jsx)(n.code,{children:"{actor}"})," se resuelve automaticamente a una instancia de Actor gracias a la definicion ",(0,t.jsx)(n.code,{children:"@ParameterType"})," en los hooks."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pasos Background"}),": Pasos como ",(0,t.jsx)(n.code,{children:"actorHasAddedTheFollowingTodoItems"})," componen multiples acciones, permitiendo que los pasos ",(0,t.jsx)(n.code,{children:"Given"})," configuren precondiciones complejas."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"El Actor en el centro de atencion"}),": Para pasos ",(0,t.jsx)(n.code,{children:"Then"})," que no reciben un parametro de Actor, usa ",(0,t.jsx)(n.code,{children:"OnStage.theActorInTheSpotlight()"})," para obtener el ultimo Actor que realizo una accion."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Tablas de datos"}),": Las tablas de datos de Cucumber se mapean directamente a ",(0,t.jsx)(n.code,{children:"List<String>"})," para tablas de una sola columna."]}),"\n",(0,t.jsx)(n.h2,{id:"paso-5-crear-task-de-screenplay",children:"Paso 5: Crear Task de Screenplay"}),"\n",(0,t.jsx)(n.p,{children:"Los Task encapsulan acciones a nivel de negocio:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package yourpackage.screenplay.tasks;\n\nimport net.serenitybdd.annotations.Step;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport net.serenitybdd.screenplay.playwright.interactions.Open;\n\npublic class OpenTheApplication implements Task {\n\n    private static final String TODO_MVC_URL = "https://todomvc.com/examples/react/dist/";\n\n    @Override\n    @Step("{0} opens the TodoMVC application")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Open.url(TODO_MVC_URL)\n        );\n\n        // Limpiar localStorage para asegurar un estado limpio\n        // (TodoMVC persiste los todos en localStorage)\n        var page = BrowseTheWebWithPlaywright.as(actor).getCurrentPage();\n        page.evaluate("() => localStorage.clear()");\n        page.reload();\n    }\n\n    public static OpenTheApplication onTheTodoMvcHomePage() {\n        return new OpenTheApplication();\n    }\n}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package yourpackage.screenplay.tasks;\n\nimport net.serenitybdd.annotations.Step;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.playwright.interactions.*;\nimport yourpackage.screenplay.ui.TodoList;\n\npublic class AddATodoItem implements Task {\n\n    private final String itemName;\n\n    public AddATodoItem(String itemName) {\n        this.itemName = itemName;\n    }\n\n    @Override\n    @Step("{0} adds a todo item called \'#itemName\'")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Enter.theValue(itemName).into(TodoList.NEW_TODO_INPUT),\n            Press.keys("Enter")\n        );\n    }\n\n    public static AddATodoItem called(String itemName) {\n        return new AddATodoItem(itemName);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"paso-6-crear-question-de-screenplay",children:"Paso 6: Crear Question de Screenplay"}),"\n",(0,t.jsx)(n.p,{children:"Las Question consultan el estado de la aplicacion:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package yourpackage.screenplay.questions;\n\nimport net.serenitybdd.annotations.Step;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport yourpackage.screenplay.ui.TodoList;\n\nimport java.util.Collection;\n\npublic class TheVisibleTodos implements Question<Collection<String>> {\n\n    @Override\n    @Step("{0} checks the visible todo items")\n    public Collection<String> answeredBy(Actor actor) {\n        var page = BrowseTheWebWithPlaywright.as(actor).getCurrentPage();\n        return page.locator(TodoList.TODO_ITEMS.asSelector())\n                   .allTextContents();\n    }\n\n    public static TheVisibleTodos displayed() {\n        return new TheVisibleTodos();\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"paso-7-definir-target-de-ui",children:"Paso 7: Definir Target de UI"}),"\n",(0,t.jsx)(n.p,{children:"Los Target definen como localizar elementos:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package yourpackage.screenplay.ui;\n\nimport net.serenitybdd.screenplay.playwright.Target;\n\npublic class TodoList {\n    public static final Target NEW_TODO_INPUT =\n        Target.the("new todo input").locatedBy(".new-todo");\n\n    public static final Target TODO_ITEMS =\n        Target.the("todo items").locatedBy(".todo-list li label");\n\n    public static final Target TODO_COUNT =\n        Target.the("todo count").locatedBy(".todo-count");\n\n    public static final Target TOGGLE_ALL =\n        Target.the("toggle all checkbox").locatedBy(".toggle-all");\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"ejecutando-las-pruebas",children:"Ejecutando las pruebas"}),"\n",(0,t.jsx)(n.h3,{id:"ejecutar-todas-las-pruebas-de-cucumber",children:"Ejecutar todas las pruebas de Cucumber"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mvn clean verify\n"})}),"\n",(0,t.jsx)(n.h3,{id:"ejecutar-pruebas-con-etiquetas-especificas",children:"Ejecutar pruebas con etiquetas especificas"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'mvn clean verify -Dcucumber.filter.tags="@playwright"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"ejecutar-un-solo-scenario",children:"Ejecutar un solo Scenario"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'mvn clean verify -Dcucumber.filter.name="Adding a single todo item"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"ver-reportes",children:"Ver reportes"}),"\n",(0,t.jsx)(n.p,{children:"Despues de ejecutar las pruebas, abre el reporte de Serenity:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"target/site/serenity/index.html\n"})}),"\n",(0,t.jsx)(n.h2,{id:"configuracion",children:"Configuracion"}),"\n",(0,t.jsx)(n.h3,{id:"serenityproperties",children:"serenity.properties"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:"# Configuracion del navegador\nplaywright.browsertype=chromium\nplaywright.headless=true\n\n# Configuracion de capturas de pantalla\nserenity.take.screenshots=FOR_FAILURES\n\n# Configuracion del reporte\nserenity.project.name=My TodoMVC Tests\n"})}),"\n",(0,t.jsx)(n.h3,{id:"cucumberproperties",children:"cucumber.properties"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:"# Configuracion de Cucumber\ncucumber.publish.quiet=true\n"})}),"\n",(0,t.jsx)(n.h2,{id:"configuracion-avanzada",children:"Configuracion avanzada"}),"\n",(0,t.jsx)(n.h3,{id:"configuracion-de-navegador-personalizada",children:"Configuracion de navegador personalizada"}),"\n",(0,t.jsxs)(n.p,{children:["Configura ",(0,t.jsx)(n.code,{children:"PlaywrightCast"})," con opciones personalizadas:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Before(order = 0)\npublic void setTheStage(Scenario scenario) {\n    BrowserType.LaunchOptions options = new BrowserType.LaunchOptions()\n        .setHeadless(false)\n        .setSlowMo(100);  // Ralentizar para depuracion\n\n    OnStage.setTheStage(\n        new PlaywrightCast()\n            .withLaunchOptions(options)\n            .withBrowserType("firefox")\n    );\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"multiples-actor",children:"Multiples Actor"}),"\n",(0,t.jsx)(n.p,{children:"Los Scenario pueden involucrar multiples Actor:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gherkin",children:'Scenario: Collaborative editing\n  Given Alice has added a todo item called "Shared task"\n  When Bob views the todo list\n  Then Bob should see "Shared task" in the list\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@When("{actor} views the todo list")\npublic void actorViewsTheTodoList(Actor actor) {\n    actor.attemptsTo(\n        OpenTheApplication.onTheTodoMvcHomePage()\n    );\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Cada Actor obtiene su propia instancia de navegador automaticamente a traves de ",(0,t.jsx)(n.code,{children:"PlaywrightCast"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"solucion-de-problemas",children:"Solucion de problemas"}),"\n",(0,t.jsx)(n.h3,{id:"filtracion-de-estado-entre-scenario",children:"Filtracion de estado entre Scenario"}),"\n",(0,t.jsx)(n.p,{children:"Si las pruebas interfieren entre si:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Verifica que ",(0,t.jsx)(n.code,{children:"net.serenitybdd.cucumber.actors"})," este en tu glue path"]}),"\n",(0,t.jsx)(n.li,{children:"Limpia el estado de la aplicacion (como localStorage) en tu Task de navegacion"}),"\n",(0,t.jsxs)(n.li,{children:["Asegurate de que ",(0,t.jsx)(n.code,{children:"@Before(order = 0)"})," este configurado en tu hook de configuracion del escenario"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"elemento-no-encontrado",children:"Elemento no encontrado"}),"\n",(0,t.jsx)(n.p,{children:"Si los elementos no se encuentran:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Usa la espera automatica integrada de Playwright (esta habilitada por defecto)"}),"\n",(0,t.jsx)(n.li,{children:"Verifica tus selectores usando DevTools del navegador"}),"\n",(0,t.jsxs)(n.li,{children:["Considera usar los selectores mas robustos de Playwright como ",(0,t.jsx)(n.code,{children:"text="}),", ",(0,t.jsx)(n.code,{children:"role="}),", etc."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"capturas-de-pantalla-no-capturadas",children:"Capturas de pantalla no capturadas"}),"\n",(0,t.jsxs)(n.p,{children:["Configura el modo de captura en ",(0,t.jsx)(n.code,{children:"serenity.properties"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-properties",children:"serenity.take.screenshots=FOR_EACH_ACTION\n"})}),"\n",(0,t.jsx)(n.h2,{id:"repositorio-de-ejemplo",children:"Repositorio de ejemplo"}),"\n",(0,t.jsxs)(n.p,{children:["Un ejemplo completo y funcional esta disponible en el repositorio ",(0,t.jsx)(n.a,{href:"https://github.com/serenity-bdd/serenity-playwright-todomvc-demo",children:"serenity-playwright-todomvc-demo"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"ver-tambien",children:"Ver tambien"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"playwright_screenplay",children:"Screenplay Pattern con Playwright"})," - Conceptos principales de Screenplay"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"playwright_screenplay_tutorial",children:"Tutorial: Screenplay con TodoMVC"})," - Construyendo un conjunto de pruebas desde cero"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/cucumber/configuration-reference",children:"Referencia de configuracion de Cucumber"})," - Todas las opciones de Cucumber"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/cucumber/parallel-execution",children:"Ejecucion en paralelo"})," - Ejecutando pruebas en paralelo"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453(e,n,a){a.d(n,{R:()=>i,x:()=>s});var o=a(6540);const t={},r=o.createContext(t);function i(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);
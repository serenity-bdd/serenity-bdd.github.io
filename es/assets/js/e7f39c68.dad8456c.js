"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[3860],{4838(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"playwright/playwright_screenplay","title":"Screenplay Pattern con Playwright","description":"El Screenplay Pattern es un enfoque moderno y centrado en el Actor para escribir pruebas automatizadas. Cuando se combina con Playwright, proporciona una forma poderosa y expresiva de escribir pruebas de automatizacion de navegadores que se leen como documentacion viva.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/playwright/screenplay.md","sourceDirName":"playwright","slug":"/playwright/playwright_screenplay","permalink":"/es/docs/playwright/playwright_screenplay","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/playwright/screenplay.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"playwright_screenplay","title":"Screenplay Pattern con Playwright","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Page Object","permalink":"/es/docs/playwright/playwright_page_objects"},"next":{"title":"Step Library","permalink":"/es/docs/playwright/playwright_step_libraries"}}');var o=t(4848),i=t(8453);const s={id:"playwright_screenplay",title:"Screenplay Pattern con Playwright",sidebar_position:4},r="Screenplay Pattern con Playwright",l={},c=[{value:"Por que Screenplay con Playwright?",id:"por-que-screenplay-con-playwright",level:2},{value:"Configuracion del proyecto",id:"configuracion-del-proyecto",level:2},{value:"Dependencias de Maven",id:"dependencias-de-maven",level:3},{value:"Conceptos principales",id:"conceptos-principales",level:2},{value:"Actor y Ability",id:"actor-y-ability",level:3},{value:"Task",id:"task",level:3},{value:"Question",id:"question",level:3},{value:"Target",id:"target",level:3},{value:"Escribiendo pruebas",id:"escribiendo-pruebas",level:2},{value:"Estructura basica de prueba",id:"estructura-basica-de-prueba",level:3},{value:"Usando Ensure para aserciones",id:"usando-ensure-para-aserciones",level:3},{value:"Interaction integradas",id:"interaction-integradas",level:2},{value:"Navegacion",id:"navegacion",level:3},{value:"Clic",id:"clic",level:3},{value:"Interacciones de formulario",id:"interacciones-de-formulario",level:3},{value:"Acciones de raton",id:"acciones-de-raton",level:3},{value:"Esperas",id:"esperas",level:3},{value:"Ejecucion de JavaScript",id:"ejecucion-de-javascript",level:3},{value:"Manejo de dialogos",id:"manejo-de-dialogos",level:3},{value:"Aserciones especificas de Playwright",id:"aserciones-especificas-de-playwright",level:2},{value:"Caracteristicas avanzadas",id:"caracteristicas-avanzadas",level:2},{value:"Acceso directo a la API de Playwright",id:"acceso-directo-a-la-api-de-playwright",level:3},{value:"Task personalizados",id:"task-personalizados",level:3},{value:"Question personalizadas",id:"question-personalizadas",level:3},{value:"Multiples paginas/pestanas",id:"multiples-paginaspestanas",level:3},{value:"Gestion de cookies",id:"gestion-de-cookies",level:3},{value:"Manejo de frames",id:"manejo-de-frames",level:3},{value:"Capturas de pantalla",id:"capturas-de-pantalla",level:3},{value:"Configuracion",id:"configuracion",level:2},{value:"Opciones de navegador",id:"opciones-de-navegador",level:3},{value:"Configuracion de capturas de pantalla",id:"configuracion-de-capturas-de-pantalla",level:3},{value:"Ejemplo completo: Conjunto de pruebas TodoMVC",id:"ejemplo-completo-conjunto-de-pruebas-todomvc",level:2},{value:"Target de UI",id:"target-de-ui",level:3},{value:"Task",id:"task-1",level:3},{value:"Question",id:"question-1",level:3},{value:"Clase de prueba",id:"clase-de-prueba",level:3},{value:"Mejores practicas",id:"mejores-practicas",level:2},{value:"1. Manten los Task enfocados en el negocio",id:"1-manten-los-task-enfocados-en-el-negocio",level:3},{value:"2. Usa nombres significativos para Target",id:"2-usa-nombres-significativos-para-target",level:3},{value:"3. Crea Question especificas del dominio",id:"3-crea-question-especificas-del-dominio",level:3},{value:"4. Aprovecha Ensure para aserciones legibles",id:"4-aprovecha-ensure-para-aserciones-legibles",level:3},{value:"Siguientes pasos",id:"siguientes-pasos",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"screenplay-pattern-con-playwright",children:"Screenplay Pattern con Playwright"})}),"\n",(0,o.jsx)(n.p,{children:"El Screenplay Pattern es un enfoque moderno y centrado en el Actor para escribir pruebas automatizadas. Cuando se combina con Playwright, proporciona una forma poderosa y expresiva de escribir pruebas de automatizacion de navegadores que se leen como documentacion viva."}),"\n",(0,o.jsxs)(n.p,{children:["El modulo ",(0,o.jsx)(n.code,{children:"serenity-screenplay-playwright"})," une:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Expresividad de Screenplay"})," - Diseno de pruebas centrado en el Actor y basado en Task"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Confiabilidad de Playwright"})," - Automatizacion de navegadores moderna con espera automatica"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Reportes enriquecidos de Serenity"})," - Documentacion paso a paso con capturas de pantalla"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"por-que-screenplay-con-playwright",children:"Por que Screenplay con Playwright?"}),"\n",(0,o.jsx)(n.p,{children:"El Screenplay Pattern ofrece varias ventajas sobre los enfoques tradicionales con Page Object:"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Page Object"}),(0,o.jsx)(n.th,{children:"Screenplay"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Las pruebas llaman metodos de pagina directamente"}),(0,o.jsx)(n.td,{children:"Los Actor realizan Task y hacen Question"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Estilo de codigo procedural"}),(0,o.jsx)(n.td,{children:"Estilo declarativo enfocado en comportamiento"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Pruebas atadas a estructura de UI"}),(0,o.jsx)(n.td,{children:"Pruebas expresan intencion de negocio"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Mas dificil componer acciones"}),(0,o.jsx)(n.td,{children:"Los Task se componen facilmente en flujos de trabajo"})]})]})]}),"\n",(0,o.jsx)(n.p,{children:"Con Playwright, tambien obtienes:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Espera automatica"})," integrada en todas las Interaction"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Aserciones integradas"})," con reintento automatico"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Intercepcion de red"})," para simular API"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Soporte para multiples navegadores"})," (Chromium, Firefox, WebKit)"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"configuracion-del-proyecto",children:"Configuracion del proyecto"}),"\n",(0,o.jsx)(n.h3,{id:"dependencias-de-maven",children:"Dependencias de Maven"}),"\n",(0,o.jsxs)(n.p,{children:["Agrega estas dependencias a tu ",(0,o.jsx)(n.code,{children:"pom.xml"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"<properties>\n    <serenity.version>5.1.1</serenity.version>\n    <playwright.version>1.58.0</playwright.version>\n</properties>\n\n<dependencies>\n    \x3c!-- Serenity Screenplay con Playwright --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-screenplay-playwright</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Serenity Screenplay Core --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-screenplay</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Serenity Ensure (para aserciones fluidas) --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-ensure</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Serenity JUnit 5 --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-junit5</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Playwright --\x3e\n    <dependency>\n        <groupId>com.microsoft.playwright</groupId>\n        <artifactId>playwright</artifactId>\n        <version>${playwright.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- JUnit 5 --\x3e\n    <dependency>\n        <groupId>org.junit.jupiter</groupId>\n        <artifactId>junit-jupiter</artifactId>\n        <version>6.0.1</version>\n        <scope>test</scope>\n    </dependency>\n</dependencies>\n"})}),"\n",(0,o.jsx)(n.h2,{id:"conceptos-principales",children:"Conceptos principales"}),"\n",(0,o.jsx)(n.h3,{id:"actor-y-ability",children:"Actor y Ability"}),"\n",(0,o.jsxs)(n.p,{children:["En Screenplay, las pruebas se escriben desde la perspectiva de ",(0,o.jsx)(n.strong,{children:"Actor"})," que tienen ",(0,o.jsx)(n.strong,{children:"Ability"}),". Para pruebas de Playwright, los Actor necesitan la Ability ",(0,o.jsx)(n.code,{children:"BrowseTheWebWithPlaywright"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'import net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\n\nActor toby = Actor.named("Toby");\ntoby.can(BrowseTheWebWithPlaywright.usingTheDefaultConfiguration());\n'})}),"\n",(0,o.jsx)(n.p,{children:"La Ability gestiona el ciclo de vida del navegador Playwright automaticamente:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Crea el navegador, contexto y pagina bajo demanda"}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Limpia automaticamente"})," cuando la prueba termina (no se necesita limpieza explicita)"]}),"\n",(0,o.jsx)(n.li,{children:"Se suscribe a los eventos del ciclo de vida de pruebas de Serenity para gestion de recursos fluida"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"task",children:"Task"}),"\n",(0,o.jsxs)(n.p,{children:["Los ",(0,o.jsx)(n.strong,{children:"Task"})," representan acciones de alto nivel que un Actor realiza. Expresan ",(0,o.jsx)(n.em,{children:"que"})," hace el Actor en terminos de negocio:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'import net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.playwright.interactions.Open;\nimport net.serenitybdd.annotations.Step;\n\npublic class OpenTodoMvcApp implements Task {\n\n    @Override\n    @Step("{0} opens the TodoMVC application")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Open.url("https://todomvc.com/examples/react/dist/")\n        );\n    }\n\n    public static OpenTodoMvcApp onTheHomePage() {\n        return new OpenTodoMvcApp();\n    }\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"Los Task pueden componerse de otros Task e Interaction:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class AddATodoItem implements Task {\n    private final String todoItem;\n\n    public AddATodoItem(String todoItem) {\n        this.todoItem = todoItem;\n    }\n\n    @Override\n    @Step("{0} adds a todo item called \'#todoItem\'")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Enter.theValue(todoItem).into(TodoList.NEW_TODO_INPUT),\n            Press.keys("Enter")\n        );\n    }\n\n    public static AddATodoItem called(String todoItem) {\n        return new AddATodoItem(todoItem);\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"question",children:"Question"}),"\n",(0,o.jsxs)(n.p,{children:["Las ",(0,o.jsx)(n.strong,{children:"Question"})," permiten a los Actor consultar el estado de la aplicacion:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'import net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\n\npublic class TheVisibleTodos {\n\n    public static Question<Collection<String>> displayed() {\n        return Question.about("the visible todos").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(".todo-list li label")\n                .allTextContents()\n        );\n    }\n\n    public static Question<Integer> count() {\n        return Question.about("visible todo count").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(".todo-list li")\n                .count()\n        );\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"target",children:"Target"}),"\n",(0,o.jsxs)(n.p,{children:["Los ",(0,o.jsx)(n.strong,{children:"Target"})," definen elementos de UI usando selectores de Playwright:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'import net.serenitybdd.screenplay.playwright.Target;\n\npublic class TodoList {\n\n    public static final Target NEW_TODO_INPUT =\n        Target.the("new todo input")\n              .locatedBy("[placeholder=\'What needs to be done?\']");\n\n    public static final Target TODO_ITEMS =\n        Target.the("todo items")\n              .locatedBy(".todo-list li");\n\n    public static Target todoItemCalled(String todoText) {\n        return Target.the("todo item \'" + todoText + "\'")\n                     .locatedBy(".todo-list li:has-text(\'" + todoText + "\')");\n    }\n\n    public static Target checkboxFor(String todoText) {\n        return Target.the("checkbox for \'" + todoText + "\'")\n                     .locatedBy(".todo-list li:has-text(\'" + todoText + "\') .toggle");\n    }\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"Los Target soportan:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Selectores parametrizados"}),": ",(0,o.jsx)(n.code,{children:'Target.the("item {0}").locatedBy("[data-id=\'{0}\']").of("123")'})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Target anidados"}),": ",(0,o.jsx)(n.code,{children:"button.inside(form)"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Soporte para frames"}),": ",(0,o.jsx)(n.code,{children:'Target.the("editor").inFrame("#iframe").locatedBy("#content")'})]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"escribiendo-pruebas",children:"Escribiendo pruebas"}),"\n",(0,o.jsx)(n.h3,{id:"estructura-basica-de-prueba",children:"Estructura basica de prueba"}),"\n",(0,o.jsx)(n.p,{children:"Aqui hay un ejemplo completo de una prueba Screenplay con Playwright:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'import net.serenitybdd.junit5.SerenityJUnit5Extension;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.ensure.Ensure;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport org.junit.jupiter.api.*;\nimport org.junit.jupiter.api.extension.ExtendWith;\n\n@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When adding todos")\nclass WhenAddingTodosTest {\n\n    Actor toby;\n\n    @BeforeEach\n    void setUp() {\n        toby = Actor.named("Toby");\n        toby.can(BrowseTheWebWithPlaywright.usingTheDefaultConfiguration());\n    }\n\n    // No se necesita @AfterEach - la limpieza ocurre automaticamente!\n\n    @Test\n    @DisplayName("should add a single todo item")\n    void shouldAddSingleTodoItem() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Buy milk"),\n            Ensure.that(TheVisibleTodos.count()).isEqualTo(1),\n            Ensure.that(TheTodoItem.called("Buy milk").exists()).isTrue()\n        );\n    }\n\n    @Test\n    @DisplayName("should add multiple todo items")\n    void shouldAddMultipleTodoItems() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Buy milk"),\n            AddATodoItem.called("Walk the dog"),\n            AddATodoItem.called("Do laundry"),\n            Ensure.that(TheVisibleTodos.displayed())\n                .containsExactly("Buy milk", "Walk the dog", "Do laundry")\n        );\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"usando-ensure-para-aserciones",children:"Usando Ensure para aserciones"}),"\n",(0,o.jsxs)(n.p,{children:["La clase ",(0,o.jsx)(n.code,{children:"Ensure"})," proporciona aserciones fluidas que se integran con el modelo basado en Task de Screenplay:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'toby.attemptsTo(\n    // Comparaciones numericas\n    Ensure.that(TheRemainingCount.value()).isEqualTo(3),\n    Ensure.that(TheVisibleTodos.count()).isGreaterThan(0),\n\n    // Verificaciones booleanas\n    Ensure.that(TheTodoItem.called("Buy milk").isCompleted()).isTrue(),\n    Ensure.that(TheClearCompletedButton.isVisible()).isFalse(),\n\n    // Comparaciones de cadenas\n    Ensure.that(TheCurrentFilter.selected()).isEqualTo("All"),\n\n    // Aserciones de colecciones\n    Ensure.that(TheVisibleTodos.displayed())\n        .containsExactly("Buy milk", "Walk the dog"),\n    Ensure.that(TheVisibleTodos.displayed())\n        .contains("Buy milk")\n);\n'})}),"\n",(0,o.jsx)(n.h2,{id:"interaction-integradas",children:"Interaction integradas"}),"\n",(0,o.jsxs)(n.p,{children:["El modulo ",(0,o.jsx)(n.code,{children:"serenity-screenplay-playwright"})," proporciona muchas Interaction integradas:"]}),"\n",(0,o.jsx)(n.h3,{id:"navegacion",children:"Navegacion"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'// Abrir una URL\nactor.attemptsTo(Open.url("https://example.com"));\n\n// Navegar atras/adelante\nactor.attemptsTo(Navigate.back());\nactor.attemptsTo(Navigate.forward());\n\n// Refrescar la pagina\nactor.attemptsTo(Navigate.refresh());\n'})}),"\n",(0,o.jsx)(n.h3,{id:"clic",children:"Clic"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"// Clic simple\nactor.attemptsTo(Click.on(TodoList.SUBMIT_BUTTON));\n\n// Doble clic\nactor.attemptsTo(DoubleClick.on(TodoList.TODO_LABEL));\n\n// Clic derecho\nactor.attemptsTo(RightClick.on(TodoList.CONTEXT_MENU_TRIGGER));\n"})}),"\n",(0,o.jsx)(n.h3,{id:"interacciones-de-formulario",children:"Interacciones de formulario"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'// Ingresar texto\nactor.attemptsTo(Enter.theValue("Hello").into(TodoList.INPUT_FIELD));\n\n// Limpiar un campo\nactor.attemptsTo(Clear.field(TodoList.INPUT_FIELD));\n\n// Presionar teclas\nactor.attemptsTo(Press.keys("Enter"));\nactor.attemptsTo(Press.keys("Control+a"));\n\n// Marcar/desmarcar checkboxes\nactor.attemptsTo(Check.checkbox(TodoList.AGREE_CHECKBOX));\nactor.attemptsTo(Uncheck.checkbox(TodoList.AGREE_CHECKBOX));\n\n// Seleccionar de dropdown\nactor.attemptsTo(SelectFromOptions.byVisibleText("Option 1").from(TodoList.DROPDOWN));\nactor.attemptsTo(SelectFromOptions.byValue("opt1").from(TodoList.DROPDOWN));\n'})}),"\n",(0,o.jsx)(n.h3,{id:"acciones-de-raton",children:"Acciones de raton"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"// Pasar el raton sobre un elemento\nactor.attemptsTo(Hover.over(TodoList.DELETE_BUTTON));\n\n// Arrastrar y soltar\nactor.attemptsTo(Drag.from(SOURCE).to(TARGET));\n\n// Desplazar al elemento visible\nactor.attemptsTo(ScrollIntoView.element(TodoList.FOOTER));\n"})}),"\n",(0,o.jsx)(n.h3,{id:"esperas",children:"Esperas"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"// Esperar por un elemento\nactor.attemptsTo(WaitFor.the(TodoList.LOADING_SPINNER).toDisappear());\n"})}),"\n",(0,o.jsx)(n.h3,{id:"ejecucion-de-javascript",children:"Ejecucion de JavaScript"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'// Ejecutar JavaScript\nactor.attemptsTo(\n    ExecuteJavaScript.withScript("window.scrollTo(0, document.body.scrollHeight)")\n);\n'})}),"\n",(0,o.jsx)(n.h3,{id:"manejo-de-dialogos",children:"Manejo de dialogos"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'// Aceptar alerta\nactor.attemptsTo(HandleDialog.byAccepting());\n\n// Descartar alerta\nactor.attemptsTo(HandleDialog.byDismissing());\n\n// Ingresar texto en prompt\nactor.attemptsTo(HandleDialog.byEntering("my response"));\n'})}),"\n",(0,o.jsx)(n.h2,{id:"aserciones-especificas-de-playwright",children:"Aserciones especificas de Playwright"}),"\n",(0,o.jsxs)(n.p,{children:["La clase ",(0,o.jsx)(n.code,{children:"Ensure"})," tambien proporciona aserciones especificas de Playwright con reintento automatico:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'import net.serenitybdd.screenplay.playwright.assertions.Ensure;\n\nactor.attemptsTo(\n    // Visibilidad de elemento\n    Ensure.that(TodoList.MAIN_SECTION).isVisible(),\n    Ensure.that(TodoList.LOADING_SPINNER).isHidden(),\n\n    // Contenido de texto\n    Ensure.that(TodoList.HEADER).hasText("todos"),\n    Ensure.that(TodoList.HEADER).containsText("todo"),\n\n    // Conteo de elementos\n    Ensure.that(TodoList.TODO_ITEMS).hasCount(3),\n\n    // Atributos y clases\n    Ensure.that(TodoList.TODO_ITEM).hasClass("completed"),\n    Ensure.that(TodoList.INPUT).hasAttribute("placeholder", "What needs to be done?"),\n\n    // Estado del elemento\n    Ensure.that(TodoList.SUBMIT_BUTTON).isEnabled(),\n    Ensure.that(TodoList.CHECKBOX).isChecked(),\n\n    // URL y titulo de pagina\n    Ensure.thatTheCurrentUrl().contains("/dashboard"),\n    Ensure.thatThePageTitle().isEqualTo("My App")\n);\n'})}),"\n",(0,o.jsx)(n.h2,{id:"caracteristicas-avanzadas",children:"Caracteristicas avanzadas"}),"\n",(0,o.jsx)(n.h3,{id:"acceso-directo-a-la-api-de-playwright",children:"Acceso directo a la API de Playwright"}),"\n",(0,o.jsx)(n.p,{children:"Para escenarios avanzados, puedes acceder a la API de Playwright directamente:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'Page page = BrowseTheWebWithPlaywright.as(actor).getCurrentPage();\n\n// Usar la API nativa de Playwright\npage.locator(".my-element").click();\n\n// Acceder al contexto del navegador\nBrowserContext context = page.context();\n\n// Intercepcion de red\npage.route("**/api/**", route -> {\n    route.fulfill(new Route.FulfillOptions()\n        .setBody("{\\"mocked\\": true}")\n        .setContentType("application/json"));\n});\n'})}),"\n",(0,o.jsx)(n.h3,{id:"task-personalizados",children:"Task personalizados"}),"\n",(0,o.jsx)(n.p,{children:"Crea Task especificos del dominio para tu aplicacion:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class CompleteCheckout implements Task {\n\n    private final PaymentDetails paymentDetails;\n\n    public CompleteCheckout(PaymentDetails paymentDetails) {\n        this.paymentDetails = paymentDetails;\n    }\n\n    @Override\n    @Step("{0} completes checkout with #paymentDetails")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            EnterShippingAddress.forCurrentUser(),\n            EnterPaymentDetails.using(paymentDetails),\n            Click.on(CheckoutPage.PLACE_ORDER_BUTTON),\n            WaitFor.the(CheckoutPage.CONFIRMATION_MESSAGE).toAppear()\n        );\n    }\n\n    public static CompleteCheckout using(PaymentDetails details) {\n        return new CompleteCheckout(details);\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"question-personalizadas",children:"Question personalizadas"}),"\n",(0,o.jsx)(n.p,{children:"Crea Question reutilizables para tu dominio:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class TheOrderTotal {\n\n    public static Question<BigDecimal> displayed() {\n        return Question.about("the order total").answeredBy(actor -> {\n            String totalText = BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(".order-total")\n                .textContent();\n            return new BigDecimal(totalText.replace("$", ""));\n        });\n    }\n}\n\n// Uso\nactor.attemptsTo(\n    Ensure.that(TheOrderTotal.displayed()).isGreaterThan(new BigDecimal("100.00"))\n);\n'})}),"\n",(0,o.jsx)(n.h3,{id:"multiples-paginaspestanas",children:"Multiples paginas/pestanas"}),"\n",(0,o.jsx)(n.p,{children:"Maneja multiples pestanas del navegador:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'// Abrir una nueva pagina\nBrowseTheWebWithPlaywright.as(actor).openNewPage();\n\n// Cambiar entre paginas\nBrowseTheWebWithPlaywright.as(actor).switchToPage(0);\nBrowseTheWebWithPlaywright.as(actor).switchToPageWithTitle("Dashboard");\n\n// Cerrar pagina actual\nBrowseTheWebWithPlaywright.as(actor).closeCurrentPage();\n'})}),"\n",(0,o.jsx)(n.h3,{id:"gestion-de-cookies",children:"Gestion de cookies"}),"\n",(0,o.jsx)(n.p,{children:"Gestiona cookies del navegador:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'// Obtener todas las cookies\nList<Cookie> cookies = BrowseTheWebWithPlaywright.as(actor).getCookies();\n\n// Agregar una cookie\nCookie cookie = new Cookie("session", "abc123")\n    .setDomain("example.com")\n    .setPath("/");\nBrowseTheWebWithPlaywright.as(actor).addCookie(cookie);\n\n// Limpiar cookies\nBrowseTheWebWithPlaywright.as(actor).clearCookies();\n'})}),"\n",(0,o.jsx)(n.h3,{id:"manejo-de-frames",children:"Manejo de frames"}),"\n",(0,o.jsx)(n.p,{children:"Interactua con elementos dentro de iframes:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'// Definir un Target dentro de un frame\nTarget EDITOR_CONTENT = Target.the("editor content")\n    .inFrame("#editor-iframe")\n    .locatedBy("#content");\n\n// Interactua normalmente\nactor.attemptsTo(\n    Enter.theValue("Hello World").into(EDITOR_CONTENT)\n);\n'})}),"\n",(0,o.jsx)(n.h3,{id:"capturas-de-pantalla",children:"Capturas de pantalla"}),"\n",(0,o.jsx)(n.p,{children:"Toma capturas de pantalla explicitamente:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"// El metodo notifyScreenChange() captura una pantalla\nBrowseTheWebWithPlaywright.as(actor).notifyScreenChange();\n\n// O toma una captura explicitamente\nScreenshotAndHtmlSource screenshot = BrowseTheWebWithPlaywright.as(actor).takeScreenShot();\n"})}),"\n",(0,o.jsx)(n.h2,{id:"configuracion",children:"Configuracion"}),"\n",(0,o.jsx)(n.h3,{id:"opciones-de-navegador",children:"Opciones de navegador"}),"\n",(0,o.jsx)(n.p,{children:"Configura las opciones del navegador Playwright via propiedades del sistema o programaticamente:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-properties",children:"# serenity.properties\nplaywright.browsertype=chromium\nplaywright.headless=true\nplaywright.slowMo=100\n"})}),"\n",(0,o.jsx)(n.p,{children:"O programaticamente:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'actor.can(\n    BrowseTheWebWithPlaywright\n        .withOptions(new BrowserType.LaunchOptions().setHeadless(false))\n        .withBrowserType("firefox")\n);\n'})}),"\n",(0,o.jsx)(n.h3,{id:"configuracion-de-capturas-de-pantalla",children:"Configuracion de capturas de pantalla"}),"\n",(0,o.jsx)(n.p,{children:"Controla la captura de pantallas:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-properties",children:"# serenity.conf\nserenity {\n    take.screenshots = FOR_EACH_ACTION  # o FOR_FAILURES, DISABLED\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"ejemplo-completo-conjunto-de-pruebas-todomvc",children:"Ejemplo completo: Conjunto de pruebas TodoMVC"}),"\n",(0,o.jsx)(n.p,{children:"Aqui hay un ejemplo completo mostrando todos los conceptos juntos:"}),"\n",(0,o.jsx)(n.h3,{id:"target-de-ui",children:"Target de UI"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class TodoList {\n\n    public static final Target NEW_TODO_INPUT =\n        Target.the("new todo input")\n              .locatedBy("[placeholder=\'What needs to be done?\']");\n\n    public static final Target TODO_ITEMS =\n        Target.the("todo items")\n              .locatedBy(".todo-list li");\n\n    public static final Target TODO_COUNT =\n        Target.the("todo count")\n              .locatedBy(".todo-count");\n\n    public static final Target CLEAR_COMPLETED_BUTTON =\n        Target.the("clear completed button")\n              .locatedBy(".clear-completed");\n\n    public static final Target ALL_FILTER =\n        Target.the("All filter")\n              .locatedBy(".filters a:has-text(\'All\')");\n\n    public static final Target ACTIVE_FILTER =\n        Target.the("Active filter")\n              .locatedBy(".filters a:has-text(\'Active\')");\n\n    public static final Target COMPLETED_FILTER =\n        Target.the("Completed filter")\n              .locatedBy(".filters a:has-text(\'Completed\')");\n\n    public static Target todoItemCalled(String text) {\n        return Target.the("todo \'" + text + "\'")\n                     .locatedBy(".todo-list li:has-text(\'" + text + "\')");\n    }\n\n    public static Target checkboxFor(String text) {\n        return Target.the("checkbox for \'" + text + "\'")\n                     .locatedBy(".todo-list li:has-text(\'" + text + "\') .toggle");\n    }\n\n    public static Target deleteButtonFor(String text) {\n        return Target.the("delete button for \'" + text + "\'")\n                     .locatedBy(".todo-list li:has-text(\'" + text + "\') .destroy");\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"task-1",children:"Task"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'// AddATodoItem.java\npublic class AddATodoItem implements Task {\n    private final List<String> items;\n\n    public AddATodoItem(List<String> items) {\n        this.items = items;\n    }\n\n    @Override\n    @Step("{0} adds todo items: #items")\n    public <T extends Actor> void performAs(T actor) {\n        for (String item : items) {\n            actor.attemptsTo(\n                Enter.theValue(item).into(TodoList.NEW_TODO_INPUT),\n                Press.keys("Enter")\n            );\n        }\n    }\n\n    public static AddATodoItem called(String item) {\n        return new AddATodoItem(List.of(item));\n    }\n\n    public static AddATodoItem withItems(String... items) {\n        return new AddATodoItem(Arrays.asList(items));\n    }\n}\n\n// Complete.java\npublic class Complete implements Task {\n    private final String todoItem;\n\n    public Complete(String todoItem) {\n        this.todoItem = todoItem;\n    }\n\n    @Override\n    @Step("{0} completes the todo item \'#todoItem\'")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Click.on(TodoList.checkboxFor(todoItem))\n        );\n    }\n\n    public static Complete todoItem(String item) {\n        return new Complete(item);\n    }\n}\n\n// Delete.java\npublic class Delete implements Task {\n    private final String todoItem;\n\n    public Delete(String todoItem) {\n        this.todoItem = todoItem;\n    }\n\n    @Override\n    @Step("{0} deletes the todo item \'#todoItem\'")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Hover.over(TodoList.todoItemCalled(todoItem)),\n            Click.on(TodoList.deleteButtonFor(todoItem))\n        );\n    }\n\n    public static Delete theTodoItem(String item) {\n        return new Delete(item);\n    }\n}\n\n// FilterTodos.java\npublic class FilterTodos {\n\n    public static Task toShowAll() {\n        return Task.where("{0} filters to show all todos",\n            Click.on(TodoList.ALL_FILTER)\n        );\n    }\n\n    public static Task toShowActive() {\n        return Task.where("{0} filters to show active todos",\n            Click.on(TodoList.ACTIVE_FILTER)\n        );\n    }\n\n    public static Task toShowCompleted() {\n        return Task.where("{0} filters to show completed todos",\n            Click.on(TodoList.COMPLETED_FILTER)\n        );\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"question-1",children:"Question"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'// TheVisibleTodos.java\npublic class TheVisibleTodos {\n\n    public static Question<Collection<String>> displayed() {\n        return Question.about("the visible todos").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(".todo-list li label")\n                .allTextContents()\n        );\n    }\n\n    public static Question<Integer> count() {\n        return Question.about("visible todo count").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(".todo-list li")\n                .count()\n        );\n    }\n}\n\n// TheRemainingCount.java\npublic class TheRemainingCount {\n\n    public static Question<Integer> value() {\n        return Question.about("the remaining count").answeredBy(actor -> {\n            String text = BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(".todo-count")\n                .textContent();\n            Matcher matcher = Pattern.compile("(\\\\d+)").matcher(text);\n            return matcher.find() ? Integer.parseInt(matcher.group(1)) : 0;\n        });\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"clase-de-prueba",children:"Clase de prueba"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When managing todos")\nclass WhenManagingTodosTest {\n\n    Actor toby;\n\n    @BeforeEach\n    void setUp() {\n        toby = Actor.named("Toby");\n        toby.can(BrowseTheWebWithPlaywright.usingTheDefaultConfiguration());\n    }\n\n    // No se necesita @AfterEach - BrowseTheWebWithPlaywright automaticamente\n    // limpia los recursos del navegador cuando la prueba termina\n\n    @Test\n    @DisplayName("should add and complete todos")\n    void shouldAddAndCompleteTodos() {\n        toby.attemptsTo(\n            Open.url("https://todomvc.com/examples/react/dist/"),\n            AddATodoItem.withItems("Buy milk", "Walk the dog", "Do laundry"),\n\n            Ensure.that(TheVisibleTodos.count()).isEqualTo(3),\n            Ensure.that(TheRemainingCount.value()).isEqualTo(3),\n\n            Complete.todoItem("Buy milk"),\n\n            Ensure.that(TheRemainingCount.value()).isEqualTo(2),\n\n            FilterTodos.toShowCompleted(),\n\n            Ensure.that(TheVisibleTodos.displayed()).containsExactly("Buy milk"),\n\n            FilterTodos.toShowActive(),\n\n            Ensure.that(TheVisibleTodos.displayed())\n                .containsExactly("Walk the dog", "Do laundry")\n        );\n    }\n\n    @Test\n    @DisplayName("should delete a todo item")\n    void shouldDeleteTodoItem() {\n        toby.attemptsTo(\n            Open.url("https://todomvc.com/examples/react/dist/"),\n            AddATodoItem.withItems("Item 1", "Item 2", "Item 3"),\n\n            Delete.theTodoItem("Item 2"),\n\n            Ensure.that(TheVisibleTodos.displayed())\n                .containsExactly("Item 1", "Item 3")\n        );\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"mejores-practicas",children:"Mejores practicas"}),"\n",(0,o.jsx)(n.h3,{id:"1-manten-los-task-enfocados-en-el-negocio",children:"1. Manten los Task enfocados en el negocio"}),"\n",(0,o.jsxs)(n.p,{children:["Los Task deben expresar ",(0,o.jsx)(n.em,{children:"que"})," el usuario intenta lograr, no ",(0,o.jsx)(n.em,{children:"como"})," lo logra:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'// Bien - expresa intencion\nactor.attemptsTo(\n    AddItemToCart.called("Blue T-Shirt"),\n    ProceedToCheckout.withStandardShipping()\n);\n\n// Evitar - demasiado tecnico\nactor.attemptsTo(\n    Click.on(ProductPage.ADD_TO_CART_BUTTON),\n    Click.on(Header.CART_ICON),\n    Click.on(CartPage.CHECKOUT_BUTTON)\n);\n'})}),"\n",(0,o.jsx)(n.h3,{id:"2-usa-nombres-significativos-para-target",children:"2. Usa nombres significativos para Target"}),"\n",(0,o.jsx)(n.p,{children:"Los nombres de Target aparecen en los reportes, asi que hazlos descriptivos:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'// Bien\nTarget SUBMIT_ORDER_BUTTON = Target.the("submit order button")\n    .locatedBy("#checkout-submit");\n\n// Evitar\nTarget BUTTON = Target.the("button").locatedBy("#checkout-submit");\n'})}),"\n",(0,o.jsx)(n.h3,{id:"3-crea-question-especificas-del-dominio",children:"3. Crea Question especificas del dominio"}),"\n",(0,o.jsx)(n.p,{children:"Las Question deben devolver objetos de dominio significativos:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"// Bien\nQuestion<Money> orderTotal = TheOrderTotal.displayed();\nQuestion<List<CartItem>> cartItems = TheCartContents.items();\n\n// Evitar\nQuestion<String> total = Text.of(OrderPage.TOTAL);\n"})}),"\n",(0,o.jsx)(n.h3,{id:"4-aprovecha-ensure-para-aserciones-legibles",children:"4. Aprovecha Ensure para aserciones legibles"}),"\n",(0,o.jsxs)(n.p,{children:["Usa ",(0,o.jsx)(n.code,{children:"Ensure.that()"})," para aserciones que se lean naturalmente:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"actor.attemptsTo(\n    Ensure.that(TheOrderStatus.displayed()).isEqualTo(OrderStatus.CONFIRMED),\n    Ensure.that(TheDeliveryDate.shown()).isAfter(LocalDate.now())\n);\n"})}),"\n",(0,o.jsx)(n.h2,{id:"siguientes-pasos",children:"Siguientes pasos"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Explora el ",(0,o.jsx)(n.a,{href:"playwright_tutorial_todomvc",children:"Tutorial de TodoMVC"})," para una guia paso a paso"]}),"\n",(0,o.jsxs)(n.li,{children:["Aprende sobre las ",(0,o.jsx)(n.a,{href:"playwright_configuration",children:"Opciones de configuracion"})," para personalizacion"]}),"\n",(0,o.jsxs)(n.li,{children:["Revisa las ",(0,o.jsx)(n.a,{href:"playwright_best_practices",children:"Mejores practicas"})," para pruebas listas para produccion"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>s,x:()=>r});var a=t(6540);const o={},i=a.createContext(o);function s(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);
"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[8832],{1140(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"tutorials/cicd-integration","title":"CI/CD Integration with Serenity BDD","description":"This guide shows you how to integrate Serenity BDD tests into popular CI/CD platforms, including GitHub Actions, Jenkins, and GitLab CI. Learn how to run tests automatically, publish reports, and get fast feedback on your code changes.","source":"@site/docs/tutorials/cicd-integration.md","sourceDirName":"tutorials","slug":"/tutorials/cicd-integration","permalink":"/es/docs/tutorials/cicd-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/tutorials/cicd-integration.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"cicd-integration","title":"CI/CD Integration with Serenity BDD","sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Migrating From Serenity BDD 3.x to Serenity BDD 4.x","permalink":"/es/docs/tutorials/migrating_to_serenity_4"},"next":{"title":"How to Do Parallel Test Execution in Cucumber with Serenity","permalink":"/es/docs/tutorials/running_cucumber_scenarios_in_parallel"}}');var t=s(4848),r=s(8453);const a={id:"cicd-integration",title:"CI/CD Integration with Serenity BDD",sidebar_position:6},l="CI/CD Integration with Serenity BDD",o={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Quick Start Checklist",id:"quick-start-checklist",level:2},{value:"GitHub Actions",id:"github-actions",level:2},{value:"Basic Setup",id:"basic-setup",level:3},{value:"Gradle Version",id:"gradle-version",level:3},{value:"Publishing Reports to GitHub Pages",id:"publishing-reports-to-github-pages",level:3},{value:"Parallel Execution in GitHub Actions",id:"parallel-execution-in-github-actions",level:3},{value:"Advanced Configuration with Environment Variables",id:"advanced-configuration-with-environment-variables",level:3},{value:"Notifications",id:"notifications",level:3},{value:"Jenkins",id:"jenkins",level:2},{value:"Declarative Pipeline",id:"declarative-pipeline",level:3},{value:"Gradle Pipeline",id:"gradle-pipeline",level:3},{value:"Parallel Execution in Jenkins",id:"parallel-execution-in-jenkins",level:3},{value:"Jenkins Configuration with Parameters",id:"jenkins-configuration-with-parameters",level:3},{value:"Installing Jenkins Plugins",id:"installing-jenkins-plugins",level:3},{value:"GitLab CI",id:"gitlab-ci",level:2},{value:"Basic Configuration",id:"basic-configuration",level:3},{value:"Gradle Version",id:"gradle-version-1",level:3},{value:"Multiple Environments",id:"multiple-environments",level:3},{value:"Parallel Jobs",id:"parallel-jobs",level:3},{value:"Azure Pipelines",id:"azure-pipelines",level:2},{value:"Docker Integration",id:"docker-integration",level:2},{value:"Dockerfile for Tests",id:"dockerfile-for-tests",level:3},{value:"Docker Compose",id:"docker-compose",level:3},{value:"GitHub Actions with Docker",id:"github-actions-with-docker",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use Headless Browsers",id:"1-use-headless-browsers",level:3},{value:"2. Optimize Build Times",id:"2-optimize-build-times",level:3},{value:"3. Fail Fast",id:"3-fail-fast",level:3},{value:"4. Tag-Based Execution",id:"4-tag-based-execution",level:3},{value:"5. Separate Test Stages",id:"5-separate-test-stages",level:3},{value:"6. Manage Secrets Securely",id:"6-manage-secrets-securely",level:3},{value:"7. Retry Flaky Tests",id:"7-retry-flaky-tests",level:3},{value:"8. Generate Build Badges",id:"8-generate-build-badges",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Issue: Tests fail only in CI",id:"issue-tests-fail-only-in-ci",level:3},{value:"Issue: Reports not publishing",id:"issue-reports-not-publishing",level:3},{value:"Issue: Slow builds",id:"issue-slow-builds",level:3},{value:"Complete Example: GitHub Actions with All Features",id:"complete-example-github-actions-with-all-features",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"cicd-integration-with-serenity-bdd",children:"CI/CD Integration with Serenity BDD"})}),"\n",(0,t.jsx)(n.p,{children:"This guide shows you how to integrate Serenity BDD tests into popular CI/CD platforms, including GitHub Actions, Jenkins, and GitLab CI. Learn how to run tests automatically, publish reports, and get fast feedback on your code changes."}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Serenity BDD project configured with Maven or Gradle"}),"\n",(0,t.jsx)(n.li,{children:"Version control repository (Git)"}),"\n",(0,t.jsx)(n.li,{children:"Access to a CI/CD platform"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"quick-start-checklist",children:"Quick Start Checklist"}),"\n",(0,t.jsx)(n.p,{children:"Before setting up CI/CD, ensure your project:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u2705 Runs successfully locally with ",(0,t.jsx)(n.code,{children:"mvn clean verify"})," or ",(0,t.jsx)(n.code,{children:"gradle clean test"})]}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Has all dependencies properly configured"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Uses headless browser mode for web tests"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Has reasonable test execution timeouts"}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 Generates Serenity reports in ",(0,t.jsx)(n.code,{children:"target/site/serenity"})," (Maven) or ",(0,t.jsx)(n.code,{children:"build/reports/serenity"})," (Gradle)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"github-actions",children:"GitHub Actions"}),"\n",(0,t.jsx)(n.p,{children:"GitHub Actions is the easiest way to set up CI/CD for projects hosted on GitHub."}),"\n",(0,t.jsx)(n.h3,{id:"basic-setup",children:"Basic Setup"}),"\n",(0,t.jsxs)(n.p,{children:["Create ",(0,t.jsx)(n.code,{children:".github/workflows/serenity-tests.yml"})," in your repository:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Serenity BDD Tests\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main, develop ]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run Serenity tests\n      run: mvn clean verify\n\n    - name: Publish Serenity Report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: serenity-report\n        path: target/site/serenity\n        retention-days: 30\n"})}),"\n",(0,t.jsx)(n.h3,{id:"gradle-version",children:"Gradle Version"}),"\n",(0,t.jsx)(n.p,{children:"For Gradle projects:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Serenity BDD Tests\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main, develop ]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'temurin'\n        cache: 'gradle'\n\n    - name: Run Serenity tests\n      run: ./gradlew clean test aggregate\n\n    - name: Publish Serenity Report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: serenity-report\n        path: build/reports/serenity\n        retention-days: 30\n"})}),"\n",(0,t.jsx)(n.h3,{id:"publishing-reports-to-github-pages",children:"Publishing Reports to GitHub Pages"}),"\n",(0,t.jsx)(n.p,{children:"Automatically publish Serenity reports as a website:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Serenity Tests with GitHub Pages\n\non:\n  push:\n    branches: [ main ]\n\npermissions:\n  contents: write\n  pages: write\n  id-token: write\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run Serenity tests\n      run: mvn clean verify\n\n    - name: Deploy to GitHub Pages\n      if: always()\n      uses: peaceiris/actions-gh-pages@v3\n      with:\n        github_token: ${{ secrets.GITHUB_TOKEN }}\n        publish_dir: ./target/site/serenity\n        destination_dir: reports/${{ github.run_number }}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Access your reports at:"})," ",(0,t.jsx)(n.code,{children:"https://<username>.github.io/<repository>/reports/<run-number>"})]}),"\n",(0,t.jsx)(n.h3,{id:"parallel-execution-in-github-actions",children:"Parallel Execution in GitHub Actions"}),"\n",(0,t.jsx)(n.p,{children:"Run tests in parallel using a matrix strategy:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Serenity Parallel Tests\n\non:\n  push:\n    branches: [ main ]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        browser: [chrome, firefox, edge]\n        test-suite: [smoke, regression]\n      fail-fast: false\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run tests\n      run: mvn verify -Dwebdriver.driver=${{ matrix.browser }} -Dtags=${{ matrix.test-suite }}\n\n    - name: Upload Report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: report-${{ matrix.browser }}-${{ matrix.test-suite }}\n        path: target/site/serenity\n"})}),"\n",(0,t.jsx)(n.h3,{id:"advanced-configuration-with-environment-variables",children:"Advanced Configuration with Environment Variables"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Serenity Tests - All Environments\n\non:\n  push:\n    branches: [ main ]\n  workflow_dispatch:\n    inputs:\n      environment:\n        description: 'Environment to test'\n        required: true\n        type: choice\n        options:\n          - dev\n          - staging\n          - production\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run tests\n      env:\n        BASE_URL: ${{ secrets[format('{0}_BASE_URL', github.event.inputs.environment || 'dev')] }}\n        API_KEY: ${{ secrets[format('{0}_API_KEY', github.event.inputs.environment || 'dev')] }}\n        TEST_USER: ${{ secrets.TEST_USER }}\n        TEST_PASSWORD: ${{ secrets.TEST_PASSWORD }}\n      run: |\n        mvn clean verify \\\n          -Dwebdriver.base.url=$BASE_URL \\\n          -Dapi.key=$API_KEY \\\n          -Dtest.user=$TEST_USER \\\n          -Dtest.password=$TEST_PASSWORD\n\n    - name: Upload Report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: serenity-report-${{ github.event.inputs.environment || 'dev' }}\n        path: target/site/serenity\n"})}),"\n",(0,t.jsx)(n.h3,{id:"notifications",children:"Notifications"}),"\n",(0,t.jsx)(n.p,{children:"Send Slack notifications on test results:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'    - name: Notify Slack on Success\n      if: success()\n      uses: slackapi/slack-github-action@v1\n      with:\n        webhook-url: ${{ secrets.SLACK_WEBHOOK }}\n        payload: |\n          {\n            "text": "\u2705 Serenity Tests Passed - Build #${{ github.run_number }}"\n          }\n\n    - name: Notify Slack on Failure\n      if: failure()\n      uses: slackapi/slack-github-action@v1\n      with:\n        webhook-url: ${{ secrets.SLACK_WEBHOOK }}\n        payload: |\n          {\n            "text": "\u274c Serenity Tests Failed - Build #${{ github.run_number }}\\nView: ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}"\n          }\n'})}),"\n",(0,t.jsx)(n.h2,{id:"jenkins",children:"Jenkins"}),"\n",(0,t.jsx)(n.p,{children:"Jenkins is a popular self-hosted CI/CD platform with extensive plugin support."}),"\n",(0,t.jsx)(n.h3,{id:"declarative-pipeline",children:"Declarative Pipeline"}),"\n",(0,t.jsxs)(n.p,{children:["Create a ",(0,t.jsx)(n.code,{children:"Jenkinsfile"})," in your repository root:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-groovy",children:"pipeline {\n    agent any\n\n    tools {\n        maven 'Maven-3.9'\n        jdk 'JDK-17'\n    }\n\n    stages {\n        stage('Checkout') {\n            steps {\n                checkout scm\n            }\n        }\n\n        stage('Build and Test') {\n            steps {\n                sh 'mvn clean verify'\n            }\n        }\n\n        stage('Publish Reports') {\n            steps {\n                publishHTML([\n                    reportDir: 'target/site/serenity',\n                    reportFiles: 'index.html',\n                    reportName: 'Serenity Report',\n                    keepAll: true,\n                    alwaysLinkToLastBuild: true,\n                    allowMissing: false\n                ])\n            }\n        }\n    }\n\n    post {\n        always {\n            junit '**/target/failsafe-reports/*.xml'\n            archiveArtifacts artifacts: 'target/site/serenity/**/*', allowEmptyArchive: true\n        }\n        failure {\n            emailext(\n                subject: \"Failed: ${currentBuild.fullDisplayName}\",\n                body: \"Test execution failed. Check console output at ${env.BUILD_URL}\",\n                to: 'team@example.com'\n            )\n        }\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"gradle-pipeline",children:"Gradle Pipeline"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-groovy",children:"pipeline {\n    agent any\n\n    tools {\n        gradle 'Gradle-8'\n        jdk 'JDK-17'\n    }\n\n    stages {\n        stage('Checkout') {\n            steps {\n                checkout scm\n            }\n        }\n\n        stage('Build and Test') {\n            steps {\n                sh './gradlew clean test aggregate'\n            }\n        }\n\n        stage('Publish Reports') {\n            steps {\n                publishHTML([\n                    reportDir: 'build/reports/serenity',\n                    reportFiles: 'index.html',\n                    reportName: 'Serenity Report',\n                    keepAll: true,\n                    alwaysLinkToLastBuild: true\n                ])\n            }\n        }\n    }\n\n    post {\n        always {\n            junit '**/build/test-results/test/*.xml'\n        }\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"parallel-execution-in-jenkins",children:"Parallel Execution in Jenkins"}),"\n",(0,t.jsx)(n.p,{children:"Run tests in parallel across multiple nodes:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-groovy",children:"pipeline {\n    agent none\n\n    stages {\n        stage('Parallel Tests') {\n            parallel {\n                stage('Chrome Tests') {\n                    agent { label 'chrome' }\n                    steps {\n                        sh 'mvn verify -Dwebdriver.driver=chrome'\n                    }\n                }\n                stage('Firefox Tests') {\n                    agent { label 'firefox' }\n                    steps {\n                        sh 'mvn verify -Dwebdriver.driver=firefox'\n                    }\n                }\n                stage('Edge Tests') {\n                    agent { label 'edge' }\n                    steps {\n                        sh 'mvn verify -Dwebdriver.driver=edge'\n                    }\n                }\n            }\n        }\n\n        stage('Aggregate Reports') {\n            agent any\n            steps {\n                publishHTML([\n                    reportDir: 'target/site/serenity',\n                    reportFiles: 'index.html',\n                    reportName: 'Consolidated Serenity Report'\n                ])\n            }\n        }\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"jenkins-configuration-with-parameters",children:"Jenkins Configuration with Parameters"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-groovy",children:"pipeline {\n    agent any\n\n    parameters {\n        choice(\n            name: 'ENVIRONMENT',\n            choices: ['dev', 'staging', 'production'],\n            description: 'Environment to test'\n        )\n        choice(\n            name: 'BROWSER',\n            choices: ['chrome', 'firefox', 'edge'],\n            description: 'Browser to use'\n        )\n        string(\n            name: 'TAGS',\n            defaultValue: '',\n            description: 'Tags to filter tests (e.g., @smoke, @regression)'\n        )\n    }\n\n    stages {\n        stage('Test') {\n            steps {\n                script {\n                    def baseUrl = \"\"\n                    switch(params.ENVIRONMENT) {\n                        case 'dev':\n                            baseUrl = 'https://dev.example.com'\n                            break\n                        case 'staging':\n                            baseUrl = 'https://staging.example.com'\n                            break\n                        case 'production':\n                            baseUrl = 'https://www.example.com'\n                            break\n                    }\n\n                    sh \"\"\"\n                        mvn clean verify \\\n                        -Dwebdriver.driver=${params.BROWSER} \\\n                        -Dwebdriver.base.url=${baseUrl} \\\n                        -Dcucumber.filter.tags='${params.TAGS}'\n                    \"\"\"\n                }\n            }\n        }\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"installing-jenkins-plugins",children:"Installing Jenkins Plugins"}),"\n",(0,t.jsx)(n.p,{children:"Required plugins:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Install via Jenkins CLI or UI\n- HTML Publisher Plugin\n- JUnit Plugin\n- Pipeline Plugin\n- Git Plugin\n- Email Extension Plugin\n"})}),"\n",(0,t.jsx)(n.h2,{id:"gitlab-ci",children:"GitLab CI"}),"\n",(0,t.jsx)(n.p,{children:"GitLab CI is integrated directly into GitLab repositories."}),"\n",(0,t.jsx)(n.h3,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Create ",(0,t.jsx)(n.code,{children:".gitlab-ci.yml"})," in your repository root:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'image: maven:3.9-eclipse-temurin-17\n\nstages:\n  - test\n  - report\n\nvariables:\n  MAVEN_OPTS: "-Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository"\n\ncache:\n  paths:\n    - .m2/repository\n\ntest:\n  stage: test\n  script:\n    - mvn clean verify\n  artifacts:\n    when: always\n    paths:\n      - target/site/serenity\n    expire_in: 30 days\n    reports:\n      junit:\n        - target/failsafe-reports/TEST-*.xml\n\npages:\n  stage: report\n  script:\n    - mkdir -p public\n    - cp -r target/site/serenity/* public/\n  artifacts:\n    paths:\n      - public\n  only:\n    - main\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Reports will be available at:"})," ",(0,t.jsx)(n.code,{children:"https://<username>.gitlab.io/<project>/"})]}),"\n",(0,t.jsx)(n.h3,{id:"gradle-version-1",children:"Gradle Version"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'image: gradle:8-jdk17\n\nstages:\n  - test\n  - report\n\nvariables:\n  GRADLE_OPTS: "-Dorg.gradle.daemon=false"\n\ncache:\n  paths:\n    - .gradle\n\ntest:\n  stage: test\n  script:\n    - gradle clean test aggregate\n  artifacts:\n    when: always\n    paths:\n      - build/reports/serenity\n    expire_in: 30 days\n    reports:\n      junit:\n        - build/test-results/test/TEST-*.xml\n\npages:\n  stage: report\n  script:\n    - mkdir -p public\n    - cp -r build/reports/serenity/* public/\n  artifacts:\n    paths:\n      - public\n  only:\n    - main\n'})}),"\n",(0,t.jsx)(n.h3,{id:"multiple-environments",children:"Multiple Environments"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'stages:\n  - test\n\n.test_template:\n  image: maven:3.9-eclipse-temurin-17\n  script:\n    - mvn clean verify -Dwebdriver.base.url=$BASE_URL\n  artifacts:\n    when: always\n    paths:\n      - target/site/serenity\n    expire_in: 7 days\n\ntest:dev:\n  extends: .test_template\n  variables:\n    BASE_URL: "https://dev.example.com"\n  only:\n    - develop\n\ntest:staging:\n  extends: .test_template\n  variables:\n    BASE_URL: "https://staging.example.com"\n  only:\n    - staging\n\ntest:production:\n  extends: .test_template\n  variables:\n    BASE_URL: "https://www.example.com"\n  only:\n    - main\n  when: manual\n'})}),"\n",(0,t.jsx)(n.h3,{id:"parallel-jobs",children:"Parallel Jobs"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"test:\n  stage: test\n  parallel:\n    matrix:\n      - BROWSER: [chrome, firefox]\n        SUITE: [smoke, regression]\n  script:\n    - mvn verify -Dwebdriver.driver=$BROWSER -Dtags=@$SUITE\n  artifacts:\n    when: always\n    paths:\n      - target/site/serenity\n    reports:\n      junit:\n        - target/failsafe-reports/TEST-*.xml\n"})}),"\n",(0,t.jsx)(n.h2,{id:"azure-pipelines",children:"Azure Pipelines"}),"\n",(0,t.jsx)(n.p,{children:"For projects hosted on Azure DevOps:"}),"\n",(0,t.jsxs)(n.p,{children:["Create ",(0,t.jsx)(n.code,{children:"azure-pipelines.yml"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"trigger:\n  - main\n  - develop\n\npool:\n  vmImage: 'ubuntu-latest'\n\nvariables:\n  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n\nsteps:\n- task: JavaToolInstaller@0\n  inputs:\n    versionSpec: '17'\n    jdkArchitectureOption: 'x64'\n    jdkSourceOption: 'PreInstalled'\n\n- task: Cache@2\n  inputs:\n    key: 'maven | \"$(Agent.OS)\" | **/pom.xml'\n    path: $(MAVEN_CACHE_FOLDER)\n  displayName: Cache Maven packages\n\n- task: Maven@3\n  inputs:\n    mavenPomFile: 'pom.xml'\n    goals: 'clean verify'\n    options: '-B'\n  displayName: 'Run Serenity Tests'\n\n- task: PublishTestResults@2\n  condition: always()\n  inputs:\n    testResultsFormat: 'JUnit'\n    testResultsFiles: '**/target/failsafe-reports/TEST-*.xml'\n    testRunTitle: 'Serenity Test Results'\n\n- task: PublishBuildArtifacts@1\n  condition: always()\n  inputs:\n    PathtoPublish: 'target/site/serenity'\n    ArtifactName: 'serenity-report'\n  displayName: 'Publish Serenity Report'\n"})}),"\n",(0,t.jsx)(n.h2,{id:"docker-integration",children:"Docker Integration"}),"\n",(0,t.jsx)(n.p,{children:"Run tests in Docker containers for consistency."}),"\n",(0,t.jsx)(n.h3,{id:"dockerfile-for-tests",children:"Dockerfile for Tests"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dockerfile",children:'FROM maven:3.9-eclipse-temurin-17\n\n# Install Chrome\nRUN wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add - \\\n    && echo "deb http://dl.google.com/linux/chrome/deb/ stable main" >> /etc/apt/sources.list.d/google.list \\\n    && apt-get update \\\n    && apt-get install -y google-chrome-stable \\\n    && rm -rf /var/lib/apt/lists/*\n\nWORKDIR /app\n\nCOPY pom.xml .\nRUN mvn dependency:go-offline\n\nCOPY src ./src\n\nCMD ["mvn", "clean", "verify"]\n'})}),"\n",(0,t.jsx)(n.h3,{id:"docker-compose",children:"Docker Compose"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"version: '3.8'\n\nservices:\n  serenity-tests:\n    build: .\n    volumes:\n      - ./target:/app/target\n    environment:\n      - WEBDRIVER_DRIVER=chrome\n      - WEBDRIVER_BASE_URL=https://example.com\n"})}),"\n",(0,t.jsx)(n.h3,{id:"github-actions-with-docker",children:"GitHub Actions with Docker"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"- name: Build and run tests in Docker\n  run: |\n    docker build -t serenity-tests .\n    docker run --rm -v $PWD/target:/app/target serenity-tests\n"})}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"1-use-headless-browsers",children:"1. Use Headless Browsers"}),"\n",(0,t.jsx)(n.p,{children:"Configure headless mode for CI environments:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"serenity.conf:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-hocon",children:'webdriver {\n  driver = chrome\n  capabilities {\n    browserName = "chrome"\n    "goog:chromeOptions" {\n      args = ["--headless", "--no-sandbox", "--disable-dev-shm-usage", "--disable-gpu"]\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"2-optimize-build-times",children:"2. Optimize Build Times"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Cache dependencies:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"# GitHub Actions\n- uses: actions/cache@v3\n  with:\n    path: ~/.m2/repository\n    key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n\n# GitLab CI\ncache:\n  paths:\n    - .m2/repository\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Skip unnecessary phases:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mvn verify -DskipTests  # Skip test execution\nmvn verify -Dmaven.test.skip=true  # Skip test compilation\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-fail-fast",children:"3. Fail Fast"}),"\n",(0,t.jsx)(n.p,{children:"Configure builds to fail fast on critical errors:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"strategy:\n  fail-fast: true  # Stop all jobs if one fails\n"})}),"\n",(0,t.jsx)(n.h3,{id:"4-tag-based-execution",children:"4. Tag-Based Execution"}),"\n",(0,t.jsx)(n.p,{children:"Run different test suites in different pipelines:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Smoke tests on every commit\nmvn verify -Dcucumber.filter.tags="@smoke"\n\n# Full regression on main branch\nmvn verify -Dcucumber.filter.tags="@regression"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"5-separate-test-stages",children:"5. Separate Test Stages"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"stages:\n  - unit-tests\n  - integration-tests\n  - smoke-tests\n  - regression-tests\n"})}),"\n",(0,t.jsx)(n.h3,{id:"6-manage-secrets-securely",children:"6. Manage Secrets Securely"}),"\n",(0,t.jsx)(n.p,{children:"Never commit credentials:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"# GitHub Actions\nenv:\n  API_KEY: ${{ secrets.API_KEY }}\n\n# GitLab CI\nvariables:\n  API_KEY: ${{ secrets.API_KEY }}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"7-retry-flaky-tests",children:"7. Retry Flaky Tests"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-groovy",children:"// Jenkins\nretry(3) {\n    sh 'mvn verify'\n}\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"# GitLab CI\ntest:\n  retry:\n    max: 2\n    when: runner_system_failure\n"})}),"\n",(0,t.jsx)(n.h3,{id:"8-generate-build-badges",children:"8. Generate Build Badges"}),"\n",(0,t.jsx)(n.p,{children:"Add status badges to your README:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"GitHub Actions:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-markdown",children:"![Tests](https://github.com/username/repo/actions/workflows/serenity-tests.yml/badge.svg)\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"GitLab CI:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-markdown",children:"![pipeline status](https://gitlab.com/username/project/badges/main/pipeline.svg)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"issue-tests-fail-only-in-ci",children:"Issue: Tests fail only in CI"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Common causes:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Browser not installed or incompatible version"}),"\n",(0,t.jsx)(n.li,{children:"Missing display server (X11)"}),"\n",(0,t.jsx)(n.li,{children:"Insufficient memory"}),"\n",(0,t.jsx)(n.li,{children:"Network/firewall issues"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'# Add display server for Linux\nbefore_script:\n  - export DISPLAY=:99\n  - Xvfb :99 -screen 0 1920x1080x24 &\n\n# Increase memory\nenv:\n  MAVEN_OPTS: "-Xmx2g"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"issue-reports-not-publishing",children:"Issue: Reports not publishing"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Check:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Correct path to report directory"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"if: always()"})," condition is set"]}),"\n",(0,t.jsx)(n.li,{children:"Sufficient permissions"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"issue-slow-builds",children:"Issue: Slow builds"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Cache dependencies"}),"\n",(0,t.jsx)(n.li,{children:"Use parallel execution"}),"\n",(0,t.jsx)(n.li,{children:"Run subset of tests (smoke tests first)"}),"\n",(0,t.jsx)(n.li,{children:"Use Docker layer caching"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"complete-example-github-actions-with-all-features",children:"Complete Example: GitHub Actions with All Features"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Serenity BDD - Production Ready\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n  schedule:\n    - cron: '0 2 * * *'  # Daily at 2 AM\n  workflow_dispatch:\n\nenv:\n  JAVA_VERSION: '17'\n  MAVEN_OPTS: '-Xmx2g'\n\njobs:\n  smoke-tests:\n    name: Smoke Tests\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v4\n\n    - name: Set up JDK\n      uses: actions/setup-java@v4\n      with:\n        java-version: ${{ env.JAVA_VERSION }}\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run smoke tests\n      run: mvn verify -Dcucumber.filter.tags=\"@smoke\"\n\n    - name: Upload smoke test report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: smoke-test-report\n        path: target/site/serenity\n\n  regression-tests:\n    name: Regression Tests\n    runs-on: ubuntu-latest\n    needs: smoke-tests\n    if: github.ref == 'refs/heads/main'\n\n    strategy:\n      matrix:\n        browser: [chrome, firefox]\n      fail-fast: false\n\n    steps:\n    - uses: actions/checkout@v4\n\n    - name: Set up JDK\n      uses: actions/setup-java@v4\n      with:\n        java-version: ${{ env.JAVA_VERSION }}\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run regression tests\n      run: mvn verify -Dwebdriver.driver=${{ matrix.browser }}\n\n    - name: Upload report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: report-${{ matrix.browser }}\n        path: target/site/serenity\n\n  publish-report:\n    name: Publish Report to GitHub Pages\n    runs-on: ubuntu-latest\n    needs: [smoke-tests, regression-tests]\n    if: always() && github.ref == 'refs/heads/main'\n\n    permissions:\n      contents: write\n      pages: write\n\n    steps:\n    - uses: actions/download-artifact@v4\n      with:\n        name: smoke-test-report\n        path: reports/smoke\n\n    - name: Deploy to GitHub Pages\n      uses: peaceiris/actions-gh-pages@v3\n      with:\n        github_token: ${{ secrets.GITHUB_TOKEN }}\n        publish_dir: ./reports\n"})}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Learn about ",(0,t.jsx)(n.a,{href:"/docs/junit5/parallel-execution",children:"Parallel Execution"})," to speed up CI builds"]}),"\n",(0,t.jsxs)(n.li,{children:["Explore ",(0,t.jsx)(n.a,{href:"/docs/tutorials/data-driven-testing",children:"Data-Driven Testing"})," for comprehensive test coverage"]}),"\n",(0,t.jsxs)(n.li,{children:["Check ",(0,t.jsx)(n.a,{href:"/docs/reference/serenity-properties",children:"Serenity Configuration"})," for optimizing CI performance"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.github.com/en/actions",children:"GitHub Actions Documentation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.jenkins.io/doc/book/pipeline/",children:"Jenkins Pipeline Documentation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.gitlab.com/ee/ci/",children:"GitLab CI/CD Documentation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://hub.docker.com/r/serenity",children:"Serenity BDD on Docker Hub"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>a,x:()=>l});var i=s(6540);const t={},r=i.createContext(t);function a(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);
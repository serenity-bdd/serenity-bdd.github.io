"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[4968],{8367(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"playwright/playwright_screenplay_tutorial","title":"Tutorial: Screenplay con TodoMVC","description":"Este tutorial te guia en la construccion de un conjunto de pruebas de Serenity Playwright usando el Screenplay Pattern para la aplicacion TodoMVC. Lo construiremos iterativamente, comenzando con los fundamentos y agregando progresivamente patrones mas sofisticados.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/playwright/screenplay-tutorial.md","sourceDirName":"playwright","slug":"/playwright/playwright_screenplay_tutorial","permalink":"/es/docs/playwright/playwright_screenplay_tutorial","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/playwright/screenplay-tutorial.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"id":"playwright_screenplay_tutorial","title":"Tutorial: Screenplay con TodoMVC","sidebar_position":8},"sidebar":"tutorialSidebar","previous":{"title":"Tutorial: Probando TodoMVC","permalink":"/es/docs/playwright/playwright_tutorial_todomvc"},"next":{"title":"Integracion con Cucumber","permalink":"/es/docs/playwright/playwright_cucumber"}}');var a=t(4848),s=t(8453);const i={id:"playwright_screenplay_tutorial",title:"Tutorial: Screenplay con TodoMVC",sidebar_position:8},r="Tutorial: Construyendo un conjunto de pruebas con Screenplay",l={},d=[{value:"Lo que vamos a construir",id:"lo-que-vamos-a-construir",level:2},{value:"Configuracion del proyecto",id:"configuracion-del-proyecto",level:2},{value:"Parte 1: Nuestra primera prueba",id:"parte-1-nuestra-primera-prueba",level:2},{value:"Paso 1: Crear la clase base de prueba",id:"paso-1-crear-la-clase-base-de-prueba",level:3},{value:"Paso 2: Definir Target de UI",id:"paso-2-definir-target-de-ui",level:3},{value:"Paso 3: Crear el primer Task",id:"paso-3-crear-el-primer-task",level:3},{value:"Paso 4: Crear el Task para agregar todo",id:"paso-4-crear-el-task-para-agregar-todo",level:3},{value:"Paso 5: Crear una Question",id:"paso-5-crear-una-question",level:3},{value:"Paso 6: Escribir la prueba",id:"paso-6-escribir-la-prueba",level:3},{value:"Parte 2: Expandiendo nuestro conjunto de pruebas",id:"parte-2-expandiendo-nuestro-conjunto-de-pruebas",level:2},{value:"Agregando mas Target",id:"agregando-mas-target",level:3},{value:"Task Complete",id:"task-complete",level:3},{value:"Task Delete",id:"task-delete",level:3},{value:"Task de filtrado",id:"task-de-filtrado",level:3},{value:"Mas Question",id:"mas-question",level:3},{value:"Parte 3: Conjunto de pruebas completo",id:"parte-3-conjunto-de-pruebas-completo",level:2},{value:"Pruebas de agregar todos",id:"pruebas-de-agregar-todos",level:3},{value:"Pruebas de completar todos",id:"pruebas-de-completar-todos",level:3},{value:"Pruebas de filtrado",id:"pruebas-de-filtrado",level:3},{value:"Pruebas de eliminar",id:"pruebas-de-eliminar",level:3},{value:"Conclusiones clave",id:"conclusiones-clave",level:2},{value:"Beneficios del Screenplay Pattern",id:"beneficios-del-screenplay-pattern",level:3},{value:"Estructura del proyecto",id:"estructura-del-proyecto",level:3},{value:"Siguientes pasos",id:"siguientes-pasos",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"tutorial-construyendo-un-conjunto-de-pruebas-con-screenplay",children:"Tutorial: Construyendo un conjunto de pruebas con Screenplay"})}),"\n",(0,a.jsxs)(n.p,{children:["Este tutorial te guia en la construccion de un conjunto de pruebas de Serenity Playwright usando el Screenplay Pattern para la ",(0,a.jsx)(n.a,{href:"https://todomvc.com/examples/react/dist/",children:"aplicacion TodoMVC"}),". Lo construiremos iterativamente, comenzando con los fundamentos y agregando progresivamente patrones mas sofisticados."]}),"\n",(0,a.jsx)(n.h2,{id:"lo-que-vamos-a-construir",children:"Lo que vamos a construir"}),"\n",(0,a.jsx)(n.p,{children:"Al final de este tutorial, tendras un conjunto de pruebas completo con:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Target"})," para todos los elementos de UI"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Task"})," para acciones del usuario (agregar, completar, eliminar, filtrar todos)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Question"})," para consultar el estado de la aplicacion"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Pruebas"})," usando aserciones ",(0,a.jsx)(n.code,{children:"Ensure.that()"})]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"configuracion-del-proyecto",children:"Configuracion del proyecto"}),"\n",(0,a.jsx)(n.p,{children:"Crea un proyecto Maven con estas dependencias:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:"<properties>\n    <serenity.version>5.1.1</serenity.version>\n    <playwright.version>1.58.0</playwright.version>\n</properties>\n\n<dependencies>\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-screenplay-playwright</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-screenplay</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-ensure</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-junit5</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>com.microsoft.playwright</groupId>\n        <artifactId>playwright</artifactId>\n        <version>${playwright.version}</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.junit.jupiter</groupId>\n        <artifactId>junit-jupiter</artifactId>\n        <version>6.0.1</version>\n        <scope>test</scope>\n    </dependency>\n</dependencies>\n"})}),"\n",(0,a.jsx)(n.h2,{id:"parte-1-nuestra-primera-prueba",children:"Parte 1: Nuestra primera prueba"}),"\n",(0,a.jsx)(n.p,{children:"Comencemos con la prueba mas simple posible - agregar un solo elemento todo."}),"\n",(0,a.jsx)(n.h3,{id:"paso-1-crear-la-clase-base-de-prueba",children:"Paso 1: Crear la clase base de prueba"}),"\n",(0,a.jsx)(n.p,{children:"Primero, crea una clase base que configure nuestro Actor con Ability de Playwright:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package todomvc.screenplay;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport org.junit.jupiter.api.BeforeEach;\n\npublic abstract class ScreenplayPlaywrightTest {\n\n    protected Actor toby;\n\n    @BeforeEach\n    void setUpPlaywright() {\n        toby = Actor.named("Toby");\n        toby.can(BrowseTheWebWithPlaywright.usingTheDefaultConfiguration());\n    }\n\n    // No se necesita @AfterEach - BrowseTheWebWithPlaywright automaticamente\n    // limpia los recursos del navegador cuando la prueba termina\n}\n'})}),"\n",(0,a.jsx)(n.admonition,{title:"Limpieza automatica",type:"tip",children:(0,a.jsxs)(n.p,{children:["La Ability ",(0,a.jsx)(n.code,{children:"BrowseTheWebWithPlaywright"})," se suscribe a los eventos del ciclo de vida de Serenity y automaticamente cierra el navegador, contexto y pagina cuando cada prueba se completa. No necesitas escribir ning\xfan codigo de limpieza!"]})}),"\n",(0,a.jsx)(n.h3,{id:"paso-2-definir-target-de-ui",children:"Paso 2: Definir Target de UI"}),"\n",(0,a.jsx)(n.p,{children:"Crea una clase para contener todos los localizadores de elementos de UI:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package todomvc.screenplay.ui;\n\nimport net.serenitybdd.screenplay.playwright.Target;\n\npublic class TodoList {\n\n    public static final Target NEW_TODO_INPUT =\n        Target.the("new todo input")\n              .locatedBy("[placeholder=\'What needs to be done?\']");\n\n    public static final Target TODO_ITEMS =\n        Target.the("todo items")\n              .locatedBy(".todo-list li");\n\n    public static final Target TODO_ITEM_LABELS =\n        Target.the("todo item labels")\n              .locatedBy(".todo-list li label");\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"paso-3-crear-el-primer-task",children:"Paso 3: Crear el primer Task"}),"\n",(0,a.jsx)(n.p,{children:"Crea un Task para abrir la aplicacion TodoMVC:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package todomvc.screenplay.tasks;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.playwright.interactions.Open;\nimport net.serenitybdd.annotations.Step;\n\npublic class OpenTodoMvcApp implements Task {\n\n    private static final String URL = "https://todomvc.com/examples/react/dist/";\n\n    @Override\n    @Step("{0} opens the TodoMVC application")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(Open.url(URL));\n    }\n\n    public static OpenTodoMvcApp onTheHomePage() {\n        return new OpenTodoMvcApp();\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"paso-4-crear-el-task-para-agregar-todo",children:"Paso 4: Crear el Task para agregar todo"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package todomvc.screenplay.tasks;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.playwright.interactions.Enter;\nimport net.serenitybdd.screenplay.playwright.interactions.Press;\nimport net.serenitybdd.annotations.Step;\nimport todomvc.screenplay.ui.TodoList;\n\npublic class AddATodoItem implements Task {\n\n    private final String todoItem;\n\n    public AddATodoItem(String todoItem) {\n        this.todoItem = todoItem;\n    }\n\n    @Override\n    @Step("{0} adds a todo item called \'#todoItem\'")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Enter.theValue(todoItem).into(TodoList.NEW_TODO_INPUT),\n            Press.keys("Enter")\n        );\n    }\n\n    public static AddATodoItem called(String todoItem) {\n        return new AddATodoItem(todoItem);\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"paso-5-crear-una-question",children:"Paso 5: Crear una Question"}),"\n",(0,a.jsx)(n.p,{children:"Crea una Question para contar los todos visibles:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package todomvc.screenplay.questions;\n\nimport net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport todomvc.screenplay.ui.TodoList;\n\npublic class TheVisibleTodos {\n\n    public static Question<Integer> count() {\n        return Question.about("visible todo count").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(TodoList.TODO_ITEMS.asSelector())\n                .count()\n        );\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"paso-6-escribir-la-prueba",children:"Paso 6: Escribir la prueba"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package todomvc.screenplay;\n\nimport net.serenitybdd.junit5.SerenityJUnit5Extension;\nimport net.serenitybdd.screenplay.ensure.Ensure;\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport todomvc.screenplay.questions.TheVisibleTodos;\nimport todomvc.screenplay.tasks.AddATodoItem;\nimport todomvc.screenplay.tasks.OpenTodoMvcApp;\n\n@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When adding todos")\nclass WhenAddingTodosTest extends ScreenplayPlaywrightTest {\n\n    @Test\n    @DisplayName("should add a single todo item")\n    void shouldAddSingleTodoItem() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Buy milk"),\n            Ensure.that(TheVisibleTodos.count()).isEqualTo(1)\n        );\n    }\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["Ejecutalo con ",(0,a.jsx)(n.code,{children:"mvn clean verify"})," - deberias ver una prueba pasando con un reporte de Serenity."]}),"\n",(0,a.jsx)(n.h2,{id:"parte-2-expandiendo-nuestro-conjunto-de-pruebas",children:"Parte 2: Expandiendo nuestro conjunto de pruebas"}),"\n",(0,a.jsx)(n.p,{children:"Ahora agreguemos mas capacidades."}),"\n",(0,a.jsx)(n.h3,{id:"agregando-mas-target",children:"Agregando mas Target"}),"\n",(0,a.jsxs)(n.p,{children:["Expande la clase ",(0,a.jsx)(n.code,{children:"TodoList"})," con mas localizadores:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'public class TodoList {\n\n    // Elementos de entrada\n    public static final Target NEW_TODO_INPUT =\n        Target.the("new todo input")\n              .locatedBy("[placeholder=\'What needs to be done?\']");\n\n    // Elementos todo\n    public static final Target TODO_ITEMS =\n        Target.the("todo items")\n              .locatedBy(".todo-list li");\n\n    public static final Target TODO_ITEM_LABELS =\n        Target.the("todo item labels")\n              .locatedBy(".todo-list li label");\n\n    // Target dinamicos para elementos especificos\n    public static Target todoItemCalled(String text) {\n        return Target.the("todo \'" + text + "\'")\n                     .locatedBy(".todo-list li:has-text(\'" + text + "\')");\n    }\n\n    public static Target checkboxFor(String text) {\n        return Target.the("checkbox for \'" + text + "\'")\n                     .locatedBy(".todo-list li:has-text(\'" + text + "\') .toggle");\n    }\n\n    public static Target deleteButtonFor(String text) {\n        return Target.the("delete button for \'" + text + "\'")\n                     .locatedBy(".todo-list li:has-text(\'" + text + "\') .destroy");\n    }\n\n    // Elementos del pie de pagina\n    public static final Target TODO_COUNT =\n        Target.the("todo count")\n              .locatedBy(".todo-count");\n\n    public static final Target CLEAR_COMPLETED_BUTTON =\n        Target.the("clear completed button")\n              .locatedBy(".clear-completed");\n\n    // Filtros\n    public static final Target ALL_FILTER =\n        Target.the("All filter")\n              .locatedBy(".filters a:has-text(\'All\')");\n\n    public static final Target ACTIVE_FILTER =\n        Target.the("Active filter")\n              .locatedBy(".filters a:has-text(\'Active\')");\n\n    public static final Target COMPLETED_FILTER =\n        Target.the("Completed filter")\n              .locatedBy(".filters a:has-text(\'Completed\')");\n\n    public static final Target SELECTED_FILTER =\n        Target.the("selected filter")\n              .locatedBy(".filters a.selected");\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"task-complete",children:"Task Complete"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"package todomvc.screenplay.tasks;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.playwright.interactions.Click;\nimport net.serenitybdd.annotations.Step;\nimport todomvc.screenplay.ui.TodoList;\n\npublic class Complete implements Task {\n\n    private final String todoItem;\n\n    public Complete(String todoItem) {\n        this.todoItem = todoItem;\n    }\n\n    @Override\n    @Step(\"{0} completes the todo item '#todoItem'\")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Click.on(TodoList.checkboxFor(todoItem))\n        );\n    }\n\n    public static Complete todoItem(String todoItem) {\n        return new Complete(todoItem);\n    }\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"task-delete",children:"Task Delete"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"package todomvc.screenplay.tasks;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.playwright.interactions.Click;\nimport net.serenitybdd.screenplay.playwright.interactions.Hover;\nimport net.serenitybdd.annotations.Step;\nimport todomvc.screenplay.ui.TodoList;\n\npublic class Delete implements Task {\n\n    private final String todoItem;\n\n    public Delete(String todoItem) {\n        this.todoItem = todoItem;\n    }\n\n    @Override\n    @Step(\"{0} deletes the todo item '#todoItem'\")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Hover.over(TodoList.todoItemCalled(todoItem)),\n            Click.on(TodoList.deleteButtonFor(todoItem))\n        );\n    }\n\n    public static Delete theTodoItem(String todoItem) {\n        return new Delete(todoItem);\n    }\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"task-de-filtrado",children:"Task de filtrado"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package todomvc.screenplay.tasks;\n\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.playwright.interactions.Click;\nimport todomvc.screenplay.ui.TodoList;\n\npublic class FilterTodos {\n\n    public static Task toShowAll() {\n        return Task.where("{0} filters to show all todos",\n            Click.on(TodoList.ALL_FILTER)\n        );\n    }\n\n    public static Task toShowActive() {\n        return Task.where("{0} filters to show active todos",\n            Click.on(TodoList.ACTIVE_FILTER)\n        );\n    }\n\n    public static Task toShowCompleted() {\n        return Task.where("{0} filters to show completed todos",\n            Click.on(TodoList.COMPLETED_FILTER)\n        );\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"mas-question",children:"Mas Question"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// TheVisibleTodos.java - expandido\npackage todomvc.screenplay.questions;\n\nimport net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport todomvc.screenplay.ui.TodoList;\n\nimport java.util.Collection;\n\npublic class TheVisibleTodos {\n\n    public static Question<Collection<String>> displayed() {\n        return Question.about("the visible todos").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(TodoList.TODO_ITEM_LABELS.asSelector())\n                .allTextContents()\n        );\n    }\n\n    public static Question<Integer> count() {\n        return Question.about("visible todo count").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(TodoList.TODO_ITEMS.asSelector())\n                .count()\n        );\n    }\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// TheRemainingCount.java\npackage todomvc.screenplay.questions;\n\nimport net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport todomvc.screenplay.ui.TodoList;\n\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class TheRemainingCount {\n\n    private static final Pattern COUNT_PATTERN = Pattern.compile("(\\\\d+)");\n\n    public static Question<Integer> value() {\n        return Question.about("the remaining count").answeredBy(actor -> {\n            String text = BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(TodoList.TODO_COUNT.asSelector())\n                .textContent();\n\n            Matcher matcher = COUNT_PATTERN.matcher(text);\n            return matcher.find() ? Integer.parseInt(matcher.group(1)) : 0;\n        });\n    }\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// TheCurrentFilter.java\npackage todomvc.screenplay.questions;\n\nimport net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport todomvc.screenplay.ui.TodoList;\n\npublic class TheCurrentFilter {\n\n    public static Question<String> selected() {\n        return Question.about("the current filter").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(TodoList.SELECTED_FILTER.asSelector())\n                .textContent()\n        );\n    }\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// TheTodoItem.java - constructor fluido de Question\npackage todomvc.screenplay.questions;\n\nimport net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport todomvc.screenplay.ui.TodoList;\n\npublic class TheTodoItem {\n\n    private final String todoItem;\n\n    public TheTodoItem(String todoItem) {\n        this.todoItem = todoItem;\n    }\n\n    public static TheTodoItem called(String todoItem) {\n        return new TheTodoItem(todoItem);\n    }\n\n    public Question<Boolean> exists() {\n        String item = todoItem;\n        return Question.about("whether \'" + item + "\' exists").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(TodoList.todoItemCalled(item).asSelector())\n                .count() > 0\n        );\n    }\n\n    public Question<Boolean> isCompleted() {\n        String item = todoItem;\n        return Question.about("whether \'" + item + "\' is completed").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(TodoList.todoItemCalled(item).asSelector())\n                .getAttribute("class")\n                .contains("completed")\n        );\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"parte-3-conjunto-de-pruebas-completo",children:"Parte 3: Conjunto de pruebas completo"}),"\n",(0,a.jsx)(n.p,{children:"Ahora tenemos todo para escribir un conjunto de pruebas completo:"}),"\n",(0,a.jsx)(n.h3,{id:"pruebas-de-agregar-todos",children:"Pruebas de agregar todos"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When adding todos (Screenplay)")\nclass WhenAddingTodosScreenplayTest extends ScreenplayPlaywrightTest {\n\n    @Test\n    @DisplayName("should add a single todo item")\n    void shouldAddSingleTodoItem() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Buy milk"),\n            Ensure.that(TheVisibleTodos.count()).isEqualTo(1),\n            Ensure.that(TheTodoItem.called("Buy milk").exists()).isTrue()\n        );\n    }\n\n    @Test\n    @DisplayName("should add multiple todo items")\n    void shouldAddMultipleTodoItems() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Buy milk"),\n            AddATodoItem.called("Walk the dog"),\n            AddATodoItem.called("Do laundry"),\n            Ensure.that(TheVisibleTodos.displayed())\n                .containsExactly("Buy milk", "Walk the dog", "Do laundry")\n        );\n    }\n\n    @Test\n    @DisplayName("should update remaining count when adding todos")\n    void shouldUpdateRemainingCountWhenAddingTodos() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Task 1"),\n            Ensure.that(TheRemainingCount.value()).isEqualTo(1),\n\n            AddATodoItem.called("Task 2"),\n            Ensure.that(TheRemainingCount.value()).isEqualTo(2),\n\n            AddATodoItem.called("Task 3"),\n            Ensure.that(TheRemainingCount.value()).isEqualTo(3)\n        );\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"pruebas-de-completar-todos",children:"Pruebas de completar todos"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When completing todos (Screenplay)")\nclass WhenCompletingTodosScreenplayTest extends ScreenplayPlaywrightTest {\n\n    @BeforeEach\n    void setupTodos() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Buy milk"),\n            AddATodoItem.called("Walk the dog"),\n            AddATodoItem.called("Do laundry")\n        );\n    }\n\n    @Test\n    @DisplayName("should mark a todo as completed")\n    void shouldMarkTodoAsCompleted() {\n        toby.attemptsTo(\n            Complete.todoItem("Buy milk"),\n            Ensure.that(TheTodoItem.called("Buy milk").isCompleted()).isTrue(),\n            Ensure.that(TheRemainingCount.value()).isEqualTo(2)\n        );\n    }\n\n    @Test\n    @DisplayName("should clear completed todos")\n    void shouldClearCompletedTodos() {\n        toby.attemptsTo(\n            Complete.todoItem("Buy milk"),\n            Complete.todoItem("Walk the dog"),\n            Click.on(TodoList.CLEAR_COMPLETED_BUTTON),\n            Ensure.that(TheVisibleTodos.displayed()).containsExactly("Do laundry"),\n            Ensure.that(TheVisibleTodos.count()).isEqualTo(1)\n        );\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"pruebas-de-filtrado",children:"Pruebas de filtrado"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When filtering todos (Screenplay)")\nclass WhenFilteringTodosScreenplayTest extends ScreenplayPlaywrightTest {\n\n    @BeforeEach\n    void setupTodos() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Buy milk"),\n            AddATodoItem.called("Walk the dog"),\n            AddATodoItem.called("Do laundry"),\n            Complete.todoItem("Walk the dog")\n        );\n    }\n\n    @Test\n    @DisplayName("should show all todos by default")\n    void shouldShowAllTodosByDefault() {\n        toby.attemptsTo(\n            Ensure.that(TheCurrentFilter.selected()).isEqualTo("All"),\n            Ensure.that(TheVisibleTodos.displayed())\n                .containsExactly("Buy milk", "Walk the dog", "Do laundry")\n        );\n    }\n\n    @Test\n    @DisplayName("should filter to show only active todos")\n    void shouldFilterToShowOnlyActiveTodos() {\n        toby.attemptsTo(\n            FilterTodos.toShowActive(),\n            Ensure.that(TheCurrentFilter.selected()).isEqualTo("Active"),\n            Ensure.that(TheVisibleTodos.displayed())\n                .containsExactly("Buy milk", "Do laundry")\n        );\n    }\n\n    @Test\n    @DisplayName("should filter to show only completed todos")\n    void shouldFilterToShowOnlyCompletedTodos() {\n        toby.attemptsTo(\n            FilterTodos.toShowCompleted(),\n            Ensure.that(TheCurrentFilter.selected()).isEqualTo("Completed"),\n            Ensure.that(TheVisibleTodos.displayed()).containsExactly("Walk the dog")\n        );\n    }\n\n    @Test\n    @DisplayName("should switch between filters")\n    void shouldSwitchBetweenFilters() {\n        toby.attemptsTo(\n            FilterTodos.toShowActive(),\n            Ensure.that(TheVisibleTodos.count()).isEqualTo(2),\n\n            FilterTodos.toShowCompleted(),\n            Ensure.that(TheVisibleTodos.count()).isEqualTo(1),\n\n            FilterTodos.toShowAll(),\n            Ensure.that(TheVisibleTodos.count()).isEqualTo(3)\n        );\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"pruebas-de-eliminar",children:"Pruebas de eliminar"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When deleting todos (Screenplay)")\nclass WhenDeletingTodosScreenplayTest extends ScreenplayPlaywrightTest {\n\n    @BeforeEach\n    void setupTodos() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Buy milk"),\n            AddATodoItem.called("Walk the dog"),\n            AddATodoItem.called("Do laundry")\n        );\n    }\n\n    @Test\n    @DisplayName("should delete a todo item")\n    void shouldDeleteTodoItem() {\n        toby.attemptsTo(\n            Delete.theTodoItem("Walk the dog"),\n            Ensure.that(TheTodoItem.called("Walk the dog").exists()).isFalse(),\n            Ensure.that(TheVisibleTodos.displayed())\n                .containsExactly("Buy milk", "Do laundry")\n        );\n    }\n\n    @Test\n    @DisplayName("should update the remaining count after deleting")\n    void shouldUpdateRemainingCountAfterDeleting() {\n        toby.attemptsTo(\n            Ensure.that(TheRemainingCount.value()).isEqualTo(3),\n            Delete.theTodoItem("Buy milk"),\n            Ensure.that(TheRemainingCount.value()).isEqualTo(2)\n        );\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"conclusiones-clave",children:"Conclusiones clave"}),"\n",(0,a.jsx)(n.h3,{id:"beneficios-del-screenplay-pattern",children:"Beneficios del Screenplay Pattern"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Legibilidad"}),": Las pruebas se leen como especificaciones"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'toby.attemptsTo(\n    OpenTodoMvcApp.onTheHomePage(),\n    AddATodoItem.called("Buy milk"),\n    Complete.todoItem("Buy milk"),\n    Ensure.that(TheRemainingCount.value()).isEqualTo(0)\n);\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Reusabilidad"}),": Los Task y Question pueden componerse y reutilizarse"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Mantenibilidad"}),": Los cambios a la UI estan aislados en las definiciones de Target"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Expresividad"}),": La intencion de negocio es clara en cada prueba"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"estructura-del-proyecto",children:"Estructura del proyecto"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"src/test/java/\n\u251c\u2500\u2500 todomvc/screenplay/\n\u2502   \u251c\u2500\u2500 ScreenplayPlaywrightTest.java    # Clase base de prueba\n\u2502   \u251c\u2500\u2500 WhenAddingTodosTest.java         # Clase de prueba\n\u2502   \u251c\u2500\u2500 WhenCompletingTodosTest.java     # Clase de prueba\n\u2502   \u251c\u2500\u2500 WhenFilteringTodosTest.java      # Clase de prueba\n\u2502   \u251c\u2500\u2500 WhenDeletingTodosTest.java       # Clase de prueba\n\u2502   \u251c\u2500\u2500 ui/\n\u2502   \u2502   \u2514\u2500\u2500 TodoList.java                # Target de UI\n\u2502   \u251c\u2500\u2500 tasks/\n\u2502   \u2502   \u251c\u2500\u2500 OpenTodoMvcApp.java\n\u2502   \u2502   \u251c\u2500\u2500 AddATodoItem.java\n\u2502   \u2502   \u251c\u2500\u2500 Complete.java\n\u2502   \u2502   \u251c\u2500\u2500 Delete.java\n\u2502   \u2502   \u2514\u2500\u2500 FilterTodos.java\n\u2502   \u2514\u2500\u2500 questions/\n\u2502       \u251c\u2500\u2500 TheVisibleTodos.java\n\u2502       \u251c\u2500\u2500 TheRemainingCount.java\n\u2502       \u251c\u2500\u2500 TheCurrentFilter.java\n\u2502       \u2514\u2500\u2500 TheTodoItem.java\n"})}),"\n",(0,a.jsx)(n.h2,{id:"siguientes-pasos",children:"Siguientes pasos"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Aprende sobre ",(0,a.jsx)(n.a,{href:"playwright_screenplay",children:"caracteristicas avanzadas de Screenplay"})," incluyendo intercepcion de red y multiples pestanas"]}),"\n",(0,a.jsxs)(n.li,{children:["Explora ",(0,a.jsx)(n.a,{href:"playwright_screenplay#playwright-specific-assertions",children:"aserciones especificas de Playwright"})," con reintento automatico"]}),"\n",(0,a.jsxs)(n.li,{children:["Consulta las ",(0,a.jsx)(n.a,{href:"playwright_best_practices",children:"Mejores practicas"})," para pruebas listas para produccion"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453(e,n,t){t.d(n,{R:()=>i,x:()=>r});var o=t(6540);const a={},s=o.createContext(a);function i(e){const n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);
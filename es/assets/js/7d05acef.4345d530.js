"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[8750],{920(e,s,r){r.r(s),r.d(s,{assets:()=>l,contentTitle:()=>d,default:()=>p,frontMatter:()=>i,metadata:()=>n,toc:()=>t});const n=JSON.parse('{"id":"reporting/reports_custom_info","title":"Campos Personalizados en Reportes","description":"Reportes de Campos Personalizados","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/reporting/reports-custom-info.md","sourceDirName":"reporting","slug":"/reporting/reports_custom_info","permalink":"/es/docs/reporting/reports_custom_info","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/reporting/reports-custom-info.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"reports_custom_info","title":"Campos Personalizados en Reportes","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Integraci\xf3n con JIRA","permalink":"/es/docs/reporting/integrating_with_jira"},"next":{"title":"Selenium Grid","permalink":"/es/docs/cloud/selenium-grid"}}');var a=r(4848),o=r(8453);const i={id:"reports_custom_info",title:"Campos Personalizados en Reportes",sidebar_position:5},d=void 0,l={},t=[{value:"Reportes de Campos Personalizados",id:"reportes-de-campos-personalizados",level:2},{value:"Acceder a variables del sistema",id:"acceder-a-variables-del-sistema",level:3},{value:"Sobrescribir valores de propiedades",id:"sobrescribir-valores-de-propiedades",level:3},{value:"Usar valores predeterminados",id:"usar-valores-predeterminados",level:4},{value:"Ordenar las propiedades personalizadas",id:"ordenar-las-propiedades-personalizadas",level:3},{value:"Un ejemplo completo",id:"un-ejemplo-completo",level:3},{value:"Informaci\xf3n de Build Personalizada",id:"informaci\xf3n-de-build-personalizada",level:2},{value:"Definir informaci\xf3n de build program\xe1ticamente",id:"definir-informaci\xf3n-de-build-program\xe1ticamente",level:2}];function c(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.h2,{id:"reportes-de-campos-personalizados",children:"Reportes de Campos Personalizados"}),"\n",(0,a.jsx)(s.p,{children:"Los campos personalizados pueden incluirse en los reportes, usando valores que se toman de las variables de entorno o se pasan al build mediante propiedades del sistema. Esto puede ser \xfatil si quieres incluir la versi\xf3n del producto o del build, el entorno donde se ejecutaron las pruebas, o la fecha de ejecuci\xf3n de las pruebas."}),"\n",(0,a.jsxs)(s.p,{children:["Puedes agregar campos personalizados a tu reporte configurando propiedades del sistema con el prefijo especial ",(0,a.jsx)(s.code,{children:"report.customfields"}),". Estas pueden ir en tu archivo ",(0,a.jsx)(s.code,{children:"serenity.properties"})," en el directorio ra\xedz de tu proyecto, o puedes pasarlas como opciones de l\xednea de comandos."]}),"\n",(0,a.jsxs)(s.p,{children:["Por ejemplo, podr\xedas agregar las siguientes propiedades a tu archivo ",(0,a.jsx)(s.code,{children:"serenity.properties"}),"."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"report.customfields.environment = Integration\nreport.customfields.ApplicationVersion = 1.2.3\n"})}),"\n",(0,a.jsx)(s.p,{children:"Esto producir\xeda un reporte conteniendo estos valores, como se muestra aqu\xed:"}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"Campos personalizados apareciendo en el reporte de resumen HTML",src:r(8030).A+"",width:"1240",height:"980"})}),"\n",(0,a.jsx)(s.h3,{id:"acceder-a-variables-del-sistema",children:"Acceder a variables del sistema"}),"\n",(0,a.jsxs)(s.p,{children:["Tambi\xe9n podemos acceder a cualquier variable del sistema a la que Java tiene acceso. Por ejemplo, podr\xedamos incluir el nombre del usuario que ejecut\xf3 las pruebas con la variable del sistema ",(0,a.jsx)(s.code,{children:"${USER}"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"report.customfields.user = ${USER}\n"})}),"\n",(0,a.jsx)(s.p,{children:"Esta propiedad resultar\xeda en un reporte como el siguiente:"}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"Los campos personalizados tambi\xe9n pueden incluir variables del sistema",src:r(4488).A+"",width:"1322",height:"492"})}),"\n",(0,a.jsxs)(s.p,{children:["No todas las propiedades del sistema est\xe1n disponibles para Java. Por ejemplo, en sistemas Linux, la variable ",(0,a.jsx)(s.code,{children:"$HOST"})," da el nombre de la m\xe1quina local. Podr\xedamos incluir esto en nuestro reporte agregando la siguiente propiedad:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"report.customfields.host = ${HOST}\n"})}),"\n",(0,a.jsx)(s.p,{children:"Sin embargo, dado que esta variable no est\xe1 disponible para Java, necesitar\xedamos pasarla a Serenity desde la l\xednea de comandos, as\xed:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"mvn serenity:aggregate -DHOST=$HOST\n"})}),"\n",(0,a.jsx)(s.h3,{id:"sobrescribir-valores-de-propiedades",children:"Sobrescribir valores de propiedades"}),"\n",(0,a.jsx)(s.p,{children:"[[custom-report-fields-with-provided-values]]\n.Puedes pasar propiedades del sistema desde la l\xednea de comandos\nimage::custom-reports-with-provided-property.png[]"}),"\n",(0,a.jsxs)(s.p,{children:["Por supuesto puedes pasar otras propiedades, para sobrescribir las que est\xe1n en tu archivo ",(0,a.jsx)(s.code,{children:"serenity.properties"}),". Aqu\xed sobrescribimos la versi\xf3n de la aplicaci\xf3n:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"mvn serenity:aggregate -DHOST=$HOST -Dreport.customfields.ApplicationVersion=1.2.4\n"})}),"\n",(0,a.jsxs)(s.p,{children:["Pero una soluci\xf3n m\xe1s elegante, si sabes que siempre estar\xe1s pasando una variable, es usar una variable m\xe1s corta en tu archivo ",(0,a.jsx)(s.code,{children:"serenity.properties"})," y luego pasar esta. Por ejemplo, aqu\xed usamos la propiedad ",(0,a.jsx)(s.code,{children:"environment"})," para mostrar el entorno actual en las propiedades personalizadas:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"report.customfields.environment = ${environment}\n"})}),"\n",(0,a.jsx)(s.p,{children:"Podemos establecer este valor desde la l\xednea de comandos como se muestra aqu\xed:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"mvn serenity:aggregate -DHOST=$HOST -Denvironment=INT5\n"})}),"\n",(0,a.jsx)(s.h4,{id:"usar-valores-predeterminados",children:"Usar valores predeterminados"}),"\n",(0,a.jsx)(s.p,{children:"Si una variable de entorno no existe, puedes especificar un valor de respaldo."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:'report.customfields.user = ${USER:-Unknown}\nreport.customfields.host = ${HOST:-} # En blanco en lugar de los caracteres literales "${HOST}"\n'})}),"\n",(0,a.jsxs)(s.p,{children:["El mecanismo detr\xe1s de la sustituci\xf3n: ",(0,a.jsxs)(s.a,{href:"https://commons.apache.org/proper/commons-text/apidocs/org/apache/commons/text/StringSubstitutor.html",children:["Apache Commons ",(0,a.jsx)(s.code,{children:"StringSubstitutor"})]})]}),"\n",(0,a.jsx)(s.h3,{id:"ordenar-las-propiedades-personalizadas",children:"Ordenar las propiedades personalizadas"}),"\n",(0,a.jsxs)(s.p,{children:["Por defecto, los campos aparecer\xe1n en un orden arbitrario. Puedes forzar que los campos aparezcan en un orden predeterminado usando el campo ",(0,a.jsx)(s.code,{children:"report.customfields.order"}),":"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"report.customfields.order=ApplicationVersion,environment,user,host\n"})}),"\n",(0,a.jsx)(s.h3,{id:"un-ejemplo-completo",children:"Un ejemplo completo"}),"\n",(0,a.jsx)(s.p,{children:"Un ejemplo completo de estas propiedades y sus varios usos se muestra aqu\xed:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"report.customfields.ApplicationVersion = 1.2.3\nreport.customfields.environment = ${environment}\nreport.customfields.user = ${USER}\nreport.customfields.host = ${HOST}\nreport.customfields.order=ApplicationVersion,environment,user,host\n"})}),"\n",(0,a.jsx)(s.h2,{id:"informaci\xf3n-de-build-personalizada",children:"Informaci\xf3n de Build Personalizada"}),"\n",(0,a.jsxs)(s.p,{children:["Tambi\xe9n puedes agregar tus propios campos a la pantalla de Informaci\xf3n de Build, usando las propiedades ",(0,a.jsx)(s.code,{children:"sysinfo.*"}),".\nLas propiedades ",(0,a.jsx)(s.code,{children:"sysinfo.*"})," te permiten definir campos y valores que aparecer\xe1n en la p\xe1gina de Informaci\xf3n de Build. Para combinaciones simples de campo-valor, el campo aparece junto a los otros valores en la pantalla de Informaci\xf3n de Build:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"sysinfo.lead = Daisy\n"})}),"\n",(0,a.jsxs)(s.p,{children:["Puedes usar expresiones Groovy para acceder a propiedades del sistema (que puedes pasar desde la l\xednea de comandos). La propiedad ",(0,a.jsx)(s.code,{children:"env"})," te da acceso a las variables de entorno actuales. Por ejemplo, para mostrar el n\xfamero de build actual de Jenkins, podr\xedas incluir la siguiente l\xednea:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:'sysinfo.build = "${env.BUILD_NUMBER}"\n'})}),"\n",(0,a.jsxs)(s.p,{children:["Tambi\xe9n puedes agrupar propiedades personalizadas en secciones con subt\xedtulos. Un ejemplo de tal configuraci\xf3n en el archivo ",(0,a.jsx)(s.code,{children:"serenity.conf"})," se muestra a continuaci\xf3n:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:'sysinfo {\n  lead = Daisy\n  build = "${env.BUILD_NUMBER}"\n  Test Run {\n    Run By = "${env.USER}"\n    Java Version = "${java.version}"\n  }\n}\n'})}),"\n",(0,a.jsx)(s.p,{children:"La pantalla de Informaci\xf3n de Build correspondiente se muestra a continuaci\xf3n:"}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"Detalles personalizados de Informaci\xf3n de Build",src:r(7593).A+"",width:"2144",height:"924"})}),"\n",(0,a.jsx)(s.h2,{id:"definir-informaci\xf3n-de-build-program\xe1ticamente",children:"Definir informaci\xf3n de build program\xe1ticamente"}),"\n",(0,a.jsxs)(s.p,{children:["Tambi\xe9n puedes usar la clase ",(0,a.jsx)(s.code,{children:"BuildInfo"})," para agregar informaci\xf3n a la p\xe1gina de Informaci\xf3n de Build program\xe1ticamente. Simplemente define la secci\xf3n, y agrega tantos pares de nombre/valor de propiedad como quieras. Puedes ver un ejemplo aqu\xed:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-java",children:'BuildInfo.section("Toggles").setProperty("toggle-custom-ads-v2", "on");\nBuildInfo.section("Toggles").setProperty("toggle-user-feedback", "on");\n\nBuildInfo.section("Versions").setProperty("game-history-service", "1.2.3");\nBuildInfo.section("Versions").setProperty("player-service", "3.4.5");\nBuildInfo.section("Versions").setProperty("related-products-service", "2.3.4");\n'})}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.img,{alt:"Detalles personalizados de Informaci\xf3n de Build",src:r(1733).A+"",width:"2692",height:"1550"})})]})}function p(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},1733(e,s,r){r.d(s,{A:()=>n});const n=r.p+"assets/images/custom-build-info-5d970b8f7d9acdd7a50df855ef7096f5.png"},4488(e,s,r){r.d(s,{A:()=>n});const n=r.p+"assets/images/custom-reports-including-a-system-variable-f80f91af608be8de5ca006821f66676e.png"},7593(e,s,r){r.d(s,{A:()=>n});const n=r.p+"assets/images/build-info-2daa81eba4d528597f5c7d24e9988ab5.png"},8030(e,s,r){r.d(s,{A:()=>n});const n=r.p+"assets/images/custom-report-fields-52b92f696936c0519f9e76fb62abafcf.png"},8453(e,s,r){r.d(s,{R:()=>i,x:()=>d});var n=r(6540);const a={},o=n.createContext(a);function i(e){const s=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);
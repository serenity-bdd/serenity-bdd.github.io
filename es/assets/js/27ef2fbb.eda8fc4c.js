"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[4883],{6275(e,a,n){n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"playwright/playwright_step_libraries","title":"Step Library","description":"Las Step Library (bibliotecas de pasos) son el puente entre tus pruebas y los Page Object. Proporcionan las capacidades de reportes enriquecidos de Serenity a traves de anotaciones @Step mientras mantienen tus pruebas limpias y legibles.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/playwright/step-libraries.md","sourceDirName":"playwright","slug":"/playwright/playwright_step_libraries","permalink":"/es/docs/playwright/playwright_step_libraries","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/playwright/step-libraries.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"playwright_step_libraries","title":"Step Library","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Screenplay Pattern con Playwright","permalink":"/es/docs/playwright/playwright_screenplay"},"next":{"title":"Configuracion","permalink":"/es/docs/playwright/playwright_configuration"}}');var s=n(4848),t=n(8453);const i={id:"playwright_step_libraries",title:"Step Library",sidebar_position:4},o="Step Library con Playwright",c={},d=[{value:"La arquitectura de tres capas",id:"la-arquitectura-de-tres-capas",level:2},{value:"Creacion de Step Library",id:"creacion-de-step-library",level:2},{value:"Estructura basica",id:"estructura-basica",level:3},{value:"Uso de Step Library en pruebas",id:"uso-de-step-library-en-pruebas",level:3},{value:"La anotacion @Step",id:"la-anotacion-step",level:2},{value:"Descripciones de paso",id:"descripciones-de-paso",level:3},{value:"Pasos anidados",id:"pasos-anidados",level:3},{value:"Pasos conscientes de la pagina",id:"pasos-conscientes-de-la-pagina",level:2},{value:"Captura de pantallas",id:"captura-de-pantallas",level:2},{value:"Capturas automaticas",id:"capturas-automaticas",level:3},{value:"Capturas manuales",id:"capturas-manuales",level:3},{value:"Organizacion de Step Library",id:"organizacion-de-step-library",level:2},{value:"Por area de funcionalidad",id:"por-area-de-funcionalidad",level:3},{value:"Por recorrido del usuario",id:"por-recorrido-del-usuario",level:3},{value:"Mejores practicas",id:"mejores-practicas",level:2},{value:"1. Mantener los pasos enfocados",id:"1-mantener-los-pasos-enfocados",level:3},{value:"2. Usar lenguaje de negocio",id:"2-usar-lenguaje-de-negocio",level:3},{value:"3. Manejar el estado cuidadosamente",id:"3-manejar-el-estado-cuidadosamente",level:3},{value:"4. Hacer aserciones claras",id:"4-hacer-aserciones-claras",level:3},{value:"5. Componer pasos de nivel superior",id:"5-componer-pasos-de-nivel-superior",level:3}];function l(e){const a={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.header,{children:(0,s.jsx)(a.h1,{id:"step-library-con-playwright",children:"Step Library con Playwright"})}),"\n",(0,s.jsxs)(a.p,{children:["Las Step Library (bibliotecas de pasos) son el puente entre tus pruebas y los Page Object. Proporcionan las capacidades de reportes enriquecidos de Serenity a traves de anotaciones ",(0,s.jsx)(a.code,{children:"@Step"})," mientras mantienen tus pruebas limpias y legibles."]}),"\n",(0,s.jsx)(a.h2,{id:"la-arquitectura-de-tres-capas",children:"La arquitectura de tres capas"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{children:"Clase de prueba\n    \u2502  Usa @Steps para inyectar Step Library\n    \u2502  Se enfoca en escenarios de negocio\n    \u25bc\nStep Library\n    \u2502  Los metodos @Step aparecen en reportes\n    \u2502  Orquesta acciones del Page Object\n    \u25bc\nPage Object\n       Encapsula localizadores\n       Maneja interacciones de pagina\n"})}),"\n",(0,s.jsx)(a.h2,{id:"creacion-de-step-library",children:"Creacion de Step Library"}),"\n",(0,s.jsx)(a.h3,{id:"estructura-basica",children:"Estructura basica"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'public class ShoppingCartSteps {\n\n    private ShoppingCartPage cartPage;\n\n    // Inicializar Page Object cuando sea necesario\n    private void ensurePageObject(Page page) {\n        if (cartPage == null) {\n            cartPage = new ShoppingCartPage(page);\n        }\n    }\n\n    @Step("Add product \'{1}\' to cart")\n    public void addProductToCart(Page page, String productName) {\n        ensurePageObject(page);\n        cartPage.addProduct(productName);\n    }\n\n    @Step("Verify cart contains {1} items")\n    public void verifyCartItemCount(Page page, int expectedCount) {\n        ensurePageObject(page);\n        assertThat(cartPage.getItemCount())\n            .as("Cart item count")\n            .isEqualTo(expectedCount);\n    }\n\n    @Step("Proceed to checkout")\n    public void proceedToCheckout(Page page) {\n        ensurePageObject(page);\n        cartPage.clickCheckout();\n    }\n}\n'})}),"\n",(0,s.jsx)(a.h3,{id:"uso-de-step-library-en-pruebas",children:"Uso de Step Library en pruebas"}),"\n",(0,s.jsxs)(a.p,{children:["Inyecta las Step Library usando la anotacion ",(0,s.jsx)(a.code,{children:"@Steps"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\nclass ShoppingTest {\n\n    @Steps\n    ShoppingCartSteps cart;\n\n    @Steps\n    ProductSteps products;\n\n    @Steps\n    CheckoutSteps checkout;\n\n    private Page page;\n\n    @Test\n    void shouldCompleteAPurchase() {\n        products.browseCategory(page, "Electronics");\n        products.selectProduct(page, "Laptop Pro");\n        cart.addProductToCart(page, "Laptop Pro");\n        cart.verifyCartItemCount(page, 1);\n        cart.proceedToCheckout(page);\n        checkout.completeOrder(page);\n    }\n}\n'})}),"\n",(0,s.jsx)(a.h2,{id:"la-anotacion-step",children:"La anotacion @Step"}),"\n",(0,s.jsx)(a.h3,{id:"descripciones-de-paso",children:"Descripciones de paso"}),"\n",(0,s.jsx)(a.p,{children:"Usa marcadores de posicion de parametros en las descripciones de pasos:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'@Step("Search for \'{1}\'")\npublic void searchFor(Page page, String term) { ... }\n\n@Step("Add {1} units of \'{2}\' to cart")\npublic void addToCart(Page page, int quantity, String product) { ... }\n\n@Step("Verify total is ${1}")\npublic void verifyTotal(Page page, BigDecimal expectedTotal) { ... }\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Los indices de parametros comienzan en cero: ",(0,s.jsx)(a.code,{children:"{0}"})," es el primer parametro, ",(0,s.jsx)(a.code,{children:"{1}"})," es el segundo, etc."]}),"\n",(0,s.jsx)(a.h3,{id:"pasos-anidados",children:"Pasos anidados"}),"\n",(0,s.jsx)(a.p,{children:"Los pasos pueden llamar a otros pasos para reportes jerarquicos:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'@Step("Complete checkout with credit card")\npublic void completeCheckoutWithCreditCard(Page page, CreditCard card) {\n    enterBillingAddress(page, card.getBillingAddress());\n    enterCardDetails(page, card);\n    submitPayment(page);\n}\n\n@Step("Enter billing address")\npublic void enterBillingAddress(Page page, Address address) {\n    checkoutPage.enterAddress(address);\n}\n\n@Step("Enter card details")\npublic void enterCardDetails(Page page, CreditCard card) {\n    checkoutPage.enterCardNumber(card.getNumber());\n    checkoutPage.enterExpiry(card.getExpiry());\n    checkoutPage.enterCvv(card.getCvv());\n}\n\n@Step("Submit payment")\npublic void submitPayment(Page page) {\n    checkoutPage.clickPay();\n}\n'})}),"\n",(0,s.jsx)(a.h2,{id:"pasos-conscientes-de-la-pagina",children:"Pasos conscientes de la pagina"}),"\n",(0,s.jsxs)(a.p,{children:["Para firmas de paso mas limpias, usa ",(0,s.jsx)(a.code,{children:"PlaywrightSerenity.getCurrentPage()"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'public class NavigationSteps {\n\n    @Step("Navigate to {0}")\n    public void navigateTo(String url) {\n        Page page = PlaywrightSerenity.getCurrentPage();\n        page.navigate(url);\n    }\n\n    @Step("Refresh the page")\n    public void refreshPage() {\n        PlaywrightSerenity.getCurrentPage().reload();\n    }\n\n    @Step("Go back")\n    public void goBack() {\n        PlaywrightSerenity.getCurrentPage().goBack();\n    }\n}\n'})}),"\n",(0,s.jsx)(a.p,{children:"Uso en pruebas:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'@Test\nvoid shouldNavigateBetweenPages() {\n    // No es necesario pasar el parametro page\n    navigation.navigateTo("https://example.com");\n    navigation.refreshPage();\n    navigation.goBack();\n}\n'})}),"\n",(0,s.jsx)(a.admonition,{type:"caution",children:(0,s.jsxs)(a.p,{children:["Cuando uses ",(0,s.jsx)(a.code,{children:"getCurrentPage()"}),", asegurate de haber registrado la pagina con ",(0,s.jsx)(a.code,{children:"PlaywrightSerenity.registerPage(page)"})," antes de llamar a cualquier paso."]})}),"\n",(0,s.jsx)(a.h2,{id:"captura-de-pantallas",children:"Captura de pantallas"}),"\n",(0,s.jsx)(a.h3,{id:"capturas-automaticas",children:"Capturas automaticas"}),"\n",(0,s.jsxs)(a.p,{children:["Las capturas de pantalla se capturan automaticamente despues de que cada metodo ",(0,s.jsx)(a.code,{children:"@Step"})," se completa. Esto es manejado por el ",(0,s.jsx)(a.code,{children:"PlaywrightStepListener"}),"."]}),"\n",(0,s.jsx)(a.h3,{id:"capturas-manuales",children:"Capturas manuales"}),"\n",(0,s.jsx)(a.p,{children:"Dispara capturas de pantalla adicionales en puntos especificos:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'@Step("Capture current state")\npublic void captureCurrentState(Page page) {\n    // Realizar algunas acciones\n    performComplexAction(page);\n\n    // Capturar una pantalla manualmente\n    PlaywrightSerenity.takeScreenshot();\n\n    // Continuar con mas acciones\n    performAnotherAction(page);\n}\n'})}),"\n",(0,s.jsx)(a.h2,{id:"organizacion-de-step-library",children:"Organizacion de Step Library"}),"\n",(0,s.jsx)(a.h3,{id:"por-area-de-funcionalidad",children:"Por area de funcionalidad"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{children:"steps/\n\u251c\u2500\u2500 authentication/\n\u2502   \u251c\u2500\u2500 LoginSteps.java\n\u2502   \u2514\u2500\u2500 RegistrationSteps.java\n\u251c\u2500\u2500 shopping/\n\u2502   \u251c\u2500\u2500 ProductSteps.java\n\u2502   \u251c\u2500\u2500 CartSteps.java\n\u2502   \u2514\u2500\u2500 CheckoutSteps.java\n\u2514\u2500\u2500 account/\n    \u251c\u2500\u2500 ProfileSteps.java\n    \u2514\u2500\u2500 OrderHistorySteps.java\n"})}),"\n",(0,s.jsx)(a.h3,{id:"por-recorrido-del-usuario",children:"Por recorrido del usuario"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{children:"steps/\n\u251c\u2500\u2500 BuyerSteps.java      // Todos los pasos para el perfil comprador\n\u251c\u2500\u2500 SellerSteps.java     // Todos los pasos para el perfil vendedor\n\u2514\u2500\u2500 AdminSteps.java      // Todos los pasos para un administrador\n"})}),"\n",(0,s.jsx)(a.h2,{id:"mejores-practicas",children:"Mejores practicas"}),"\n",(0,s.jsx)(a.h3,{id:"1-mantener-los-pasos-enfocados",children:"1. Mantener los pasos enfocados"}),"\n",(0,s.jsx)(a.p,{children:"Cada paso debe representar una accion logica del usuario:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'// \u274c Mal: Demasiadas cosas en un paso\n@Step("Login and add product to cart")\npublic void loginAndAddToCart(Page page, User user, String product) {\n    // Demasiado sucediendo aqui\n}\n\n// \u2705 Bien: Pasos enfocados y de proposito unico\n@Step("Login as {1}")\npublic void login(Page page, User user) { ... }\n\n@Step("Add \'{1}\' to cart")\npublic void addToCart(Page page, String product) { ... }\n'})}),"\n",(0,s.jsx)(a.h3,{id:"2-usar-lenguaje-de-negocio",children:"2. Usar lenguaje de negocio"}),"\n",(0,s.jsx)(a.p,{children:"Los pasos deben leerse como lenguaje natural:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'// \u274c Mal: Lenguaje tecnico\n@Step("Click submit button")\n@Step("Fill input field with value")\n\n// \u2705 Bien: Lenguaje de negocio\n@Step("Submit the order")\n@Step("Enter shipping address")\n'})}),"\n",(0,s.jsx)(a.h3,{id:"3-manejar-el-estado-cuidadosamente",children:"3. Manejar el estado cuidadosamente"}),"\n",(0,s.jsx)(a.p,{children:"Se consciente del estado entre llamadas a pasos:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'public class AccountSteps {\n    private AccountPage accountPage;\n    private User currentUser;  // Rastrear estado cuando sea necesario\n\n    @Step("Login as {1}")\n    public void loginAs(Page page, User user) {\n        // Guardar para pasos posteriores\n        this.currentUser = user;\n        loginPage.loginAs(user.getEmail(), user.getPassword());\n    }\n\n    @Step("Verify welcome message shows user\'s name")\n    public void verifyWelcomeMessage(Page page) {\n        assertThat(accountPage.getWelcomeMessage())\n            .contains(currentUser.getFirstName());\n    }\n}\n'})}),"\n",(0,s.jsx)(a.h3,{id:"4-hacer-aserciones-claras",children:"4. Hacer aserciones claras"}),"\n",(0,s.jsx)(a.p,{children:"Incluye aserciones descriptivas en pasos de verificacion:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'@Step("Verify order total is ${1}")\npublic void verifyOrderTotal(Page page, BigDecimal expectedTotal) {\n    BigDecimal actualTotal = checkoutPage.getOrderTotal();\n    assertThat(actualTotal)\n        .as("Order total")\n        .isEqualByComparingTo(expectedTotal);\n}\n\n@Step("Verify error message is displayed")\npublic void verifyErrorMessageDisplayed(Page page, String expectedMessage) {\n    assertThat(errorPage.getMessage())\n        .as("Error message")\n        .containsIgnoringCase(expectedMessage);\n}\n'})}),"\n",(0,s.jsx)(a.h3,{id:"5-componer-pasos-de-nivel-superior",children:"5. Componer pasos de nivel superior"}),"\n",(0,s.jsx)(a.p,{children:"Construye flujos de trabajo complejos a partir de pasos mas simples:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'@Step("Complete guest checkout")\npublic void completeGuestCheckout(Page page, Address address, CreditCard card) {\n    enterShippingAddress(page, address);\n    selectShippingMethod(page, "Standard");\n    enterPaymentDetails(page, card);\n    confirmOrder(page);\n}\n'})}),"\n",(0,s.jsx)(a.p,{children:"Esto crea un reporte jerarquico que muestra tanto el paso de alto nivel como sus partes constituyentes."})]})}function p(e={}){const{wrapper:a}={...(0,t.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453(e,a,n){n.d(a,{R:()=>i,x:()=>o});var r=n(6540);const s={},t=r.createContext(s);function i(e){const a=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(t.Provider,{value:a},e.children)}}}]);
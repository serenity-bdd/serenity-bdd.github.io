"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[5763],{2905(e,n,a){a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"playwright/playwright_tutorial_todomvc","title":"Tutorial: Probando TodoMVC","description":"Este tutorial te guia en la construccion de un conjunto de pruebas de Serenity Playwright para la aplicacion TodoMVC. En lugar de mostrarte el codigo terminado desde el principio, lo construiremos iterativamente - comenzando con una sola prueba y agregando solo lo que necesitamos a medida que avanzamos.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/playwright/tutorial-todomvc.md","sourceDirName":"playwright","slug":"/playwright/playwright_tutorial_todomvc","permalink":"/es/docs/playwright/playwright_tutorial_todomvc","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/playwright/tutorial-todomvc.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"id":"playwright_tutorial_todomvc","title":"Tutorial: Probando TodoMVC","sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Mejores practicas","permalink":"/es/docs/playwright/playwright_best_practices"},"next":{"title":"Tutorial: Screenplay con TodoMVC","permalink":"/es/docs/playwright/playwright_screenplay_tutorial"}}');var t=a(4848),r=a(8453);const i={id:"playwright_tutorial_todomvc",title:"Tutorial: Probando TodoMVC",sidebar_position:7},s="Tutorial: Construyendo un conjunto de pruebas paso a paso",l={},d=[{value:"Que estamos probando",id:"que-estamos-probando",level:2},{value:"Configuracion del proyecto",id:"configuracion-del-proyecto",level:2},{value:"Iteracion 1: Nuestra primera prueba",id:"iteracion-1-nuestra-primera-prueba",level:2},{value:"Escribe la prueba primero",id:"escribe-la-prueba-primero",level:3},{value:"Crea la Step Library",id:"crea-la-step-library",level:3},{value:"Crea el Page Object",id:"crea-el-page-object",level:3},{value:"Ejecutalo",id:"ejecutalo",level:3},{value:"Iteracion 2: Agregando mas aserciones",id:"iteracion-2-agregando-mas-aserciones",level:2},{value:"Actualiza la prueba",id:"actualiza-la-prueba",level:3},{value:"Agrega a la Step Library",id:"agrega-a-la-step-library",level:3},{value:"Agrega al Page Object",id:"agrega-al-page-object",level:3},{value:"Iteracion 3: Probando multiples todos",id:"iteracion-3-probando-multiples-todos",level:2},{value:"Agrega una nueva prueba",id:"agrega-una-nueva-prueba",level:3},{value:"Agrega a la Step Library",id:"agrega-a-la-step-library-1",level:3},{value:"Agrega al Page Object",id:"agrega-al-page-object-1",level:3},{value:"Iteracion 4: Extraer una clase base de prueba",id:"iteracion-4-extraer-una-clase-base-de-prueba",level:2},{value:"Crea la clase base",id:"crea-la-clase-base",level:3},{value:"Simplifica la clase de prueba",id:"simplifica-la-clase-de-prueba",level:3},{value:"Iteracion 5: Probando completar tareas",id:"iteracion-5-probando-completar-tareas",level:2},{value:"Crea la clase de prueba",id:"crea-la-clase-de-prueba",level:3},{value:"Agrega a la Step Library",id:"agrega-a-la-step-library-2",level:3},{value:"Agrega al Page Object",id:"agrega-al-page-object-2",level:3},{value:"Iteracion 6: Probando el contador de elementos restantes",id:"iteracion-6-probando-el-contador-de-elementos-restantes",level:2},{value:"Agrega otra prueba",id:"agrega-otra-prueba",level:3},{value:"Agrega a la Step Library",id:"agrega-a-la-step-library-3",level:3},{value:"Agrega al Page Object",id:"agrega-al-page-object-3",level:3},{value:"El patron",id:"el-patron",level:2},{value:"Continua construyendo",id:"continua-construyendo",level:2},{value:"Estructura final del proyecto",id:"estructura-final-del-proyecto",level:2},{value:"Conclusiones clave",id:"conclusiones-clave",level:2},{value:"Codigo fuente completo",id:"codigo-fuente-completo",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"tutorial-construyendo-un-conjunto-de-pruebas-paso-a-paso",children:"Tutorial: Construyendo un conjunto de pruebas paso a paso"})}),"\n",(0,t.jsxs)(n.p,{children:["Este tutorial te guia en la construccion de un conjunto de pruebas de Serenity Playwright para la ",(0,t.jsx)(n.a,{href:"https://todomvc.com/examples/react/dist/",children:"aplicacion TodoMVC"}),". En lugar de mostrarte el codigo terminado desde el principio, lo construiremos iterativamente - comenzando con una sola prueba y agregando solo lo que necesitamos a medida que avanzamos."]}),"\n",(0,t.jsx)(n.p,{children:"Esto refleja como realmente desarrollarias pruebas en la practica: escribe una prueba, construye la infraestructura minima para soportarla, luego expande."}),"\n",(0,t.jsx)(n.h2,{id:"que-estamos-probando",children:"Que estamos probando"}),"\n",(0,t.jsx)(n.p,{children:"TodoMVC es una aplicacion simple de lista de tareas donde los usuarios pueden agregar, completar, editar y eliminar elementos. Comenzaremos con la funcionalidad mas basica y construiremos a partir de ahi."}),"\n",(0,t.jsx)(n.h2,{id:"configuracion-del-proyecto",children:"Configuracion del proyecto"}),"\n",(0,t.jsxs)(n.p,{children:["Primero, crea un proyecto Maven con estas dependencias en ",(0,t.jsx)(n.code,{children:"pom.xml"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0\n         http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>com.example</groupId>\n    <artifactId>serenity-playwright-todomvc</artifactId>\n    <version>1.0.0-SNAPSHOT</version>\n\n    <properties>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <maven.compiler.source>17</maven.compiler.source>\n        <maven.compiler.target>17</maven.compiler.target>\n        <serenity.version>5.1.0</serenity.version>\n        <playwright.version>1.57.0</playwright.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-playwright</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-junit5</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>com.microsoft.playwright</groupId>\n            <artifactId>playwright</artifactId>\n            <version>${playwright.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>org.junit.jupiter</groupId>\n            <artifactId>junit-jupiter</artifactId>\n            <version>6.0.1</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>org.assertj</groupId>\n            <artifactId>assertj-core</artifactId>\n            <version>3.27.0</version>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-failsafe-plugin</artifactId>\n                <version>3.5.0</version>\n                <configuration>\n                    <includes>\n                        <include>**/*Test.java</include>\n                    </includes>\n                </configuration>\n                <executions>\n                    <execution>\n                        <goals>\n                            <goal>integration-test</goal>\n                            <goal>verify</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n            <plugin>\n                <groupId>net.serenity-bdd.maven.plugins</groupId>\n                <artifactId>serenity-maven-plugin</artifactId>\n                <version>${serenity.version}</version>\n                <executions>\n                    <execution>\n                        <id>serenity-reports</id>\n                        <phase>post-integration-test</phase>\n                        <goals>\n                            <goal>aggregate</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"iteracion-1-nuestra-primera-prueba",children:"Iteracion 1: Nuestra primera prueba"}),"\n",(0,t.jsx)(n.p,{children:"Comencemos con la prueba mas simple posible: agregar un solo elemento todo."}),"\n",(0,t.jsx)(n.h3,{id:"escribe-la-prueba-primero",children:"Escribe la prueba primero"}),"\n",(0,t.jsxs)(n.p,{children:["Crea ",(0,t.jsx)(n.code,{children:"src/test/java/todomvc/tests/WhenAddingTodosTest.java"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package todomvc.tests;\n\nimport com.microsoft.playwright.*;\nimport net.serenitybdd.annotations.Steps;\nimport net.serenitybdd.junit5.SerenityJUnit5Extension;\nimport net.serenitybdd.playwright.PlaywrightSerenity;\nimport org.junit.jupiter.api.*;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport todomvc.steps.TodoSteps;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\n@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When adding todos")\nclass WhenAddingTodosTest {\n\n    private Playwright playwright;\n    private Browser browser;\n    private Page page;\n\n    @Steps\n    TodoSteps todo;\n\n    @BeforeEach\n    void setUp() {\n        playwright = Playwright.create();\n        browser = playwright.chromium().launch(\n            new BrowserType.LaunchOptions().setHeadless(true)\n        );\n        page = browser.newPage();\n        PlaywrightSerenity.registerPage(page);\n        todo.setPage(page);\n    }\n\n    @AfterEach\n    void tearDown() {\n        PlaywrightSerenity.unregisterPage(page);\n        if (page != null) page.close();\n        if (browser != null) browser.close();\n        if (playwright != null) playwright.close();\n    }\n\n    @Test\n    @DisplayName("should add a single todo item")\n    void shouldAddSingleTodoItem() {\n        todo.openApplication();\n        todo.addTodo("Buy milk");\n\n        assertThat(todo.visibleTodoCount()).isEqualTo(1);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Esta prueba no compilara todavia - necesitamos crear la Step Library y el Page Object. Pero nota que hemos definido exactamente lo que necesitamos:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"openApplication()"})," - navegar a la app"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"addTodo(String)"})," - agregar un elemento"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"visibleTodoCount()"})," - devolver cuantos elementos son visibles"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"crea-la-step-library",children:"Crea la Step Library"}),"\n",(0,t.jsxs)(n.p,{children:["Crea ",(0,t.jsx)(n.code,{children:"src/test/java/todomvc/steps/TodoSteps.java"})," con solo los metodos que necesitamos:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package todomvc.steps;\n\nimport com.microsoft.playwright.Page;\nimport net.serenitybdd.annotations.Step;\nimport todomvc.pages.TodoMvcPage;\n\npublic class TodoSteps {\n\n    private TodoMvcPage todoMvcPage;\n\n    public void setPage(Page page) {\n        this.todoMvcPage = new TodoMvcPage(page);\n    }\n\n    @Step("Open the TodoMVC application")\n    public void openApplication() {\n        todoMvcPage.open();\n    }\n\n    @Step("Add a todo: \'{0}\'")\n    public void addTodo(String todoText) {\n        todoMvcPage.addTodo(todoText);\n    }\n\n    @Step("Get the number of visible todos")\n    public int visibleTodoCount() {\n        return todoMvcPage.getVisibleTodoCount();\n    }\n}\n'})}),"\n",(0,t.jsx)(n.admonition,{title:"Los pasos devuelven datos, las pruebas hacen aserciones",type:"tip",children:(0,t.jsxs)(n.p,{children:["Observa que ",(0,t.jsx)(n.code,{children:"visibleTodoCount()"})," devuelve un ",(0,t.jsx)(n.code,{children:"int"}),". La prueba hace la asercion, no la Step Library. Esto mantiene los pasos reutilizables - el mismo paso puede usarse en diferentes pruebas con diferentes valores esperados."]})}),"\n",(0,t.jsx)(n.h3,{id:"crea-el-page-object",children:"Crea el Page Object"}),"\n",(0,t.jsxs)(n.p,{children:["Crea ",(0,t.jsx)(n.code,{children:"src/test/java/todomvc/pages/TodoMvcPage.java"})," con solo lo que necesitamos:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package todomvc.pages;\n\nimport com.microsoft.playwright.Locator;\nimport com.microsoft.playwright.Page;\n\npublic class TodoMvcPage {\n\n    private final Page page;\n    private static final String URL = "https://todomvc.com/examples/react/dist/";\n\n    public TodoMvcPage(Page page) {\n        this.page = page;\n    }\n\n    // Localizadores - mantener privados\n    private Locator newTodoInput() {\n        return page.getByPlaceholder("What needs to be done?");\n    }\n\n    private Locator todoItems() {\n        return page.locator(".todo-list li");\n    }\n\n    // Acciones\n    public void open() {\n        page.navigate(URL);\n        page.waitForLoadState();\n    }\n\n    public void addTodo(String todoText) {\n        newTodoInput().fill(todoText);\n        newTodoInput().press("Enter");\n    }\n\n    // Consultas\n    public int getVisibleTodoCount() {\n        return todoItems().count();\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"ejecutalo",children:"Ejecutalo"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mvn clean verify\n"})}),"\n",(0,t.jsx)(n.p,{children:"La prueba deberia pasar. Ahora tenemos un conjunto de pruebas minimo funcionando."}),"\n",(0,t.jsx)(n.h2,{id:"iteracion-2-agregando-mas-aserciones",children:"Iteracion 2: Agregando mas aserciones"}),"\n",(0,t.jsx)(n.p,{children:"Mejoremos nuestra prueba para verificar que el texto del todo aparezca correctamente."}),"\n",(0,t.jsx)(n.h3,{id:"actualiza-la-prueba",children:"Actualiza la prueba"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Test\n@DisplayName("should add a single todo item")\nvoid shouldAddSingleTodoItem() {\n    todo.openApplication();\n    todo.addTodo("Buy milk");\n\n    assertThat(todo.visibleTodoCount()).isEqualTo(1);\n    assertThat(todo.todoExists("Buy milk")).isTrue();  // Nueva asercion\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"agrega-a-la-step-library",children:"Agrega a la Step Library"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"@Step(\"Check if todo '{0}' exists\")\npublic boolean todoExists(String todoText) {\n    return todoMvcPage.hasTodo(todoText);\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"agrega-al-page-object",children:"Agrega al Page Object"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'private Locator todoItemByText(String text) {\n    return page.locator(".todo-list li").filter(\n        new Locator.FilterOptions().setHasText(text)\n    );\n}\n\npublic boolean hasTodo(String todoText) {\n    return todoItemByText(todoText).count() > 0;\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Agregamos un nuevo metodo localizador ",(0,t.jsx)(n.code,{children:"todoItemByText()"})," porque necesitabamos encontrar un elemento especifico. Este localizador se reutilizara para otras operaciones mas adelante."]}),"\n",(0,t.jsx)(n.h2,{id:"iteracion-3-probando-multiples-todos",children:"Iteracion 3: Probando multiples todos"}),"\n",(0,t.jsx)(n.h3,{id:"agrega-una-nueva-prueba",children:"Agrega una nueva prueba"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Test\n@DisplayName("should add multiple todo items")\nvoid shouldAddMultipleTodoItems() {\n    todo.openApplication();\n    todo.addTodos("Buy milk", "Walk the dog", "Do laundry");\n\n    assertThat(todo.visibleTodoCount()).isEqualTo(3);\n    assertThat(todo.visibleTodos())\n        .containsExactly("Buy milk", "Walk the dog", "Do laundry");\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"agrega-a-la-step-library-1",children:"Agrega a la Step Library"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Step("Add todos: {0}")\npublic void addTodos(String... todoTexts) {\n    todoMvcPage.addTodos(todoTexts);\n}\n\n@Step("Get the visible todo items")\npublic List<String> visibleTodos() {\n    return todoMvcPage.getVisibleTodoTexts();\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"agrega-al-page-object-1",children:"Agrega al Page Object"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public void addTodos(String... todoTexts) {\n    for (String text : todoTexts) {\n        addTodo(text);\n    }\n}\n\npublic List<String> getVisibleTodoTexts() {\n    return todoItems().locator("label").allTextContents();\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"iteracion-4-extraer-una-clase-base-de-prueba",children:"Iteracion 4: Extraer una clase base de prueba"}),"\n",(0,t.jsx)(n.p,{children:"Estamos a punto de crear mas clases de prueba, y todas necesitaran la misma configuracion de Playwright. Extraigamos eso a una clase base."}),"\n",(0,t.jsx)(n.h3,{id:"crea-la-clase-base",children:"Crea la clase base"}),"\n",(0,t.jsxs)(n.p,{children:["Crea ",(0,t.jsx)(n.code,{children:"src/test/java/todomvc/tests/SerenityPlaywrightTest.java"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"package todomvc.tests;\n\nimport com.microsoft.playwright.*;\nimport net.serenitybdd.playwright.PlaywrightSerenity;\nimport org.junit.jupiter.api.*;\n\npublic abstract class SerenityPlaywrightTest {\n\n    protected Playwright playwright;\n    protected Browser browser;\n    protected Page page;\n\n    @BeforeEach\n    void setUpPlaywright() {\n        playwright = Playwright.create();\n        browser = playwright.chromium().launch(\n            new BrowserType.LaunchOptions().setHeadless(true)\n        );\n        page = browser.newPage();\n        PlaywrightSerenity.registerPage(page);\n    }\n\n    @AfterEach\n    void tearDownPlaywright() {\n        PlaywrightSerenity.unregisterPage(page);\n        if (page != null) page.close();\n        if (browser != null) browser.close();\n        if (playwright != null) playwright.close();\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"simplifica-la-clase-de-prueba",children:"Simplifica la clase de prueba"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When adding todos")\nclass WhenAddingTodosTest extends SerenityPlaywrightTest {\n\n    @Steps\n    TodoSteps todo;\n\n    @BeforeEach\n    void setUp() {\n        todo.setPage(page);\n    }\n\n    @Test\n    @DisplayName("should add a single todo item")\n    void shouldAddSingleTodoItem() {\n        todo.openApplication();\n        todo.addTodo("Buy milk");\n\n        assertThat(todo.visibleTodoCount()).isEqualTo(1);\n        assertThat(todo.todoExists("Buy milk")).isTrue();\n    }\n\n    // ... otras pruebas\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Mucho mas limpio! Cada clase de prueba ahora se enfoca puramente en la logica de prueba."}),"\n",(0,t.jsx)(n.h2,{id:"iteracion-5-probando-completar-tareas",children:"Iteracion 5: Probando completar tareas"}),"\n",(0,t.jsx)(n.p,{children:"Ahora creemos una nueva clase de prueba para completar todos."}),"\n",(0,t.jsx)(n.h3,{id:"crea-la-clase-de-prueba",children:"Crea la clase de prueba"}),"\n",(0,t.jsxs)(n.p,{children:["Crea ",(0,t.jsx)(n.code,{children:"src/test/java/todomvc/tests/WhenCompletingTodosTest.java"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When completing todos")\nclass WhenCompletingTodosTest extends SerenityPlaywrightTest {\n\n    @Steps\n    TodoSteps todo;\n\n    @BeforeEach\n    void setUp() {\n        todo.setPage(page);\n    }\n\n    @Test\n    @DisplayName("should mark a todo as completed")\n    void shouldMarkTodoAsCompleted() {\n        todo.openApplication();\n        todo.addTodo("Buy milk");\n        todo.completeTodo("Buy milk");\n\n        assertThat(todo.todoIsCompleted("Buy milk")).isTrue();\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"agrega-a-la-step-library-2",children:"Agrega a la Step Library"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"@Step(\"Complete the todo: '{0}'\")\npublic void completeTodo(String todoText) {\n    todoMvcPage.completeTodo(todoText);\n}\n\n@Step(\"Check if todo '{0}' is completed\")\npublic boolean todoIsCompleted(String todoText) {\n    return todoMvcPage.isCompleted(todoText);\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"agrega-al-page-object-2",children:"Agrega al Page Object"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'private Locator todoCheckbox(String text) {\n    return todoItemByText(text).locator(".toggle");\n}\n\npublic void completeTodo(String todoText) {\n    todoCheckbox(todoText).click();\n}\n\npublic boolean isCompleted(String todoText) {\n    String classAttr = todoItemByText(todoText).getAttribute("class");\n    return classAttr != null && classAttr.contains("completed");\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Observa como reutilizamos ",(0,t.jsx)(n.code,{children:"todoItemByText()"})," que creamos antes. El Page Object crece organicamente a medida que necesitamos mas funcionalidad."]}),"\n",(0,t.jsx)(n.h2,{id:"iteracion-6-probando-el-contador-de-elementos-restantes",children:"Iteracion 6: Probando el contador de elementos restantes"}),"\n",(0,t.jsx)(n.h3,{id:"agrega-otra-prueba",children:"Agrega otra prueba"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Test\n@DisplayName("should decrease remaining count when completing")\nvoid shouldDecreaseRemainingCountWhenCompleting() {\n    todo.openApplication();\n    todo.addTodos("Task 1", "Task 2", "Task 3");\n\n    assertThat(todo.remainingCount()).isEqualTo(3);\n\n    todo.completeTodo("Task 2");\n\n    assertThat(todo.remainingCount()).isEqualTo(2);\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"agrega-a-la-step-library-3",children:"Agrega a la Step Library"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Step("Get the remaining items count")\npublic int remainingCount() {\n    return todoMvcPage.getRemainingCount();\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"agrega-al-page-object-3",children:"Agrega al Page Object"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'private Locator todoCount() {\n    return page.locator(".todo-count");\n}\n\npublic int getRemainingCount() {\n    String text = todoCount().textContent();\n    return Integer.parseInt(text.replaceAll("[^0-9]", ""));\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"el-patron",children:"El patron"}),"\n",(0,t.jsx)(n.p,{children:"A estas alturas, puedes ver el patron:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Escribe una prueba"})," que describa lo que quieres verificar"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Agrega metodos a la Step Library"})," que la prueba necesita"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Agrega metodos al Page Object"})," que los pasos necesitan"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Agrega localizadores"})," solo cuando un metodo los requiera"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Este enfoque asegura:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Nunca escribes codigo que no necesitas"}),"\n",(0,t.jsx)(n.li,{children:"Cada adicion esta impulsada por un requisito concreto"}),"\n",(0,t.jsx)(n.li,{children:"El Page Object crece naturalmente para coincidir con tu cobertura de pruebas"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"continua-construyendo",children:"Continua construyendo"}),"\n",(0,t.jsx)(n.p,{children:"Siguiendo este patron, puedes agregar pruebas para:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Editar todos (doble clic, escribir, presionar Enter)"}),"\n",(0,t.jsx)(n.li,{children:"Eliminar todos (hover, clic en boton destroy)"}),"\n",(0,t.jsx)(n.li,{children:"Filtrado (All, Active, Completed)"}),"\n",(0,t.jsx)(n.li,{children:"Marcar todos como completados"}),"\n",(0,t.jsx)(n.li,{children:"Limpiar completados"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Cada nueva prueba puede requerir nuevos metodos de paso, metodos de Page Object y localizadores - agregalos segun los necesites."}),"\n",(0,t.jsx)(n.h2,{id:"estructura-final-del-proyecto",children:"Estructura final del proyecto"}),"\n",(0,t.jsx)(n.p,{children:"Despues de varias iteraciones, tu proyecto se vera asi:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"src/test/java/todomvc/\n\u251c\u2500\u2500 pages/\n\u2502   \u2514\u2500\u2500 TodoMvcPage.java         # Crece con cada iteracion\n\u251c\u2500\u2500 steps/\n\u2502   \u2514\u2500\u2500 TodoSteps.java           # Crece con cada iteracion\n\u2514\u2500\u2500 tests/\n    \u251c\u2500\u2500 SerenityPlaywrightTest.java  # Extraido en iteracion 4\n    \u251c\u2500\u2500 WhenAddingTodosTest.java\n    \u251c\u2500\u2500 WhenCompletingTodosTest.java\n    \u251c\u2500\u2500 WhenEditingTodosTest.java    # Agregado despues\n    \u251c\u2500\u2500 WhenDeletingTodosTest.java   # Agregado despues\n    \u2514\u2500\u2500 WhenFilteringTodosTest.java  # Agregado despues\n"})}),"\n",(0,t.jsx)(n.h2,{id:"conclusiones-clave",children:"Conclusiones clave"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Principio"}),(0,t.jsx)(n.th,{children:"Por que importa"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Comienza con una prueba"})}),(0,t.jsx)(n.td,{children:"Las pruebas impulsan que codigo escribes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Agrega solo lo que necesitas"})}),(0,t.jsx)(n.td,{children:"Sin codigo especulativo que puede nunca usarse"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Extrae cuando emergen patrones"})}),(0,t.jsx)(n.td,{children:"La clase base llego despues de ver duplicacion"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Los pasos devuelven datos"})}),(0,t.jsx)(n.td,{children:"Las pruebas hacen aserciones, manteniendo los pasos reutilizables"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Localizadores privados"})}),(0,t.jsx)(n.td,{children:"La encapsulacion hace los cambios mas faciles"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"codigo-fuente-completo",children:"Codigo fuente completo"}),"\n",(0,t.jsxs)(n.p,{children:["El codigo fuente completo para este tutorial esta disponible en:\n",(0,t.jsx)(n.a,{href:"https://github.com/serenity-bdd/serenity-playwright-todomvc-demo",children:"github.com/serenity-bdd/serenity-playwright-todomvc-demo"})]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453(e,n,a){a.d(n,{R:()=>i,x:()=>s});var o=a(6540);const t={},r=o.createContext(t);function i(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);
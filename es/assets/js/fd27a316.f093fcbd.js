"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[8757],{1605(e,n,a){a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"screenplay/screenplay_fundamentals","title":"Fundamentos de Screenplay","description":"El Screenplay Pattern es un patr\xf3n de dise\xf1o moderno para automatizacion de pruebas, pensado para facilitar la escritura de codigo de pruebas escalable y mantenible. Puedes obtener una vista rapida de un test Screenplay simple aqui.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/screenplay/screenplay_fundamentals.md","sourceDirName":"screenplay","slug":"/screenplay/screenplay_fundamentals","permalink":"/es/docs/screenplay/screenplay_fundamentals","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/screenplay/screenplay_fundamentals.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"screenplay_fundamentals","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Referencia de Configuraci\xf3n de Cucumber","permalink":"/es/docs/cucumber/configuration-reference"},"next":{"title":"Pruebas Web con Serenity Screenplay","permalink":"/es/docs/screenplay/screenplay_webdriver"}}');var o=a(4848),r=a(8453);const t={id:"screenplay_fundamentals",sidebar_position:1},i="Fundamentos de Screenplay",c={},d=[{value:"Configurando un test Screenplay",id:"configurando-un-test-screenplay",level:2},{value:"Screenplay y JUnit 4",id:"screenplay-y-junit-4",level:3},{value:"Screenplay y JUnit 5 (Recomendado)",id:"screenplay-y-junit-5-recomendado",level:3},{value:"Screenplay y JUnit 4 (Obsoleto)",id:"screenplay-y-junit-4-obsoleto",level:3},{value:"Screenplay y Cucumber",id:"screenplay-y-cucumber",level:3},{value:"Con JUnit 5 (Recomendado)",id:"con-junit-5-recomendado",level:4},{value:"Con JUnit 4 (Obsoleto)",id:"con-junit-4-obsoleto",level:4},{value:"Definiendo los Actor",id:"definiendo-los-actor",level:2},{value:"Actor en JUnit",id:"actor-en-junit",level:3},{value:"Definiendo Actor usando la anotacion CastMember",id:"definiendo-actor-usando-la-anotacion-castmember",level:3},{value:"Actor en Cucumber",id:"actor-en-cucumber",level:3},{value:"Usando un driver Managed con Cucumber",id:"usando-un-driver-managed-con-cucumber",level:4},{value:"Cast y Stage",id:"cast-y-stage",level:4},{value:"Cast y Ability",id:"cast-y-ability",level:4},{value:"El Actor en el centro de atencion",id:"el-actor-en-el-centro-de-atencion",level:4},{value:"Agrupando Interaction en Task",id:"agrupando-interaction-en-task",level:2},{value:"Agrupando Interaction usando la clase Task",id:"agrupando-interaction-usando-la-clase-task",level:3},{value:"Usando expresiones lambda para crear Task personalizados",id:"usando-expresiones-lambda-para-crear-task-personalizados",level:3},{value:"Escribiendo clases Performable personalizadas",id:"escribiendo-clases-performable-personalizadas",level:3},{value:"Question - consultando el estado del sistema",id:"question---consultando-el-estado-del-sistema",level:2},{value:"Usando clases Question incluidas",id:"usando-clases-question-incluidas",level:3},{value:"Creando Question personalizadas usando expresiones Lambda",id:"creando-question-personalizadas-usando-expresiones-lambda",level:3},{value:"Haciendo las Question mas legibles con el metodo <code>Question.about()</code>",id:"haciendo-las-question-mas-legibles-con-el-metodo-questionabout",level:3},{value:"Convirtiendo Question",id:"convirtiendo-question",level:3},{value:"Convirtiendo valores de fecha",id:"convirtiendo-valores-de-fecha",level:3},{value:"Convirtiendo a listas de valores",id:"convirtiendo-a-listas-de-valores",level:3},{value:"Trabajando con colecciones",id:"trabajando-con-colecciones",level:3},{value:"Datos de sesion especificos del Actor",id:"datos-de-sesion-especificos-del-actor",level:2},{value:"Conclusion",id:"conclusion",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"fundamentos-de-screenplay",children:"Fundamentos de Screenplay"})}),"\n",(0,o.jsxs)(n.p,{children:["El Screenplay Pattern es un patr\xf3n de dise\xf1o moderno para automatizacion de pruebas, pensado para facilitar la escritura de codigo de pruebas escalable y mantenible. Puedes obtener una vista rapida de un test Screenplay simple ",(0,o.jsx)(n.a,{href:"../../docs/tutorials/screenplay",children:"aqui"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"En esta seccion, veremos como escribir automatizacion de pruebas de alta calidad usando el Screenplay Pattern con mas detalle. Inicialmente nos enfocaremos en interactuar con una aplicacion web usando Selenium - en las siguientes secciones, veremos como interactuar con APIs y bases de datos usando el modelo Screenplay."}),"\n",(0,o.jsxs)(n.p,{children:["En Screenplay modelamos ",(0,o.jsx)(n.em,{children:"actores"})," (Actor) que interactuan con una aplicacion de varias formas para realizar ",(0,o.jsx)(n.em,{children:"tareas"})," (Task) que les ayudan a alcanzar sus objetivos. Los Actor tienen ",(0,o.jsx)(n.em,{children:"habilidades"})," (Ability), como la habilidad de interactuar con un navegador web o consultar una base de datos, que les ayudan a realizar estas tareas. Los Actor tambien pueden responder ",(0,o.jsx)(n.em,{children:"preguntas"})," (Question) sobre el estado del sistema, para que podamos verificar si una funcionalidad se comporta como esperamos."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:a(2713).A+"",width:"1355",height:"641"})}),"\n",(0,o.jsx)(n.h2,{id:"configurando-un-test-screenplay",children:"Configurando un test Screenplay"}),"\n",(0,o.jsx)(n.p,{children:"Los tests de Serenity BDD Screenplay pueden escribirse usando cualquier framework que funcione con Serenity BDD. Comenzaremos discutiendo como configurar un caso de prueba Serenity Screenplay simple usando bibliotecas comunes como JUnit 4, JUnit 5 y Cucumber."}),"\n",(0,o.jsx)(n.h3,{id:"screenplay-y-junit-4",children:"Screenplay y JUnit 4"}),"\n",(0,o.jsxs)(n.p,{children:["Ejecutar un test Screenplay en JUnit 4 y JUnit 5 no es diferente de cualquier otro test de Serenity BDD. Para JUnit 4, agrega la dependencia ",(0,o.jsx)(n.code,{children:"serenity-junit"})," a tu proyecto si aun no esta:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-junit</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-screenplay</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-screenplay-webdriver</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n"})}),"\n",(0,o.jsx)(n.h3,{id:"screenplay-y-junit-5-recomendado",children:"Screenplay y JUnit 5 (Recomendado)"}),"\n",(0,o.jsx)(n.p,{children:"Para JUnit 5, agrega la siguiente dependencia a tu proyecto:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-junit5</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-screenplay</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-screenplay-webdriver</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n"})}),"\n",(0,o.jsxs)(n.p,{children:["A continuacion, necesitas usar la clase ",(0,o.jsx)(n.code,{children:"SerenityJUnit5Extension"}),", asi:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'import net.serenitybdd.junit.runners.SerenityJUnit5Extension;\nimport org.junit.jupiter.api.Test;\n\n@ExtendWith(SerenityJUnit5Extension.class)\nclass AddNewTodos {\n\n    @Test\n    @DisplayName("Add a todo item to an empty list")\n    void addToEmptyList() {...}\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"screenplay-y-junit-4-obsoleto",children:"Screenplay y JUnit 4 (Obsoleto)"}),"\n",(0,o.jsx)(n.admonition,{title:"JUnit 4 Obsoleto",type:"warning",children:(0,o.jsx)(n.p,{children:"El soporte para JUnit 4 esta obsoleto desde Serenity 5.0.0 y sera eliminado en Serenity 6.0.0. Por favor migra a JUnit 5 (ver arriba)."})}),"\n",(0,o.jsxs)(n.p,{children:["Si aun usas JUnit 4, usa la clase ",(0,o.jsx)(n.code,{children:"SerenityRunner"})," en tu clase de test, asi:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"import net.serenitybdd.junit.runners.SerenityRunner;\nimport org.junit.Test;\n\n@RunWith(SerenityRunner.class)\npublic class AddNewTodos {\n\n    @Test\n    public void addToEmptyList() {...}\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"screenplay-y-cucumber",children:"Screenplay y Cucumber"}),"\n",(0,o.jsxs)(n.p,{children:["Para ejecutar un Scenario Screenplay con Cucumber y Serenity, solo necesitas las dependencias estandar de Screenplay junto con la dependencia ",(0,o.jsx)(n.code,{children:"serenity-cucumber"}),", como se muestra a continuacion:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-cucumber</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-screenplay</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-screenplay-webdriver</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n"})}),"\n",(0,o.jsx)(n.h4,{id:"con-junit-5-recomendado",children:"Con JUnit 5 (Recomendado)"}),"\n",(0,o.jsxs)(n.p,{children:["Para JUnit 5, usa la anotacion ",(0,o.jsx)(n.code,{children:"@Suite"})," con el Cucumber JUnit Platform Engine:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'import org.junit.platform.suite.api.*;\n\nimport static io.cucumber.junit.platform.engine.Constants.PLUGIN_PROPERTY_NAME;\n\n@Suite\n@IncludeEngines("cucumber")\n@SelectClasspathResource("features")\n@ConfigurationParameter(\n    key = PLUGIN_PROPERTY_NAME,\n    value = "net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel"\n)\nclass TestSuite {}\n'})}),"\n",(0,o.jsx)(n.h4,{id:"con-junit-4-obsoleto",children:"Con JUnit 4 (Obsoleto)"}),"\n",(0,o.jsx)(n.admonition,{title:"JUnit 4 Obsoleto",type:"warning",children:(0,o.jsx)(n.p,{children:"Los runners de JUnit 4 para Cucumber estan obsoletos desde Serenity 5.0.0 y seran eliminados en Serenity 6.0.0. Por favor migra a JUnit 5 (ver arriba)."})}),"\n",(0,o.jsx)(n.p,{children:"Para JUnit 4, usarias:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'import io.cucumber.junit.CucumberOptions;\nimport net.serenitybdd.cucumber.CucumberWithSerenity;\nimport org.junit.runner.RunWith;\n\n@RunWith(CucumberWithSerenity.class)\n@CucumberOptions(\n        features = "classpath:features"\n)\npublic class TestSuite {}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"definiendo-los-actor",children:"Definiendo los Actor"}),"\n",(0,o.jsx)(n.p,{children:"Todo test Screenplay necesita al menos un Actor (y algunos tienen varios). Hay varias formas de definir un Actor, que varian ligeramente dependiendo del framework de test que estes usando."}),"\n",(0,o.jsx)(n.h3,{id:"actor-en-junit",children:"Actor en JUnit"}),"\n",(0,o.jsxs)(n.p,{children:["Una forma de crear un nuevo Actor es usar el metodo ",(0,o.jsx)(n.code,{children:"Actor.named()"}),". Por ejemplo, para crear un Actor llamado Toby, podriamos escribir lo siguiente:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'Actor toby = Actor.named("Toby");\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Sin embargo, este Actor no podra hacer mucho hasta que le demos la habilidad de interactuar con nuestra aplicacion. Ahi es donde entran en juego las ",(0,o.jsx)(n.em,{children:"habilidades"})," (Ability)."]}),"\n",(0,o.jsxs)(n.p,{children:["La Ability mas comunmente necesaria es la habilidad de navegar por la web usando una biblioteca de automatizacion web como Selenium o Playwright. En un test Serenity JUnit, podemos usar la anotacion ",(0,o.jsx)(n.code,{children:"@Managed"})," para gestionar el ciclo de vida del WebDriver. Una vez que tenemos un driver disponible, podemos asignarlo a un Actor usando la clase ",(0,o.jsx)(n.code,{children:"BrowseTheWeb"})," asi:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\nclass AddNewTodosWithAManagedDriver {\n\n    @Managed\n    WebDriver driver;\n\n    @Test\n    @DisplayName("Add a todo item to an empty list")\n    void addToEmptyList() {\n        Actor toby = Actor.named("Toby")\n                          .whoCan(BrowseTheWeb.with(driver));\n    ...\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"definiendo-actor-usando-la-anotacion-castmember",children:"Definiendo Actor usando la anotacion CastMember"}),"\n",(0,o.jsxs)(n.p,{children:["Para muchos escenarios podemos simplificar el codigo mostrado arriba. Si solo necesitamos usar un Actor que pueda interactuar con un sitio web usando Selenium, podemos usar la anotacion ",(0,o.jsx)(n.code,{children:"@CastMember"}),". Esta anotacion configurara un Actor con una instancia de WebDriver, y gestionara el ciclo de vida del navegador por nosotros (asi que no hay necesidad de la anotacion ",(0,o.jsx)(n.code,{children:"@Managed"})," o la variable ",(0,o.jsx)(n.code,{children:"WebDriver"}),"). Puedes ver un ejemplo de esta anotacion en accion aqui:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\nclass AddNewTodosWithACastMember {\n\n    @CastMember\n    Actor toby;\n\n    @Test\n    @DisplayName("Add a todo item to an empty list")\n    void addToEmptyList() {\n\n        toby.attemptsTo(\n                Open.browserOn().the(TodoMvcPage.class),\n                Enter.theValue("Buy some milk").into(".new-todo").thenHit(Keys.RETURN)\n        );\n        Collection<String> items = toby.asksFor(Text.ofEach(".todo-list label"));\n        assertThat(items).containsExactly("Buy some milk");\n\n        String title = toby.asksFor(Text.of(By.tagName("h1")));\n        assertThat(title).isEqualTo("todos");\n    }\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["El nombre del Actor se derivara del nombre de la variable. Si necesitas un nombre mas descriptivo, puedes usar el atributo ",(0,o.jsx)(n.code,{children:"name"})," para proporcionar un valor de texto libre, que se usara en los reportes:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    @CastMember(name = "Tim the Enchanter")\n    Actor tim;\n'})}),"\n",(0,o.jsx)(n.h3,{id:"actor-en-cucumber",children:"Actor en Cucumber"}),"\n",(0,o.jsx)(n.p,{children:"Configurar Actor en Cucumber es un poco mas complicado que en JUnit, porque generalmente nos referimos a ellos por nombre en los Scenario de Cucumber. Supongamos por ejemplo que queremos automatizar el siguiente Scenario:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:'  Scenario: Add items to an empty list\n    Given Toby starts with an empty list\n    When he adds "Buy some milk" to his list\n    Then the todo list should contain the following items:\n      | Buy some milk |\n'})}),"\n",(0,o.jsx)(n.h4,{id:"usando-un-driver-managed-con-cucumber",children:"Usando un driver Managed con Cucumber"}),"\n",(0,o.jsxs)(n.p,{children:["Podemos usar el mismo enfoque que usamos para JUnit en nuestros archivos de Step Definition de Cucumber, declarando una instancia de Webdriver usando la anotacion ",(0,o.jsx)(n.code,{children:"@Managed"})," y asignandola a nuestro Actor usando la clase de Ability ",(0,o.jsx)(n.code,{children:"BrowseTheWeb"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class TodoStepDefinitions {\n\n    @Managed\n    WebDriver driver;\n\n    Actor toby = Actor.named("Toby");\n\n    @Before\n    public void setupActor() {\n        toby.can(BrowseTheWeb.with(driver));\n    }\n\n    @Given("Toby starts with an empty list")\n    public void stats_with_an_empty_list() {\n        toby.attemptsTo(\n                Open.url("https://todomvc.com/examples/angularjs/#/")\n        );\n    }\n'})}),"\n",(0,o.jsx)(n.p,{children:'Sin embargo, el nombre del Actor ("Toby") es parte de los pasos del Scenario. Podriamos querer tener otros Scenario con otros Actor, o tener un Scenario que involucre mas de un Actor.'}),"\n",(0,o.jsx)(n.h4,{id:"cast-y-stage",children:"Cast y Stage"}),"\n",(0,o.jsxs)(n.p,{children:["Podemos hacer nuestras Step Definition de Cucumber mas flexibles introduciendo el concepto de un ",(0,o.jsx)(n.em,{children:"Cast"})," (elenco) de Actor, y un ",(0,o.jsx)(n.em,{children:"Stage"})," (escenario) donde actuan."]}),"\n",(0,o.jsxs)(n.p,{children:["Un ",(0,o.jsx)(n.em,{children:"Cast"})," es una clase cuyo trabajo es proporcionar Actor con un conjunto especifico de Ability, cuando los necesitamos para desempenar un papel en nuestros tests. Por ejemplo, podemos usar la clase ",(0,o.jsx)(n.code,{children:"OnlineCast"})," para proporcionar Actor que estan equipados con sus propias instancias de Webdriver. De esta forma, no necesitamos declarar el driver ",(0,o.jsx)(n.code,{children:"@Managed"}),", y cada Actor puede tener su propio navegador si tenemos un Scenario con mas de un Actor."]}),"\n",(0,o.jsxs)(n.p,{children:["Un ",(0,o.jsx)(n.em,{children:"Stage"})," es donde nuestros Actor desempenan sus roles. Un Scenario tiene un unico Stage, que podemos usar para identificar un Actor por nombre o encontrar el Actor actualmente activo."]}),"\n",(0,o.jsxs)(n.p,{children:["Necesitamos asignar un Cast al Stage al inicio de cada Scenario; podemos hacer esto llamando al metodo ",(0,o.jsx)(n.code,{children:"OnStage.setTheStage()"})," y pasando un Cast especifico, asi:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"OnStage.setTheStage(new OnlineCast());\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Una vez que hemos configurado el Stage, podemos obtener un Actor con un nombre dado usando el metodo ",(0,o.jsx)(n.code,{children:"OnStage.theActorCalled()"}),", asi:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'Actor toby = OnStage.theActorCalled("Toby");\n'})}),"\n",(0,o.jsx)(n.p,{children:"Usando este enfoque, podriamos implementar el primer paso de nuestro Scenario de una manera que funcione sin importar que Actor este involucrado, asi:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    @Given("{word} starts with an empty list")\n    public void stats_with_an_empty_list(String actorName) {\n        Actor actor = OnStage.theActorCalled(actorName);\n        actor.attemptsTo(\n                Open.url("https://todomvc.com/examples/angularjs/#/")\n        );\n    }\n'})}),"\n",(0,o.jsxs)(n.p,{children:["A menudo es util definir una expresion de Cucumber personalizada para no tener que llamar al metodo ",(0,o.jsx)(n.code,{children:"OnStage.theActorCalled()"})," cada vez:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    @ParameterType(".*")\n    public Actor actor(String actorName) {\n        return OnStage.theActorCalled(actorName);\n    }\n\n    @Given("{actor} starts with an empty list")\n    public void stats_with_an_empty_list(Actor actor) {\n        actor.attemptsTo(\n                Open.url("https://todomvc.com/examples/angularjs/#/")\n        );\n    }\n'})}),"\n",(0,o.jsxs)(n.p,{children:["De esta forma, nuestro siguiente paso puede simplemente usar un parametro de tipo ",(0,o.jsx)(n.code,{children:"Actor"}),", asi:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    @When("{actor} adds {string} to his list")\n    public void he_adds_to_his_list(Actor actor, String item) {\n        actor.attemptsTo(\n                Enter.theValue(item).into(".new-todo").thenHit(Keys.RETURN)\n        );\n    }\n'})}),"\n",(0,o.jsx)(n.p,{children:"Estos metodos estan definidos de forma predeterminada con la plantilla Serenity Cucumber Starter en Github, asi que no necesitas agregarlos tu mismo si estas usando esta plantilla."}),"\n",(0,o.jsxs)(n.p,{children:["La clase ",(0,o.jsx)(n.code,{children:"OnStage"}),' tambien reconoce pronombres - cuando una expresion como "he adds \'Walk the dog\' to the todo list" o "her shopping cart should be empty", el metodo ',(0,o.jsx)(n.code,{children:"theActorCalled()"})," reconocera el pronombre y obtendra el ultimo Actor activo con el metodo ",(0,o.jsx)(n.code,{children:"theActorInTheSpotlight()"}),". Por defecto, los pronombres son:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"he"}),"\n",(0,o.jsx)(n.li,{children:"she"}),"\n",(0,o.jsx)(n.li,{children:"they"}),"\n",(0,o.jsx)(n.li,{children:"it"}),"\n",(0,o.jsx)(n.li,{children:"his"}),"\n",(0,o.jsx)(n.li,{children:"her"}),"\n",(0,o.jsx)(n.li,{children:"their"}),"\n",(0,o.jsxs)(n.li,{children:["its\nPuedes definir tu propia lista de pronombres usando la propiedad Serenity ",(0,o.jsx)(n.code,{children:"screenplay.pronouns"})," en el archivo ",(0,o.jsx)(n.code,{children:"serenity.conf"}),", por ejemplo:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-conf",children:"screenplay.pronouns=il,elle,ils,elles,son,sa,leur,leurs\n"})}),"\n",(0,o.jsx)(n.h4,{id:"cast-y-ability",children:"Cast y Ability"}),"\n",(0,o.jsxs)(n.p,{children:["En el codigo anterior, usamos la clase ",(0,o.jsx)(n.code,{children:"OnlineCast"})," para definir el Cast de Actor:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"OnStage.setTheStage(new OnlineCast());\n"})}),"\n",(0,o.jsx)(n.p,{children:"Los Cast son muy flexibles, y podemos configurarlos para producir Actor con Ability adicionales si lo necesitamos."}),"\n",(0,o.jsxs)(n.p,{children:["Por ejemplo, imagina que queremos dar a nuestros Actor la habilidad de entregar cafe. Para hacer esto, podemos crear una clase de Ability ",(0,o.jsx)(n.code,{children:"Deliver"}),". Para entregar un cafe, llamaremos al metodo ",(0,o.jsx)(n.code,{children:"deliverItem()"}),', que (para nuestros propositos) simplemente devolvera una cadena con un articulo con un numero unico (como "Coffee #1").']}),"\n",(0,o.jsx)(n.p,{children:"La clase Ability podria verse asi:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    public class Deliver implements Ability {\n        final String item;\n        private int counter = 1;\n\n        private Deliver(String item) {\n            this.item = item;\n        }\n\n        public static some(String item) {\n            return new Deliver(item)\n        }\n\n        public String deliverItem() {\n            return item + " #" + counter++;\n        }\n    }\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Ahora podemos asignar esta Ability a nuestros Actor en el ",(0,o.jsx)(n.code,{children:"Cast"})," usando el metodo ",(0,o.jsx)(n.code,{children:"Cast.whereEveryoneCan()"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'OnStage.setTheStage(\n    Cast.whereEveryoneCan(Fetch.some("Coffee"))\n);\n'})}),"\n",(0,o.jsx)(n.p,{children:"Si necesitamos una configuracion mas compleja, tambien podemos usar una expresion Lambda para proporcionar el codigo que necesitamos ejecutar para mejorar un nuevo Actor con Ability adicionales, asi:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'Consumer<Actor> fetchTheCoffee = { actor -> actor.whoCan(Fetch.some("Coffee")) }\n\nOnStage.setTheStage(\n    Cast.whereEveryoneCan(fetchTheCoffee)\n);\n'})}),"\n",(0,o.jsx)(n.h4,{id:"el-actor-en-el-centro-de-atencion",children:"El Actor en el centro de atencion"}),"\n",(0,o.jsx)(n.p,{children:'A veces un paso no se refiere a un Actor por nombre, sino que se refiere implicitamente al ultimo Actor que hizo algo en el Scenario. Por ejemplo, el tercer paso, "Then the todo list should contain the following items..." no tiene un Actor explicito.'}),"\n",(0,o.jsxs)(n.p,{children:["En estas situaciones, podemos usar el metodo ",(0,o.jsx)(n.code,{children:"OnStage.theActorInTheSpotlight()"})," para referirnos al ultimo Actor activo conocido. Por ejemplo, podriamos implementar el tercer paso de nuestro Scenario asi:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    @Then("the todo list should contain the following items:")\n    public void the_todo_list_should_contain(List<String> expectedItems) {\n        Actor currentActor = OnStage.theActorInTheSpotlight();\n        var todos = currentActor.asksFor(Text.ofEach(".todo-list li"));\n        assertThat(todos).containsExactlyElementsOf(expectedItems);\n    }\n'})}),"\n",(0,o.jsx)(n.h2,{id:"agrupando-interaction-en-task",children:"Agrupando Interaction en Task"}),"\n",(0,o.jsx)(n.p,{children:"Screenplay tiene como objetivo facilitar la escritura de codigo de automatizacion mantenible y escalable. Y una forma importante de hacerlo es agrupando Interaction en secuencias reutilizables que representan conceptos de dominio de nivel superior."}),"\n",(0,o.jsxs)(n.p,{children:["Por ejemplo, el siguiente test muestra como iniciar sesion en el sitio de prueba ",(0,o.jsx)(n.a,{href:"https://www.saucedemo.com/",children:"https://www.saucedemo.com/"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'        toby.attemptsTo(\n                Open.url("https://www.saucedemo.com/"),\n                Enter.theValue("standard_user").into("#user-name"),\n                Enter.theValue("secret_sauce").into("#password"),\n                Click.on("#login-button")\n        );\n'})}),"\n",(0,o.jsx)(n.p,{children:"Estas cuatro lineas involucran todo el proceso de iniciar sesion en el sitio. Sin embargo, es dificil ver eso a simple vista al leer el codigo. Podriamos hacer este codigo mucho mas legible agrupando estas Interaction en un unico Task."}),"\n",(0,o.jsx)(n.h3,{id:"agrupando-interaction-usando-la-clase-task",children:"Agrupando Interaction usando la clase Task"}),"\n",(0,o.jsxs)(n.p,{children:["Un mejor enfoque seria agrupar estas Interaction relacionadas en un unico ",(0,o.jsx)(n.code,{children:"Task"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["La forma mas simple de hacer esto es usar el metodo ",(0,o.jsx)(n.code,{children:"Task.where()"}),". Este metodo nos permite devolver un Task (o mas precisamente, una implementacion de la interfaz ",(0,o.jsx)(n.code,{children:"Performable"}),") que combina varios otros Task o Interaction."]}),"\n",(0,o.jsx)(n.p,{children:"El Task que permite a un Actor iniciar sesion como usuario estandar podria verse asi:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class Login {\n    public static Task asAStandardUser() {\n        return Task.where(\n                Open.url("https://www.saucedemo.com/"),\n                Enter.theValue("standard_user").into("#user-name"),\n                Enter.theValue("secret_sauce").into("#password"),\n                Click.on("#login-button")\n        );\n    }\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Podriamos querer hacer nuestro Task mas configurable, agregando algunos parametros a la firma del metodo. En este caso, es util hacer nuestro Task mas descriptivo agregando una descripcion de texto antes de la lista de ",(0,o.jsx)(n.em,{children:"Performable"}),", como se muestra a continuacion. Esta descripcion aparecera en los reportes cada vez que se ejecute el Task. El ",(0,o.jsx)(n.code,{children:"{0}"}),' en la descripcion sera reemplazado por el nombre del Actor (asi que "Toby" en nuestro test).']}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class Login {\n    public static Performable as(String username, String password) {\n        return Task.where(\n                "{0} logs in as " + username,\n                Open.url("https://www.saucedemo.com/"),\n                Enter.theValue(username).into("#user-name"),\n                Enter.theValue(password).into("#password"),\n                Click.on("#login-button")\n        );\n    }\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"Ahora podemos refactorizar nuestro test original usando este metodo:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"        toby.attemptsTo(Login.asAStandardUser());\n"})}),"\n",(0,o.jsx)(n.p,{children:"o"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'        toby.attemptsTo(Login.as("standard_user","secret_sauce"));\n'})}),"\n",(0,o.jsx)(n.h3,{id:"usando-expresiones-lambda-para-crear-task-personalizados",children:"Usando expresiones lambda para crear Task personalizados"}),"\n",(0,o.jsxs)(n.p,{children:["Hasta ahora hemos visto como crear un ",(0,o.jsx)(n.em,{children:"Task"})," a partir de una lista de otros Task o Interaction. Pero a veces necesitamos tener mas control sobre la logica de nuestro Task. Podemos hacer esto muy facilmente usando expresiones lambda, que nos dan control total sobre como debe funcionar nuestro Task."]}),"\n",(0,o.jsx)(n.p,{children:"Por ejemplo, imagina que hemos refactorizado nuestro ejemplo TodoMVC de arriba para usar la siguiente clase Task para abrir la aplicacion TodoMVC con una lista vacia:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'\npublic class Start {\n    public static Performable withAnEmptyTodoList() {\n        return Task.where("{0} starts with an empty todo list",\n                Open.url("https://todomvc.com/examples/angularjs/#/")\n        );\n    }\n'})}),"\n",(0,o.jsx)(n.p,{children:"Tambien podriamos crear un Task para agregar un elemento a la lista:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class AddATodoItem {\n    public static Performable called(String thingToDo) {\n        return Task.where("{0} adds a todo item called " + thingToDo,\n                Enter.theValue(item).into(".new-todo").thenHit(Keys.RETURN)\n        );\n    }\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Ahora supongamos que queremos permitir que Toby comience con algunos elementos ya en su lista. Podriamos imaginar un nuevo metodo ",(0,o.jsx)(n.code,{children:"Start.withAListContainingTheItems(...)"})," asi:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'        toby.attemptsTo(\n                Start.withAListContaingTheItems("Feed the cat","Buy some bread")\n        );\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Sin embargo, para implementar este metodo, necesitamos iterar sobre la lista de elementos proporcionada, y llamar al Task ",(0,o.jsx)(n.code,{children:"AddATodoItem"})," para cada uno de ellos. Podemos hacer esto usando una expresion Lambda en lugar de una lista de ",(0,o.jsx)(n.em,{children:"Performable"}),". La expresion Lambda toma un Actor como parametro, y nos permite escribir bloques de codigo arbitrarios para implementar nuestro Task. Por ejemplo, el metodo ",(0,o.jsx)(n.code,{children:"withAListContaingTheItems()"})," podria verse asi:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    public static Performable withAListContainingTheItems(String... items) {\n        return Task.where("{0} starts with a list containing " + Arrays.asList(items),\n                actor -> {\n                    actor.attemptsTo(Start.withAnEmptyTodoList());\n                    for (String item : items) {\n                        actor.attemptsTo(AddATodoItem.called(item));\n                    }\n                }\n        );\n'})}),"\n",(0,o.jsxs)(n.p,{children:["La clase ",(0,o.jsx)(n.code,{children:"Start"})," completa ahora se veria asi:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class Start {\n    public static Performable withAnEmptyTodoList() {\n        return Task.where("{0} starts with an empty todo list",\n                Open.url("https://todomvc.com/examples/angularjs/#/")\n        );\n    }\n\n    public static Performable withAListContainingTheItems(String... items) {\n        return Task.where("{0} starts with a list containing " + Arrays.asList(items),\n                actor -> {\n                    actor.attemptsTo(Start.withAnEmptyTodoList());\n                    for (String item : items) {\n                        actor.attemptsTo(AddATodoItem.called(item));\n                    }\n                }\n        );\n    }\n}\n\n'})}),"\n",(0,o.jsx)(n.h3,{id:"escribiendo-clases-performable-personalizadas",children:"Escribiendo clases Performable personalizadas"}),"\n",(0,o.jsxs)(n.p,{children:["A veces necesitamos mas control sobre la creacion de un Task. Podemos hacer esto creando una clase que implemente la interfaz ",(0,o.jsx)(n.code,{children:"Performable"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["La interfaz ",(0,o.jsx)(n.code,{children:"Performable"})," tiene un unico metodo que necesitas implementar: ",(0,o.jsx)(n.code,{children:"performAs()"}),". Este metodo toma un ",(0,o.jsx)(n.code,{children:"Actor"})," como parametro. Un Task personalizado muy simple podria verse asi:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class AddItem implements Performable {\n    @Override\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n                Enter.theValue("Buy some milk")\n                        .into(".new-todo")\n                        .thenHit(Keys.RETURN)\n        );\n    }\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"Ahora podemos usar esta clase directamente en nuestros tests:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"    AddItem addANewItem = new AddItem();\n    toby.attemptsTo(addANewItem);\n"})}),"\n",(0,o.jsxs)(n.p,{children:['Por defecto, Serenity registrara esta accion en los reportes usando el nombre del Actor y el nombre de la clase, asi que en este caso, el reporte incluiria algo como "Toby add item". Si queremos un texto mas descriptivo, podemos agregar la anotacion ',(0,o.jsx)(n.code,{children:"@Step"})," al metodo ",(0,o.jsx)(n.code,{children:"performAs()"}),', como se muestra aqui (el marcador "',0,'" sera reemplazado por el nombre del Actor):']}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class AddItem implements Performable {\n    @Override\n    @Step("{0} adds an item to the list")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n                Enter.theValue("Buy some milk")\n                        .into(".new-todo")\n                        .thenHit(Keys.RETURN)\n        );\n    }\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:['En esta clase, solo podemos agregar el elemento "Buy some milk" a nuestra lista. Podriamos hacer nuestra clase mas flexible registrando el nombre del Task como un parametro. Para hacer esto, necesitamos agregar una variable miembro a nuestro ',(0,o.jsx)(n.code,{children:"Performable"})," para representar este valor, y pasarlo al constructor:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class AddItem implements Performable {\n    private String name;\n\n    public AddItem(String name) {\n        this.name = name;\n    }\n\n    @Override\n    @Step("{0} adds an item to the list")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n                Enter.theValue(name)\n                        .into(".new-todo")\n                        .thenHit(Keys.RETURN)\n        );\n    }\n\n    public static AddItem called(String name) {\n        return new AddItem(name);\n    }\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"Ahora podemos hacer nuestro codigo de test mas legible, como se muestra aqui:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    toby.attemptsTo(AddItem.named("Walk the dog"));\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Sin embargo, hay una cosa mas que necesitamos hacer para que esto funcione correctamente. El codigo mostrado aqui no se reportara correctamente en los reportes de Serenity. Por razones tecnicas, cada implementacion de ",(0,o.jsx)(n.code,{children:"Performable"})," debe tener un constructor por defecto, incluso si no lo usas directamente en tu codigo. Asi que la implementacion completa se veria asi:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class AddItem implements Performable {\n    private String name;\n\n    public AddItem() {}\n\n    public AddItem(String name) {\n        this.name = name;\n    }\n\n    @Override\n    @Step("{0} adds an item to the list")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n                Enter.theValue(name)\n                        .into(".new-todo")\n                        .thenHit(Keys.RETURN)\n        );\n    }\n\n    public static AddItem called(String name) {\n        return new AddItem(name);\n    }\n}\n'})}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["Recuerda siempre agregar un constructor por defecto sin parametros a tus implementaciones de ",(0,o.jsx)(n.code,{children:"Performable"}),", de lo contrario no apareceran correctamente en los reportes."]})}),"\n",(0,o.jsx)(n.h2,{id:"question---consultando-el-estado-del-sistema",children:"Question - consultando el estado del sistema"}),"\n",(0,o.jsxs)(n.p,{children:["Screenplay es un patron centrado en el Actor, y asi como los Actor interactuan con el sistema realizando ",(0,o.jsx)(n.em,{children:"Task"})," e ",(0,o.jsx)(n.em,{children:"Interaction"}),", pueden consultar el estado del sistema haciendo ",(0,o.jsx)(n.em,{children:"preguntas"})," (Question)."]}),"\n",(0,o.jsx)(n.h3,{id:"usando-clases-question-incluidas",children:"Usando clases Question incluidas"}),"\n",(0,o.jsxs)(n.p,{children:["Un Actor puede hacer una pregunta usando el metodo ",(0,o.jsx)(n.code,{children:"askFor()"}),". Puedes ver un ejemplo de como funciona esto aqui:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'   String pageTitle = toby.asksFor(Text.of(".title"));\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Text"})," es un ejemplo de una ",(0,o.jsx)(n.em,{children:"Question Factory"}),". Las Question Factory proporcionan una forma conveniente de consultar el estado de la aplicacion, y hay muchas para elegir. Por ejemplo, podriamos verificar si un elemento web particular era visible usando la clase ",(0,o.jsx)(n.code,{children:"Visibility"}),", asi:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'   boolean isVisible = toby.asksFor(Visibility.of(".title"));\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Serenity BDD viene con muchas ",(0,o.jsx)(n.em,{children:"Question Factory"})," incluidas como estas, y las veremos con mas detalle en la siguiente seccion. Pero tambien puedes escribir tus propias Question personalizadas, para consultar cualquier aspecto de tu aplicacion que desees."]}),"\n",(0,o.jsx)(n.h3,{id:"creando-question-personalizadas-usando-expresiones-lambda",children:"Creando Question personalizadas usando expresiones Lambda"}),"\n",(0,o.jsxs)(n.p,{children:["Una forma de implementar una ",(0,o.jsx)(n.em,{children:"Question"})," es usar una expresion Lambda de Java 8 que toma un ",(0,o.jsx)(n.em,{children:"Actor"})," como argumento. Por ejemplo, el siguiente metodo devuelve una ",(0,o.jsx)(n.em,{children:"Integer Question"})," (una ",(0,o.jsx)(n.em,{children:"Question"})," que devuelve un entero)."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    Question<Integer> numberOfTodoItems() {\n        return actor -> BrowseTheWeb.as(actor).findAll(".todo-list li").size();\n    }\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Podriamos encontrar la respuesta a esta Question usando el metodo ",(0,o.jsx)(n.code,{children:"asksFor()"}),", como en el ejemplo anterior:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"   int numberOfTodos = toby.asksFor(numberOfTodoItems());\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Una alternativa al metodo ",(0,o.jsx)(n.code,{children:"asksFor()"})," es el propio metodo ",(0,o.jsx)(n.code,{children:"answeredBy()"})," de la ",(0,o.jsx)(n.code,{children:"Question"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"   int numberOfTodos = numberOfTodoItems().answeredBy(toby);\n"})}),"\n",(0,o.jsx)(n.p,{children:"Este formato puede ser mas conveniente para aserciones, como se ilustra en este ejemplo:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"   assertThat(numberOfTodoItems().answeredBy(toby)).isEqualTo(1);\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"haciendo-las-question-mas-legibles-con-el-metodo-questionabout",children:["Haciendo las Question mas legibles con el metodo ",(0,o.jsx)(n.code,{children:"Question.about()"})]}),"\n",(0,o.jsxs)(n.p,{children:["Podriamos hacer este metodo mas legible usando el formato ",(0,o.jsx)(n.code,{children:"Question.about"})," - esto producira un mensaje de error mas significativo. En el siguiente ejemplo, usamos la clase ",(0,o.jsx)(n.code,{children:"BrowseTheWeb"})," para acceder a la API de Serenity WebDriver y encontrar el numero de elementos de la lista de tareas actualmente en la pagina:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    Question<Integer> numberOfTodoItems() {\n        return Question.about("the number of todo items")\n                   .answeredBy(\n                       actor -> BrowseTheWeb.as(actor).findAll(".todo-list li").size());\n    }\n'})}),"\n",(0,o.jsx)(n.h3,{id:"convirtiendo-question",children:"Convirtiendo Question"}),"\n",(0,o.jsxs)(n.p,{children:["Las Question tambien proporcionan una forma conveniente de convertir respuestas a diferentes tipos. Esto es particularmente util para las clases ",(0,o.jsx)(n.code,{children:"Question"})," de WebDriver incluidas, que tipicamente devuelven valores en forma de texto."]}),"\n",(0,o.jsx)(n.p,{children:"Por ejemplo, la aplicacion TodoMVC muestra el numero de elementos pendientes en cualquier momento debajo de la lista:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:a(3030).A+"",width:"1580",height:"1014"})}),"\n",(0,o.jsxs)(n.p,{children:["Podemos localizar el conteo de elementos usando la expresion CSS ",(0,o.jsx)(n.em,{children:'".todo-count strong"'}),". Podriamos obtener este valor como un String usando la clase ",(0,o.jsx)(n.code,{children:"Text"})," que vimos anteriormente:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    String itemsLeftCount = toby.asksFor(Text.of(".todo-count strong");\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Sin embargo, si preferimos recuperar el valor como un entero, podriamos usar el metodo ",(0,o.jsx)(n.code,{children:"asInteger()"})," asi:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'   int itemsLeftCount = toby.asksFor(Text.of(".todo-count strong").asInteger());\n'})}),"\n",(0,o.jsx)(n.p,{children:"Algunos de los metodos de conversion disponibles incluyen los siguientes:"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Tipo"}),(0,o.jsx)(n.th,{children:"Metodo"}),(0,o.jsx)(n.th,{children:"Ejemplo"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Integer"}),(0,o.jsx)(n.td,{children:"asInteger()"}),(0,o.jsx)(n.td,{children:'Text.of(".todo-count strong").asInteger()'})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Long"}),(0,o.jsx)(n.td,{children:"asLong()"}),(0,o.jsx)(n.td,{children:'Text.of(".todo-count strong").asLong()'})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Float"}),(0,o.jsx)(n.td,{children:"asFloat()"}),(0,o.jsx)(n.td,{children:'Text.of(".currency-value").asFloat()'})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Double"}),(0,o.jsx)(n.td,{children:"asDouble()"}),(0,o.jsx)(n.td,{children:'Text.of(".currency-value").asDouble()'})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"BigDecimal"}),(0,o.jsx)(n.td,{children:"asBigDecimal()"}),(0,o.jsx)(n.td,{children:'Text.of(".currency-value").asBigDecimal()'})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"convirtiendo-valores-de-fecha",children:"Convirtiendo valores de fecha"}),"\n",(0,o.jsxs)(n.p,{children:["Los valores de fecha tambien pueden convertirse a objetos ",(0,o.jsx)(n.code,{children:"LocalDate"}),'. Si la fecha usa el formato de fecha ISO estandar (por ejemplo "2022-05-15"), puede convertirse usando el metodo ',(0,o.jsx)(n.code,{children:"asDate()"}),", asi:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'   LocalDate dateValue = toby.asksFor(\n       Text.of("#departure-date").asDate()\n    );\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Si la fecha usa un formato diferente, el metodo ",(0,o.jsx)(n.code,{children:"asDate()"})," toma un patron de fecha-hora que puede usarse para analizar el valor, por ejemplo:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    LocalDate dateValue = toby.asksFor(\n        Text.of("#departure-date").asDate("d MMM uuuu")\n    );\n'})}),"\n",(0,o.jsx)(n.h3,{id:"convirtiendo-a-listas-de-valores",children:"Convirtiendo a listas de valores"}),"\n",(0,o.jsxs)(n.p,{children:["Tambien podemos usar el metodo ",(0,o.jsx)(n.code,{children:"asListOf()"})," para encontrar todas las respuestas a una Question especifica, y convertir cada una de ellas a un tipo especificado. Por ejemplo, para convertir una lista de valores String coincidentes a enteros, podriamos usar el siguiente codigo:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    List<Integer> itemQuantities = toby.asksFor(\n        Text.of(".item-quantity").asListOf(Integer.class)\n    );\n'})}),"\n",(0,o.jsx)(n.h3,{id:"trabajando-con-colecciones",children:"Trabajando con colecciones"}),"\n",(0,o.jsxs)(n.p,{children:["Otra forma de recuperar una lista de valores es usar el metodo ",(0,o.jsx)(n.code,{children:"ofEach()"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    Collection<String> itemQuantities = toby.asksFor(Text.of(".item-quantity"));\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Al igual que con el metodo ",(0,o.jsx)(n.code,{children:"Text.of()"}),", podemos usar el metodo ",(0,o.jsx)(n.code,{children:"asListOf()"})," para convertir esta coleccion a otro tipo"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    List<String> itemQuantities = toby.asksFor(\n        Text.of(".item-quantity").asListOf(Integer.class)\n    );\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Si necesitamos realizar una operacion mas compleja, podemos usar el metodo ",(0,o.jsx)(n.code,{children:"mapEach()"})," para aplicar una expresion Lambda arbitraria a cada elemento coincidente:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'   Collection<Integer> nameLengths = toby.asksFor(Text.ofEach(".name").mapEach(s -> s.length()));\n'})}),"\n",(0,o.jsx)(n.h2,{id:"datos-de-sesion-especificos-del-actor",children:"Datos de sesion especificos del Actor"}),"\n",(0,o.jsxs)(n.p,{children:["A veces necesitamos almacenar informacion en un paso o Task y reutilizarla en uno posterior. Cada Actor de Screenplay puede recordar informacion, y recuperarla mas tarde en el test. Hacemos esto usando el metodo ",(0,o.jsx)(n.code,{children:"remember()"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    int actualCost = 100\n    actor.remember("Total Cost", total);\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Mas tarde, podemos recuperar esta informacion usando el metodo ",(0,o.jsx)(n.code,{children:"recall()"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    int recalledCost = dana.recall("Total Cost");\n    assertThat(recalledCost).isEqualTo(100);\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Un Actor puede recordar informacion de cualquier tipo, incluso la respuesta a una Question. Por ejemplo, el metodo ",(0,o.jsx)(n.code,{children:"Text.of()"})," devuelve un objeto Question de tipo ",(0,o.jsx)(n.code,{children:"Question<String>"}),". Un Actor puede recordar la respuesta a esta Question usandola como parametro del metodo ",(0,o.jsx)(n.code,{children:"remember()"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    actor.remember("Total Cost", Text.of("#total-cost").asInteger());\n'})}),"\n",(0,o.jsx)(n.p,{children:"Luego podemos recuperar este valor de la misma manera que cualquier otro:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    int totalCost = actor.recall("Total Cost");\n    assertThat(totalCost).isEqualTo(100);\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Incluso podemos recuperar un mapa que contenga todos los valores actualmente recordados por el Actor. Hacemos esto usando el metodo ",(0,o.jsx)(n.code,{children:"recallAll()"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"    Map<String, Object> all = actor.recallAll();\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Tambien podemos eliminar un valor recordado usando el metodo ",(0,o.jsx)(n.code,{children:"forget()"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'    actor.forget("Total Cost");\n'})}),"\n",(0,o.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,o.jsx)(n.p,{children:"Ahora que hemos visto como configurar un test Screenplay usando diferentes frameworks, como organizar Interaction en Task, y como consultar el estado del sistema, veremos como usar Screenplay para interactuar con una aplicacion web con mas detalle."})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},2713(e,n,a){a.d(n,{A:()=>s});const s=a.p+"assets/images/screenplay-model-d488f442690c701509fec447d3200a99.svg"},3030(e,n,a){a.d(n,{A:()=>s});const s=a.p+"assets/images/items-left-3ecf27bc1e1d2a5f0618de446edd32a3.png"},8453(e,n,a){a.d(n,{R:()=>t,x:()=>i});var s=a(6540);const o={},r=s.createContext(o);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);
"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[544],{8453(e,n,a){a.d(n,{R:()=>o,x:()=>i});var r=a(6540);const t={},s=r.createContext(t);function o(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(s.Provider,{value:n},e.children)}},8892(e,n,a){a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"cucumber/advanced-patterns","title":"Patrones Avanzados de Cucumber","description":"Esta gu\xeda cubre patrones y t\xe9cnicas avanzadas para escribir pruebas Cucumber mantenibles y escalables con Serenity BDD. Aprender\xe1s patrones utilizados por ingenieros de automatizaci\xf3n de pruebas experimentados para construir suites de prueba robustas.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/cucumber/advanced-patterns.md","sourceDirName":"cucumber","slug":"/cucumber/advanced-patterns","permalink":"/es/docs/cucumber/advanced-patterns","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/cucumber/advanced-patterns.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"advanced-patterns","title":"Patrones Avanzados de Cucumber","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Ejecutando Pruebas Cucumber en Paralelo","permalink":"/es/docs/cucumber/parallel-execution"},"next":{"title":"Referencia de Configuraci\xf3n de Cucumber","permalink":"/es/docs/cucumber/configuration-reference"}}');var t=a(4848),s=a(8453);const o={id:"advanced-patterns",title:"Patrones Avanzados de Cucumber",sidebar_position:3},i="Patrones Avanzados de Cucumber con Serenity BDD",c={},d=[{value:"Prerrequisitos",id:"prerrequisitos",level:2},{value:"Patrones Avanzados de Hooks",id:"patrones-avanzados-de-hooks",level:2},{value:"Tipos de Hooks y Orden de Ejecuci\xf3n",id:"tipos-de-hooks-y-orden-de-ejecuci\xf3n",level:3},{value:"Hooks con Etiquetas",id:"hooks-con-etiquetas",level:3},{value:"Expresiones de Etiquetas en Hooks",id:"expresiones-de-etiquetas-en-hooks",level:3},{value:"Ordenamiento de Hooks",id:"ordenamiento-de-hooks",level:3},{value:"Hooks Espec\xedficos de Screenplay",id:"hooks-espec\xedficos-de-screenplay",level:3},{value:"Tipos de Par\xe1metros Personalizados",id:"tipos-de-par\xe1metros-personalizados",level:2},{value:"Definiendo Tipos de Par\xe1metros Personalizados",id:"definiendo-tipos-de-par\xe1metros-personalizados",level:3},{value:"Usando Par\xe1metros Personalizados en Pasos",id:"usando-par\xe1metros-personalizados-en-pasos",level:3},{value:"Tipo de Par\xe1metro Actor",id:"tipo-de-par\xe1metro-actor",level:3},{value:"Patrones Complejos de Tablas de Datos",id:"patrones-complejos-de-tablas-de-datos",level:2},{value:"Transformaciones B\xe1sicas de Tablas de Datos",id:"transformaciones-b\xe1sicas-de-tablas-de-datos",level:3},{value:"DataTableType para Transformaciones Personalizadas",id:"datatabletype-para-transformaciones-personalizadas",level:3},{value:"Tablas de Datos Verticales",id:"tablas-de-datos-verticales",level:3},{value:"Estructuras de Datos Anidadas",id:"estructuras-de-datos-anidadas",level:3},{value:"Doc Strings para Contenido de Formato Largo",id:"doc-strings-para-contenido-de-formato-largo",level:2},{value:"Doc Strings con Tipos de Contenido",id:"doc-strings-con-tipos-de-contenido",level:3},{value:"Compartiendo Estado Entre Pasos",id:"compartiendo-estado-entre-pasos",level:2},{value:"Usando la Memoria del Actor (Screenplay Pattern)",id:"usando-la-memoria-del-actor-screenplay-pattern",level:3},{value:"Memoria Tipada con Gen\xe9ricos",id:"memoria-tipada-con-gen\xe9ricos",level:3},{value:"Usando Objetos World (Inyecci\xf3n de Dependencias)",id:"usando-objetos-world-inyecci\xf3n-de-dependencias",level:3},{value:"Patrones de Manejo de Errores",id:"patrones-de-manejo-de-errores",level:2},{value:"Patr\xf3n de Errores Esperados",id:"patr\xf3n-de-errores-esperados",level:3},{value:"Usando Question para Estados de Error",id:"usando-question-para-estados-de-error",level:3},{value:"Aserciones Suaves para M\xfaltiples Verificaciones",id:"aserciones-suaves-para-m\xfaltiples-verificaciones",level:3},{value:"Organizaci\xf3n de Step Definition",id:"organizaci\xf3n-de-step-definition",level:2},{value:"Una Clase por \xc1rea de Funcionalidad",id:"una-clase-por-\xe1rea-de-funcionalidad",level:3},{value:"Pasos Delgados, Task Ricos",id:"pasos-delgados-task-ricos",level:3},{value:"Patrones de Pasos Reutilizables",id:"patrones-de-pasos-reutilizables",level:3},{value:"Mejores Pr\xe1cticas para Background",id:"mejores-pr\xe1cticas-para-background",level:2},{value:"Mant\xe9n los Background Simples",id:"mant\xe9n-los-background-simples",level:3},{value:"Usa Etiquetas para Compartir Background",id:"usa-etiquetas-para-compartir-background",level:3},{value:"Patrones de Scenario Outline",id:"patrones-de-scenario-outline",level:2},{value:"Examples Din\xe1micos con Etiquetas",id:"examples-din\xe1micos-con-etiquetas",level:3},{value:"Tablas de Examples desde Fuentes Externas",id:"tablas-de-examples-desde-fuentes-externas",level:3},{value:"Integraci\xf3n: Screenplay vs Page Object",id:"integraci\xf3n-screenplay-vs-page-object",level:2},{value:"Enfoque Puro con Screenplay",id:"enfoque-puro-con-screenplay",level:3},{value:"Enfoque con Page Object",id:"enfoque-con-page-object",level:3},{value:"Enfoque H\xedbrido",id:"enfoque-h\xedbrido",level:3},{value:"Optimizaci\xf3n de Rendimiento",id:"optimizaci\xf3n-de-rendimiento",level:2},{value:"Ejecuci\xf3n Paralela con Estado Aislado",id:"ejecuci\xf3n-paralela-con-estado-aislado",level:3},{value:"Inicializaci\xf3n Perezosa",id:"inicializaci\xf3n-perezosa",level:3},{value:"Consejos de Depuraci\xf3n",id:"consejos-de-depuraci\xf3n",level:2},{value:"Registro Detallado en Hooks",id:"registro-detallado-en-hooks",level:3},{value:"Capturar Estado en Fallo",id:"capturar-estado-en-fallo",level:3},{value:"Resumen",id:"resumen",level:2},{value:"Siguientes Pasos",id:"siguientes-pasos",level:2},{value:"Recursos Adicionales",id:"recursos-adicionales",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"patrones-avanzados-de-cucumber-con-serenity-bdd",children:"Patrones Avanzados de Cucumber con Serenity BDD"})}),"\n",(0,t.jsx)(n.p,{children:"Esta gu\xeda cubre patrones y t\xe9cnicas avanzadas para escribir pruebas Cucumber mantenibles y escalables con Serenity BDD. Aprender\xe1s patrones utilizados por ingenieros de automatizaci\xf3n de pruebas experimentados para construir suites de prueba robustas."}),"\n",(0,t.jsx)(n.h2,{id:"prerrequisitos",children:"Prerrequisitos"}),"\n",(0,t.jsx)(n.p,{children:"Esta gu\xeda asume que est\xe1s familiarizado con:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Conceptos b\xe1sicos de Cucumber (Feature, Scenario, Step Definition)"}),"\n",(0,t.jsx)(n.li,{children:"Fundamentos de Serenity BDD"}),"\n",(0,t.jsx)(n.li,{children:"El Screenplay Pattern o Page Object"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Si eres nuevo en Cucumber con Serenity, comienza con ",(0,t.jsx)(n.a,{href:"cucumber-junit5",children:"Ejecutando Escenarios Cucumber con JUnit 5"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"patrones-avanzados-de-hooks",children:"Patrones Avanzados de Hooks"}),"\n",(0,t.jsx)(n.p,{children:"Los hooks de Cucumber te permiten ejecutar c\xf3digo en puntos espec\xedficos del ciclo de vida de las pruebas. Entender los patrones avanzados de hooks es esencial para una configuraci\xf3n y limpieza adecuada de las pruebas."}),"\n",(0,t.jsx)(n.h3,{id:"tipos-de-hooks-y-orden-de-ejecuci\xf3n",children:"Tipos de Hooks y Orden de Ejecuci\xf3n"}),"\n",(0,t.jsx)(n.p,{children:"Cucumber proporciona varios tipos de hooks que se ejecutan en diferentes momentos:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package com.example.hooks;\n\nimport io.cucumber.java.*;\n\npublic class LifecycleHooks {\n\n    // Se ejecuta una vez ANTES de TODOS los escenarios (Cucumber 7+)\n    @BeforeAll\n    public static void beforeAllScenarios() {\n        System.out.println("Iniciando suite de pruebas");\n        // Inicializar recursos compartidos, iniciar test containers, etc.\n    }\n\n    // Se ejecuta antes de CADA escenario\n    @Before\n    public void beforeScenario(Scenario scenario) {\n        System.out.println("Iniciando: " + scenario.getName());\n    }\n\n    // Se ejecuta antes de CADA paso\n    @BeforeStep\n    public void beforeStep() {\n        // \xdatil para registro o medici\xf3n de tiempos\n    }\n\n    // Se ejecuta despu\xe9s de CADA paso\n    @AfterStep\n    public void afterStep() {\n        // \xdatil para capturas de pantalla o verificaci\xf3n de estado\n    }\n\n    // Se ejecuta despu\xe9s de CADA escenario\n    @After\n    public void afterScenario(Scenario scenario) {\n        System.out.println("Finalizado: " + scenario.getName());\n        if (scenario.isFailed()) {\n            // Manejo personalizado de fallos\n        }\n    }\n\n    // Se ejecuta una vez despu\xe9s de TODOS los escenarios (Cucumber 7+)\n    @AfterAll\n    public static void afterAllScenarios() {\n        System.out.println("Suite de pruebas completada");\n        // Limpiar recursos compartidos\n    }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Orden de ejecuci\xf3n para un solo escenario:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"@BeforeAll (una vez por ejecuci\xf3n de pruebas)\n  \u2514\u2500> @Before\n        \u2514\u2500> @BeforeStep \u2192 Paso 1 \u2192 @AfterStep\n        \u2514\u2500> @BeforeStep \u2192 Paso 2 \u2192 @AfterStep\n        \u2514\u2500> @BeforeStep \u2192 Paso 3 \u2192 @AfterStep\n      @After\n@AfterAll (una vez por ejecuci\xf3n de pruebas)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"hooks-con-etiquetas",children:"Hooks con Etiquetas"}),"\n",(0,t.jsx)(n.p,{children:"Ejecuta hooks solo para escenarios con etiquetas espec\xedficas:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public class TaggedHooks {\n\n    @Before("@database")\n    public void setupDatabase() {\n        // Solo se ejecuta para escenarios etiquetados @database\n        DatabaseTestUtils.resetDatabase();\n        DatabaseTestUtils.loadFixtures("test-data.sql");\n    }\n\n    @After("@database")\n    public void cleanupDatabase() {\n        DatabaseTestUtils.truncateAllTables();\n    }\n\n    @Before("@authenticated")\n    public void ensureAuthenticated() {\n        // Configurar sesi\xf3n autenticada antes de escenarios que lo necesiten\n    }\n\n    @Before("@slow")\n    public void increaseTimeouts() {\n        // Aumentar timeouts para escenarios de ejecuci\xf3n lenta\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"expresiones-de-etiquetas-en-hooks",children:"Expresiones de Etiquetas en Hooks"}),"\n",(0,t.jsx)(n.p,{children:"Usa expresiones de etiquetas complejas para dirigirte a escenarios espec\xedficos:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public class ConditionalHooks {\n\n    @Before("@ui and not @headless")\n    public void setupBrowserWithUI() {\n        // Solo para pruebas de UI que necesitan un navegador visible\n    }\n\n    @Before("@api or @integration")\n    public void setupApiClient() {\n        // Para pruebas de API o integraci\xf3n\n    }\n\n    @Before("(@smoke or @regression) and not @wip")\n    public void setupForRealTests() {\n        // Para smoke o regresi\xf3n, pero omitir trabajo en progreso\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"ordenamiento-de-hooks",children:"Ordenamiento de Hooks"}),"\n",(0,t.jsx)(n.p,{children:"Controla el orden de ejecuci\xf3n de hooks cuando tienes m\xfaltiples hooks del mismo tipo:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public class OrderedHooks {\n\n    // Valores de orden menores se ejecutan primero para hooks @Before\n    @Before(order = 1)\n    public void firstSetup() {\n        System.out.println("1. Inicializar entorno de pruebas");\n    }\n\n    @Before(order = 2)\n    public void secondSetup() {\n        System.out.println("2. Configurar datos de prueba");\n    }\n\n    @Before(order = 3)\n    public void thirdSetup() {\n        System.out.println("3. Navegar a la aplicaci\xf3n");\n    }\n\n    // Valores de orden mayores se ejecutan primero para hooks @After (orden inverso)\n    @After(order = 3)\n    public void firstCleanup() {\n        System.out.println("1. Capturar estado final");\n    }\n\n    @After(order = 2)\n    public void secondCleanup() {\n        System.out.println("2. Limpiar datos de prueba");\n    }\n\n    @After(order = 1)\n    public void thirdCleanup() {\n        System.out.println("3. Cerrar recursos");\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.admonition,{title:"Ayuda Memoria para Orden de Hooks",type:"tip",children:[(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"@Before"}),": N\xfameros menores se ejecutan primero (1, 2, 3...)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"@After"}),": N\xfameros mayores se ejecutan primero (...3, 2, 1)"]}),"\n"]}),(0,t.jsx)(n.p,{children:"Pi\xe9nsalo como envolver: la configuraci\xf3n construye hacia arriba, la limpieza deshace en reversa."})]}),"\n",(0,t.jsx)(n.h3,{id:"hooks-espec\xedficos-de-screenplay",children:"Hooks Espec\xedficos de Screenplay"}),"\n",(0,t.jsx)(n.p,{children:"Cuando uses el Screenplay Pattern, configura los Actor en los hooks:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"package com.example.hooks;\n\nimport io.cucumber.java.*;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.actors.OnStage;\nimport net.serenitybdd.screenplay.actors.OnlineCast;\nimport net.serenitybdd.screenplay.abilities.BrowseTheWeb;\n\npublic class ScreenplayHooks {\n\n    @Before\n    public void setTheStage() {\n        OnStage.setTheStage(new OnlineCast());\n    }\n\n    @After\n    public void drawTheCurtain() {\n        OnStage.drawTheCurtain();\n    }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Para pruebas basadas en Playwright:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"import net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\n\npublic class PlaywrightHooks {\n\n    @Before\n    public void setTheStage() {\n        OnStage.setTheStage(Cast.whereEveryoneCan(\n            BrowseTheWebWithPlaywright.usingTheDefaultConfiguration()\n        ));\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"tipos-de-par\xe1metros-personalizados",children:"Tipos de Par\xe1metros Personalizados"}),"\n",(0,t.jsx)(n.p,{children:"Las expresiones de Cucumber soportan tipos de par\xe1metros personalizados que transforman argumentos de pasos en objetos de dominio."}),"\n",(0,t.jsx)(n.h3,{id:"definiendo-tipos-de-par\xe1metros-personalizados",children:"Definiendo Tipos de Par\xe1metros Personalizados"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package com.example.parameters;\n\nimport io.cucumber.java.ParameterType;\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\n\npublic class CustomParameters {\n\n    // Transforma "today", "tomorrow", "yesterday" en LocalDate\n    @ParameterType("today|tomorrow|yesterday|\\\\d{4}-\\\\d{2}-\\\\d{2}")\n    public LocalDate date(String value) {\n        return switch (value) {\n            case "today" -> LocalDate.now();\n            case "tomorrow" -> LocalDate.now().plusDays(1);\n            case "yesterday" -> LocalDate.now().minusDays(1);\n            default -> LocalDate.parse(value);\n        };\n    }\n\n    // Transforma cantidades monetarias como "$100.50" o "\u20ac50"\n    @ParameterType("\\\\$[\\\\d,]+\\\\.?\\\\d*|\u20ac[\\\\d,]+\\\\.?\\\\d*|\xa3[\\\\d,]+\\\\.?\\\\d*")\n    public Money money(String value) {\n        String currency = value.substring(0, 1);\n        double amount = Double.parseDouble(value.substring(1).replace(",", ""));\n        return new Money(amount, currency);\n    }\n\n    // Transforma roles de usuario\n    @ParameterType("admin|manager|user|guest")\n    public UserRole role(String value) {\n        return UserRole.valueOf(value.toUpperCase());\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"usando-par\xe1metros-personalizados-en-pasos",children:"Usando Par\xe1metros Personalizados en Pasos"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gherkin",children:"Feature: Gesti\xf3n de Pedidos\n\n  Scenario: Programar pedido para entrega\n    Given an order placed on 2024-01-15\n    When I schedule delivery for tomorrow\n    Then the delivery date should be after today\n\n  Scenario: Aplicar descuento a pedido\n    Given an order totaling $150.00\n    When a manager applies a 10% discount\n    Then the new total should be $135.00\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public class OrderSteps {\n\n    @Given("an order placed on {date}")\n    public void anOrderPlacedOn(LocalDate orderDate) {\n        // orderDate ya es un objeto LocalDate\n        theActorInTheSpotlight().remember("orderDate", orderDate);\n    }\n\n    @When("I schedule delivery for {date}")\n    public void scheduleDeliveryFor(LocalDate deliveryDate) {\n        theActorInTheSpotlight().attemptsTo(\n            ScheduleDelivery.forDate(deliveryDate)\n        );\n    }\n\n    @Given("an order totaling {money}")\n    public void anOrderTotaling(Money total) {\n        // total es un objeto Money con cantidad y moneda\n        theActorInTheSpotlight().attemptsTo(\n            CreateOrder.withTotal(total)\n        );\n    }\n\n    @When("a {role} applies a {int}% discount")\n    public void applyDiscount(UserRole role, int percentage) {\n        // role es un enum UserRole\n        theActorInTheSpotlight().attemptsTo(\n            ApplyDiscount.of(percentage).asA(role)\n        );\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"tipo-de-par\xe1metro-actor",children:"Tipo de Par\xe1metro Actor"}),"\n",(0,t.jsxs)(n.p,{children:["Serenity BDD proporciona un tipo de par\xe1metro ",(0,t.jsx)(n.code,{children:"{actor}"})," integrado:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gherkin",children:"Scenario: M\xfaltiples usuarios interact\xfaan\n  Given Alice has items in her cart\n  And Bob is browsing the catalog\n  When Alice proceeds to checkout\n  And Bob adds a laptop to his cart\n  Then Alice should see the payment page\n  And Bob should have 1 item in his cart\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public class MultiActorSteps {\n\n    @Given("{actor} has items in her/his cart")\n    public void hasItemsInCart(Actor actor) {\n        actor.attemptsTo(\n            AddToCart.item("Sample Product")\n        );\n    }\n\n    @When("{actor} proceeds to checkout")\n    public void proceedsToCheckout(Actor actor) {\n        actor.attemptsTo(\n            NavigateTo.theCheckoutPage()\n        );\n    }\n\n    @Then("{actor} should have {int} item(s) in her/his cart")\n    public void shouldHaveItemsInCart(Actor actor, int count) {\n        actor.should(\n            seeThat(TheCart.itemCount(), equalTo(count))\n        );\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"patrones-complejos-de-tablas-de-datos",children:"Patrones Complejos de Tablas de Datos"}),"\n",(0,t.jsx)(n.p,{children:"Las tablas de datos son poderosas para pasar datos estructurados a los pasos."}),"\n",(0,t.jsx)(n.h3,{id:"transformaciones-b\xe1sicas-de-tablas-de-datos",children:"Transformaciones B\xe1sicas de Tablas de Datos"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gherkin",children:"Scenario: Crear m\xfaltiples productos\n  Given the following products exist:\n    | name        | price  | category    | inStock |\n    | Laptop      | 999.99 | Electronics | true    |\n    | Headphones  | 149.99 | Electronics | true    |\n    | Desk Chair  | 299.99 | Furniture   | false   |\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Usando DataTable directamente:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Given("the following products exist:")\npublic void createProducts(DataTable dataTable) {\n    List<Map<String, String>> rows = dataTable.asMaps();\n    for (Map<String, String> row : rows) {\n        String name = row.get("name");\n        double price = Double.parseDouble(row.get("price"));\n        String category = row.get("category");\n        boolean inStock = Boolean.parseBoolean(row.get("inStock"));\n        // Crear producto...\n    }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Transformaci\xf3n autom\xe1tica a POJO:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public class Product {\n    private String name;\n    private double price;\n    private String category;\n    private boolean inStock;\n\n    // Getters y setters...\n}\n\n@Given("the following products exist:")\npublic void createProducts(List<Product> products) {\n    // Cucumber transforma autom\xe1ticamente las filas a objetos Product\n    for (Product product : products) {\n        theActorInTheSpotlight().attemptsTo(\n            CreateProduct.withDetails(product)\n        );\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"datatabletype-para-transformaciones-personalizadas",children:"DataTableType para Transformaciones Personalizadas"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'package com.example.parameters;\n\nimport io.cucumber.java.DataTableType;\nimport java.util.Map;\n\npublic class DataTableTypes {\n\n    @DataTableType\n    public Product productEntry(Map<String, String> entry) {\n        Product product = new Product();\n        product.setName(entry.get("name"));\n        product.setPrice(parsePrice(entry.get("price")));\n        product.setCategory(entry.get("category"));\n        product.setInStock("yes".equalsIgnoreCase(entry.get("available")));\n\n        // Manejar campos opcionales\n        if (entry.containsKey("sku")) {\n            product.setSku(entry.get("sku"));\n        }\n\n        return product;\n    }\n\n    @DataTableType\n    public Address addressEntry(Map<String, String> entry) {\n        return Address.builder()\n            .street(entry.get("street"))\n            .city(entry.get("city"))\n            .state(entry.get("state"))\n            .zipCode(entry.get("zip"))\n            .country(entry.getOrDefault("country", "USA"))\n            .build();\n    }\n\n    private double parsePrice(String price) {\n        return Double.parseDouble(price.replace("$", "").replace(",", ""));\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"tablas-de-datos-verticales",children:"Tablas de Datos Verticales"}),"\n",(0,t.jsx)(n.p,{children:"Para datos de una sola entidad, usa tablas verticales:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gherkin",children:"Scenario: Crear un perfil de usuario detallado\n  Given a user with the following details:\n    | First Name    | John              |\n    | Last Name     | Smith             |\n    | Email         | john@example.com  |\n    | Phone         | +1-555-123-4567   |\n    | Date of Birth | 1990-05-15        |\n    | Role          | Premium Member    |\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Given("a user with the following details:")\npublic void createUser(DataTable dataTable) {\n    Map<String, String> userData = dataTable.asMap();\n\n    UserProfile profile = UserProfile.builder()\n        .firstName(userData.get("First Name"))\n        .lastName(userData.get("Last Name"))\n        .email(userData.get("Email"))\n        .phone(userData.get("Phone"))\n        .dateOfBirth(LocalDate.parse(userData.get("Date of Birth")))\n        .role(userData.get("Role"))\n        .build();\n\n    theActorInTheSpotlight().attemptsTo(\n        CreateUserProfile.with(profile)\n    );\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"estructuras-de-datos-anidadas",children:"Estructuras de Datos Anidadas"}),"\n",(0,t.jsx)(n.p,{children:"Para datos complejos, combina tablas con Scenario Outline:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gherkin",children:"Scenario Outline: Validar pedido con m\xfaltiples art\xedculos\n  Given a customer places an order with:\n    | product   | quantity | unit price |\n    | <item1>   | <qty1>   | <price1>   |\n    | <item2>   | <qty2>   | <price2>   |\n  When the order is processed\n  Then the order total should be <total>\n\n  Examples:\n    | item1     | qty1 | price1 | item2      | qty2 | price2 | total   |\n    | Laptop    | 1    | $999   | Mouse      | 2    | $25    | $1049   |\n    | Monitor   | 2    | $300   | Keyboard   | 1    | $75    | $675    |\n"})}),"\n",(0,t.jsx)(n.h2,{id:"doc-strings-para-contenido-de-formato-largo",children:"Doc Strings para Contenido de Formato Largo"}),"\n",(0,t.jsx)(n.p,{children:"Usa doc strings para contenido de texto multil\xednea:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gherkin",children:'Scenario: Enviar un ticket de soporte\n  Given the customer has a billing issue\n  When they submit a support ticket with:\n    """\n    Subject: Incorrect charge on my account\n\n    Hello,\n\n    I noticed an incorrect charge of $49.99 on my account\n    dated January 15th. I did not authorize this transaction.\n\n    Please investigate and refund the amount.\n\n    Thank you,\n    John Smith\n    Account: JS-12345\n    """\n  Then a ticket should be created with priority "High"\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@When("they submit a support ticket with:")\npublic void submitTicket(String ticketContent) {\n    theActorInTheSpotlight().attemptsTo(\n        SubmitSupportTicket.withContent(ticketContent)\n    );\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"doc-strings-con-tipos-de-contenido",children:"Doc Strings con Tipos de Contenido"}),"\n",(0,t.jsx)(n.p,{children:"Especifica el tipo de contenido para datos estructurados:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gherkin",children:'Scenario: Crear producto v\xeda API\n  When I send a POST request to "/api/products" with:\n    """json\n    {\n      "name": "Wireless Keyboard",\n      "price": 79.99,\n      "category": "Electronics",\n      "specifications": {\n        "connection": "Bluetooth 5.0",\n        "battery": "AAA x 2",\n        "warranty": "2 years"\n      }\n    }\n    """\n  Then the response status should be 201\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@When("I send a POST request to {string} with:")\npublic void sendPostRequest(String endpoint, String jsonBody) {\n    theActorInTheSpotlight().attemptsTo(\n        Post.to(endpoint).with(request -> request\n            .contentType(ContentType.JSON)\n            .body(jsonBody)\n        )\n    );\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"compartiendo-estado-entre-pasos",children:"Compartiendo Estado Entre Pasos"}),"\n",(0,t.jsx)(n.p,{children:"Gestionar el estado entre pasos es crucial para pruebas mantenibles."}),"\n",(0,t.jsx)(n.h3,{id:"usando-la-memoria-del-actor-screenplay-pattern",children:"Usando la Memoria del Actor (Screenplay Pattern)"}),"\n",(0,t.jsx)(n.p,{children:"El enfoque recomendado con Screenplay:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public class OrderSteps {\n\n    @Given("a customer creates an order")\n    public void createOrder() {\n        String orderId = UUID.randomUUID().toString();\n\n        theActorInTheSpotlight().attemptsTo(\n            CreateOrder.withId(orderId)\n        );\n\n        // Almacenar para pasos posteriores\n        theActorInTheSpotlight().remember("orderId", orderId);\n    }\n\n    @When("the customer adds {string} to the order")\n    public void addItem(String item) {\n        String orderId = theActorInTheSpotlight().recall("orderId");\n\n        theActorInTheSpotlight().attemptsTo(\n            AddToOrder.item(item).forOrder(orderId)\n        );\n    }\n\n    @Then("the order should contain {int} items")\n    public void verifyItemCount(int expectedCount) {\n        String orderId = theActorInTheSpotlight().recall("orderId");\n\n        theActorInTheSpotlight().should(\n            seeThat(TheOrder.withId(orderId).itemCount(), equalTo(expectedCount))\n        );\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"memoria-tipada-con-gen\xe9ricos",children:"Memoria Tipada con Gen\xe9ricos"}),"\n",(0,t.jsx)(n.p,{children:"Crea claves de memoria con seguridad de tipos:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public class MemoryKeys {\n    public static final String ORDER_ID = "orderId";\n    public static final String CUSTOMER = "customer";\n    public static final String CART_ITEMS = "cartItems";\n}\n\n// Uso\nactor.remember(MemoryKeys.ORDER_ID, orderId);\nString id = actor.recall(MemoryKeys.ORDER_ID);\n'})}),"\n",(0,t.jsx)(n.h3,{id:"usando-objetos-world-inyecci\xf3n-de-dependencias",children:"Usando Objetos World (Inyecci\xf3n de Dependencias)"}),"\n",(0,t.jsx)(n.p,{children:"Para gesti\xf3n de estado compleja, usa la inyecci\xf3n de dependencias de Cucumber:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Con PicoContainer (por defecto):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// Clase de estado compartido\npublic class TestContext {\n    private Order currentOrder;\n    private Customer currentCustomer;\n    private List<String> capturedErrors = new ArrayList<>();\n\n    public Order getCurrentOrder() { return currentOrder; }\n    public void setCurrentOrder(Order order) { this.currentOrder = order; }\n\n    public Customer getCurrentCustomer() { return currentCustomer; }\n    public void setCurrentCustomer(Customer customer) { this.currentCustomer = customer; }\n\n    public void addError(String error) { capturedErrors.add(error); }\n    public List<String> getErrors() { return capturedErrors; }\n}\n\n// Los Step Definition reciben TestContext v\xeda inyecci\xf3n en constructor\npublic class OrderSteps {\n    private final TestContext context;\n\n    public OrderSteps(TestContext context) {\n        this.context = context;\n    }\n\n    @Given("a customer creates an order")\n    public void createOrder() {\n        Order order = new Order();\n        context.setCurrentOrder(order);\n    }\n\n    @When("an error occurs: {string}")\n    public void captureError(String error) {\n        context.addError(error);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Agrega la dependencia de PicoContainer:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>io.cucumber</groupId>\n    <artifactId>cucumber-picocontainer</artifactId>\n    <version>${cucumber.version}</version>\n    <scope>test</scope>\n</dependency>\n"})}),"\n",(0,t.jsx)(n.h2,{id:"patrones-de-manejo-de-errores",children:"Patrones de Manejo de Errores"}),"\n",(0,t.jsx)(n.p,{children:"Maneja errores de forma elegante en los Step Definition."}),"\n",(0,t.jsx)(n.h3,{id:"patr\xf3n-de-errores-esperados",children:"Patr\xf3n de Errores Esperados"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gherkin",children:'Scenario: Prevenir checkout con carrito vac\xedo\n  Given a customer with an empty cart\n  When they attempt to checkout\n  Then they should see an error: "Your cart is empty"\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public class ErrorSteps {\n\n    @When("they attempt to checkout")\n    public void attemptCheckout() {\n        try {\n            theActorInTheSpotlight().attemptsTo(\n                ProceedToCheckout.now()\n            );\n            // Almacenar que no ocurri\xf3 error\n            theActorInTheSpotlight().remember("checkoutError", null);\n        } catch (CheckoutException e) {\n            // Almacenar el error para verificaci\xf3n\n            theActorInTheSpotlight().remember("checkoutError", e.getMessage());\n        }\n    }\n\n    @Then("they should see an error: {string}")\n    public void shouldSeeError(String expectedError) {\n        String actualError = theActorInTheSpotlight().recall("checkoutError");\n        assertThat(actualError).isEqualTo(expectedError);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"usando-question-para-estados-de-error",children:"Usando Question para Estados de Error"}),"\n",(0,t.jsx)(n.p,{children:"Un enfoque m\xe1s limpio con Screenplay:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public class ErrorMessage implements Question<String> {\n\n    public static Question<String> displayed() {\n        return new ErrorMessage();\n    }\n\n    @Override\n    public String answeredBy(Actor actor) {\n        return Text.of(".error-message").answeredBy(actor);\n    }\n}\n\n// En los pasos\n@Then("they should see an error: {string}")\npublic void shouldSeeError(String expectedError) {\n    theActorInTheSpotlight().should(\n        seeThat(ErrorMessage.displayed(), equalTo(expectedError))\n    );\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"aserciones-suaves-para-m\xfaltiples-verificaciones",children:"Aserciones Suaves para M\xfaltiples Verificaciones"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Then("the order summary should show:")\npublic void verifyOrderSummary(DataTable expected) {\n    Actor actor = theActorInTheSpotlight();\n\n    actor.attemptsTo(\n        Ensure.that(OrderSummary.subtotal()).isEqualTo(expected.get("subtotal")),\n        Ensure.that(OrderSummary.tax()).isEqualTo(expected.get("tax")),\n        Ensure.that(OrderSummary.shipping()).isEqualTo(expected.get("shipping")),\n        Ensure.that(OrderSummary.total()).isEqualTo(expected.get("total"))\n    );\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"organizaci\xf3n-de-step-definition",children:"Organizaci\xf3n de Step Definition"}),"\n",(0,t.jsx)(n.h3,{id:"una-clase-por-\xe1rea-de-funcionalidad",children:"Una Clase por \xc1rea de Funcionalidad"}),"\n",(0,t.jsx)(n.p,{children:"Organiza los Step Definition por \xe1rea de dominio:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"src/test/java/com/example/stepdefinitions/\n\u251c\u2500\u2500 authentication/\n\u2502   \u251c\u2500\u2500 LoginSteps.java\n\u2502   \u251c\u2500\u2500 RegistrationSteps.java\n\u2502   \u2514\u2500\u2500 PasswordResetSteps.java\n\u251c\u2500\u2500 shopping/\n\u2502   \u251c\u2500\u2500 CartSteps.java\n\u2502   \u251c\u2500\u2500 CheckoutSteps.java\n\u2502   \u2514\u2500\u2500 PaymentSteps.java\n\u251c\u2500\u2500 common/\n\u2502   \u251c\u2500\u2500 NavigationSteps.java\n\u2502   \u2514\u2500\u2500 VerificationSteps.java\n\u2514\u2500\u2500 hooks/\n    \u251c\u2500\u2500 ScreenplayHooks.java\n    \u2514\u2500\u2500 DatabaseHooks.java\n"})}),"\n",(0,t.jsx)(n.h3,{id:"pasos-delgados-task-ricos",children:"Pasos Delgados, Task Ricos"}),"\n",(0,t.jsx)(n.p,{children:"Mant\xe9n los Step Definition delgados delegando a Task de Screenplay:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// Malo: L\xf3gica en el Step Definition\n@When("the customer adds {string} to their cart")\npublic void addToCart(String productName) {\n    WebDriver driver = getDriver();\n    driver.findElement(By.cssSelector(".search-input")).sendKeys(productName);\n    driver.findElement(By.cssSelector(".search-button")).click();\n    WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));\n    wait.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(".product-card")));\n    driver.findElement(By.cssSelector(".add-to-cart-button")).click();\n    wait.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(".cart-updated")));\n}\n\n// Bueno: Delegar a Task\n@When("the customer adds {string} to their cart")\npublic void addToCart(String productName) {\n    theActorInTheSpotlight().attemptsTo(\n        AddToCart.theProduct(productName)\n    );\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"patrones-de-pasos-reutilizables",children:"Patrones de Pasos Reutilizables"}),"\n",(0,t.jsx)(n.p,{children:"Crea pasos gen\xe9ricos que funcionen en m\xfaltiples Feature:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public class CommonSteps {\n\n    @Given("{actor} is on the {word} page")\n    public void navigateToPage(Actor actor, String pageName) {\n        actor.attemptsTo(\n            NavigateTo.thePage(pageName)\n        );\n    }\n\n    @Then("{actor} should see the message {string}")\n    public void shouldSeeMessage(Actor actor, String message) {\n        actor.should(\n            seeThat(TheVisibleText.onPage(), containsString(message))\n        );\n    }\n\n    @Then("{actor} should see {int} {word} displayed")\n    public void shouldSeeCount(Actor actor, int count, String elementType) {\n        actor.should(\n            seeThat(TheCount.of(elementType), equalTo(count))\n        );\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"mejores-pr\xe1cticas-para-background",children:"Mejores Pr\xe1cticas para Background"}),"\n",(0,t.jsx)(n.h3,{id:"mant\xe9n-los-background-simples",children:"Mant\xe9n los Background Simples"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gherkin",children:'# Bueno: Configuraci\xf3n simple y esencial\nBackground:\n  Given the user is logged in as "admin"\n\n# Malo: Demasiado detalle en el Background\nBackground:\n  Given a user with email "admin@example.com" exists\n  And the user has password "SecurePass123!"\n  And the user has role "administrator"\n  And the user\'s account is active\n  And the user has accepted terms of service\n  When the user navigates to the login page\n  And enters their credentials\n  And clicks the login button\n  Then they should be on the dashboard\n'})}),"\n",(0,t.jsx)(n.h3,{id:"usa-etiquetas-para-compartir-background",children:"Usa Etiquetas para Compartir Background"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gherkin",children:'@authenticated\nFeature: Carrito de Compras\n\n  # Esta Feature asume que el usuario est\xe1 logueado\n  # El hook @authenticated maneja el login\n\n  Scenario: Agregar art\xedculo al carrito\n    When I search for "laptop"\n    And I add the first result to my cart\n    Then my cart should have 1 item\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Before("@authenticated")\npublic void loginAsDefaultUser() {\n    OnStage.theActorCalled("Customer").attemptsTo(\n        Login.withCredentials("testuser", "password123")\n    );\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"patrones-de-scenario-outline",children:"Patrones de Scenario Outline"}),"\n",(0,t.jsx)(n.h3,{id:"examples-din\xe1micos-con-etiquetas",children:"Examples Din\xe1micos con Etiquetas"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-gherkin",children:'@smoke\nScenario Outline: Validaci\xf3n r\xe1pida de login\n  Given I am on the login page\n  When I login as "<userType>"\n  Then I should see the "<dashboard>" dashboard\n\n  @admin\n  Examples: Usuarios Admin\n    | userType     | dashboard    |\n    | super_admin  | Super Admin  |\n    | site_admin   | Site Admin   |\n\n  @regular\n  Examples: Usuarios Regulares\n    | userType     | dashboard    |\n    | premium      | Premium      |\n    | standard     | Standard     |\n'})}),"\n",(0,t.jsx)(n.h3,{id:"tablas-de-examples-desde-fuentes-externas",children:"Tablas de Examples desde Fuentes Externas"}),"\n",(0,t.jsx)(n.p,{children:"Carga examples desde archivos o bases de datos:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public class DynamicExamples {\n\n    @ParameterType(".*\\\\.csv")\n    public List<Map<String, String>> csvFile(String filename) {\n        return CsvReader.read("src/test/resources/data/" + filename);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"integraci\xf3n-screenplay-vs-page-object",children:"Integraci\xf3n: Screenplay vs Page Object"}),"\n",(0,t.jsx)(n.p,{children:"Puedes usar cualquiera de los patrones con Cucumber, o incluso mezclarlos."}),"\n",(0,t.jsx)(n.h3,{id:"enfoque-puro-con-screenplay",children:"Enfoque Puro con Screenplay"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public class CheckoutSteps {\n\n    @When("{actor} completes checkout with card ending in {string}")\n    public void completeCheckout(Actor actor, String lastFourDigits) {\n        actor.attemptsTo(\n            CompleteCheckout.withCard(lastFourDigits)\n        );\n    }\n\n    @Then("{actor} should receive order confirmation")\n    public void shouldReceiveConfirmation(Actor actor) {\n        actor.should(\n            seeThat(OrderConfirmation.isDisplayed(), is(true)),\n            seeThat(OrderConfirmation.orderNumber(), not(emptyString()))\n        );\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"enfoque-con-page-object",children:"Enfoque con Page Object"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public class CheckoutSteps {\n\n    @Steps\n    CheckoutPage checkoutPage;\n\n    @Steps\n    ConfirmationPage confirmationPage;\n\n    @When("the user completes checkout with card ending in {string}")\n    public void completeCheckout(String lastFourDigits) {\n        checkoutPage.enterCardEndingIn(lastFourDigits);\n        checkoutPage.submitOrder();\n    }\n\n    @Then("the user should receive order confirmation")\n    public void shouldReceiveConfirmation() {\n        assertThat(confirmationPage.isDisplayed()).isTrue();\n        assertThat(confirmationPage.getOrderNumber()).isNotEmpty();\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"enfoque-h\xedbrido",children:"Enfoque H\xedbrido"}),"\n",(0,t.jsx)(n.p,{children:"Usa Page Object para p\xe1ginas simples, Screenplay para flujos complejos:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public class HybridSteps {\n\n    @Steps\n    LoginPage loginPage;  // P\xe1gina simple, usar Page Object\n\n    @When("the user logs in with valid credentials")\n    public void login() {\n        loginPage.loginAs("user@example.com", "password");\n    }\n\n    @When("{actor} completes the multi-step registration")\n    public void completeRegistration(Actor actor) {\n        // Flujo complejo, usar Screenplay\n        actor.attemptsTo(\n            CompleteRegistration.withDefaults()\n        );\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"optimizaci\xf3n-de-rendimiento",children:"Optimizaci\xf3n de Rendimiento"}),"\n",(0,t.jsx)(n.h3,{id:"ejecuci\xf3n-paralela-con-estado-aislado",children:"Ejecuci\xf3n Paralela con Estado Aislado"}),"\n",(0,t.jsx)(n.p,{children:"Aseg\xfarate de que tus hooks y gesti\xf3n de estado sean seguros para hilos:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public class ThreadSafeHooks {\n\n    // ThreadLocal para ejecuci\xf3n paralela\n    private static final ThreadLocal<TestContext> contextHolder = new ThreadLocal<>();\n\n    @Before\n    public void setUp() {\n        contextHolder.set(new TestContext());\n    }\n\n    @After\n    public void tearDown() {\n        contextHolder.remove();\n    }\n\n    public static TestContext getContext() {\n        return contextHolder.get();\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"inicializaci\xf3n-perezosa",children:"Inicializaci\xf3n Perezosa"}),"\n",(0,t.jsx)(n.p,{children:"No inicialices recursos hasta que se necesiten:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'public class LazyDriverHooks {\n\n    @Before("@ui")\n    public void initializeDriver() {\n        // Solo crear navegador para pruebas de UI\n        OnStage.setTheStage(new OnlineCast());\n    }\n\n    @Before("@api")\n    public void initializeApiClient() {\n        // Solo crear cliente API para pruebas de API\n        OnStage.setTheStage(Cast.whereEveryoneCan(\n            CallAnApi.at(baseUrl)\n        ));\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"consejos-de-depuraci\xf3n",children:"Consejos de Depuraci\xf3n"}),"\n",(0,t.jsx)(n.h3,{id:"registro-detallado-en-hooks",children:"Registro Detallado en Hooks"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@BeforeStep\npublic void logStepStart() {\n    System.out.println(">>> Iniciando paso a las " + LocalDateTime.now());\n}\n\n@AfterStep\npublic void logStepEnd(Scenario scenario) {\n    System.out.println("<<< Paso completado, estado del escenario: " + scenario.getStatus());\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"capturar-estado-en-fallo",children:"Capturar Estado en Fallo"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@After\npublic void captureOnFailure(Scenario scenario) {\n    if (scenario.isFailed()) {\n        // Capturar screenshot\n        byte[] screenshot = theActorInTheSpotlight()\n            .usingAbilityTo(BrowseTheWeb.class)\n            .takeScreenshot();\n        scenario.attach(screenshot, "image/png", "failure-screenshot");\n\n        // Capturar c\xf3digo fuente de la p\xe1gina\n        String pageSource = theActorInTheSpotlight()\n            .asksFor(ThePageSource.current());\n        scenario.attach(pageSource, "text/html", "page-source");\n\n        // Capturar consola del navegador\n        List<String> consoleLogs = theActorInTheSpotlight()\n            .asksFor(ConsoleMessages.all());\n        scenario.attach(String.join("\\n", consoleLogs), "text/plain", "console-logs");\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"resumen",children:"Resumen"}),"\n",(0,t.jsx)(n.p,{children:"Estos patrones avanzados te ayudan a construir suites de prueba Cucumber mantenibles y escalables:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Patr\xf3n"}),(0,t.jsx)(n.th,{children:"Cu\xe1ndo Usar"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Hooks con Etiquetas"}),(0,t.jsx)(n.td,{children:"Configuraci\xf3n/limpieza condicional basada en etiquetas de escenario"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Hooks Ordenados"}),(0,t.jsx)(n.td,{children:"Controlar el orden de ejecuci\xf3n de m\xfaltiples hooks"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Par\xe1metros Personalizados"}),(0,t.jsx)(n.td,{children:"Transformar argumentos de pasos a objetos de dominio"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Tipos de DataTable"}),(0,t.jsx)(n.td,{children:"Transformaci\xf3n autom\xe1tica de filas de tabla"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Memoria del Actor"}),(0,t.jsx)(n.td,{children:"Compartir estado entre pasos (Screenplay)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Objetos World"}),(0,t.jsx)(n.td,{children:"Estado complejo con inyecci\xf3n de dependencias"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Pasos Delgados"}),(0,t.jsx)(n.td,{children:"Mantener pasos m\xednimos, delegar a Task"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Aserciones Suaves"}),(0,t.jsx)(n.td,{children:"Verificar m\xfaltiples condiciones antes de fallar"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"siguientes-pasos",children:"Siguientes Pasos"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Explora ",(0,t.jsx)(n.a,{href:"parallel-execution",children:"Ejecuci\xf3n Paralela"})," para ejecuciones de prueba m\xe1s r\xe1pidas"]}),"\n",(0,t.jsxs)(n.li,{children:["Aprende sobre ",(0,t.jsx)(n.a,{href:"configuration-reference",children:"Configuraci\xf3n de Cucumber"})]}),"\n",(0,t.jsxs)(n.li,{children:["Domina el ",(0,t.jsx)(n.a,{href:"/docs/screenplay/screenplay_fundamentals",children:"Screenplay Pattern"})]}),"\n",(0,t.jsxs)(n.li,{children:["Revisa ",(0,t.jsx)(n.a,{href:"/docs/reporting/the_serenity_reports",children:"Reportes de Serenity"})," para documentaci\xf3n detallada"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"recursos-adicionales",children:"Recursos Adicionales"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://cucumber.io/docs/cucumber/cucumber-expressions/",children:"Documentaci\xf3n de Expresiones Cucumber"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://cucumber.io/docs/cucumber/api/#hooks",children:"Referencia de Hooks de Cucumber"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/screenplay/screenplay_fundamentals",children:"Gu\xeda de Screenplay de Serenity BDD"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}}}]);
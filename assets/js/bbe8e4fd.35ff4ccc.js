"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[6753],{5173(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"playwright/playwright_screenplay","title":"Screenplay Pattern with Playwright","description":"The Screenplay Pattern is a modern, actor-centric approach to writing automated tests. When combined with Playwright, it provides a powerful, expressive way to write browser automation tests that read like living documentation.","source":"@site/docs/playwright/screenplay.md","sourceDirName":"playwright","slug":"/playwright/playwright_screenplay","permalink":"/docs/playwright/playwright_screenplay","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/playwright/screenplay.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"playwright_screenplay","title":"Screenplay Pattern with Playwright","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Page Objects","permalink":"/docs/playwright/playwright_page_objects"},"next":{"title":"Step Libraries","permalink":"/docs/playwright/playwright_step_libraries"}}');var i=n(4848),a=n(8453);const o={id:"playwright_screenplay",title:"Screenplay Pattern with Playwright",sidebar_position:4},r="Screenplay Pattern with Playwright",l={},c=[{value:"Why Screenplay with Playwright?",id:"why-screenplay-with-playwright",level:2},{value:"Project Setup",id:"project-setup",level:2},{value:"Maven Dependencies",id:"maven-dependencies",level:3},{value:"Core Concepts",id:"core-concepts",level:2},{value:"Actors and Abilities",id:"actors-and-abilities",level:3},{value:"Tasks",id:"tasks",level:3},{value:"Questions",id:"questions",level:3},{value:"Targets",id:"targets",level:3},{value:"Writing Tests",id:"writing-tests",level:2},{value:"Basic Test Structure",id:"basic-test-structure",level:3},{value:"Using Ensure for Assertions",id:"using-ensure-for-assertions",level:3},{value:"Built-in Interactions",id:"built-in-interactions",level:2},{value:"Navigation",id:"navigation",level:3},{value:"Clicking",id:"clicking",level:3},{value:"Form Interactions",id:"form-interactions",level:3},{value:"Mouse Actions",id:"mouse-actions",level:3},{value:"Waiting",id:"waiting",level:3},{value:"JavaScript Execution",id:"javascript-execution",level:3},{value:"Dialog Handling",id:"dialog-handling",level:3},{value:"Playwright-Specific Assertions",id:"playwright-specific-assertions",level:2},{value:"Advanced Features",id:"advanced-features",level:2},{value:"Direct Playwright API Access",id:"direct-playwright-api-access",level:3},{value:"Custom Tasks",id:"custom-tasks",level:3},{value:"Custom Questions",id:"custom-questions",level:3},{value:"Multiple Pages/Tabs",id:"multiple-pagestabs",level:3},{value:"Cookie Management",id:"cookie-management",level:3},{value:"Frame Handling",id:"frame-handling",level:3},{value:"Screenshots",id:"screenshots",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Browser Options",id:"browser-options",level:3},{value:"Screenshot Configuration",id:"screenshot-configuration",level:3},{value:"Complete Example: TodoMVC Test Suite",id:"complete-example-todomvc-test-suite",level:2},{value:"UI Targets",id:"ui-targets",level:3},{value:"Tasks",id:"tasks-1",level:3},{value:"Questions",id:"questions-1",level:3},{value:"Test Class",id:"test-class",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Keep Tasks Business-Focused",id:"1-keep-tasks-business-focused",level:3},{value:"2. Use Meaningful Target Names",id:"2-use-meaningful-target-names",level:3},{value:"3. Create Domain-Specific Questions",id:"3-create-domain-specific-questions",level:3},{value:"4. Leverage Ensure for Readable Assertions",id:"4-leverage-ensure-for-readable-assertions",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"screenplay-pattern-with-playwright",children:"Screenplay Pattern with Playwright"})}),"\n",(0,i.jsx)(t.p,{children:"The Screenplay Pattern is a modern, actor-centric approach to writing automated tests. When combined with Playwright, it provides a powerful, expressive way to write browser automation tests that read like living documentation."}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"serenity-screenplay-playwright"})," module brings together:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Screenplay's expressiveness"})," - Actor-centric, task-based test design"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Playwright's reliability"})," - Modern browser automation with auto-waiting"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Serenity's rich reporting"})," - Step-by-step documentation with screenshots"]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"why-screenplay-with-playwright",children:"Why Screenplay with Playwright?"}),"\n",(0,i.jsx)(t.p,{children:"The Screenplay Pattern offers several advantages over traditional Page Object approaches:"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Page Objects"}),(0,i.jsx)(t.th,{children:"Screenplay"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Tests call page methods directly"}),(0,i.jsx)(t.td,{children:"Actors perform tasks and ask questions"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Procedural code style"}),(0,i.jsx)(t.td,{children:"Declarative, behavior-focused style"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Tests tied to UI structure"}),(0,i.jsx)(t.td,{children:"Tests express business intent"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Harder to compose actions"}),(0,i.jsx)(t.td,{children:"Tasks easily compose into workflows"})]})]})]}),"\n",(0,i.jsx)(t.p,{children:"With Playwright, you also get:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Auto-waiting"})," built into all interactions"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Built-in assertions"})," with automatic retry"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Network interception"})," for mocking APIs"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Multiple browser support"})," (Chromium, Firefox, WebKit)"]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"project-setup",children:"Project Setup"}),"\n",(0,i.jsx)(t.h3,{id:"maven-dependencies",children:"Maven Dependencies"}),"\n",(0,i.jsxs)(t.p,{children:["Add these dependencies to your ",(0,i.jsx)(t.code,{children:"pom.xml"}),":"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-xml",children:"<properties>\n    <serenity.version>5.1.1</serenity.version>\n    <playwright.version>1.58.0</playwright.version>\n</properties>\n\n<dependencies>\n    \x3c!-- Serenity Screenplay with Playwright --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-screenplay-playwright</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Serenity Screenplay Core --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-screenplay</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Serenity Ensure (for fluent assertions) --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-ensure</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Serenity JUnit 5 --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-junit5</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Playwright --\x3e\n    <dependency>\n        <groupId>com.microsoft.playwright</groupId>\n        <artifactId>playwright</artifactId>\n        <version>${playwright.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- JUnit 5 --\x3e\n    <dependency>\n        <groupId>org.junit.jupiter</groupId>\n        <artifactId>junit-jupiter</artifactId>\n        <version>6.0.1</version>\n        <scope>test</scope>\n    </dependency>\n</dependencies>\n"})}),"\n",(0,i.jsx)(t.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,i.jsx)(t.h3,{id:"actors-and-abilities",children:"Actors and Abilities"}),"\n",(0,i.jsxs)(t.p,{children:["In Screenplay, tests are written from the perspective of ",(0,i.jsx)(t.strong,{children:"Actors"})," who have ",(0,i.jsx)(t.strong,{children:"Abilities"}),". For Playwright tests, actors need the ",(0,i.jsx)(t.code,{children:"BrowseTheWebWithPlaywright"})," ability:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'import net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\n\nActor toby = Actor.named("Toby");\ntoby.can(BrowseTheWebWithPlaywright.usingTheDefaultConfiguration());\n'})}),"\n",(0,i.jsx)(t.p,{children:"The ability manages the Playwright browser lifecycle automatically:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Creates the browser, context, and page on demand"}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Automatically cleans up"})," when the test completes (no explicit teardown needed)"]}),"\n",(0,i.jsx)(t.li,{children:"Subscribes to Serenity's test lifecycle events for seamless resource management"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"tasks",children:"Tasks"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Tasks"})," represent high-level actions that an actor performs. They express ",(0,i.jsx)(t.em,{children:"what"})," the actor does in business terms:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'import net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.playwright.interactions.Open;\nimport net.serenitybdd.annotations.Step;\n\npublic class OpenTodoMvcApp implements Task {\n\n    @Override\n    @Step("{0} opens the TodoMVC application")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Open.url("https://todomvc.com/examples/react/dist/")\n        );\n    }\n\n    public static OpenTodoMvcApp onTheHomePage() {\n        return new OpenTodoMvcApp();\n    }\n}\n'})}),"\n",(0,i.jsx)(t.p,{children:"Tasks can be composed from other tasks and interactions:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'public class AddATodoItem implements Task {\n    private final String todoItem;\n\n    public AddATodoItem(String todoItem) {\n        this.todoItem = todoItem;\n    }\n\n    @Override\n    @Step("{0} adds a todo item called \'#todoItem\'")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Enter.theValue(todoItem).into(TodoList.NEW_TODO_INPUT),\n            Press.keys("Enter")\n        );\n    }\n\n    public static AddATodoItem called(String todoItem) {\n        return new AddATodoItem(todoItem);\n    }\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"questions",children:"Questions"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Questions"})," allow actors to query the state of the application:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'import net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\n\npublic class TheVisibleTodos {\n\n    public static Question<Collection<String>> displayed() {\n        return Question.about("the visible todos").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(".todo-list li label")\n                .allTextContents()\n        );\n    }\n\n    public static Question<Integer> count() {\n        return Question.about("visible todo count").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(".todo-list li")\n                .count()\n        );\n    }\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"targets",children:"Targets"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Targets"})," define UI elements using Playwright selectors:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'import net.serenitybdd.screenplay.playwright.Target;\n\npublic class TodoList {\n\n    public static final Target NEW_TODO_INPUT =\n        Target.the("new todo input")\n              .locatedBy("[placeholder=\'What needs to be done?\']");\n\n    public static final Target TODO_ITEMS =\n        Target.the("todo items")\n              .locatedBy(".todo-list li");\n\n    public static Target todoItemCalled(String todoText) {\n        return Target.the("todo item \'" + todoText + "\'")\n                     .locatedBy(".todo-list li:has-text(\'" + todoText + "\')");\n    }\n\n    public static Target checkboxFor(String todoText) {\n        return Target.the("checkbox for \'" + todoText + "\'")\n                     .locatedBy(".todo-list li:has-text(\'" + todoText + "\') .toggle");\n    }\n}\n'})}),"\n",(0,i.jsx)(t.p,{children:"Targets support:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Parameterized selectors"}),": ",(0,i.jsx)(t.code,{children:'Target.the("item {0}").locatedBy("[data-id=\'{0}\']").of("123")'})]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Nested targets"}),": ",(0,i.jsx)(t.code,{children:"button.inside(form)"})]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Frame support"}),": ",(0,i.jsx)(t.code,{children:'Target.the("editor").inFrame("#iframe").locatedBy("#content")'})]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"writing-tests",children:"Writing Tests"}),"\n",(0,i.jsx)(t.h3,{id:"basic-test-structure",children:"Basic Test Structure"}),"\n",(0,i.jsx)(t.p,{children:"Here's a complete example of a Screenplay test with Playwright:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'import net.serenitybdd.junit5.SerenityJUnit5Extension;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.ensure.Ensure;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport org.junit.jupiter.api.*;\nimport org.junit.jupiter.api.extension.ExtendWith;\n\n@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When adding todos")\nclass WhenAddingTodosTest {\n\n    Actor toby;\n\n    @BeforeEach\n    void setUp() {\n        toby = Actor.named("Toby");\n        toby.can(BrowseTheWebWithPlaywright.usingTheDefaultConfiguration());\n    }\n\n    // No @AfterEach needed - cleanup happens automatically!\n\n    @Test\n    @DisplayName("should add a single todo item")\n    void shouldAddSingleTodoItem() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Buy milk"),\n            Ensure.that(TheVisibleTodos.count()).isEqualTo(1),\n            Ensure.that(TheTodoItem.called("Buy milk").exists()).isTrue()\n        );\n    }\n\n    @Test\n    @DisplayName("should add multiple todo items")\n    void shouldAddMultipleTodoItems() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Buy milk"),\n            AddATodoItem.called("Walk the dog"),\n            AddATodoItem.called("Do laundry"),\n            Ensure.that(TheVisibleTodos.displayed())\n                .containsExactly("Buy milk", "Walk the dog", "Do laundry")\n        );\n    }\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"using-ensure-for-assertions",children:"Using Ensure for Assertions"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"Ensure"})," class provides fluent assertions that integrate with Screenplay's task-based model:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'toby.attemptsTo(\n    // Numeric comparisons\n    Ensure.that(TheRemainingCount.value()).isEqualTo(3),\n    Ensure.that(TheVisibleTodos.count()).isGreaterThan(0),\n\n    // Boolean checks\n    Ensure.that(TheTodoItem.called("Buy milk").isCompleted()).isTrue(),\n    Ensure.that(TheClearCompletedButton.isVisible()).isFalse(),\n\n    // String comparisons\n    Ensure.that(TheCurrentFilter.selected()).isEqualTo("All"),\n\n    // Collection assertions\n    Ensure.that(TheVisibleTodos.displayed())\n        .containsExactly("Buy milk", "Walk the dog"),\n    Ensure.that(TheVisibleTodos.displayed())\n        .contains("Buy milk")\n);\n'})}),"\n",(0,i.jsx)(t.h2,{id:"built-in-interactions",children:"Built-in Interactions"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"serenity-screenplay-playwright"})," module provides many built-in interactions:"]}),"\n",(0,i.jsx)(t.h3,{id:"navigation",children:"Navigation"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'// Open a URL\nactor.attemptsTo(Open.url("https://example.com"));\n\n// Navigate back/forward\nactor.attemptsTo(Navigate.back());\nactor.attemptsTo(Navigate.forward());\n\n// Refresh the page\nactor.attemptsTo(Navigate.refresh());\n'})}),"\n",(0,i.jsx)(t.h3,{id:"clicking",children:"Clicking"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"// Simple click\nactor.attemptsTo(Click.on(TodoList.SUBMIT_BUTTON));\n\n// Double-click\nactor.attemptsTo(DoubleClick.on(TodoList.TODO_LABEL));\n\n// Right-click\nactor.attemptsTo(RightClick.on(TodoList.CONTEXT_MENU_TRIGGER));\n"})}),"\n",(0,i.jsx)(t.h3,{id:"form-interactions",children:"Form Interactions"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'// Enter text\nactor.attemptsTo(Enter.theValue("Hello").into(TodoList.INPUT_FIELD));\n\n// Clear a field\nactor.attemptsTo(Clear.field(TodoList.INPUT_FIELD));\n\n// Press keys\nactor.attemptsTo(Press.keys("Enter"));\nactor.attemptsTo(Press.keys("Control+a"));\n\n// Check/uncheck checkboxes\nactor.attemptsTo(Check.checkbox(TodoList.AGREE_CHECKBOX));\nactor.attemptsTo(Uncheck.checkbox(TodoList.AGREE_CHECKBOX));\n\n// Select from dropdown\nactor.attemptsTo(SelectFromOptions.byVisibleText("Option 1").from(TodoList.DROPDOWN));\nactor.attemptsTo(SelectFromOptions.byValue("opt1").from(TodoList.DROPDOWN));\n'})}),"\n",(0,i.jsx)(t.h3,{id:"mouse-actions",children:"Mouse Actions"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"// Hover over an element\nactor.attemptsTo(Hover.over(TodoList.DELETE_BUTTON));\n\n// Drag and drop\nactor.attemptsTo(Drag.from(SOURCE).to(TARGET));\n\n// Scroll into view\nactor.attemptsTo(ScrollIntoView.element(TodoList.FOOTER));\n"})}),"\n",(0,i.jsx)(t.h3,{id:"waiting",children:"Waiting"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"// Wait for an element\nactor.attemptsTo(WaitFor.the(TodoList.LOADING_SPINNER).toDisappear());\n"})}),"\n",(0,i.jsx)(t.h3,{id:"javascript-execution",children:"JavaScript Execution"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'// Execute JavaScript\nactor.attemptsTo(\n    ExecuteJavaScript.withScript("window.scrollTo(0, document.body.scrollHeight)")\n);\n'})}),"\n",(0,i.jsx)(t.h3,{id:"dialog-handling",children:"Dialog Handling"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'// Accept alert\nactor.attemptsTo(HandleDialog.byAccepting());\n\n// Dismiss alert\nactor.attemptsTo(HandleDialog.byDismissing());\n\n// Enter text in prompt\nactor.attemptsTo(HandleDialog.byEntering("my response"));\n'})}),"\n",(0,i.jsx)(t.h2,{id:"playwright-specific-assertions",children:"Playwright-Specific Assertions"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"Ensure"})," class also provides Playwright-specific assertions with auto-retry:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'import net.serenitybdd.screenplay.playwright.assertions.Ensure;\n\nactor.attemptsTo(\n    // Element visibility\n    Ensure.that(TodoList.MAIN_SECTION).isVisible(),\n    Ensure.that(TodoList.LOADING_SPINNER).isHidden(),\n\n    // Text content\n    Ensure.that(TodoList.HEADER).hasText("todos"),\n    Ensure.that(TodoList.HEADER).containsText("todo"),\n\n    // Element count\n    Ensure.that(TodoList.TODO_ITEMS).hasCount(3),\n\n    // Attributes and classes\n    Ensure.that(TodoList.TODO_ITEM).hasClass("completed"),\n    Ensure.that(TodoList.INPUT).hasAttribute("placeholder", "What needs to be done?"),\n\n    // Element state\n    Ensure.that(TodoList.SUBMIT_BUTTON).isEnabled(),\n    Ensure.that(TodoList.CHECKBOX).isChecked(),\n\n    // Page URL and title\n    Ensure.thatTheCurrentUrl().contains("/dashboard"),\n    Ensure.thatThePageTitle().isEqualTo("My App")\n);\n'})}),"\n",(0,i.jsx)(t.h2,{id:"advanced-features",children:"Advanced Features"}),"\n",(0,i.jsx)(t.h3,{id:"direct-playwright-api-access",children:"Direct Playwright API Access"}),"\n",(0,i.jsx)(t.p,{children:"For advanced scenarios, you can access the Playwright API directly:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'Page page = BrowseTheWebWithPlaywright.as(actor).getCurrentPage();\n\n// Use Playwright\'s native API\npage.locator(".my-element").click();\n\n// Access browser context\nBrowserContext context = page.context();\n\n// Network interception\npage.route("**/api/**", route -> {\n    route.fulfill(new Route.FulfillOptions()\n        .setBody("{\\"mocked\\": true}")\n        .setContentType("application/json"));\n});\n'})}),"\n",(0,i.jsx)(t.h3,{id:"custom-tasks",children:"Custom Tasks"}),"\n",(0,i.jsx)(t.p,{children:"Create domain-specific tasks for your application:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'public class CompleteCheckout implements Task {\n\n    private final PaymentDetails paymentDetails;\n\n    public CompleteCheckout(PaymentDetails paymentDetails) {\n        this.paymentDetails = paymentDetails;\n    }\n\n    @Override\n    @Step("{0} completes checkout with #paymentDetails")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            EnterShippingAddress.forCurrentUser(),\n            EnterPaymentDetails.using(paymentDetails),\n            Click.on(CheckoutPage.PLACE_ORDER_BUTTON),\n            WaitFor.the(CheckoutPage.CONFIRMATION_MESSAGE).toAppear()\n        );\n    }\n\n    public static CompleteCheckout using(PaymentDetails details) {\n        return new CompleteCheckout(details);\n    }\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"custom-questions",children:"Custom Questions"}),"\n",(0,i.jsx)(t.p,{children:"Create reusable questions for your domain:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'public class TheOrderTotal {\n\n    public static Question<BigDecimal> displayed() {\n        return Question.about("the order total").answeredBy(actor -> {\n            String totalText = BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(".order-total")\n                .textContent();\n            return new BigDecimal(totalText.replace("$", ""));\n        });\n    }\n}\n\n// Usage\nactor.attemptsTo(\n    Ensure.that(TheOrderTotal.displayed()).isGreaterThan(new BigDecimal("100.00"))\n);\n'})}),"\n",(0,i.jsx)(t.h3,{id:"multiple-pagestabs",children:"Multiple Pages/Tabs"}),"\n",(0,i.jsx)(t.p,{children:"Handle multiple browser tabs:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'// Open a new page\nBrowseTheWebWithPlaywright.as(actor).openNewPage();\n\n// Switch between pages\nBrowseTheWebWithPlaywright.as(actor).switchToPage(0);\nBrowseTheWebWithPlaywright.as(actor).switchToPageWithTitle("Dashboard");\n\n// Close current page\nBrowseTheWebWithPlaywright.as(actor).closeCurrentPage();\n'})}),"\n",(0,i.jsx)(t.h3,{id:"cookie-management",children:"Cookie Management"}),"\n",(0,i.jsx)(t.p,{children:"Manage browser cookies:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'// Get all cookies\nList<Cookie> cookies = BrowseTheWebWithPlaywright.as(actor).getCookies();\n\n// Add a cookie\nCookie cookie = new Cookie("session", "abc123")\n    .setDomain("example.com")\n    .setPath("/");\nBrowseTheWebWithPlaywright.as(actor).addCookie(cookie);\n\n// Clear cookies\nBrowseTheWebWithPlaywright.as(actor).clearCookies();\n'})}),"\n",(0,i.jsx)(t.h3,{id:"frame-handling",children:"Frame Handling"}),"\n",(0,i.jsx)(t.p,{children:"Interact with elements inside iframes:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'// Define a target inside a frame\nTarget EDITOR_CONTENT = Target.the("editor content")\n    .inFrame("#editor-iframe")\n    .locatedBy("#content");\n\n// Interact with it normally\nactor.attemptsTo(\n    Enter.theValue("Hello World").into(EDITOR_CONTENT)\n);\n'})}),"\n",(0,i.jsx)(t.h3,{id:"screenshots",children:"Screenshots"}),"\n",(0,i.jsx)(t.p,{children:"Take screenshots explicitly:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"// The notifyScreenChange() method captures a screenshot\nBrowseTheWebWithPlaywright.as(actor).notifyScreenChange();\n\n// Or take a screenshot explicitly\nScreenshotAndHtmlSource screenshot = BrowseTheWebWithPlaywright.as(actor).takeScreenShot();\n"})}),"\n",(0,i.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(t.h3,{id:"browser-options",children:"Browser Options"}),"\n",(0,i.jsx)(t.p,{children:"Configure Playwright browser options via system properties or programmatically:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-properties",children:"# serenity.properties\nplaywright.browsertype=chromium\nplaywright.headless=true\nplaywright.slowMo=100\n"})}),"\n",(0,i.jsx)(t.p,{children:"Or programmatically:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'actor.can(\n    BrowseTheWebWithPlaywright\n        .withOptions(new BrowserType.LaunchOptions().setHeadless(false))\n        .withBrowserType("firefox")\n);\n'})}),"\n",(0,i.jsx)(t.h3,{id:"screenshot-configuration",children:"Screenshot Configuration"}),"\n",(0,i.jsx)(t.p,{children:"Control screenshot capture:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-properties",children:"# serenity.conf\nserenity {\n    take.screenshots = FOR_EACH_ACTION  # or FOR_FAILURES, DISABLED\n}\n"})}),"\n",(0,i.jsx)(t.h2,{id:"complete-example-todomvc-test-suite",children:"Complete Example: TodoMVC Test Suite"}),"\n",(0,i.jsx)(t.p,{children:"Here's a comprehensive example showing all the concepts together:"}),"\n",(0,i.jsx)(t.h3,{id:"ui-targets",children:"UI Targets"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'public class TodoList {\n\n    public static final Target NEW_TODO_INPUT =\n        Target.the("new todo input")\n              .locatedBy("[placeholder=\'What needs to be done?\']");\n\n    public static final Target TODO_ITEMS =\n        Target.the("todo items")\n              .locatedBy(".todo-list li");\n\n    public static final Target TODO_COUNT =\n        Target.the("todo count")\n              .locatedBy(".todo-count");\n\n    public static final Target CLEAR_COMPLETED_BUTTON =\n        Target.the("clear completed button")\n              .locatedBy(".clear-completed");\n\n    public static final Target ALL_FILTER =\n        Target.the("All filter")\n              .locatedBy(".filters a:has-text(\'All\')");\n\n    public static final Target ACTIVE_FILTER =\n        Target.the("Active filter")\n              .locatedBy(".filters a:has-text(\'Active\')");\n\n    public static final Target COMPLETED_FILTER =\n        Target.the("Completed filter")\n              .locatedBy(".filters a:has-text(\'Completed\')");\n\n    public static Target todoItemCalled(String text) {\n        return Target.the("todo \'" + text + "\'")\n                     .locatedBy(".todo-list li:has-text(\'" + text + "\')");\n    }\n\n    public static Target checkboxFor(String text) {\n        return Target.the("checkbox for \'" + text + "\'")\n                     .locatedBy(".todo-list li:has-text(\'" + text + "\') .toggle");\n    }\n\n    public static Target deleteButtonFor(String text) {\n        return Target.the("delete button for \'" + text + "\'")\n                     .locatedBy(".todo-list li:has-text(\'" + text + "\') .destroy");\n    }\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"tasks-1",children:"Tasks"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'// AddATodoItem.java\npublic class AddATodoItem implements Task {\n    private final List<String> items;\n\n    public AddATodoItem(List<String> items) {\n        this.items = items;\n    }\n\n    @Override\n    @Step("{0} adds todo items: #items")\n    public <T extends Actor> void performAs(T actor) {\n        for (String item : items) {\n            actor.attemptsTo(\n                Enter.theValue(item).into(TodoList.NEW_TODO_INPUT),\n                Press.keys("Enter")\n            );\n        }\n    }\n\n    public static AddATodoItem called(String item) {\n        return new AddATodoItem(List.of(item));\n    }\n\n    public static AddATodoItem withItems(String... items) {\n        return new AddATodoItem(Arrays.asList(items));\n    }\n}\n\n// Complete.java\npublic class Complete implements Task {\n    private final String todoItem;\n\n    public Complete(String todoItem) {\n        this.todoItem = todoItem;\n    }\n\n    @Override\n    @Step("{0} completes the todo item \'#todoItem\'")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Click.on(TodoList.checkboxFor(todoItem))\n        );\n    }\n\n    public static Complete todoItem(String item) {\n        return new Complete(item);\n    }\n}\n\n// Delete.java\npublic class Delete implements Task {\n    private final String todoItem;\n\n    public Delete(String todoItem) {\n        this.todoItem = todoItem;\n    }\n\n    @Override\n    @Step("{0} deletes the todo item \'#todoItem\'")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Hover.over(TodoList.todoItemCalled(todoItem)),\n            Click.on(TodoList.deleteButtonFor(todoItem))\n        );\n    }\n\n    public static Delete theTodoItem(String item) {\n        return new Delete(item);\n    }\n}\n\n// FilterTodos.java\npublic class FilterTodos {\n\n    public static Task toShowAll() {\n        return Task.where("{0} filters to show all todos",\n            Click.on(TodoList.ALL_FILTER)\n        );\n    }\n\n    public static Task toShowActive() {\n        return Task.where("{0} filters to show active todos",\n            Click.on(TodoList.ACTIVE_FILTER)\n        );\n    }\n\n    public static Task toShowCompleted() {\n        return Task.where("{0} filters to show completed todos",\n            Click.on(TodoList.COMPLETED_FILTER)\n        );\n    }\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"questions-1",children:"Questions"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'// TheVisibleTodos.java\npublic class TheVisibleTodos {\n\n    public static Question<Collection<String>> displayed() {\n        return Question.about("the visible todos").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(".todo-list li label")\n                .allTextContents()\n        );\n    }\n\n    public static Question<Integer> count() {\n        return Question.about("visible todo count").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(".todo-list li")\n                .count()\n        );\n    }\n}\n\n// TheRemainingCount.java\npublic class TheRemainingCount {\n\n    public static Question<Integer> value() {\n        return Question.about("the remaining count").answeredBy(actor -> {\n            String text = BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(".todo-count")\n                .textContent();\n            Matcher matcher = Pattern.compile("(\\\\d+)").matcher(text);\n            return matcher.find() ? Integer.parseInt(matcher.group(1)) : 0;\n        });\n    }\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"test-class",children:"Test Class"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When managing todos")\nclass WhenManagingTodosTest {\n\n    Actor toby;\n\n    @BeforeEach\n    void setUp() {\n        toby = Actor.named("Toby");\n        toby.can(BrowseTheWebWithPlaywright.usingTheDefaultConfiguration());\n    }\n\n    // No @AfterEach needed - BrowseTheWebWithPlaywright automatically\n    // cleans up browser resources when the test finishes\n\n    @Test\n    @DisplayName("should add and complete todos")\n    void shouldAddAndCompleteTodos() {\n        toby.attemptsTo(\n            Open.url("https://todomvc.com/examples/react/dist/"),\n            AddATodoItem.withItems("Buy milk", "Walk the dog", "Do laundry"),\n\n            Ensure.that(TheVisibleTodos.count()).isEqualTo(3),\n            Ensure.that(TheRemainingCount.value()).isEqualTo(3),\n\n            Complete.todoItem("Buy milk"),\n\n            Ensure.that(TheRemainingCount.value()).isEqualTo(2),\n\n            FilterTodos.toShowCompleted(),\n\n            Ensure.that(TheVisibleTodos.displayed()).containsExactly("Buy milk"),\n\n            FilterTodos.toShowActive(),\n\n            Ensure.that(TheVisibleTodos.displayed())\n                .containsExactly("Walk the dog", "Do laundry")\n        );\n    }\n\n    @Test\n    @DisplayName("should delete a todo item")\n    void shouldDeleteTodoItem() {\n        toby.attemptsTo(\n            Open.url("https://todomvc.com/examples/react/dist/"),\n            AddATodoItem.withItems("Item 1", "Item 2", "Item 3"),\n\n            Delete.theTodoItem("Item 2"),\n\n            Ensure.that(TheVisibleTodos.displayed())\n                .containsExactly("Item 1", "Item 3")\n        );\n    }\n}\n'})}),"\n",(0,i.jsx)(t.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(t.h3,{id:"1-keep-tasks-business-focused",children:"1. Keep Tasks Business-Focused"}),"\n",(0,i.jsxs)(t.p,{children:["Tasks should express ",(0,i.jsx)(t.em,{children:"what"})," the user is trying to achieve, not ",(0,i.jsx)(t.em,{children:"how"})," they achieve it:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'// Good - expresses intent\nactor.attemptsTo(\n    AddItemToCart.called("Blue T-Shirt"),\n    ProceedToCheckout.withStandardShipping()\n);\n\n// Avoid - too technical\nactor.attemptsTo(\n    Click.on(ProductPage.ADD_TO_CART_BUTTON),\n    Click.on(Header.CART_ICON),\n    Click.on(CartPage.CHECKOUT_BUTTON)\n);\n'})}),"\n",(0,i.jsx)(t.h3,{id:"2-use-meaningful-target-names",children:"2. Use Meaningful Target Names"}),"\n",(0,i.jsx)(t.p,{children:"Target names appear in reports, so make them descriptive:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'// Good\nTarget SUBMIT_ORDER_BUTTON = Target.the("submit order button")\n    .locatedBy("#checkout-submit");\n\n// Avoid\nTarget BUTTON = Target.the("button").locatedBy("#checkout-submit");\n'})}),"\n",(0,i.jsx)(t.h3,{id:"3-create-domain-specific-questions",children:"3. Create Domain-Specific Questions"}),"\n",(0,i.jsx)(t.p,{children:"Questions should return meaningful domain objects:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"// Good\nQuestion<Money> orderTotal = TheOrderTotal.displayed();\nQuestion<List<CartItem>> cartItems = TheCartContents.items();\n\n// Avoid\nQuestion<String> total = Text.of(OrderPage.TOTAL);\n"})}),"\n",(0,i.jsx)(t.h3,{id:"4-leverage-ensure-for-readable-assertions",children:"4. Leverage Ensure for Readable Assertions"}),"\n",(0,i.jsxs)(t.p,{children:["Use ",(0,i.jsx)(t.code,{children:"Ensure.that()"})," for assertions that read naturally:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"actor.attemptsTo(\n    Ensure.that(TheOrderStatus.displayed()).isEqualTo(OrderStatus.CONFIRMED),\n    Ensure.that(TheDeliveryDate.shown()).isAfter(LocalDate.now())\n);\n"})}),"\n",(0,i.jsx)(t.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Explore the ",(0,i.jsx)(t.a,{href:"playwright_tutorial_todomvc",children:"TodoMVC Tutorial"})," for a step-by-step walkthrough"]}),"\n",(0,i.jsxs)(t.li,{children:["Learn about ",(0,i.jsx)(t.a,{href:"playwright_configuration",children:"Configuration Options"})," for customization"]}),"\n",(0,i.jsxs)(t.li,{children:["Review ",(0,i.jsx)(t.a,{href:"playwright_best_practices",children:"Best Practices"})," for production-ready tests"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,t,n){n.d(t,{R:()=>o,x:()=>r});var s=n(6540);const i={},a=s.createContext(i);function o(e){const t=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);
"use strict";(self.webpackChunkserenity_users_guide=self.webpackChunkserenity_users_guide||[]).push([[4023],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>m});var a=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var o=a.createContext({}),u=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},p=function(e){var n=u(e.components);return a.createElement(o.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,s=e.originalType,o=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=u(t),m=i,g=d["".concat(o,".").concat(m)]||d[m]||c[m]||s;return t?a.createElement(g,r(r({ref:n},p),{},{components:t})):a.createElement(g,r({ref:n},p))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var s=t.length,r=new Array(s);r[0]=d;var l={};for(var o in n)hasOwnProperty.call(n,o)&&(l[o]=n[o]);l.originalType=e,l.mdxType="string"==typeof e?e:i,r[1]=l;for(var u=2;u<s;u++)r[u]=t[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},545:(e,n,t)=>{t.r(n),t.d(n,{contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>l,toc:()=>o});var a=t(7462),i=(t(7294),t(3905));const s={id:"cicd-integration",title:"CI/CD Integration with Serenity BDD",sidebar_position:6},r="CI/CD Integration with Serenity BDD",l={unversionedId:"tutorials/cicd-integration",id:"tutorials/cicd-integration",isDocsHomePage:!1,title:"CI/CD Integration with Serenity BDD",description:"This guide shows you how to integrate Serenity BDD tests into popular CI/CD platforms, including GitHub Actions, Jenkins, and GitLab CI. Learn how to run tests automatically, publish reports, and get fast feedback on your code changes.",source:"@site/docs/tutorials/cicd-integration.md",sourceDirName:"tutorials",slug:"/tutorials/cicd-integration",permalink:"/docs/tutorials/cicd-integration",editUrl:"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/tutorials/cicd-integration.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{id:"cicd-integration",title:"CI/CD Integration with Serenity BDD",sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Migrating From Serenity BDD 3.x to Serenity BDD 4.x",permalink:"/docs/tutorials/migrating_to_serenity_4"},next:{title:"How to Do Parallel Test Execution in Cucumber with Serenity",permalink:"/docs/tutorials/running_cucumber_scenarios_in_parallel"}},o=[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Quick Start Checklist",id:"quick-start-checklist",children:[]},{value:"GitHub Actions",id:"github-actions",children:[{value:"Basic Setup",id:"basic-setup",children:[]},{value:"Gradle Version",id:"gradle-version",children:[]},{value:"Publishing Reports to GitHub Pages",id:"publishing-reports-to-github-pages",children:[]},{value:"Parallel Execution in GitHub Actions",id:"parallel-execution-in-github-actions",children:[]},{value:"Advanced Configuration with Environment Variables",id:"advanced-configuration-with-environment-variables",children:[]},{value:"Notifications",id:"notifications",children:[]}]},{value:"Jenkins",id:"jenkins",children:[{value:"Declarative Pipeline",id:"declarative-pipeline",children:[]},{value:"Gradle Pipeline",id:"gradle-pipeline",children:[]},{value:"Parallel Execution in Jenkins",id:"parallel-execution-in-jenkins",children:[]},{value:"Jenkins Configuration with Parameters",id:"jenkins-configuration-with-parameters",children:[]},{value:"Installing Jenkins Plugins",id:"installing-jenkins-plugins",children:[]}]},{value:"GitLab CI",id:"gitlab-ci",children:[{value:"Basic Configuration",id:"basic-configuration",children:[]},{value:"Gradle Version",id:"gradle-version-1",children:[]},{value:"Multiple Environments",id:"multiple-environments",children:[]},{value:"Parallel Jobs",id:"parallel-jobs",children:[]}]},{value:"Azure Pipelines",id:"azure-pipelines",children:[]},{value:"Docker Integration",id:"docker-integration",children:[{value:"Dockerfile for Tests",id:"dockerfile-for-tests",children:[]},{value:"Docker Compose",id:"docker-compose",children:[]},{value:"GitHub Actions with Docker",id:"github-actions-with-docker",children:[]}]},{value:"Best Practices",id:"best-practices",children:[{value:"1. Use Headless Browsers",id:"1-use-headless-browsers",children:[]},{value:"2. Optimize Build Times",id:"2-optimize-build-times",children:[]},{value:"3. Fail Fast",id:"3-fail-fast",children:[]},{value:"4. Tag-Based Execution",id:"4-tag-based-execution",children:[]},{value:"5. Separate Test Stages",id:"5-separate-test-stages",children:[]},{value:"6. Manage Secrets Securely",id:"6-manage-secrets-securely",children:[]},{value:"7. Retry Flaky Tests",id:"7-retry-flaky-tests",children:[]},{value:"8. Generate Build Badges",id:"8-generate-build-badges",children:[]}]},{value:"Troubleshooting",id:"troubleshooting",children:[{value:"Issue: Tests fail only in CI",id:"issue-tests-fail-only-in-ci",children:[]},{value:"Issue: Reports not publishing",id:"issue-reports-not-publishing",children:[]},{value:"Issue: Slow builds",id:"issue-slow-builds",children:[]}]},{value:"Complete Example: GitHub Actions with All Features",id:"complete-example-github-actions-with-all-features",children:[]},{value:"Next Steps",id:"next-steps",children:[]},{value:"Additional Resources",id:"additional-resources",children:[]}],u={toc:o};function p({components:e,...n}){return(0,i.kt)("wrapper",(0,a.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"cicd-integration-with-serenity-bdd"},"CI/CD Integration with Serenity BDD"),(0,i.kt)("p",null,"This guide shows you how to integrate Serenity BDD tests into popular CI/CD platforms, including GitHub Actions, Jenkins, and GitLab CI. Learn how to run tests automatically, publish reports, and get fast feedback on your code changes."),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Serenity BDD project configured with Maven or Gradle"),(0,i.kt)("li",{parentName:"ul"},"Version control repository (Git)"),(0,i.kt)("li",{parentName:"ul"},"Access to a CI/CD platform")),(0,i.kt)("h2",{id:"quick-start-checklist"},"Quick Start Checklist"),(0,i.kt)("p",null,"Before setting up CI/CD, ensure your project:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u2705 Runs successfully locally with ",(0,i.kt)("inlineCode",{parentName:"li"},"mvn clean verify")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"gradle clean test")),(0,i.kt)("li",{parentName:"ul"},"\u2705 Has all dependencies properly configured"),(0,i.kt)("li",{parentName:"ul"},"\u2705 Uses headless browser mode for web tests"),(0,i.kt)("li",{parentName:"ul"},"\u2705 Has reasonable test execution timeouts"),(0,i.kt)("li",{parentName:"ul"},"\u2705 Generates Serenity reports in ",(0,i.kt)("inlineCode",{parentName:"li"},"target/site/serenity")," (Maven) or ",(0,i.kt)("inlineCode",{parentName:"li"},"build/reports/serenity")," (Gradle)")),(0,i.kt)("h2",{id:"github-actions"},"GitHub Actions"),(0,i.kt)("p",null,"GitHub Actions is the easiest way to set up CI/CD for projects hosted on GitHub."),(0,i.kt)("h3",{id:"basic-setup"},"Basic Setup"),(0,i.kt)("p",null,"Create ",(0,i.kt)("inlineCode",{parentName:"p"},".github/workflows/serenity-tests.yml")," in your repository:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"name: Serenity BDD Tests\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main, develop ]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run Serenity tests\n      run: mvn clean verify\n\n    - name: Publish Serenity Report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: serenity-report\n        path: target/site/serenity\n        retention-days: 30\n")),(0,i.kt)("h3",{id:"gradle-version"},"Gradle Version"),(0,i.kt)("p",null,"For Gradle projects:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"name: Serenity BDD Tests\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main, develop ]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'temurin'\n        cache: 'gradle'\n\n    - name: Run Serenity tests\n      run: ./gradlew clean test aggregate\n\n    - name: Publish Serenity Report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: serenity-report\n        path: build/reports/serenity\n        retention-days: 30\n")),(0,i.kt)("h3",{id:"publishing-reports-to-github-pages"},"Publishing Reports to GitHub Pages"),(0,i.kt)("p",null,"Automatically publish Serenity reports as a website:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"name: Serenity Tests with GitHub Pages\n\non:\n  push:\n    branches: [ main ]\n\npermissions:\n  contents: write\n  pages: write\n  id-token: write\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run Serenity tests\n      run: mvn clean verify\n\n    - name: Deploy to GitHub Pages\n      if: always()\n      uses: peaceiris/actions-gh-pages@v3\n      with:\n        github_token: ${{ secrets.GITHUB_TOKEN }}\n        publish_dir: ./target/site/serenity\n        destination_dir: reports/${{ github.run_number }}\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Access your reports at:")," ",(0,i.kt)("inlineCode",{parentName:"p"},"https://<username>.github.io/<repository>/reports/<run-number>")),(0,i.kt)("h3",{id:"parallel-execution-in-github-actions"},"Parallel Execution in GitHub Actions"),(0,i.kt)("p",null,"Run tests in parallel using a matrix strategy:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"name: Serenity Parallel Tests\n\non:\n  push:\n    branches: [ main ]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        browser: [chrome, firefox, edge]\n        test-suite: [smoke, regression]\n      fail-fast: false\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run tests\n      run: mvn verify -Dwebdriver.driver=${{ matrix.browser }} -Dtags=${{ matrix.test-suite }}\n\n    - name: Upload Report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: report-${{ matrix.browser }}-${{ matrix.test-suite }}\n        path: target/site/serenity\n")),(0,i.kt)("h3",{id:"advanced-configuration-with-environment-variables"},"Advanced Configuration with Environment Variables"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"name: Serenity Tests - All Environments\n\non:\n  push:\n    branches: [ main ]\n  workflow_dispatch:\n    inputs:\n      environment:\n        description: 'Environment to test'\n        required: true\n        type: choice\n        options:\n          - dev\n          - staging\n          - production\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n    - name: Checkout code\n      uses: actions/checkout@v4\n\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run tests\n      env:\n        BASE_URL: ${{ secrets[format('{0}_BASE_URL', github.event.inputs.environment || 'dev')] }}\n        API_KEY: ${{ secrets[format('{0}_API_KEY', github.event.inputs.environment || 'dev')] }}\n        TEST_USER: ${{ secrets.TEST_USER }}\n        TEST_PASSWORD: ${{ secrets.TEST_PASSWORD }}\n      run: |\n        mvn clean verify \\\n          -Dwebdriver.base.url=$BASE_URL \\\n          -Dapi.key=$API_KEY \\\n          -Dtest.user=$TEST_USER \\\n          -Dtest.password=$TEST_PASSWORD\n\n    - name: Upload Report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: serenity-report-${{ github.event.inputs.environment || 'dev' }}\n        path: target/site/serenity\n")),(0,i.kt)("h3",{id:"notifications"},"Notifications"),(0,i.kt)("p",null,"Send Slack notifications on test results:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'    - name: Notify Slack on Success\n      if: success()\n      uses: slackapi/slack-github-action@v1\n      with:\n        webhook-url: ${{ secrets.SLACK_WEBHOOK }}\n        payload: |\n          {\n            "text": "\u2705 Serenity Tests Passed - Build #${{ github.run_number }}"\n          }\n\n    - name: Notify Slack on Failure\n      if: failure()\n      uses: slackapi/slack-github-action@v1\n      with:\n        webhook-url: ${{ secrets.SLACK_WEBHOOK }}\n        payload: |\n          {\n            "text": "\u274c Serenity Tests Failed - Build #${{ github.run_number }}\\nView: ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}"\n          }\n')),(0,i.kt)("h2",{id:"jenkins"},"Jenkins"),(0,i.kt)("p",null,"Jenkins is a popular self-hosted CI/CD platform with extensive plugin support."),(0,i.kt)("h3",{id:"declarative-pipeline"},"Declarative Pipeline"),(0,i.kt)("p",null,"Create a ",(0,i.kt)("inlineCode",{parentName:"p"},"Jenkinsfile")," in your repository root:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},"pipeline {\n    agent any\n\n    tools {\n        maven 'Maven-3.9'\n        jdk 'JDK-17'\n    }\n\n    stages {\n        stage('Checkout') {\n            steps {\n                checkout scm\n            }\n        }\n\n        stage('Build and Test') {\n            steps {\n                sh 'mvn clean verify'\n            }\n        }\n\n        stage('Publish Reports') {\n            steps {\n                publishHTML([\n                    reportDir: 'target/site/serenity',\n                    reportFiles: 'index.html',\n                    reportName: 'Serenity Report',\n                    keepAll: true,\n                    alwaysLinkToLastBuild: true,\n                    allowMissing: false\n                ])\n            }\n        }\n    }\n\n    post {\n        always {\n            junit '**/target/failsafe-reports/*.xml'\n            archiveArtifacts artifacts: 'target/site/serenity/**/*', allowEmptyArchive: true\n        }\n        failure {\n            emailext(\n                subject: \"Failed: ${currentBuild.fullDisplayName}\",\n                body: \"Test execution failed. Check console output at ${env.BUILD_URL}\",\n                to: 'team@example.com'\n            )\n        }\n    }\n}\n")),(0,i.kt)("h3",{id:"gradle-pipeline"},"Gradle Pipeline"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},"pipeline {\n    agent any\n\n    tools {\n        gradle 'Gradle-8'\n        jdk 'JDK-17'\n    }\n\n    stages {\n        stage('Checkout') {\n            steps {\n                checkout scm\n            }\n        }\n\n        stage('Build and Test') {\n            steps {\n                sh './gradlew clean test aggregate'\n            }\n        }\n\n        stage('Publish Reports') {\n            steps {\n                publishHTML([\n                    reportDir: 'build/reports/serenity',\n                    reportFiles: 'index.html',\n                    reportName: 'Serenity Report',\n                    keepAll: true,\n                    alwaysLinkToLastBuild: true\n                ])\n            }\n        }\n    }\n\n    post {\n        always {\n            junit '**/build/test-results/test/*.xml'\n        }\n    }\n}\n")),(0,i.kt)("h3",{id:"parallel-execution-in-jenkins"},"Parallel Execution in Jenkins"),(0,i.kt)("p",null,"Run tests in parallel across multiple nodes:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},"pipeline {\n    agent none\n\n    stages {\n        stage('Parallel Tests') {\n            parallel {\n                stage('Chrome Tests') {\n                    agent { label 'chrome' }\n                    steps {\n                        sh 'mvn verify -Dwebdriver.driver=chrome'\n                    }\n                }\n                stage('Firefox Tests') {\n                    agent { label 'firefox' }\n                    steps {\n                        sh 'mvn verify -Dwebdriver.driver=firefox'\n                    }\n                }\n                stage('Edge Tests') {\n                    agent { label 'edge' }\n                    steps {\n                        sh 'mvn verify -Dwebdriver.driver=edge'\n                    }\n                }\n            }\n        }\n\n        stage('Aggregate Reports') {\n            agent any\n            steps {\n                publishHTML([\n                    reportDir: 'target/site/serenity',\n                    reportFiles: 'index.html',\n                    reportName: 'Consolidated Serenity Report'\n                ])\n            }\n        }\n    }\n}\n")),(0,i.kt)("h3",{id:"jenkins-configuration-with-parameters"},"Jenkins Configuration with Parameters"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},"pipeline {\n    agent any\n\n    parameters {\n        choice(\n            name: 'ENVIRONMENT',\n            choices: ['dev', 'staging', 'production'],\n            description: 'Environment to test'\n        )\n        choice(\n            name: 'BROWSER',\n            choices: ['chrome', 'firefox', 'edge'],\n            description: 'Browser to use'\n        )\n        string(\n            name: 'TAGS',\n            defaultValue: '',\n            description: 'Tags to filter tests (e.g., @smoke, @regression)'\n        )\n    }\n\n    stages {\n        stage('Test') {\n            steps {\n                script {\n                    def baseUrl = \"\"\n                    switch(params.ENVIRONMENT) {\n                        case 'dev':\n                            baseUrl = 'https://dev.example.com'\n                            break\n                        case 'staging':\n                            baseUrl = 'https://staging.example.com'\n                            break\n                        case 'production':\n                            baseUrl = 'https://www.example.com'\n                            break\n                    }\n\n                    sh \"\"\"\n                        mvn clean verify \\\n                        -Dwebdriver.driver=${params.BROWSER} \\\n                        -Dwebdriver.base.url=${baseUrl} \\\n                        -Dcucumber.filter.tags='${params.TAGS}'\n                    \"\"\"\n                }\n            }\n        }\n    }\n}\n")),(0,i.kt)("h3",{id:"installing-jenkins-plugins"},"Installing Jenkins Plugins"),(0,i.kt)("p",null,"Required plugins:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"# Install via Jenkins CLI or UI\n- HTML Publisher Plugin\n- JUnit Plugin\n- Pipeline Plugin\n- Git Plugin\n- Email Extension Plugin\n")),(0,i.kt)("h2",{id:"gitlab-ci"},"GitLab CI"),(0,i.kt)("p",null,"GitLab CI is integrated directly into GitLab repositories."),(0,i.kt)("h3",{id:"basic-configuration"},"Basic Configuration"),(0,i.kt)("p",null,"Create ",(0,i.kt)("inlineCode",{parentName:"p"},".gitlab-ci.yml")," in your repository root:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'image: maven:3.9-eclipse-temurin-17\n\nstages:\n  - test\n  - report\n\nvariables:\n  MAVEN_OPTS: "-Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository"\n\ncache:\n  paths:\n    - .m2/repository\n\ntest:\n  stage: test\n  script:\n    - mvn clean verify\n  artifacts:\n    when: always\n    paths:\n      - target/site/serenity\n    expire_in: 30 days\n    reports:\n      junit:\n        - target/failsafe-reports/TEST-*.xml\n\npages:\n  stage: report\n  script:\n    - mkdir -p public\n    - cp -r target/site/serenity/* public/\n  artifacts:\n    paths:\n      - public\n  only:\n    - main\n')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Reports will be available at:")," ",(0,i.kt)("inlineCode",{parentName:"p"},"https://<username>.gitlab.io/<project>/")),(0,i.kt)("h3",{id:"gradle-version-1"},"Gradle Version"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'image: gradle:8-jdk17\n\nstages:\n  - test\n  - report\n\nvariables:\n  GRADLE_OPTS: "-Dorg.gradle.daemon=false"\n\ncache:\n  paths:\n    - .gradle\n\ntest:\n  stage: test\n  script:\n    - gradle clean test aggregate\n  artifacts:\n    when: always\n    paths:\n      - build/reports/serenity\n    expire_in: 30 days\n    reports:\n      junit:\n        - build/test-results/test/TEST-*.xml\n\npages:\n  stage: report\n  script:\n    - mkdir -p public\n    - cp -r build/reports/serenity/* public/\n  artifacts:\n    paths:\n      - public\n  only:\n    - main\n')),(0,i.kt)("h3",{id:"multiple-environments"},"Multiple Environments"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'stages:\n  - test\n\n.test_template:\n  image: maven:3.9-eclipse-temurin-17\n  script:\n    - mvn clean verify -Dwebdriver.base.url=$BASE_URL\n  artifacts:\n    when: always\n    paths:\n      - target/site/serenity\n    expire_in: 7 days\n\ntest:dev:\n  extends: .test_template\n  variables:\n    BASE_URL: "https://dev.example.com"\n  only:\n    - develop\n\ntest:staging:\n  extends: .test_template\n  variables:\n    BASE_URL: "https://staging.example.com"\n  only:\n    - staging\n\ntest:production:\n  extends: .test_template\n  variables:\n    BASE_URL: "https://www.example.com"\n  only:\n    - main\n  when: manual\n')),(0,i.kt)("h3",{id:"parallel-jobs"},"Parallel Jobs"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"test:\n  stage: test\n  parallel:\n    matrix:\n      - BROWSER: [chrome, firefox]\n        SUITE: [smoke, regression]\n  script:\n    - mvn verify -Dwebdriver.driver=$BROWSER -Dtags=@$SUITE\n  artifacts:\n    when: always\n    paths:\n      - target/site/serenity\n    reports:\n      junit:\n        - target/failsafe-reports/TEST-*.xml\n")),(0,i.kt)("h2",{id:"azure-pipelines"},"Azure Pipelines"),(0,i.kt)("p",null,"For projects hosted on Azure DevOps:"),(0,i.kt)("p",null,"Create ",(0,i.kt)("inlineCode",{parentName:"p"},"azure-pipelines.yml"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"trigger:\n  - main\n  - develop\n\npool:\n  vmImage: 'ubuntu-latest'\n\nvariables:\n  MAVEN_CACHE_FOLDER: $(Pipeline.Workspace)/.m2/repository\n  MAVEN_OPTS: '-Dmaven.repo.local=$(MAVEN_CACHE_FOLDER)'\n\nsteps:\n- task: JavaToolInstaller@0\n  inputs:\n    versionSpec: '17'\n    jdkArchitectureOption: 'x64'\n    jdkSourceOption: 'PreInstalled'\n\n- task: Cache@2\n  inputs:\n    key: 'maven | \"$(Agent.OS)\" | **/pom.xml'\n    path: $(MAVEN_CACHE_FOLDER)\n  displayName: Cache Maven packages\n\n- task: Maven@3\n  inputs:\n    mavenPomFile: 'pom.xml'\n    goals: 'clean verify'\n    options: '-B'\n  displayName: 'Run Serenity Tests'\n\n- task: PublishTestResults@2\n  condition: always()\n  inputs:\n    testResultsFormat: 'JUnit'\n    testResultsFiles: '**/target/failsafe-reports/TEST-*.xml'\n    testRunTitle: 'Serenity Test Results'\n\n- task: PublishBuildArtifacts@1\n  condition: always()\n  inputs:\n    PathtoPublish: 'target/site/serenity'\n    ArtifactName: 'serenity-report'\n  displayName: 'Publish Serenity Report'\n")),(0,i.kt)("h2",{id:"docker-integration"},"Docker Integration"),(0,i.kt)("p",null,"Run tests in Docker containers for consistency."),(0,i.kt)("h3",{id:"dockerfile-for-tests"},"Dockerfile for Tests"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dockerfile"},'FROM maven:3.9-eclipse-temurin-17\n\n# Install Chrome\nRUN wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add - \\\n    && echo "deb http://dl.google.com/linux/chrome/deb/ stable main" >> /etc/apt/sources.list.d/google.list \\\n    && apt-get update \\\n    && apt-get install -y google-chrome-stable \\\n    && rm -rf /var/lib/apt/lists/*\n\nWORKDIR /app\n\nCOPY pom.xml .\nRUN mvn dependency:go-offline\n\nCOPY src ./src\n\nCMD ["mvn", "clean", "verify"]\n')),(0,i.kt)("h3",{id:"docker-compose"},"Docker Compose"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"version: '3.8'\n\nservices:\n  serenity-tests:\n    build: .\n    volumes:\n      - ./target:/app/target\n    environment:\n      - WEBDRIVER_DRIVER=chrome\n      - WEBDRIVER_BASE_URL=https://example.com\n")),(0,i.kt)("h3",{id:"github-actions-with-docker"},"GitHub Actions with Docker"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"- name: Build and run tests in Docker\n  run: |\n    docker build -t serenity-tests .\n    docker run --rm -v $PWD/target:/app/target serenity-tests\n")),(0,i.kt)("h2",{id:"best-practices"},"Best Practices"),(0,i.kt)("h3",{id:"1-use-headless-browsers"},"1. Use Headless Browsers"),(0,i.kt)("p",null,"Configure headless mode for CI environments:"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"serenity.conf:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-hocon"},'webdriver {\n  driver = chrome\n  capabilities {\n    browserName = "chrome"\n    "goog:chromeOptions" {\n      args = ["--headless", "--no-sandbox", "--disable-dev-shm-usage", "--disable-gpu"]\n    }\n  }\n}\n')),(0,i.kt)("h3",{id:"2-optimize-build-times"},"2. Optimize Build Times"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Cache dependencies:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"# GitHub Actions\n- uses: actions/cache@v3\n  with:\n    path: ~/.m2/repository\n    key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n\n# GitLab CI\ncache:\n  paths:\n    - .m2/repository\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Skip unnecessary phases:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"mvn verify -DskipTests  # Skip test execution\nmvn verify -Dmaven.test.skip=true  # Skip test compilation\n")),(0,i.kt)("h3",{id:"3-fail-fast"},"3. Fail Fast"),(0,i.kt)("p",null,"Configure builds to fail fast on critical errors:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"strategy:\n  fail-fast: true  # Stop all jobs if one fails\n")),(0,i.kt)("h3",{id:"4-tag-based-execution"},"4. Tag-Based Execution"),(0,i.kt)("p",null,"Run different test suites in different pipelines:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'# Smoke tests on every commit\nmvn verify -Dcucumber.filter.tags="@smoke"\n\n# Full regression on main branch\nmvn verify -Dcucumber.filter.tags="@regression"\n')),(0,i.kt)("h3",{id:"5-separate-test-stages"},"5. Separate Test Stages"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"stages:\n  - unit-tests\n  - integration-tests\n  - smoke-tests\n  - regression-tests\n")),(0,i.kt)("h3",{id:"6-manage-secrets-securely"},"6. Manage Secrets Securely"),(0,i.kt)("p",null,"Never commit credentials:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"# GitHub Actions\nenv:\n  API_KEY: ${{ secrets.API_KEY }}\n\n# GitLab CI\nvariables:\n  API_KEY: ${{ secrets.API_KEY }}\n")),(0,i.kt)("h3",{id:"7-retry-flaky-tests"},"7. Retry Flaky Tests"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-groovy"},"// Jenkins\nretry(3) {\n    sh 'mvn verify'\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"# GitLab CI\ntest:\n  retry:\n    max: 2\n    when: runner_system_failure\n")),(0,i.kt)("h3",{id:"8-generate-build-badges"},"8. Generate Build Badges"),(0,i.kt)("p",null,"Add status badges to your README:"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"GitHub Actions:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-markdown"},"![Tests](https://github.com/username/repo/actions/workflows/serenity-tests.yml/badge.svg)\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"GitLab CI:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-markdown"},"![pipeline status](https://gitlab.com/username/project/badges/main/pipeline.svg)\n")),(0,i.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,i.kt)("h3",{id:"issue-tests-fail-only-in-ci"},"Issue: Tests fail only in CI"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Common causes:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Browser not installed or incompatible version"),(0,i.kt)("li",{parentName:"ul"},"Missing display server (X11)"),(0,i.kt)("li",{parentName:"ul"},"Insufficient memory"),(0,i.kt)("li",{parentName:"ul"},"Network/firewall issues")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solutions:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'# Add display server for Linux\nbefore_script:\n  - export DISPLAY=:99\n  - Xvfb :99 -screen 0 1920x1080x24 &\n\n# Increase memory\nenv:\n  MAVEN_OPTS: "-Xmx2g"\n')),(0,i.kt)("h3",{id:"issue-reports-not-publishing"},"Issue: Reports not publishing"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Check:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Correct path to report directory"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"if: always()")," condition is set"),(0,i.kt)("li",{parentName:"ul"},"Sufficient permissions")),(0,i.kt)("h3",{id:"issue-slow-builds"},"Issue: Slow builds"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solutions:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Cache dependencies"),(0,i.kt)("li",{parentName:"ul"},"Use parallel execution"),(0,i.kt)("li",{parentName:"ul"},"Run subset of tests (smoke tests first)"),(0,i.kt)("li",{parentName:"ul"},"Use Docker layer caching")),(0,i.kt)("h2",{id:"complete-example-github-actions-with-all-features"},"Complete Example: GitHub Actions with All Features"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"name: Serenity BDD - Production Ready\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n  schedule:\n    - cron: '0 2 * * *'  # Daily at 2 AM\n  workflow_dispatch:\n\nenv:\n  JAVA_VERSION: '17'\n  MAVEN_OPTS: '-Xmx2g'\n\njobs:\n  smoke-tests:\n    name: Smoke Tests\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v4\n\n    - name: Set up JDK\n      uses: actions/setup-java@v4\n      with:\n        java-version: ${{ env.JAVA_VERSION }}\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run smoke tests\n      run: mvn verify -Dcucumber.filter.tags=\"@smoke\"\n\n    - name: Upload smoke test report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: smoke-test-report\n        path: target/site/serenity\n\n  regression-tests:\n    name: Regression Tests\n    runs-on: ubuntu-latest\n    needs: smoke-tests\n    if: github.ref == 'refs/heads/main'\n\n    strategy:\n      matrix:\n        browser: [chrome, firefox]\n      fail-fast: false\n\n    steps:\n    - uses: actions/checkout@v4\n\n    - name: Set up JDK\n      uses: actions/setup-java@v4\n      with:\n        java-version: ${{ env.JAVA_VERSION }}\n        distribution: 'temurin'\n        cache: 'maven'\n\n    - name: Run regression tests\n      run: mvn verify -Dwebdriver.driver=${{ matrix.browser }}\n\n    - name: Upload report\n      if: always()\n      uses: actions/upload-artifact@v4\n      with:\n        name: report-${{ matrix.browser }}\n        path: target/site/serenity\n\n  publish-report:\n    name: Publish Report to GitHub Pages\n    runs-on: ubuntu-latest\n    needs: [smoke-tests, regression-tests]\n    if: always() && github.ref == 'refs/heads/main'\n\n    permissions:\n      contents: write\n      pages: write\n\n    steps:\n    - uses: actions/download-artifact@v4\n      with:\n        name: smoke-test-report\n        path: reports/smoke\n\n    - name: Deploy to GitHub Pages\n      uses: peaceiris/actions-gh-pages@v3\n      with:\n        github_token: ${{ secrets.GITHUB_TOKEN }}\n        publish_dir: ./reports\n")),(0,i.kt)("h2",{id:"next-steps"},"Next Steps"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Learn about ",(0,i.kt)("a",{parentName:"li",href:"/docs/junit5/parallel-execution"},"Parallel Execution")," to speed up CI builds"),(0,i.kt)("li",{parentName:"ul"},"Explore ",(0,i.kt)("a",{parentName:"li",href:"/docs/tutorials/data-driven-testing"},"Data-Driven Testing")," for comprehensive test coverage"),(0,i.kt)("li",{parentName:"ul"},"Check ",(0,i.kt)("a",{parentName:"li",href:"/docs/reference/serenity-properties"},"Serenity Configuration")," for optimizing CI performance")),(0,i.kt)("h2",{id:"additional-resources"},"Additional Resources"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.github.com/en/actions"},"GitHub Actions Documentation")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.jenkins.io/doc/book/pipeline/"},"Jenkins Pipeline Documentation")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.gitlab.com/ee/ci/"},"GitLab CI/CD Documentation")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://hub.docker.com/r/serenity"},"Serenity BDD on Docker Hub"))))}p.isMDXComponent=!0}}]);
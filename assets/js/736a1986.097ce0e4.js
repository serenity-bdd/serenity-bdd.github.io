"use strict";(self.webpackChunkserenity_users_guide=self.webpackChunkserenity_users_guide||[]).push([[7608],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,g=d["".concat(s,".").concat(m)]||d[m]||p[m]||i;return n?a.createElement(g,l(l({ref:t},c),{},{components:n})):a.createElement(g,l({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var u=2;u<i;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6987:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>s});var a=n(7462),r=(n(7294),n(3905));const i={id:"parallel-execution",title:"Running Cucumber Tests in Parallel",sidebar_position:2},l="Running Cucumber Scenarios in Parallel",o={unversionedId:"cucumber/parallel-execution",id:"cucumber/parallel-execution",isDocsHomePage:!1,title:"Running Cucumber Tests in Parallel",description:"Running Cucumber scenarios in parallel can dramatically reduce test execution time. This guide explains how to configure and optimize parallel execution with Serenity BDD and JUnit 5.",source:"@site/docs/cucumber/parallel-execution.md",sourceDirName:"cucumber",slug:"/cucumber/parallel-execution",permalink:"/docs/cucumber/parallel-execution",editUrl:"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/cucumber/parallel-execution.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"parallel-execution",title:"Running Cucumber Tests in Parallel",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Cucumber with JUnit 5",permalink:"/docs/cucumber/cucumber-junit5"},next:{title:"Cucumber Configuration Reference",permalink:"/docs/cucumber/configuration-reference"}},s=[{value:"Overview",id:"overview",children:[]},{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Basic Configuration",id:"basic-configuration",children:[{value:"Step 1: Add Required Dependencies",id:"step-1-add-required-dependencies",children:[]},{value:"Step 2: Use the Parallel Reporter",id:"step-2-use-the-parallel-reporter",children:[]},{value:"Step 3: Configure Parallel Execution",id:"step-3-configure-parallel-execution",children:[]}]},{value:"Execution Strategies",id:"execution-strategies",children:[{value:"Dynamic Strategy (Recommended)",id:"dynamic-strategy-recommended",children:[]},{value:"Fixed Strategy",id:"fixed-strategy",children:[]},{value:"Custom Strategy",id:"custom-strategy",children:[]}]},{value:"Complete Configuration Example",id:"complete-configuration-example",children:[]},{value:"Thread Safety Considerations",id:"thread-safety-considerations",children:[{value:"WebDriver Management",id:"webdriver-management",children:[]},{value:"Step Definition Thread Safety",id:"step-definition-thread-safety",children:[]},{value:"Using Scenario Context",id:"using-scenario-context",children:[]}]},{value:"Controlling Parallelism",id:"controlling-parallelism",children:[{value:"Parallel at Different Levels",id:"parallel-at-different-levels",children:[]},{value:"Limiting Concurrent Scenarios",id:"limiting-concurrent-scenarios",children:[]}]},{value:"Parallel Execution with Tags",id:"parallel-execution-with-tags",children:[]},{value:"Maven/Gradle Configuration",id:"mavengradle-configuration",children:[{value:"Maven Surefire Plugin",id:"maven-surefire-plugin",children:[]},{value:"Gradle Configuration",id:"gradle-configuration",children:[]}]},{value:"Performance Optimization",id:"performance-optimization",children:[{value:"1. Choose the Right Strategy",id:"1-choose-the-right-strategy",children:[]},{value:"2. Optimize Scenario Design",id:"2-optimize-scenario-design",children:[]},{value:"3. Resource Management",id:"3-resource-management",children:[]},{value:"4. Monitor Resource Usage",id:"4-monitor-resource-usage",children:[]}]},{value:"Debugging Parallel Tests",id:"debugging-parallel-tests",children:[{value:"Disable Parallel Execution Temporarily",id:"disable-parallel-execution-temporarily",children:[]},{value:"Run with Fewer Threads",id:"run-with-fewer-threads",children:[]},{value:"Verbose Logging",id:"verbose-logging",children:[]}]},{value:"Common Issues and Solutions",id:"common-issues-and-solutions",children:[{value:"Issue 1: Flaky Tests",id:"issue-1-flaky-tests",children:[]},{value:"Issue 2: Resource Exhaustion",id:"issue-2-resource-exhaustion",children:[]},{value:"Issue 3: Report Generation Issues",id:"issue-3-report-generation-issues",children:[]},{value:"Issue 4: CI/CD Pipeline Failures",id:"issue-4-cicd-pipeline-failures",children:[]}]},{value:"Best Practices",id:"best-practices",children:[{value:"1. Start Small",id:"1-start-small",children:[]},{value:"2. Use Tags Strategically",id:"2-use-tags-strategically",children:[]},{value:"3. Isolate Test Data",id:"3-isolate-test-data",children:[]},{value:"4. Monitor and Adjust",id:"4-monitor-and-adjust",children:[]},{value:"5. Document Thread Safety",id:"5-document-thread-safety",children:[]}]},{value:"Measuring Performance Improvements",id:"measuring-performance-improvements",children:[{value:"Before Parallel Execution",id:"before-parallel-execution",children:[]},{value:"After Parallel Execution (8 threads)",id:"after-parallel-execution-8-threads",children:[]}]},{value:"Next Steps",id:"next-steps",children:[]},{value:"Additional Resources",id:"additional-resources",children:[]}],u={toc:s};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"running-cucumber-scenarios-in-parallel"},"Running Cucumber Scenarios in Parallel"),(0,r.kt)("p",null,"Running Cucumber scenarios in parallel can dramatically reduce test execution time. This guide explains how to configure and optimize parallel execution with Serenity BDD and JUnit 5."),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"Parallel execution in Cucumber with JUnit 5 is powered by the Cucumber JUnit Platform Engine, which integrates with JUnit 5's parallel test execution capabilities. When properly configured, multiple scenarios can run simultaneously, taking advantage of multi-core processors."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Serenity BDD 3.6.0 or higher"),(0,r.kt)("li",{parentName:"ul"},"JUnit 5"),(0,r.kt)("li",{parentName:"ul"},"Cucumber JUnit Platform Engine"),(0,r.kt)("li",{parentName:"ul"},"Thread-safe test code")),(0,r.kt)("h2",{id:"basic-configuration"},"Basic Configuration"),(0,r.kt)("h3",{id:"step-1-add-required-dependencies"},"Step 1: Add Required Dependencies"),(0,r.kt)("p",null,"Ensure you have the Cucumber JUnit Platform Engine dependency:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>io.cucumber</groupId>\n    <artifactId>cucumber-junit-platform-engine</artifactId>\n    <version>7.33.0</version>\n    <scope>test</scope>\n</dependency>\n<dependency>\n    <groupId>org.junit.platform</groupId>\n    <artifactId>junit-platform-suite</artifactId>\n    <version>5.10.0</version>\n    <scope>test</scope>\n</dependency>\n")),(0,r.kt)("h3",{id:"step-2-use-the-parallel-reporter"},"Step 2: Use the Parallel Reporter"),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Important")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"You ",(0,r.kt)("strong",{parentName:"p"},"must")," use ",(0,r.kt)("inlineCode",{parentName:"p"},"SerenityReporterParallel")," for parallel execution, not ",(0,r.kt)("inlineCode",{parentName:"p"},"SerenityReporter"),"."))),(0,r.kt)("p",null,"Update your test suite to use the parallel-safe reporter:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'import org.junit.platform.suite.api.*;\nimport static io.cucumber.junit.platform.engine.Constants.PLUGIN_PROPERTY_NAME;\n\n@Suite\n@IncludeEngines("cucumber")\n@SelectClasspathResource("features")\n@ConfigurationParameter(\n    key = PLUGIN_PROPERTY_NAME,\n    value = "net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel"\n)\nclass CucumberTestSuite {\n}\n')),(0,r.kt)("h3",{id:"step-3-configure-parallel-execution"},"Step 3: Configure Parallel Execution"),(0,r.kt)("p",null,"Create or update ",(0,r.kt)("inlineCode",{parentName:"p"},"junit-platform.properties")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"src/test/resources"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"# Enable parallel execution\ncucumber.execution.parallel.enabled=true\n\n# Use dynamic strategy (recommended)\ncucumber.execution.parallel.config.strategy=dynamic\n\n# Configure the Serenity reporter\ncucumber.plugin=net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel\n")),(0,r.kt)("h2",{id:"execution-strategies"},"Execution Strategies"),(0,r.kt)("h3",{id:"dynamic-strategy-recommended"},"Dynamic Strategy (Recommended)"),(0,r.kt)("p",null,"The dynamic strategy automatically determines the number of threads based on available processors:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"cucumber.execution.parallel.config.strategy=dynamic\ncucumber.execution.parallel.config.dynamic.factor=1.0\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"factor")," is a multiplier for the number of available processors:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"1.0")," = same number of threads as processors (recommended)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"0.5")," = half the number of processors"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"2.0")," = double the number of processors")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example:")," On a machine with 8 cores:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Factor ",(0,r.kt)("inlineCode",{parentName:"li"},"1.0")," = 8 threads"),(0,r.kt)("li",{parentName:"ul"},"Factor ",(0,r.kt)("inlineCode",{parentName:"li"},"0.5")," = 4 threads"),(0,r.kt)("li",{parentName:"ul"},"Factor ",(0,r.kt)("inlineCode",{parentName:"li"},"2.0")," = 16 threads")),(0,r.kt)("h3",{id:"fixed-strategy"},"Fixed Strategy"),(0,r.kt)("p",null,"The fixed strategy uses a specified number of threads:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"cucumber.execution.parallel.config.strategy=fixed\ncucumber.execution.parallel.config.fixed.parallelism=4\ncucumber.execution.parallel.config.fixed.max-pool-size=4\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"parallelism")," - Number of concurrent threads"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"max-pool-size")," - Maximum size of the thread pool")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Use when:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You need consistent, predictable thread counts"),(0,r.kt)("li",{parentName:"ul"},"Running on shared CI/CD infrastructure"),(0,r.kt)("li",{parentName:"ul"},"Debugging parallel execution issues")),(0,r.kt)("h3",{id:"custom-strategy"},"Custom Strategy"),(0,r.kt)("p",null,"For advanced use cases, you can implement a custom strategy:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"cucumber.execution.parallel.config.strategy=custom\ncucumber.execution.parallel.config.custom.class=com.example.MyParallelStrategy\n")),(0,r.kt)("h2",{id:"complete-configuration-example"},"Complete Configuration Example"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"junit-platform.properties:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"# Parallel execution\ncucumber.execution.parallel.enabled=true\ncucumber.execution.parallel.config.strategy=dynamic\ncucumber.execution.parallel.config.dynamic.factor=1.0\n\n# Serenity reporter\ncucumber.plugin=net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel\n\n# Optional: Control execution order\ncucumber.execution.order=random\n\n# Optional: Fail fast\ncucumber.execution.fail-fast=false\n")),(0,r.kt)("h2",{id:"thread-safety-considerations"},"Thread Safety Considerations"),(0,r.kt)("h3",{id:"webdriver-management"},"WebDriver Management"),(0,r.kt)("p",null,"Serenity's ",(0,r.kt)("inlineCode",{parentName:"p"},"@Managed")," WebDriver is automatically thread-safe when using parallel execution:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@ExtendWith(SerenityJUnit5Extension.class)\nclass WebDriverSteps {\n\n    @Managed\n    WebDriver driver;  // Thread-safe - each thread gets its own instance\n\n    @Given("I am on the home page")\n    public void navigateToHomePage() {\n        driver.get("https://example.com");\n    }\n}\n')),(0,r.kt)("p",null,"Each thread will have its own isolated WebDriver instance."),(0,r.kt)("h3",{id:"step-definition-thread-safety"},"Step Definition Thread Safety"),(0,r.kt)("p",null,"Step definition classes must be thread-safe:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u2705 Thread-Safe (Recommended):")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class LoginSteps {\n\n    @Given("{actor} is on the login page")\n    public void navigateToLoginPage(Actor actor) {\n        actor.attemptsTo(\n            Navigate.to("/login")\n        );\n    }\n}\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u274c Not Thread-Safe:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class LoginSteps {\n\n    private String username;  // Shared state - NOT thread-safe!\n\n    @Given("user enters username {string}")\n    public void enterUsername(String user) {\n        this.username = user;  // Race condition!\n    }\n}\n')),(0,r.kt)("h3",{id:"using-scenario-context"},"Using Scenario Context"),(0,r.kt)("p",null,"For sharing data within a scenario, use Cucumber's scenario context:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'public class CheckoutSteps {\n\n    private final ScenarioContext context;\n\n    public CheckoutSteps(ScenarioContext context) {\n        this.context = context;  // Injected per scenario\n    }\n\n    @When("I add item to cart")\n    public void addItem() {\n        context.put("cartTotal", calculateTotal());\n    }\n\n    @Then("cart total should be correct")\n    public void verifyTotal() {\n        Double total = context.get("cartTotal", Double.class);\n        // Verify total\n    }\n}\n')),(0,r.kt)("h2",{id:"controlling-parallelism"},"Controlling Parallelism"),(0,r.kt)("h3",{id:"parallel-at-different-levels"},"Parallel at Different Levels"),(0,r.kt)("p",null,"You can control what runs in parallel:"),(0,r.kt)("h4",{id:"scenario-level-parallelism-default"},"Scenario-Level Parallelism (Default)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"# Each scenario runs in its own thread\ncucumber.execution.parallel.enabled=true\n")),(0,r.kt)("h4",{id:"feature-level-parallelism"},"Feature-Level Parallelism"),(0,r.kt)("p",null,"To run features in parallel but scenarios within a feature sequentially, you need to configure JUnit Platform:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"junit-platform.properties:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"junit.jupiter.execution.parallel.enabled=true\njunit.jupiter.execution.parallel.mode.default=concurrent\njunit.jupiter.execution.parallel.mode.classes.default=concurrent\n")),(0,r.kt)("h3",{id:"limiting-concurrent-scenarios"},"Limiting Concurrent Scenarios"),(0,r.kt)("p",null,"Control the maximum number of concurrent scenarios:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"cucumber.execution.parallel.config.strategy=fixed\ncucumber.execution.parallel.config.fixed.parallelism=4\n")),(0,r.kt)("h2",{id:"parallel-execution-with-tags"},"Parallel Execution with Tags"),(0,r.kt)("p",null,"You can run specific tags in parallel:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Suite\n@IncludeEngines("cucumber")\n@SelectClasspathResource("features")\n@ConfigurationParameter(\n    key = PLUGIN_PROPERTY_NAME,\n    value = "net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel"\n)\n@ConfigurationParameter(\n    key = FILTER_TAGS_PROPERTY_NAME,\n    value = "@parallel"\n)\nclass ParallelTestSuite {\n}\n')),(0,r.kt)("p",null,"Or exclude scenarios from parallel execution:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"cucumber.filter.tags=not @serial\n")),(0,r.kt)("h2",{id:"mavengradle-configuration"},"Maven/Gradle Configuration"),(0,r.kt)("h3",{id:"maven-surefire-plugin"},"Maven Surefire Plugin"),(0,r.kt)("p",null,"Configure Maven to support parallel execution:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<build>\n    <plugins>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-surefire-plugin</artifactId>\n            <version>3.0.0</version>\n            <configuration>\n                <skip>true</skip>\n            </configuration>\n        </plugin>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-failsafe-plugin</artifactId>\n            <version>3.0.0</version>\n            <configuration>\n                <includes>\n                    <include>**/*TestSuite.java</include>\n                </includes>\n                <systemPropertyVariables>\n                    <webdriver.driver>${webdriver.driver}</webdriver.driver>\n                </systemPropertyVariables>\n            </configuration>\n            <executions>\n                <execution>\n                    <goals>\n                        <goal>integration-test</goal>\n                        <goal>verify</goal>\n                    </goals>\n                </execution>\n            </executions>\n        </plugin>\n    </plugins>\n</build>\n")),(0,r.kt)("h3",{id:"gradle-configuration"},"Gradle Configuration"),(0,r.kt)("p",null,"For Gradle:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-groovy"},"test {\n    useJUnitPlatform()\n    maxParallelForks = Runtime.runtime.availableProcessors()\n\n    systemProperty 'cucumber.execution.parallel.enabled', 'true'\n    systemProperty 'cucumber.execution.parallel.config.strategy', 'dynamic'\n}\n")),(0,r.kt)("h2",{id:"performance-optimization"},"Performance Optimization"),(0,r.kt)("h3",{id:"1-choose-the-right-strategy"},"1. Choose the Right Strategy"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Small test suites")," (<50 scenarios): Fixed strategy with 2-4 threads"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Medium test suites")," (50-200 scenarios): Dynamic strategy with factor 1.0"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Large test suites")," (>200 scenarios): Dynamic strategy with factor 0.75-1.0")),(0,r.kt)("h3",{id:"2-optimize-scenario-design"},"2. Optimize Scenario Design"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Keep scenarios independent")," - No shared state between scenarios"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Minimize setup time")," - Use efficient Before hooks"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Avoid sleeps")," - Use explicit waits instead"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Clean up resources")," - Use After hooks properly")),(0,r.kt)("h3",{id:"3-resource-management"},"3. Resource Management"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"# Control thread pool size to avoid resource exhaustion\ncucumber.execution.parallel.config.fixed.max-pool-size=8\n\n# Avoid too many concurrent browsers\nwebdriver.pool.max=10\n")),(0,r.kt)("h3",{id:"4-monitor-resource-usage"},"4. Monitor Resource Usage"),(0,r.kt)("p",null,"Watch for:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"CPU utilization (should be near 100% for optimal performance)"),(0,r.kt)("li",{parentName:"ul"},"Memory consumption (each browser instance uses RAM)"),(0,r.kt)("li",{parentName:"ul"},"Network bandwidth (for remote WebDriver)"),(0,r.kt)("li",{parentName:"ul"},"Database connections (if applicable)")),(0,r.kt)("h2",{id:"debugging-parallel-tests"},"Debugging Parallel Tests"),(0,r.kt)("h3",{id:"disable-parallel-execution-temporarily"},"Disable Parallel Execution Temporarily"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"cucumber.execution.parallel.enabled=false\n")),(0,r.kt)("p",null,"Or via command line:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mvn clean verify -Dcucumber.execution.parallel.enabled=false\n")),(0,r.kt)("h3",{id:"run-with-fewer-threads"},"Run with Fewer Threads"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"cucumber.execution.parallel.config.strategy=fixed\ncucumber.execution.parallel.config.fixed.parallelism=1\n")),(0,r.kt)("h3",{id:"verbose-logging"},"Verbose Logging"),(0,r.kt)("p",null,"Enable detailed logging to diagnose issues:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"# Log file location\ncucumber.plugin=pretty,html:target/cucumber-reports.html,json:target/cucumber.json\n\n# Serenity logging\nserenity.verbose=true\nserenity.logging=VERBOSE\n")),(0,r.kt)("h2",{id:"common-issues-and-solutions"},"Common Issues and Solutions"),(0,r.kt)("h3",{id:"issue-1-flaky-tests"},"Issue 1: Flaky Tests"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Symptoms:")," Tests pass when run individually but fail when run in parallel"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Solutions:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Check for shared state in step definitions"),(0,r.kt)("li",{parentName:"ul"},"Ensure WebDriver instances are properly isolated"),(0,r.kt)("li",{parentName:"ul"},"Review test data - avoid shared test data"),(0,r.kt)("li",{parentName:"ul"},"Add proper synchronization/waits")),(0,r.kt)("h3",{id:"issue-2-resource-exhaustion"},"Issue 2: Resource Exhaustion"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Symptoms:")," Tests slow down or crash after some time"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Solutions:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Reduce parallelism: lower the thread count"),(0,r.kt)("li",{parentName:"ul"},"Increase heap size: ",(0,r.kt)("inlineCode",{parentName:"li"},"-Xmx4g")),(0,r.kt)("li",{parentName:"ul"},"Check for resource leaks (unclosed connections, browser instances)"),(0,r.kt)("li",{parentName:"ul"},"Monitor system resources")),(0,r.kt)("h3",{id:"issue-3-report-generation-issues"},"Issue 3: Report Generation Issues"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Symptoms:")," Serenity reports are incomplete or corrupted"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Solutions:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Ensure you're using ",(0,r.kt)("inlineCode",{parentName:"li"},"SerenityReporterParallel")),(0,r.kt)("li",{parentName:"ul"},"Check Serenity version (3.6.0+)"),(0,r.kt)("li",{parentName:"ul"},"Verify maven-failsafe-plugin is configured correctly"),(0,r.kt)("li",{parentName:"ul"},"Check for filesystem race conditions")),(0,r.kt)("h3",{id:"issue-4-cicd-pipeline-failures"},"Issue 4: CI/CD Pipeline Failures"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Symptoms:")," Tests fail only in CI but pass locally"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Solutions:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Match thread count to CI environment capabilities"),(0,r.kt)("li",{parentName:"ul"},"Use fixed strategy for consistent behavior"),(0,r.kt)("li",{parentName:"ul"},"Increase timeouts for slower CI environments"),(0,r.kt)("li",{parentName:"ul"},"Check CI resource limits")),(0,r.kt)("h2",{id:"best-practices"},"Best Practices"),(0,r.kt)("h3",{id:"1-start-small"},"1. Start Small"),(0,r.kt)("p",null,"Begin with 2-4 threads and gradually increase:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"cucumber.execution.parallel.config.strategy=fixed\ncucumber.execution.parallel.config.fixed.parallelism=2\n")),(0,r.kt)("h3",{id:"2-use-tags-strategically"},"2. Use Tags Strategically"),(0,r.kt)("p",null,"Mark scenarios that can't run in parallel:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-gherkin"},"@serial @database-migration\nScenario: Migrate database schema\n  # This scenario must run alone\n")),(0,r.kt)("p",null,"Then exclude them:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-properties"},"cucumber.filter.tags=not @serial\n")),(0,r.kt)("h3",{id:"3-isolate-test-data"},"3. Isolate Test Data"),(0,r.kt)("p",null,"Each scenario should create and clean up its own test data:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Before\npublic void setupTestData() {\n    // Create unique test data for this scenario\n    String uniqueId = UUID.randomUUID().toString();\n    context.put("testUserId", "user_" + uniqueId);\n}\n\n@After\npublic void cleanupTestData() {\n    // Clean up this scenario\'s test data\n    String userId = context.get("testUserId", String.class);\n    deleteUser(userId);\n}\n')),(0,r.kt)("h3",{id:"4-monitor-and-adjust"},"4. Monitor and Adjust"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Monitor test execution times"),(0,r.kt)("li",{parentName:"ul"},"Track flaky test rates"),(0,r.kt)("li",{parentName:"ul"},"Adjust parallelism based on metrics"),(0,r.kt)("li",{parentName:"ul"},"Review resource utilization")),(0,r.kt)("h3",{id:"5-document-thread-safety"},"5. Document Thread Safety"),(0,r.kt)("p",null,"Add comments for non-thread-safe scenarios:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-gherkin"},"# @serial - Modifies global application state\n@serial @admin\nScenario: Update application settings\n  Given I am logged in as admin\n  When I change the default language to Spanish\n  Then all users should see Spanish interface\n")),(0,r.kt)("h2",{id:"measuring-performance-improvements"},"Measuring Performance Improvements"),(0,r.kt)("h3",{id:"before-parallel-execution"},"Before Parallel Execution"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Total scenarios: 100\nExecution time: 50 minutes\n")),(0,r.kt)("h3",{id:"after-parallel-execution-8-threads"},"After Parallel Execution (8 threads)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Total scenarios: 100\nExecution time: 8 minutes\nSpeedup: 6.25x\nEfficiency: 78%\n")),(0,r.kt)("p",null,"Calculate your speedup:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Speedup = Sequential Time / Parallel Time\nEfficiency = Speedup / Number of Threads\n")),(0,r.kt)("h2",{id:"next-steps"},"Next Steps"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Review the main ",(0,r.kt)("a",{parentName:"li",href:"cucumber-junit5"},"Cucumber with JUnit 5")," guide"),(0,r.kt)("li",{parentName:"ul"},"Check the ",(0,r.kt)("a",{parentName:"li",href:"configuration-reference"},"Configuration Reference")," for all available options"),(0,r.kt)("li",{parentName:"ul"},"See ",(0,r.kt)("a",{parentName:"li",href:"cucumber-junit5#best-practices"},"Best Practices")," for writing maintainable tests"),(0,r.kt)("li",{parentName:"ul"},"Explore ",(0,r.kt)("a",{parentName:"li",href:"/docs/reporting/the_serenity_reports"},"Serenity Reports")," documentation")),(0,r.kt)("h2",{id:"additional-resources"},"Additional Resources"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/cucumber/cucumber-jvm/tree/main/cucumber-junit-platform-engine#parallel-execution"},"Cucumber Parallel Execution Docs")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-parallel-execution"},"JUnit 5 Parallel Execution")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://serenity-bdd.info"},"Serenity BDD Performance Tips"))))}c.isMDXComponent=!0}}]);
"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[7070],{2344(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/report-home-d26d2a22a877e74f29fa84ed09c95064.png"},3918(e,t,n){n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"tutorials/first_test","title":"Your First Web Test","description":"In this tutorial you\'ll write your very first Serenity BDD test, using JUnit 5 and Selenium. We\'ll start out simple, then explore some of the features that make Serenity BDD rather special. So let\'s get started!","source":"@site/docs/tutorials/first_test.md","sourceDirName":"tutorials","slug":"/tutorials/first_test","permalink":"/docs/tutorials/first_test","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/tutorials/first_test.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","next":{"title":"Your First Screenplay Scenario","permalink":"/docs/tutorials/screenplay"}}');var i=n(4848),r=n(8453);const a={sidebar_position:1},o="Your First Web Test",c={},d=[{value:"Pre-requisites",id:"pre-requisites",level:2},{value:"Creating Your First Serenity BDD Project",id:"creating-your-first-serenity-bdd-project",level:2},{value:"Writing a simple test",id:"writing-a-simple-test",level:2},{value:"Basic test structure",id:"basic-test-structure",level:3},{value:"Setting up WebDriver",id:"setting-up-webdriver",level:3},{value:"Creating Action Classes",id:"creating-action-classes",level:3},{value:"Creating a Page Component class",id:"creating-a-page-component-class",level:3},{value:"Using Action Classes and Page Components In The Test",id:"using-action-classes-and-page-components-in-the-test",level:3},{value:"Reporting the steps",id:"reporting-the-steps",level:3},{value:"Reporting on assertions",id:"reporting-on-assertions",level:3},{value:"Generating the reports",id:"generating-the-reports",level:2},{value:"Conclusion",id:"conclusion",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"your-first-web-test",children:"Your First Web Test"})}),"\n",(0,i.jsx)(t.p,{children:"In this tutorial you'll write your very first Serenity BDD test, using JUnit 5 and Selenium. We'll start out simple, then explore some of the features that make Serenity BDD rather special. So let's get started!"}),"\n",(0,i.jsx)(t.h2,{id:"pre-requisites",children:"Pre-requisites"}),"\n",(0,i.jsx)(t.p,{children:"To run this tutorial, you will need a few things installed on your machine:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Java"}),": Serenity BDD is a Java library, so you'll need a recent JDK installed. JDK 1.8 or higher should be fine."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"A Java IDE"}),": You'll also need a Java Development Environment such as IntelliJ or Eclipse (and a working knowledge of Java)."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Git"}),": We'll be using a starter project on Github, and the sample code for this project lives on Github too, so I'll be assuming you have a basic understanding of Git."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"creating-your-first-serenity-bdd-project",children:"Creating Your First Serenity BDD Project"}),"\n",(0,i.jsxs)(t.p,{children:["We will be using the ",(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.a,{href:"https://github.com/serenity-bdd/serenity-junit-screenplay-starter",children:"Serenity BDD with JUnit"})})," template project to get a simple project up and running quickly."]}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsx)(t.p,{children:"We'll be using a fairly conventional test automation style in this tutorial, using action classes and page objects. In the next tutorial, we'll see how to do all this using the Screenplay Pattern."})}),"\n",(0,i.jsxs)(t.p,{children:["Go to the ",(0,i.jsx)(t.a,{href:"https://github.com/serenity-bdd/serenity-junit-pageobjects-starter",children:"project template page on Github"})," and click on ",(0,i.jsx)(t.a,{href:"https://github.com/serenity-bdd/serenity-junit-pageobjects-starter/generate",children:"Use This Template"}),"."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(4647).A+"",width:"2998",height:"1422"})}),"\n",(0,i.jsx)(t.h2,{id:"writing-a-simple-test",children:"Writing a simple test"}),"\n",(0,i.jsxs)(t.p,{children:['Let\'s start with a simple test. We will run a simple search for the keyword "Cucumber" on the DuckDuckGo search engine:\n',(0,i.jsx)(t.img,{src:n(6090).A+"",width:"2096",height:"1358"})]}),"\n",(0,i.jsx)(t.p,{children:"First of all, we create a new package for our DuckDuckGo tests. The Serenity test reports mirror the directory structure we use to organize our tests, so it helps to make the structure and the package name meaningful."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(9468).A+"",width:"772",height:"468"})}),"\n",(0,i.jsx)(t.h3,{id:"basic-test-structure",children:"Basic test structure"}),"\n",(0,i.jsx)(t.p,{children:'Now we create a new test class (let\'s call it "WhenSearchingByKeyword"), and an empty test case (we can call it "theKeywordShouldAppearInTheResultsSidebar").'}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"package starter.duckduckgo;\n\nimport net.serenitybdd.junit5.SerenityJUnit5Extension;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\n\n@ExtendWith(SerenityJUnit5Extension.class)              \nclass WhenSearchingByKeyword {              \n\n    @Test\n    void theKeywordShouldAppearInTheResultsSidebar() {\n\n    }\n}\n"})}),"\n",(0,i.jsxs)(t.admonition,{type:"caution",children:[(0,i.jsx)(t.p,{children:"There are a few things to note here:"}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["The ",(0,i.jsx)(t.code,{children:"@ExtendWith"})," annotation tells JUnit that this test uses Serenity - don't forget this annotation or your test won't be recognised as a Serenity test"]}),"\n",(0,i.jsxs)(t.li,{children:["The ",(0,i.jsx)(t.code,{children:"@Test"})," annotation uses the ",(0,i.jsx)(t.code,{children:"org.junit.jupiter.api.Test"})," class, from JUnit 5. Be careful not to get this mixed up with the JUnit 4 annotation of the same name (",(0,i.jsx)(t.code,{children:"org.junit.Test"}),"), otherwise your test won't run."]}),"\n"]})]}),"\n",(0,i.jsx)(t.h3,{id:"setting-up-webdriver",children:"Setting up WebDriver"}),"\n",(0,i.jsxs)(t.p,{children:["Next, let's add the code Serenity will need to work. First of all, since this will be a web test, we need to add a WebDriver field. Serenity manages the WebDriver lifecycle for us (it even downloads the WebDriver binaries for us), so all we need to do is to declare a ",(0,i.jsx)(t.code,{children:"WebDriver"})," field, and annotate it with the ",(0,i.jsx)(t.code,{children:"@Managed"})," annotation. In the code below, I've also added the ",(0,i.jsx)(t.code,{children:"driver"})," attribute and the ",(0,i.jsx)(t.code,{children:"options"})," attribute to ensure the browser opens in headless mode:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'import net.serenitybdd.annotations.Managed;\nimport net.serenitybdd.junit5.SerenityJUnit5Extension;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.openqa.selenium.WebDriver;\n\n@ExtendWith(SerenityJUnit5Extension.class)\nclass WhenSearchingByKeyword {\n\n    @Managed(driver = "chrome", options = "headless")\n    WebDriver driver;\n\n    @Test\n    void theKeywordShouldAppearInTheResultsSidebar() {\n\n    }\n}\n'})}),"\n",(0,i.jsx)(t.p,{children:"This driver will be used throughout the test, including in any page objects or action classes (more on these later) that are created as part of the test."}),"\n",(0,i.jsx)(t.h3,{id:"creating-action-classes",children:"Creating Action Classes"}),"\n",(0,i.jsxs)(t.p,{children:["We could simply start using this ",(0,i.jsx)(t.code,{children:"driver"})," variable to interact with the browser. That would work fine. But keeping your test code well organised and well structured is essential to keeping maintenance costs down. And Serenity BDD gives us a number of ways to do this."]}),"\n",(0,i.jsxs)(t.p,{children:["One of the simplest ways to do this is called ",(0,i.jsx)(t.em,{children:"Action Classes"}),". Action Classes are small, reusable classes with methods that encapsulate key user actions."]}),"\n",(0,i.jsx)(t.p,{children:"For example, we could break this test down into three steps:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Navigate to the DuckDuckGo home page"}),"\n",(0,i.jsx)(t.li,{children:'Search by the keyword "Cucumber"'}),"\n",(0,i.jsx)(t.li,{children:'Check that the main topic heading on the result page is "Cucumber"'}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["Let's start with the first action: navigating to the DuckDuckGo home page. Create a new class called ",(0,i.jsx)(t.code,{children:"NavigateActions"})," in the same package and add the following:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'import net.serenitybdd.core.steps.UIInteractions;\n\npublic class NavigateActions extends UIInteractions {\n    public void toTheDuckDuckGoSearchPage() {\n        openUrl("https://duckduckgo.com/");\n    }\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["A UI Interactions class is a class containing methods that can interact with a web page. When we extend the ",(0,i.jsx)(t.code,{children:"UIInteractions"})," class, Serenity will automatically inject the ",(0,i.jsx)(t.code,{children:"@Managed"})," WebDriver instance we saw earlier whenever we use an instance of this class in our tests."]}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"UIInteractions"})," class gives you access to a range of methods that you can use to interact with the page. For example, as we can see in this example, the ",(0,i.jsx)(t.code,{children:"openUrl()"})," method is used to open a page at a specified URL."]}),"\n",(0,i.jsxs)(t.p,{children:["Next, let's move on to the second action, where we need to search for a specific term. Create a new class called ",(0,i.jsx)(t.code,{children:"SearchActions"}),", and make it extend the ",(0,i.jsx)(t.code,{children:"UIInteractions"})," class."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:"import net.serenitybdd.core.steps.UIInteractions;\n\npublic class SearchActions extends UIInteractions {}\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Now add a method to search by a given keyword, called ",(0,i.jsx)(t.code,{children:"byKeyword"}),", which will do the actual search. Inside this method, we can use the ",(0,i.jsx)(t.code,{children:"$"})," notation to search for elements on the page using CSS or XPath locators, like this:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'import net.serenitybdd.core.steps.UIInteractions;\nimport org.openqa.selenium.Keys;\n\npublic class SearchActions extends UIInteractions {\n    public void byKeyword(String keyword) {\n      $("#searchbox_input").sendKeys(keyword, Keys.ENTER);\n    }\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"creating-a-page-component-class",children:"Creating a Page Component class"}),"\n",(0,i.jsx)(t.p,{children:"The third step of our test is to read the title of the search results sidebar and check that it is the value we expect."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(5527).A+"",width:"2742",height:"1956"})}),"\n",(0,i.jsxs)(t.p,{children:["We can do this with a Page Component object. Page Components (which extend the ",(0,i.jsx)(t.code,{children:"PageComponent"})," class) are similar to action classes, but focus on reading information from a particular part of a web page, rather than modeling user interactions."]}),"\n",(0,i.jsxs)(t.p,{children:["To read the title of the sidebar on this screen, create a new class called ",(0,i.jsx)(t.code,{children:"SearchResultSidebar"})," with the following code:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'import net.serenitybdd.core.pages.PageComponent;\n\npublic class SearchResultSidebar extends PageComponent {\n    public String heading() {\n        return $("[data-testid=about] h2").getText();\n    }\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["Once again we are locating the element using the ",(0,i.jsx)(t.code,{children:"$"})," operator and a CSS selector, and returning the text value of the element we find."]}),"\n",(0,i.jsx)(t.h3,{id:"using-action-classes-and-page-components-in-the-test",children:"Using Action Classes and Page Components In The Test"}),"\n",(0,i.jsx)(t.p,{children:"Now that we've created action classes for the first two steps, let's add them to our test. Serenity recognises action classes and page component objects and instantiates them automatically with the @Managed WebDriver instance, so we simply need to declare them as class fields, and then use them in our test."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'import net.serenitybdd.junit5.SerenityJUnit5Extension;\nimport org.junit.jupiter.api.Test;\nimport net.thucydides.core.annotations.Managed;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.openqa.selenium.WebDriver;\nimport static org.assertj.core.api.Assertions.assertThat;\n\n@ExtendWith(SerenityJUnit5Extension.class)\nclass WhenSearchingByKeyword {\n\n    @Managed(driver = "chrome", options = "headless")\n    WebDriver driver;\n\n    NavigateActions navigate;\n    SearchActions search;\n    SearchResultSidebar searchResultSidebar;\n\n    @Test\n    void theKeywordShouldAppearInTheResultsSidebar() {\n        navigate.toTheDuckDuckGoSearchPage();\n        search.byKeyword("Cucumber");\n        assertThat(searchResultSidebar.heading()).isEqualTo("Cucumber");\n    }\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"reporting-the-steps",children:"Reporting the steps"}),"\n",(0,i.jsxs)(t.p,{children:["We now have a working test. You can run it from within your IDE, or by running ",(0,i.jsx)(t.code,{children:"mvn verify"})," on the command line."]}),"\n",(0,i.jsx)(t.p,{children:"However, there is one more step we can do. Serenity BDD is a living documentation tool, which means it aims to document not only what tests are executed, but how they are executed."}),"\n",(0,i.jsxs)(t.p,{children:["We can control how Serenity reports each method in a ",(0,i.jsx)(t.code,{children:"UIInteractions"})," class using the ",(0,i.jsx)(t.code,{children:"@Step"})," annotation. When you place a ",(0,i.jsx)(t.code,{children:"@Step"})," annotation on a ",(0,i.jsx)(t.code,{children:"UIInteractions"})," method, this method will appear in the Serenity reports whenever it is called."]}),"\n",(0,i.jsxs)(t.p,{children:["Let's see how it works. Update the ",(0,i.jsx)(t.code,{children:"NaviagateActions"})," and ",(0,i.jsx)(t.code,{children:"SearchActions"})," classes to include the ",(0,i.jsx)(t.code,{children:"@Step"})," annotations like this:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'import net.serenitybdd.annotations.Step;\nimport net.serenitybdd.core.steps.UIInteractions;\n\npublic class NavigateActions extends UIInteractions {\n    @Step("Navigate to the home page")\n    public void toTheDuckDuckGoSearchPage() {\n        openUrl("https://duckduckgo.com/");\n    }\n}\n'})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'import net.serenitybdd.annotations.Step;\nimport net.serenitybdd.core.steps.UIInteractions;\nimport org.openqa.selenium.Keys;\n\npublic class SearchActions extends UIInteractions {\n\n    @Step("Search for \'{0}\'")\n    public void byKeyword(String keyword) {\n      $("#searchbox_input").sendKeys(keyword, Keys.ENTER);\n    }\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"reporting-on-assertions",children:"Reporting on assertions"}),"\n",(0,i.jsxs)(t.p,{children:["The last step of our test is an assertion. We can report on the assertion by wrapping it in the ",(0,i.jsx)(t.code,{children:"Serenity.reportThat()"})," method, using a Lambda expression for the actual assertion:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'@Test\nvoid theKeywordShouldAppearInTheResultsSidebar() {\n    navigate.toTheDuckDuckGoSearchPage();\n    search.byKeyword("Cucumber");\n\n    Serenity.reportThat("The keyword should appear in the sidebar heading",\n            () -> assertThat(searchResultSidebar.heading()).isEqualTo("Cucumber")\n    );\n}\n'})}),"\n",(0,i.jsx)(t.h2,{id:"generating-the-reports",children:"Generating the reports"}),"\n",(0,i.jsxs)(t.p,{children:["Let's run the tests and see what the reports look like. Delete the ",(0,i.jsx)(t.code,{children:"wikipedia"})," package (we don't need the sample tests anymore), and run ",(0,i.jsx)(t.code,{children:"mvn verify"})," from the command line. You should see an output along the following lines:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"$ mvn verify\n...\n[INFO]  SERENITY TESTS: SUCCESS\n[INFO] -----------------------------------------\n[INFO] | Tests executed         | 1\n[INFO] | Tests passed           | 1\n[INFO] | Tests failed           | 0\n[INFO] | Tests with errors      | 0\n[INFO] | Tests compromised      | 0\n[INFO] | Tests aborted          | 0\n[INFO] | Tests pending          | 0\n[INFO] | Tests ignored/skipped  | 0\n[INFO] ------------------------ | --------------\n[INFO] | Total Duration         | 5s 626ms\n[INFO] | Fastest test took      | 5s 626ms\n[INFO] | Slowest test took      | 5s 626ms\n[INFO] -----------------------------------------\n[INFO]\n[INFO] SERENITY REPORTS\n[INFO]   - Full Report: file:///Users/john/Projects/Serenity/serenity-new-documentation/serenity-users-guide/sample-code/docs-starter-tutorial/target/site/serenity/index.html\n[INFO]\n[INFO] --- maven-failsafe-plugin:3.0.0-M5:verify (default) @ serenity-junit-starter ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  21.729 s\n[INFO] Finished at: 2021-11-30T11:27:29Z\n[INFO] ------------------------------------------------------------------------\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Now open the ",(0,i.jsx)(t.code,{children:"index.html"})," file in the ",(0,i.jsx)(t.code,{children:"target/site/serenity"})," directory. You should see something like this:"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(2344).A+"",width:"2408",height:"2468"})}),"\n",(0,i.jsx)(t.p,{children:'Click on the "Test Results" tab and open the "When Searching By Keyword" scenario. This should show you the step-by-step details of your test:'}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(5167).A+"",width:"2428",height:"1460"})}),"\n",(0,i.jsx)(t.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsx)(t.p,{children:"Congratulation! You've written your first Serenity BDD test, and seen a little of what Serenity BDD can do!"})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},4647(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/junit-template-d226d0f6d4fea808234dcf35eb4289e8.png"},5167(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/report-keyword-search-17f54186a2a9191515c18ac7d2a5a23c.png"},5527(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/result-module-title-0470327ec1b80975ef1f0e81aae5b74c.png"},6090(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/duckduckgo-a3952f7d3a0d8c6c69d13048464bd77f.png"},8453(e,t,n){n.d(t,{R:()=>a,x:()=>o});var s=n(6540);const i={},r=s.createContext(i);function a(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:t},e.children)}},9468(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/initial-directory-structure-5594717c5b01c98f370425231755bbc1.png"}}]);
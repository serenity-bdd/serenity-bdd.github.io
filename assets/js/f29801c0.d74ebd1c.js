"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[816],{1498(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"playwright/playwright_cucumber","title":"Cucumber Integration","description":"Cucumber provides a natural language syntax for writing behavior-driven tests. When combined with Serenity Playwright\'s Screenplay implementation, you get expressive BDD scenarios that drive reliable browser automation.","source":"@site/docs/playwright/cucumber-integration.md","sourceDirName":"playwright","slug":"/playwright/playwright_cucumber","permalink":"/docs/playwright/playwright_cucumber","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/playwright/cucumber-integration.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"id":"playwright_cucumber","title":"Cucumber Integration","sidebar_position":9},"sidebar":"tutorialSidebar","previous":{"title":"Tutorial: Screenplay with TodoMVC","permalink":"/docs/playwright/playwright_screenplay_tutorial"},"next":{"title":"Integration Testing in Spring","permalink":"/docs/spring/integration_testing_spring"}}');var i=t(4848),o=t(8453);const s={id:"playwright_cucumber",title:"Cucumber Integration",sidebar_position:9},a="Cucumber Integration with Playwright Screenplay",c={},l=[{value:"Project Setup",id:"project-setup",level:2},{value:"Maven Dependencies",id:"maven-dependencies",level:3},{value:"Install Playwright Browsers",id:"install-playwright-browsers",level:3},{value:"Project Structure",id:"project-structure",level:2},{value:"Step 1: Create the Test Runner",id:"step-1-create-the-test-runner",level:2},{value:"Step 2: Create Playwright Hooks",id:"step-2-create-playwright-hooks",level:2},{value:"Understanding the Hooks",id:"understanding-the-hooks",level:3},{value:"Step 3: Write Feature Files",id:"step-3-write-feature-files",level:2},{value:"Step 4: Create Step Definitions",id:"step-4-create-step-definitions",level:2},{value:"Key Patterns in Step Definitions",id:"key-patterns-in-step-definitions",level:3},{value:"Step 5: Create Screenplay Tasks",id:"step-5-create-screenplay-tasks",level:2},{value:"Step 6: Create Screenplay Questions",id:"step-6-create-screenplay-questions",level:2},{value:"Step 7: Define UI Targets",id:"step-7-define-ui-targets",level:2},{value:"Running the Tests",id:"running-the-tests",level:2},{value:"Run All Cucumber Tests",id:"run-all-cucumber-tests",level:3},{value:"Run Tests with Specific Tags",id:"run-tests-with-specific-tags",level:3},{value:"Run a Single Scenario",id:"run-a-single-scenario",level:3},{value:"View Reports",id:"view-reports",level:3},{value:"Configuration",id:"configuration",level:2},{value:"serenity.properties",id:"serenityproperties",level:3},{value:"cucumber.properties",id:"cucumberproperties",level:3},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Custom Browser Configuration",id:"custom-browser-configuration",level:3},{value:"Multiple Actors",id:"multiple-actors",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"State Leakage Between Scenarios",id:"state-leakage-between-scenarios",level:3},{value:"Element Not Found",id:"element-not-found",level:3},{value:"Screenshots Not Captured",id:"screenshots-not-captured",level:3},{value:"Example Repository",id:"example-repository",level:2},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"cucumber-integration-with-playwright-screenplay",children:"Cucumber Integration with Playwright Screenplay"})}),"\n",(0,i.jsx)(n.p,{children:"Cucumber provides a natural language syntax for writing behavior-driven tests. When combined with Serenity Playwright's Screenplay implementation, you get expressive BDD scenarios that drive reliable browser automation."}),"\n",(0,i.jsx)(n.p,{children:"This guide shows you how to integrate Cucumber with Serenity Playwright using the Screenplay pattern."}),"\n",(0,i.jsx)(n.h2,{id:"project-setup",children:"Project Setup"}),"\n",(0,i.jsx)(n.h3,{id:"maven-dependencies",children:"Maven Dependencies"}),"\n",(0,i.jsxs)(n.p,{children:["Add the following dependencies to your ",(0,i.jsx)(n.code,{children:"pom.xml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<properties>\n    <serenity.version>5.1.1</serenity.version>\n    <playwright.version>1.58.0</playwright.version>\n    <cucumber.version>7.34.2</cucumber.version>\n    <junit.version>5.11.4</junit.version>\n</properties>\n\n<dependencyManagement>\n    <dependencies>\n        \x3c!-- Use BOMs for version management --\x3e\n        <dependency>\n            <groupId>org.junit</groupId>\n            <artifactId>junit-bom</artifactId>\n            <version>${junit.version}</version>\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n        <dependency>\n            <groupId>io.cucumber</groupId>\n            <artifactId>cucumber-bom</artifactId>\n            <version>${cucumber.version}</version>\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n    </dependencies>\n</dependencyManagement>\n\n<dependencies>\n    \x3c!-- Serenity Screenplay with Playwright --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-screenplay-playwright</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Serenity Cucumber Integration --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-cucumber</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Cucumber (versions managed by cucumber-bom) --\x3e\n    <dependency>\n        <groupId>io.cucumber</groupId>\n        <artifactId>cucumber-java</artifactId>\n        <scope>test</scope>\n    </dependency>\n\n    <dependency>\n        <groupId>io.cucumber</groupId>\n        <artifactId>cucumber-junit-platform-engine</artifactId>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- JUnit Platform Suite --\x3e\n    <dependency>\n        <groupId>org.junit.platform</groupId>\n        <artifactId>junit-platform-suite</artifactId>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Serenity Ensure for assertions --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-ensure</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n</dependencies>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"install-playwright-browsers",children:"Install Playwright Browsers"}),"\n",(0,i.jsx)(n.p,{children:"Before running tests, install the Playwright browsers:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'mvn exec:java -e -D exec.mainClass=com.microsoft.playwright.CLI -D exec.args="install"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"project-structure",children:"Project Structure"}),"\n",(0,i.jsx)(n.p,{children:"A typical project structure looks like this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"src/test/\n\u251c\u2500\u2500 java/\n\u2502   \u2514\u2500\u2500 yourpackage/\n\u2502       \u251c\u2500\u2500 cucumber/\n\u2502       \u2502   \u251c\u2500\u2500 CucumberTestSuite.java      # Test runner\n\u2502       \u2502   \u251c\u2500\u2500 PlaywrightHooks.java        # Cucumber hooks\n\u2502       \u2502   \u2514\u2500\u2500 StepDefinitions.java        # Step definitions\n\u2502       \u2514\u2500\u2500 screenplay/\n\u2502           \u251c\u2500\u2500 tasks/                       # Reusable tasks\n\u2502           \u2502   \u251c\u2500\u2500 OpenTheApplication.java\n\u2502           \u2502   \u2514\u2500\u2500 AddATodoItem.java\n\u2502           \u251c\u2500\u2500 questions/                   # Reusable questions\n\u2502           \u2502   \u2514\u2500\u2500 TheVisibleTodos.java\n\u2502           \u2514\u2500\u2500 ui/                          # Target definitions\n\u2502               \u2514\u2500\u2500 TodoList.java\n\u2514\u2500\u2500 resources/\n    \u251c\u2500\u2500 features/\n    \u2502   \u2514\u2500\u2500 managing_todos.feature          # Feature files\n    \u2514\u2500\u2500 serenity.properties                  # Configuration\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-1-create-the-test-runner",children:"Step 1: Create the Test Runner"}),"\n",(0,i.jsx)(n.p,{children:"The test runner configures Cucumber to work with Serenity:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'package yourpackage.cucumber;\n\nimport org.junit.platform.suite.api.*;\nimport static io.cucumber.junit.platform.engine.Constants.*;\n\n@Suite\n@IncludeEngines("cucumber")\n@SelectPackages("yourpackage.cucumber")\n@ConfigurationParameter(key = PLUGIN_PROPERTY_NAME,\n    value = "net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel,pretty")\n@ConfigurationParameter(key = GLUE_PROPERTY_NAME,\n    value = "yourpackage.cucumber,net.serenitybdd.cucumber.actors")\n@ConfigurationParameter(key = FEATURES_PROPERTY_NAME,\n    value = "src/test/resources/features")\npublic class CucumberTestSuite {\n}\n'})}),"\n",(0,i.jsx)(n.admonition,{title:"Glue Path Configuration",type:"important",children:(0,i.jsxs)(n.p,{children:["Always include ",(0,i.jsx)(n.code,{children:"net.serenitybdd.cucumber.actors"})," in your glue path. This registers Serenity's ",(0,i.jsx)(n.code,{children:"StageDirector"})," which automatically calls ",(0,i.jsx)(n.code,{children:"OnStage.drawTheCurtain()"})," after each scenario to clean up browser resources."]})}),"\n",(0,i.jsx)(n.h2,{id:"step-2-create-playwright-hooks",children:"Step 2: Create Playwright Hooks"}),"\n",(0,i.jsx)(n.p,{children:"The hooks class sets up the Playwright stage before each scenario:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'package yourpackage.cucumber;\n\nimport io.cucumber.java.Before;\nimport io.cucumber.java.ParameterType;\nimport io.cucumber.java.Scenario;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.actors.OnStage;\nimport net.serenitybdd.screenplay.playwright.actors.PlaywrightCast;\n\npublic class PlaywrightHooks {\n\n    /**\n     * Set up the Playwright stage before each scenario.\n     * Order 0 ensures this runs first among all @Before hooks.\n     */\n    @Before(order = 0)\n    public void setTheStage(Scenario scenario) {\n        OnStage.setTheStage(new PlaywrightCast());\n    }\n\n    /**\n     * Define the {actor} parameter type for Cucumber steps.\n     * This allows steps like "Given Toby is on the application"\n     * to automatically resolve "Toby" to an Actor instance.\n     */\n    @ParameterType(".*")\n    public Actor actor(String actorName) {\n        return OnStage.theActorCalled(actorName);\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"understanding-the-hooks",children:"Understanding the Hooks"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"@Before(order = 0)"})}),": The ",(0,i.jsx)(n.code,{children:"order = 0"})," ensures the stage is set up before any other hooks run. This is important if you have other ",(0,i.jsx)(n.code,{children:"@Before"})," hooks that depend on actors."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'@ParameterType(".*")'})}),": This creates a custom parameter type that converts actor names in feature files to ",(0,i.jsx)(n.code,{children:"Actor"})," instances. The pattern ",(0,i.jsx)(n.code,{children:".*"})," matches any string."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Automatic Cleanup"}),": You don't need an ",(0,i.jsx)(n.code,{children:"@After"})," hook for cleanup. The ",(0,i.jsx)(n.code,{children:"StageDirector"})," (included via the glue path) automatically handles cleanup by calling ",(0,i.jsx)(n.code,{children:"OnStage.drawTheCurtain()"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"step-3-write-feature-files",children:"Step 3: Write Feature Files"}),"\n",(0,i.jsx)(n.p,{children:"Feature files describe behavior in Gherkin syntax:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gherkin",children:'# src/test/resources/features/managing_todos.feature\n@playwright\nFeature: Managing Todo Items\n  As a busy person\n  I want to manage my todo list\n  So that I can keep track of what I need to do\n\n  Background:\n    Given Toby is on the TodoMVC application\n\n  Scenario: Adding a single todo item\n    When Toby adds a todo item called "Buy milk"\n    Then the todo list should contain "Buy milk"\n    And the remaining item count should be 1\n\n  Scenario: Adding multiple todo items\n    When Toby adds the following todo items:\n      | Buy milk     |\n      | Walk the dog |\n      | Do laundry   |\n    Then the todo list should contain:\n      | Buy milk     |\n      | Walk the dog |\n      | Do laundry   |\n    And the remaining item count should be 3\n\n  Scenario: Completing a todo item\n    Given Toby has added the following todo items:\n      | Buy milk     |\n      | Walk the dog |\n    When Toby completes the todo item "Walk the dog"\n    Then the remaining item count should be 1\n\n  Scenario: Filtering to show only active todos\n    Given Toby has added the following todo items:\n      | Buy milk     |\n      | Walk the dog |\n    And Toby has completed the todo item "Walk the dog"\n    When Toby filters to show "Active" todos\n    Then the visible todo list should contain:\n      | Buy milk |\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-4-create-step-definitions",children:"Step 4: Create Step Definitions"}),"\n",(0,i.jsx)(n.p,{children:"Step definitions bridge feature files to Screenplay tasks:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'package yourpackage.cucumber;\n\nimport io.cucumber.java.en.*;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.actors.OnStage;\nimport net.serenitybdd.screenplay.ensure.Ensure;\nimport yourpackage.screenplay.tasks.*;\nimport yourpackage.screenplay.questions.*;\n\nimport java.util.List;\n\npublic class TodoStepDefinitions {\n\n    @Given("{actor} is on the TodoMVC application")\n    public void actorIsOnTheTodoMvcApplication(Actor actor) {\n        actor.attemptsTo(\n            OpenTheApplication.onTheTodoMvcHomePage()\n        );\n    }\n\n    @When("{actor} adds a todo item called {string}")\n    public void actorAddsTodoItemCalled(Actor actor, String todoItem) {\n        actor.attemptsTo(\n            AddATodoItem.called(todoItem)\n        );\n    }\n\n    @When("{actor} adds the following todo items:")\n    public void actorAddsTheFollowingTodoItems(Actor actor, List<String> todoItems) {\n        for (String item : todoItems) {\n            actor.attemptsTo(\n                AddATodoItem.called(item)\n            );\n        }\n    }\n\n    @Given("{actor} has added the following todo items:")\n    public void actorHasAddedTheFollowingTodoItems(Actor actor, List<String> todoItems) {\n        actorIsOnTheTodoMvcApplication(actor);\n        actorAddsTheFollowingTodoItems(actor, todoItems);\n    }\n\n    @When("{actor} completes the todo item {string}")\n    public void actorCompletesTheTodoItem(Actor actor, String todoItem) {\n        actor.attemptsTo(\n            Complete.todoItem(todoItem)\n        );\n    }\n\n    @Given("{actor} has completed the todo item {string}")\n    public void actorHasCompletedTheTodoItem(Actor actor, String todoItem) {\n        actorCompletesTheTodoItem(actor, todoItem);\n    }\n\n    @When("{actor} filters to show {string} todos")\n    public void actorFiltersToShow(Actor actor, String filterType) {\n        actor.attemptsTo(\n            FilterTodos.toShow(filterType)\n        );\n    }\n\n    @Then("the todo list should contain {string}")\n    public void theTodoListShouldContain(String expectedItem) {\n        Actor actor = OnStage.theActorInTheSpotlight();\n        actor.attemptsTo(\n            Ensure.that(TheVisibleTodos.displayed()).contains(expectedItem)\n        );\n    }\n\n    @Then("the todo list should contain:")\n    public void theTodoListShouldContainItems(List<String> expectedItems) {\n        Actor actor = OnStage.theActorInTheSpotlight();\n        actor.attemptsTo(\n            Ensure.that(TheVisibleTodos.displayed())\n                  .containsExactlyElementsFrom(expectedItems)\n        );\n    }\n\n    @Then("the visible todo list should contain:")\n    public void theVisibleTodoListShouldContain(List<String> expectedItems) {\n        Actor actor = OnStage.theActorInTheSpotlight();\n        actor.attemptsTo(\n            Ensure.that(TheVisibleTodos.displayed())\n                  .containsExactlyElementsFrom(expectedItems)\n        );\n    }\n\n    @Then("the remaining item count should be {int}")\n    public void theRemainingItemCountShouldBe(int expectedCount) {\n        Actor actor = OnStage.theActorInTheSpotlight();\n        actor.attemptsTo(\n            Ensure.that(TheRemainingCount.value()).isEqualTo(expectedCount)\n        );\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"key-patterns-in-step-definitions",children:"Key Patterns in Step Definitions"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Actor Parameter"}),": The ",(0,i.jsx)(n.code,{children:"{actor}"})," parameter automatically resolves to an Actor instance thanks to the ",(0,i.jsx)(n.code,{children:"@ParameterType"})," definition in the hooks."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Background Steps"}),": Steps like ",(0,i.jsx)(n.code,{children:"actorHasAddedTheFollowingTodoItems"})," compose multiple actions, allowing ",(0,i.jsx)(n.code,{children:"Given"})," steps to set up complex preconditions."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"The Actor in the Spotlight"}),": For ",(0,i.jsx)(n.code,{children:"Then"})," steps that don't receive an actor parameter, use ",(0,i.jsx)(n.code,{children:"OnStage.theActorInTheSpotlight()"})," to get the last actor who performed an action."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Data Tables"}),": Cucumber data tables map directly to ",(0,i.jsx)(n.code,{children:"List<String>"})," for single-column tables."]}),"\n",(0,i.jsx)(n.h2,{id:"step-5-create-screenplay-tasks",children:"Step 5: Create Screenplay Tasks"}),"\n",(0,i.jsx)(n.p,{children:"Tasks encapsulate business-level actions:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'package yourpackage.screenplay.tasks;\n\nimport net.serenitybdd.annotations.Step;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport net.serenitybdd.screenplay.playwright.interactions.Open;\n\npublic class OpenTheApplication implements Task {\n\n    private static final String TODO_MVC_URL = "https://todomvc.com/examples/react/dist/";\n\n    @Override\n    @Step("{0} opens the TodoMVC application")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Open.url(TODO_MVC_URL)\n        );\n\n        // Clear localStorage to ensure a clean slate\n        // (TodoMVC persists todos in localStorage)\n        var page = BrowseTheWebWithPlaywright.as(actor).getCurrentPage();\n        page.evaluate("() => localStorage.clear()");\n        page.reload();\n    }\n\n    public static OpenTheApplication onTheTodoMvcHomePage() {\n        return new OpenTheApplication();\n    }\n}\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'package yourpackage.screenplay.tasks;\n\nimport net.serenitybdd.annotations.Step;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.playwright.interactions.*;\nimport yourpackage.screenplay.ui.TodoList;\n\npublic class AddATodoItem implements Task {\n\n    private final String itemName;\n\n    public AddATodoItem(String itemName) {\n        this.itemName = itemName;\n    }\n\n    @Override\n    @Step("{0} adds a todo item called \'#itemName\'")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Enter.theValue(itemName).into(TodoList.NEW_TODO_INPUT),\n            Press.keys("Enter")\n        );\n    }\n\n    public static AddATodoItem called(String itemName) {\n        return new AddATodoItem(itemName);\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-6-create-screenplay-questions",children:"Step 6: Create Screenplay Questions"}),"\n",(0,i.jsx)(n.p,{children:"Questions query the application state:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'package yourpackage.screenplay.questions;\n\nimport net.serenitybdd.annotations.Step;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport yourpackage.screenplay.ui.TodoList;\n\nimport java.util.Collection;\n\npublic class TheVisibleTodos implements Question<Collection<String>> {\n\n    @Override\n    @Step("{0} checks the visible todo items")\n    public Collection<String> answeredBy(Actor actor) {\n        var page = BrowseTheWebWithPlaywright.as(actor).getCurrentPage();\n        return page.locator(TodoList.TODO_ITEMS.asSelector())\n                   .allTextContents();\n    }\n\n    public static TheVisibleTodos displayed() {\n        return new TheVisibleTodos();\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"step-7-define-ui-targets",children:"Step 7: Define UI Targets"}),"\n",(0,i.jsx)(n.p,{children:"Targets define how to locate elements:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'package yourpackage.screenplay.ui;\n\nimport net.serenitybdd.screenplay.playwright.Target;\n\npublic class TodoList {\n    public static final Target NEW_TODO_INPUT =\n        Target.the("new todo input").locatedBy(".new-todo");\n\n    public static final Target TODO_ITEMS =\n        Target.the("todo items").locatedBy(".todo-list li label");\n\n    public static final Target TODO_COUNT =\n        Target.the("todo count").locatedBy(".todo-count");\n\n    public static final Target TOGGLE_ALL =\n        Target.the("toggle all checkbox").locatedBy(".toggle-all");\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"running-the-tests",children:"Running the Tests"}),"\n",(0,i.jsx)(n.h3,{id:"run-all-cucumber-tests",children:"Run All Cucumber Tests"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mvn clean verify\n"})}),"\n",(0,i.jsx)(n.h3,{id:"run-tests-with-specific-tags",children:"Run Tests with Specific Tags"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'mvn clean verify -Dcucumber.filter.tags="@playwright"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"run-a-single-scenario",children:"Run a Single Scenario"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'mvn clean verify -Dcucumber.filter.name="Adding a single todo item"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"view-reports",children:"View Reports"}),"\n",(0,i.jsx)(n.p,{children:"After running tests, open the Serenity report:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"target/site/serenity/index.html\n"})}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"serenityproperties",children:"serenity.properties"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"# Browser settings\nplaywright.browsertype=chromium\nplaywright.headless=true\n\n# Screenshot settings\nserenity.take.screenshots=FOR_FAILURES\n\n# Report settings\nserenity.project.name=My TodoMVC Tests\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cucumberproperties",children:"cucumber.properties"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"# Cucumber settings\ncucumber.publish.quiet=true\n"})}),"\n",(0,i.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"custom-browser-configuration",children:"Custom Browser Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Configure ",(0,i.jsx)(n.code,{children:"PlaywrightCast"})," with custom options:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Before(order = 0)\npublic void setTheStage(Scenario scenario) {\n    BrowserType.LaunchOptions options = new BrowserType.LaunchOptions()\n        .setHeadless(false)\n        .setSlowMo(100);  // Slow down for debugging\n\n    OnStage.setTheStage(\n        new PlaywrightCast()\n            .withLaunchOptions(options)\n            .withBrowserType("firefox")\n    );\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"multiple-actors",children:"Multiple Actors"}),"\n",(0,i.jsx)(n.p,{children:"Scenarios can involve multiple actors:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-gherkin",children:'Scenario: Collaborative editing\n  Given Alice has added a todo item called "Shared task"\n  When Bob views the todo list\n  Then Bob should see "Shared task" in the list\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@When("{actor} views the todo list")\npublic void actorViewsTheTodoList(Actor actor) {\n    actor.attemptsTo(\n        OpenTheApplication.onTheTodoMvcHomePage()\n    );\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Each actor gets their own browser instance automatically through ",(0,i.jsx)(n.code,{children:"PlaywrightCast"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"state-leakage-between-scenarios",children:"State Leakage Between Scenarios"}),"\n",(0,i.jsx)(n.p,{children:"If tests interfere with each other:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Verify ",(0,i.jsx)(n.code,{children:"net.serenitybdd.cucumber.actors"})," is in your glue path"]}),"\n",(0,i.jsx)(n.li,{children:"Clear application state (like localStorage) in your navigation task"}),"\n",(0,i.jsxs)(n.li,{children:["Ensure ",(0,i.jsx)(n.code,{children:"@Before(order = 0)"})," is set on your stage setup hook"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"element-not-found",children:"Element Not Found"}),"\n",(0,i.jsx)(n.p,{children:"If elements aren't being found:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Use Playwright's built-in auto-waiting (it's enabled by default)"}),"\n",(0,i.jsx)(n.li,{children:"Check your selectors using browser DevTools"}),"\n",(0,i.jsxs)(n.li,{children:["Consider using Playwright's more robust selectors like ",(0,i.jsx)(n.code,{children:"text="}),", ",(0,i.jsx)(n.code,{children:"role="}),", etc."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"screenshots-not-captured",children:"Screenshots Not Captured"}),"\n",(0,i.jsxs)(n.p,{children:["Set screenshot mode in ",(0,i.jsx)(n.code,{children:"serenity.properties"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"serenity.take.screenshots=FOR_EACH_ACTION\n"})}),"\n",(0,i.jsx)(n.h2,{id:"example-repository",children:"Example Repository"}),"\n",(0,i.jsxs)(n.p,{children:["A complete working example is available in the ",(0,i.jsx)(n.a,{href:"https://github.com/serenity-bdd/serenity-playwright-todomvc-demo",children:"serenity-playwright-todomvc-demo"})," repository."]}),"\n",(0,i.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"playwright_screenplay",children:"Screenplay Pattern with Playwright"})," - Core Screenplay concepts"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"playwright_screenplay_tutorial",children:"Tutorial: Screenplay with TodoMVC"})," - Building a test suite from scratch"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/cucumber/configuration-reference",children:"Cucumber Configuration Reference"})," - All Cucumber options"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/cucumber/parallel-execution",children:"Parallel Execution"})," - Running tests in parallel"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>s,x:()=>a});var r=t(6540);const i={},o=r.createContext(i);function s(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);
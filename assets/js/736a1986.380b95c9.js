"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[9418],{8453(e,n,i){i.d(n,{R:()=>a,x:()=>t});var r=i(6540);const l={},s=r.createContext(l);function a(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),r.createElement(s.Provider,{value:n},e.children)}},9458(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"cucumber/parallel-execution","title":"Running Cucumber Tests in Parallel","description":"Running Cucumber scenarios in parallel can dramatically reduce test execution time. This guide explains how to configure and optimize parallel execution with Serenity BDD and JUnit 5.","source":"@site/docs/cucumber/parallel-execution.md","sourceDirName":"cucumber","slug":"/cucumber/parallel-execution","permalink":"/docs/cucumber/parallel-execution","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/cucumber/parallel-execution.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"parallel-execution","title":"Running Cucumber Tests in Parallel","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Cucumber with JUnit 5","permalink":"/docs/cucumber/cucumber-junit5"},"next":{"title":"Advanced Cucumber Patterns","permalink":"/docs/cucumber/advanced-patterns"}}');var l=i(4848),s=i(8453);const a={id:"parallel-execution",title:"Running Cucumber Tests in Parallel",sidebar_position:2},t="Running Cucumber Scenarios in Parallel",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Basic Configuration",id:"basic-configuration",level:2},{value:"Step 1: Add Required Dependencies",id:"step-1-add-required-dependencies",level:3},{value:"Step 2: Use the Parallel Reporter",id:"step-2-use-the-parallel-reporter",level:3},{value:"Step 3: Configure Parallel Execution",id:"step-3-configure-parallel-execution",level:3},{value:"Execution Strategies",id:"execution-strategies",level:2},{value:"Dynamic Strategy (Recommended)",id:"dynamic-strategy-recommended",level:3},{value:"Fixed Strategy",id:"fixed-strategy",level:3},{value:"Custom Strategy",id:"custom-strategy",level:3},{value:"Complete Configuration Example",id:"complete-configuration-example",level:2},{value:"Thread Safety Considerations",id:"thread-safety-considerations",level:2},{value:"WebDriver Management",id:"webdriver-management",level:3},{value:"Step Definition Thread Safety",id:"step-definition-thread-safety",level:3},{value:"Using Scenario Context",id:"using-scenario-context",level:3},{value:"Controlling Parallelism",id:"controlling-parallelism",level:2},{value:"Parallel at Different Levels",id:"parallel-at-different-levels",level:3},{value:"Scenario-Level Parallelism (Default)",id:"scenario-level-parallelism-default",level:4},{value:"Feature-Level Parallelism",id:"feature-level-parallelism",level:4},{value:"Limiting Concurrent Scenarios",id:"limiting-concurrent-scenarios",level:3},{value:"Parallel Execution with Tags",id:"parallel-execution-with-tags",level:2},{value:"Maven/Gradle Configuration",id:"mavengradle-configuration",level:2},{value:"Maven Surefire Plugin",id:"maven-surefire-plugin",level:3},{value:"Gradle Configuration",id:"gradle-configuration",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"1. Choose the Right Strategy",id:"1-choose-the-right-strategy",level:3},{value:"2. Optimize Scenario Design",id:"2-optimize-scenario-design",level:3},{value:"3. Resource Management",id:"3-resource-management",level:3},{value:"4. Monitor Resource Usage",id:"4-monitor-resource-usage",level:3},{value:"Debugging Parallel Tests",id:"debugging-parallel-tests",level:2},{value:"Disable Parallel Execution Temporarily",id:"disable-parallel-execution-temporarily",level:3},{value:"Run with Fewer Threads",id:"run-with-fewer-threads",level:3},{value:"Verbose Logging",id:"verbose-logging",level:3},{value:"Common Issues and Solutions",id:"common-issues-and-solutions",level:2},{value:"Issue 1: Flaky Tests",id:"issue-1-flaky-tests",level:3},{value:"Issue 2: Resource Exhaustion",id:"issue-2-resource-exhaustion",level:3},{value:"Issue 3: Report Generation Issues",id:"issue-3-report-generation-issues",level:3},{value:"Issue 4: CI/CD Pipeline Failures",id:"issue-4-cicd-pipeline-failures",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Start Small",id:"1-start-small",level:3},{value:"2. Use Tags Strategically",id:"2-use-tags-strategically",level:3},{value:"3. Isolate Test Data",id:"3-isolate-test-data",level:3},{value:"4. Monitor and Adjust",id:"4-monitor-and-adjust",level:3},{value:"5. Document Thread Safety",id:"5-document-thread-safety",level:3},{value:"Measuring Performance Improvements",id:"measuring-performance-improvements",level:2},{value:"Before Parallel Execution",id:"before-parallel-execution",level:3},{value:"After Parallel Execution (8 threads)",id:"after-parallel-execution-8-threads",level:3},{value:"Next Steps",id:"next-steps",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"running-cucumber-scenarios-in-parallel",children:"Running Cucumber Scenarios in Parallel"})}),"\n",(0,l.jsx)(n.p,{children:"Running Cucumber scenarios in parallel can dramatically reduce test execution time. This guide explains how to configure and optimize parallel execution with Serenity BDD and JUnit 5."}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.p,{children:"Parallel execution in Cucumber with JUnit 5 is powered by the Cucumber JUnit Platform Engine, which integrates with JUnit 5's parallel test execution capabilities. When properly configured, multiple scenarios can run simultaneously, taking advantage of multi-core processors."}),"\n",(0,l.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Serenity BDD 3.6.0 or higher"}),"\n",(0,l.jsx)(n.li,{children:"JUnit 5"}),"\n",(0,l.jsx)(n.li,{children:"Cucumber JUnit Platform Engine"}),"\n",(0,l.jsx)(n.li,{children:"Thread-safe test code"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,l.jsx)(n.h3,{id:"step-1-add-required-dependencies",children:"Step 1: Add Required Dependencies"}),"\n",(0,l.jsx)(n.p,{children:"Ensure you have the Cucumber JUnit Platform Engine dependency:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>io.cucumber</groupId>\n    <artifactId>cucumber-junit-platform-engine</artifactId>\n    <version>7.33.0</version>\n    <scope>test</scope>\n</dependency>\n<dependency>\n    <groupId>org.junit.platform</groupId>\n    <artifactId>junit-platform-suite</artifactId>\n    <version>5.10.0</version>\n    <scope>test</scope>\n</dependency>\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-2-use-the-parallel-reporter",children:"Step 2: Use the Parallel Reporter"}),"\n",(0,l.jsx)(n.admonition,{title:"Important",type:"warning",children:(0,l.jsxs)(n.p,{children:["You ",(0,l.jsx)(n.strong,{children:"must"})," use ",(0,l.jsx)(n.code,{children:"SerenityReporterParallel"})," for parallel execution, not ",(0,l.jsx)(n.code,{children:"SerenityReporter"}),"."]})}),"\n",(0,l.jsx)(n.p,{children:"Update your test suite to use the parallel-safe reporter:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'import org.junit.platform.suite.api.*;\nimport static io.cucumber.junit.platform.engine.Constants.PLUGIN_PROPERTY_NAME;\n\n@Suite\n@IncludeEngines("cucumber")\n@SelectClasspathResource("features")\n@ConfigurationParameter(\n    key = PLUGIN_PROPERTY_NAME,\n    value = "net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel"\n)\nclass CucumberTestSuite {\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"step-3-configure-parallel-execution",children:"Step 3: Configure Parallel Execution"}),"\n",(0,l.jsxs)(n.p,{children:["Create or update ",(0,l.jsx)(n.code,{children:"junit-platform.properties"})," in ",(0,l.jsx)(n.code,{children:"src/test/resources"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-properties",children:"# Enable parallel execution\ncucumber.execution.parallel.enabled=true\n\n# Use dynamic strategy (recommended)\ncucumber.execution.parallel.config.strategy=dynamic\n\n# Configure the Serenity reporter\ncucumber.plugin=net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel\n"})}),"\n",(0,l.jsx)(n.h2,{id:"execution-strategies",children:"Execution Strategies"}),"\n",(0,l.jsx)(n.h3,{id:"dynamic-strategy-recommended",children:"Dynamic Strategy (Recommended)"}),"\n",(0,l.jsx)(n.p,{children:"The dynamic strategy automatically determines the number of threads based on available processors:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-properties",children:"cucumber.execution.parallel.config.strategy=dynamic\ncucumber.execution.parallel.config.dynamic.factor=1.0\n"})}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"factor"})," is a multiplier for the number of available processors:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"1.0"})," = same number of threads as processors (recommended)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"0.5"})," = half the number of processors"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"2.0"})," = double the number of processors"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Example:"})," On a machine with 8 cores:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Factor ",(0,l.jsx)(n.code,{children:"1.0"})," = 8 threads"]}),"\n",(0,l.jsxs)(n.li,{children:["Factor ",(0,l.jsx)(n.code,{children:"0.5"})," = 4 threads"]}),"\n",(0,l.jsxs)(n.li,{children:["Factor ",(0,l.jsx)(n.code,{children:"2.0"})," = 16 threads"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"fixed-strategy",children:"Fixed Strategy"}),"\n",(0,l.jsx)(n.p,{children:"The fixed strategy uses a specified number of threads:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-properties",children:"cucumber.execution.parallel.config.strategy=fixed\ncucumber.execution.parallel.config.fixed.parallelism=4\ncucumber.execution.parallel.config.fixed.max-pool-size=4\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"parallelism"})," - Number of concurrent threads"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"max-pool-size"})," - Maximum size of the thread pool"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use when:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"You need consistent, predictable thread counts"}),"\n",(0,l.jsx)(n.li,{children:"Running on shared CI/CD infrastructure"}),"\n",(0,l.jsx)(n.li,{children:"Debugging parallel execution issues"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"custom-strategy",children:"Custom Strategy"}),"\n",(0,l.jsx)(n.p,{children:"For advanced use cases, you can implement a custom strategy:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-properties",children:"cucumber.execution.parallel.config.strategy=custom\ncucumber.execution.parallel.config.custom.class=com.example.MyParallelStrategy\n"})}),"\n",(0,l.jsx)(n.h2,{id:"complete-configuration-example",children:"Complete Configuration Example"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"junit-platform.properties:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-properties",children:"# Parallel execution\ncucumber.execution.parallel.enabled=true\ncucumber.execution.parallel.config.strategy=dynamic\ncucumber.execution.parallel.config.dynamic.factor=1.0\n\n# Serenity reporter\ncucumber.plugin=net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel\n\n# Optional: Control execution order\ncucumber.execution.order=random\n\n# Optional: Fail fast\ncucumber.execution.fail-fast=false\n"})}),"\n",(0,l.jsx)(n.h2,{id:"thread-safety-considerations",children:"Thread Safety Considerations"}),"\n",(0,l.jsx)(n.h3,{id:"webdriver-management",children:"WebDriver Management"}),"\n",(0,l.jsxs)(n.p,{children:["Serenity's ",(0,l.jsx)(n.code,{children:"@Managed"})," WebDriver is automatically thread-safe when using parallel execution:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\nclass WebDriverSteps {\n\n    @Managed\n    WebDriver driver;  // Thread-safe - each thread gets its own instance\n\n    @Given("I am on the home page")\n    public void navigateToHomePage() {\n        driver.get("https://example.com");\n    }\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:"Each thread will have its own isolated WebDriver instance."}),"\n",(0,l.jsx)(n.h3,{id:"step-definition-thread-safety",children:"Step Definition Thread Safety"}),"\n",(0,l.jsx)(n.p,{children:"Step definition classes must be thread-safe:"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u2705 Thread-Safe (Recommended):"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'public class LoginSteps {\n\n    @Given("{actor} is on the login page")\n    public void navigateToLoginPage(Actor actor) {\n        actor.attemptsTo(\n            Navigate.to("/login")\n        );\n    }\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"\u274c Not Thread-Safe:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'public class LoginSteps {\n\n    private String username;  // Shared state - NOT thread-safe!\n\n    @Given("user enters username {string}")\n    public void enterUsername(String user) {\n        this.username = user;  // Race condition!\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"using-scenario-context",children:"Using Scenario Context"}),"\n",(0,l.jsx)(n.p,{children:"For sharing data within a scenario, use Cucumber's scenario context:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'public class CheckoutSteps {\n\n    private final ScenarioContext context;\n\n    public CheckoutSteps(ScenarioContext context) {\n        this.context = context;  // Injected per scenario\n    }\n\n    @When("I add item to cart")\n    public void addItem() {\n        context.put("cartTotal", calculateTotal());\n    }\n\n    @Then("cart total should be correct")\n    public void verifyTotal() {\n        Double total = context.get("cartTotal", Double.class);\n        // Verify total\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"controlling-parallelism",children:"Controlling Parallelism"}),"\n",(0,l.jsx)(n.h3,{id:"parallel-at-different-levels",children:"Parallel at Different Levels"}),"\n",(0,l.jsx)(n.p,{children:"You can control what runs in parallel:"}),"\n",(0,l.jsx)(n.h4,{id:"scenario-level-parallelism-default",children:"Scenario-Level Parallelism (Default)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-properties",children:"# Each scenario runs in its own thread\ncucumber.execution.parallel.enabled=true\n"})}),"\n",(0,l.jsx)(n.h4,{id:"feature-level-parallelism",children:"Feature-Level Parallelism"}),"\n",(0,l.jsx)(n.p,{children:"To run features in parallel but scenarios within a feature sequentially, you need to configure JUnit Platform:"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"junit-platform.properties:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-properties",children:"junit.jupiter.execution.parallel.enabled=true\njunit.jupiter.execution.parallel.mode.default=concurrent\njunit.jupiter.execution.parallel.mode.classes.default=concurrent\n"})}),"\n",(0,l.jsx)(n.h3,{id:"limiting-concurrent-scenarios",children:"Limiting Concurrent Scenarios"}),"\n",(0,l.jsx)(n.p,{children:"Control the maximum number of concurrent scenarios:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-properties",children:"cucumber.execution.parallel.config.strategy=fixed\ncucumber.execution.parallel.config.fixed.parallelism=4\n"})}),"\n",(0,l.jsx)(n.h2,{id:"parallel-execution-with-tags",children:"Parallel Execution with Tags"}),"\n",(0,l.jsx)(n.p,{children:"You can run specific tags in parallel:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'@Suite\n@IncludeEngines("cucumber")\n@SelectClasspathResource("features")\n@ConfigurationParameter(\n    key = PLUGIN_PROPERTY_NAME,\n    value = "net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel"\n)\n@ConfigurationParameter(\n    key = FILTER_TAGS_PROPERTY_NAME,\n    value = "@parallel"\n)\nclass ParallelTestSuite {\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:"Or exclude scenarios from parallel execution:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-properties",children:"cucumber.filter.tags=not @serial\n"})}),"\n",(0,l.jsx)(n.h2,{id:"mavengradle-configuration",children:"Maven/Gradle Configuration"}),"\n",(0,l.jsx)(n.h3,{id:"maven-surefire-plugin",children:"Maven Surefire Plugin"}),"\n",(0,l.jsx)(n.p,{children:"Configure Maven to support parallel execution:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:"<build>\n    <plugins>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-surefire-plugin</artifactId>\n            <version>3.0.0</version>\n            <configuration>\n                <skip>true</skip>\n            </configuration>\n        </plugin>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-failsafe-plugin</artifactId>\n            <version>3.0.0</version>\n            <configuration>\n                <includes>\n                    <include>**/*TestSuite.java</include>\n                </includes>\n                <systemPropertyVariables>\n                    <webdriver.driver>${webdriver.driver}</webdriver.driver>\n                </systemPropertyVariables>\n            </configuration>\n            <executions>\n                <execution>\n                    <goals>\n                        <goal>integration-test</goal>\n                        <goal>verify</goal>\n                    </goals>\n                </execution>\n            </executions>\n        </plugin>\n    </plugins>\n</build>\n"})}),"\n",(0,l.jsx)(n.h3,{id:"gradle-configuration",children:"Gradle Configuration"}),"\n",(0,l.jsx)(n.p,{children:"For Gradle:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-groovy",children:"test {\n    useJUnitPlatform()\n    maxParallelForks = Runtime.runtime.availableProcessors()\n\n    systemProperty 'cucumber.execution.parallel.enabled', 'true'\n    systemProperty 'cucumber.execution.parallel.config.strategy', 'dynamic'\n}\n"})}),"\n",(0,l.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,l.jsx)(n.h3,{id:"1-choose-the-right-strategy",children:"1. Choose the Right Strategy"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Small test suites"})," (<50 scenarios): Fixed strategy with 2-4 threads"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Medium test suites"})," (50-200 scenarios): Dynamic strategy with factor 1.0"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Large test suites"})," (>200 scenarios): Dynamic strategy with factor 0.75-1.0"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"2-optimize-scenario-design",children:"2. Optimize Scenario Design"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Keep scenarios independent"})," - No shared state between scenarios"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Minimize setup time"})," - Use efficient Before hooks"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Avoid sleeps"})," - Use explicit waits instead"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Clean up resources"})," - Use After hooks properly"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"3-resource-management",children:"3. Resource Management"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-properties",children:"# Control thread pool size to avoid resource exhaustion\ncucumber.execution.parallel.config.fixed.max-pool-size=8\n\n# Avoid too many concurrent browsers\nwebdriver.pool.max=10\n"})}),"\n",(0,l.jsx)(n.h3,{id:"4-monitor-resource-usage",children:"4. Monitor Resource Usage"}),"\n",(0,l.jsx)(n.p,{children:"Watch for:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"CPU utilization (should be near 100% for optimal performance)"}),"\n",(0,l.jsx)(n.li,{children:"Memory consumption (each browser instance uses RAM)"}),"\n",(0,l.jsx)(n.li,{children:"Network bandwidth (for remote WebDriver)"}),"\n",(0,l.jsx)(n.li,{children:"Database connections (if applicable)"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"debugging-parallel-tests",children:"Debugging Parallel Tests"}),"\n",(0,l.jsx)(n.h3,{id:"disable-parallel-execution-temporarily",children:"Disable Parallel Execution Temporarily"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-properties",children:"cucumber.execution.parallel.enabled=false\n"})}),"\n",(0,l.jsx)(n.p,{children:"Or via command line:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"mvn clean verify -Dcucumber.execution.parallel.enabled=false\n"})}),"\n",(0,l.jsx)(n.h3,{id:"run-with-fewer-threads",children:"Run with Fewer Threads"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-properties",children:"cucumber.execution.parallel.config.strategy=fixed\ncucumber.execution.parallel.config.fixed.parallelism=1\n"})}),"\n",(0,l.jsx)(n.h3,{id:"verbose-logging",children:"Verbose Logging"}),"\n",(0,l.jsx)(n.p,{children:"Enable detailed logging to diagnose issues:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-properties",children:"# Log file location\ncucumber.plugin=pretty,html:target/cucumber-reports.html,json:target/cucumber.json\n\n# Serenity logging\nserenity.verbose=true\nserenity.logging=VERBOSE\n"})}),"\n",(0,l.jsx)(n.h2,{id:"common-issues-and-solutions",children:"Common Issues and Solutions"}),"\n",(0,l.jsx)(n.h3,{id:"issue-1-flaky-tests",children:"Issue 1: Flaky Tests"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Symptoms:"})," Tests pass when run individually but fail when run in parallel"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Check for shared state in step definitions"}),"\n",(0,l.jsx)(n.li,{children:"Ensure WebDriver instances are properly isolated"}),"\n",(0,l.jsx)(n.li,{children:"Review test data - avoid shared test data"}),"\n",(0,l.jsx)(n.li,{children:"Add proper synchronization/waits"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"issue-2-resource-exhaustion",children:"Issue 2: Resource Exhaustion"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Symptoms:"})," Tests slow down or crash after some time"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Reduce parallelism: lower the thread count"}),"\n",(0,l.jsxs)(n.li,{children:["Increase heap size: ",(0,l.jsx)(n.code,{children:"-Xmx4g"})]}),"\n",(0,l.jsx)(n.li,{children:"Check for resource leaks (unclosed connections, browser instances)"}),"\n",(0,l.jsx)(n.li,{children:"Monitor system resources"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"issue-3-report-generation-issues",children:"Issue 3: Report Generation Issues"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Symptoms:"})," Serenity reports are incomplete or corrupted"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Ensure you're using ",(0,l.jsx)(n.code,{children:"SerenityReporterParallel"})]}),"\n",(0,l.jsx)(n.li,{children:"Check Serenity version (3.6.0+)"}),"\n",(0,l.jsx)(n.li,{children:"Verify maven-failsafe-plugin is configured correctly"}),"\n",(0,l.jsx)(n.li,{children:"Check for filesystem race conditions"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"issue-4-cicd-pipeline-failures",children:"Issue 4: CI/CD Pipeline Failures"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Symptoms:"})," Tests fail only in CI but pass locally"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Match thread count to CI environment capabilities"}),"\n",(0,l.jsx)(n.li,{children:"Use fixed strategy for consistent behavior"}),"\n",(0,l.jsx)(n.li,{children:"Increase timeouts for slower CI environments"}),"\n",(0,l.jsx)(n.li,{children:"Check CI resource limits"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsx)(n.h3,{id:"1-start-small",children:"1. Start Small"}),"\n",(0,l.jsx)(n.p,{children:"Begin with 2-4 threads and gradually increase:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-properties",children:"cucumber.execution.parallel.config.strategy=fixed\ncucumber.execution.parallel.config.fixed.parallelism=2\n"})}),"\n",(0,l.jsx)(n.h3,{id:"2-use-tags-strategically",children:"2. Use Tags Strategically"}),"\n",(0,l.jsx)(n.p,{children:"Mark scenarios that can't run in parallel:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-gherkin",children:"@serial @database-migration\nScenario: Migrate database schema\n  # This scenario must run alone\n"})}),"\n",(0,l.jsx)(n.p,{children:"Then exclude them:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-properties",children:"cucumber.filter.tags=not @serial\n"})}),"\n",(0,l.jsx)(n.h3,{id:"3-isolate-test-data",children:"3. Isolate Test Data"}),"\n",(0,l.jsx)(n.p,{children:"Each scenario should create and clean up its own test data:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'@Before\npublic void setupTestData() {\n    // Create unique test data for this scenario\n    String uniqueId = UUID.randomUUID().toString();\n    context.put("testUserId", "user_" + uniqueId);\n}\n\n@After\npublic void cleanupTestData() {\n    // Clean up this scenario\'s test data\n    String userId = context.get("testUserId", String.class);\n    deleteUser(userId);\n}\n'})}),"\n",(0,l.jsx)(n.h3,{id:"4-monitor-and-adjust",children:"4. Monitor and Adjust"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Monitor test execution times"}),"\n",(0,l.jsx)(n.li,{children:"Track flaky test rates"}),"\n",(0,l.jsx)(n.li,{children:"Adjust parallelism based on metrics"}),"\n",(0,l.jsx)(n.li,{children:"Review resource utilization"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"5-document-thread-safety",children:"5. Document Thread Safety"}),"\n",(0,l.jsx)(n.p,{children:"Add comments for non-thread-safe scenarios:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-gherkin",children:"# @serial - Modifies global application state\n@serial @admin\nScenario: Update application settings\n  Given I am logged in as admin\n  When I change the default language to Spanish\n  Then all users should see Spanish interface\n"})}),"\n",(0,l.jsx)(n.h2,{id:"measuring-performance-improvements",children:"Measuring Performance Improvements"}),"\n",(0,l.jsx)(n.h3,{id:"before-parallel-execution",children:"Before Parallel Execution"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Total scenarios: 100\nExecution time: 50 minutes\n"})}),"\n",(0,l.jsx)(n.h3,{id:"after-parallel-execution-8-threads",children:"After Parallel Execution (8 threads)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Total scenarios: 100\nExecution time: 8 minutes\nSpeedup: 6.25x\nEfficiency: 78%\n"})}),"\n",(0,l.jsx)(n.p,{children:"Calculate your speedup:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Speedup = Sequential Time / Parallel Time\nEfficiency = Speedup / Number of Threads\n"})}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Review the main ",(0,l.jsx)(n.a,{href:"cucumber-junit5",children:"Cucumber with JUnit 5"})," guide"]}),"\n",(0,l.jsxs)(n.li,{children:["Check the ",(0,l.jsx)(n.a,{href:"configuration-reference",children:"Configuration Reference"})," for all available options"]}),"\n",(0,l.jsxs)(n.li,{children:["See ",(0,l.jsx)(n.a,{href:"cucumber-junit5#best-practices",children:"Best Practices"})," for writing maintainable tests"]}),"\n",(0,l.jsxs)(n.li,{children:["Explore ",(0,l.jsx)(n.a,{href:"/docs/reporting/the_serenity_reports",children:"Serenity Reports"})," documentation"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/cucumber/cucumber-jvm/tree/main/cucumber-junit-platform-engine#parallel-execution",children:"Cucumber Parallel Execution Docs"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-parallel-execution",children:"JUnit 5 Parallel Execution"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://serenity-bdd.info",children:"Serenity BDD Performance Tips"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}}}]);
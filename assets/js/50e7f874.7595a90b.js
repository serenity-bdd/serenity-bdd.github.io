"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[2495],{441(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/screenplay-model-d488f442690c701509fec447d3200a99.svg"},1627(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/journey-todo-app-2214f192ff12c40a5245b16c397ca171.png"},1677(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/todo-list-1-item-13af388f5ac9753cb1abb5395a8ff360.png"},4333(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/screenplay-report-1-82a1c49b31ef0a23d6a42e36c3ca3b1c.png"},7637(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/todomvc-input-5b43d88530bcb489a1bb9e50596123eb.png"},8453(e,t,n){n.d(t,{R:()=>r,x:()=>o});var s=n(6540);const i={},a=s.createContext(i);function r(e){const t=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:t},e.children)}},8709(e,t,n){n.d(t,{A:()=>s});const s=n.p+"assets/images/screenplay-directory-layout-03f7e6044f63532b3701d279e302f27e.png"},9273(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"tutorials/screenplay","title":"Your First Screenplay Scenario","description":"The Screenplay Pattern is a way to write clean, readable, scalable test automation modeled around the user.","source":"@site/docs/tutorials/screenplay.md","sourceDirName":"tutorials","slug":"/tutorials/screenplay","permalink":"/docs/tutorials/screenplay","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/tutorials/screenplay.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"screenplay","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Your First Web Test","permalink":"/docs/tutorials/first_test"},"next":{"title":"Your First API Test","permalink":"/docs/tutorials/rest"}}');var i=n(4848),a=n(8453);const r={id:"screenplay",sidebar_position:2},o="Your First Screenplay Scenario",l={},c=[{value:"Pre-requisites",id:"pre-requisites",level:2},{value:"Introducing the Screenplay Pattern",id:"introducing-the-screenplay-pattern",level:2},{value:"Creating a Screenplay project",id:"creating-a-screenplay-project",level:2},{value:"Using the Serenity template projects",id:"using-the-serenity-template-projects",level:3},{value:"The project directory structure",id:"the-project-directory-structure",level:3},{value:"Writing your first scenario",id:"writing-your-first-scenario",level:2},{value:"Creating the test case",id:"creating-the-test-case",level:3},{value:"Introducing the actor",id:"introducing-the-actor",level:3},{value:"Actors perform tasks and interactions",id:"actors-perform-tasks-and-interactions",level:3},{value:"Actors can interact with a web application",id:"actors-can-interact-with-a-web-application",level:3},{value:"Actors can ask about the state of the system",id:"actors-can-ask-about-the-state-of-the-system",level:3},{value:"Generating the reports",id:"generating-the-reports",level:2},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"your-first-screenplay-scenario",children:"Your First Screenplay Scenario"})}),"\n",(0,i.jsx)(t.p,{children:"The Screenplay Pattern is a way to write clean, readable, scalable test automation modeled around the user."}),"\n",(0,i.jsx)(t.p,{children:"Screenplay builds on good software engineering principles such as the Single Responsibility Principle, the Open-Closed Principle, and effective use of Layers of Abstraction. It encourages good testing habits and well-designed test suites that are easy to read, easy to maintain and easy to extend, enabling teams to write more robust and more reliable automated tests more effectively."}),"\n",(0,i.jsxs)(t.p,{children:["In this section, we will show you how to write your first Screenplay scenario using Serenity BDD. You will learn how to write a simple scenario for the well-known ",(0,i.jsx)(t.a,{href:"http://todomvc.com",children:"TodoMVC"})," project."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(1627).A+"",width:"940",height:"548"})}),"\n",(0,i.jsx)(t.h2,{id:"pre-requisites",children:"Pre-requisites"}),"\n",(0,i.jsx)(t.p,{children:"To run this tutorial, you will need a few things installed on your machine:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Java"}),": Serenity BDD is a Java library, so you'll need a recent JDK installed. JDK 1.8 or higher should be fine."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"A Java IDE"}),": You'll also need a Java Development Environment such as IntelliJ or Eclipse (and a working knowledge of Java)."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Git"}),": We'll be using a starter project on Github, and the sample code for this project lives on Github too, so I'll be assuming you have a basic understanding of Git.  You will also need a Git client installed on your computer."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"introducing-the-screenplay-pattern",children:"Introducing the Screenplay Pattern"}),"\n",(0,i.jsx)(t.p,{children:"The goal of the Screenplay pattern is to help you write cleaner, more readable, more maintainable test automation code for any domain. With Screenplay, your tests use an intuitive, readable style like the following:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'        wendy.attemptsTo(\n                Navigate.toTheHomePage(),\n                Search.byKeyword("Everest"),\n                Ensure.that(DisplayedArticle.firstHeading()).isEqualTo("Mount Everest")\n        );\n'})}),"\n",(0,i.jsxs)(t.p,{children:["As you can see here, Screenplay uses a user-centric model, where we describe ",(0,i.jsx)(t.em,{children:"actors"})," who interact with an application in various ways to perform ",(0,i.jsx)(t.em,{children:"tasks"})," that help them achieve their goals. Actors have ",(0,i.jsx)(t.em,{children:"abilities"}),", such as the ability to interact with a web browser or query a database, that help them perform these tasks. Actors can also answer ",(0,i.jsx)(t.em,{children:"questions"})," about the state of the system, so that we can check whether a feature is behaving the way we would expect it to."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(441).A+"",width:"1355",height:"641"})}),"\n",(0,i.jsx)(t.h2,{id:"creating-a-screenplay-project",children:"Creating a Screenplay project"}),"\n",(0,i.jsx)(t.h3,{id:"using-the-serenity-template-projects",children:"Using the Serenity template projects"}),"\n",(0,i.jsxs)(t.p,{children:["The quickest way to start a new Screenplay project is to clone one of the starter projects. For this tutorial, we will start with the ",(0,i.jsx)(t.a,{href:"https://github.com/serenity-bdd/serenity-junit-screenplay-starter",children:"Serenity JUnit Screenplay Starter project"}),", which uses Serenity Screenplay and JUnit 5."]}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsxs)(t.p,{children:["This starter project has a sample Screenplay test in the ",(0,i.jsx)(t.code,{children:"src/test/java/starter/wikipedia"})," folder. You won't need this code for this tutorial so you can safely delete it."]})}),"\n",(0,i.jsx)(t.h3,{id:"the-project-directory-structure",children:"The project directory structure"}),"\n",(0,i.jsx)(t.p,{children:"We will use some simple conventions to organise our test classes, based on the standard Maven project structure you can see here:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(8709).A+"",width:"928",height:"814"})}),"\n",(0,i.jsxs)(t.p,{children:["Our test code will be stored in two folders, underneath ",(0,i.jsx)(t.code,{children:"src/test/java/todomvc"}),". The first directory named ",(0,i.jsx)(t.code,{children:"features"})," will contain our test classes. The second, ",(0,i.jsx)(t.code,{children:"screenplay"}),", will contain our Screenplay classes. Screenplay classes are designed to be highly modular and reusable, and often appear in many tests, so it makes sense to keep them separate from the tests themselves."]}),"\n",(0,i.jsxs)(t.p,{children:["Serenity organises JUnit test results based on the package structure we use, so we need to tell it the name of the root package where our tests will live. We do this in the ",(0,i.jsx)(t.code,{children:"serenity.conf"})," file in the ",(0,i.jsx)(t.code,{children:"src/test/resources"})," folder. Open this file and add the following line:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"serenity.test.root = todomvc.features\n"})}),"\n",(0,i.jsx)(t.h2,{id:"writing-your-first-scenario",children:"Writing your first scenario"}),"\n",(0,i.jsx)(t.h3,{id:"creating-the-test-case",children:"Creating the test case"}),"\n",(0,i.jsx)(t.p,{children:"For our first scenario, we will simply add a 'to do' item (say, \"Buy some milk\") to an empty list."}),"\n",(0,i.jsxs)(t.p,{children:["Start by creating a new empty test case under the ",(0,i.jsx)(t.code,{children:"src/test/java/todomvc/features"})," package like this:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'package todomvc.features;\n\nimport net.serenitybdd.junit5.SerenityJUnit5Extension;\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\n\n@ExtendWith(SerenityJUnit5Extension.class)\nclass AddNewTodos {\n\n    @Test\n    @DisplayName("Add a todo item to an empty list")\n    void addToEmptyList() {\n    }\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["The line ",(0,i.jsx)(t.code,{children:"@ExtendWith(SerenityJUnit5Extension.class)"})," indicates that this is a Serenity BDD test."]}),"\n",(0,i.jsx)(t.h3,{id:"introducing-the-actor",children:"Introducing the actor"}),"\n",(0,i.jsxs)(t.p,{children:["Screenplay uses an actor-centric approach, where our tests describe ",(0,i.jsx)(t.em,{children:"actors"}),", who represent actual users of our application, and the actions they perform."]}),"\n",(0,i.jsxs)(t.p,{children:["In a Serenity BDD JUnit test, we can use the ",(0,i.jsx)(t.code,{children:"@CastMember"})," annotation to declare an actor like this:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'    @CastMember(name = "Toby")\n    Actor toby;\n'})}),"\n",(0,i.jsx)(t.p,{children:"This will instantiate a new actor (called Toby) for our test, and assign a webdriver instance that he can use to interact with our application."}),"\n",(0,i.jsx)(t.h3,{id:"actors-perform-tasks-and-interactions",children:"Actors perform tasks and interactions"}),"\n",(0,i.jsxs)(t.p,{children:["In a Screenplay test, everything starts with the actor, who interacts with the system under test to achieve their goals. In this case, the first thing Toby needs to do is to open the TodoMvc application at a given URL. We do this by calling the ",(0,i.jsx)(t.code,{children:"attemptsTo()"})," method on the ",(0,i.jsx)(t.code,{children:"Actor"})," class. The ",(0,i.jsx)(t.code,{children:"attemptsTo()"})," method takes a list of actions that the actor needs to perform. We call these actions ",(0,i.jsx)(t.em,{children:"performables"}),". We generally talk about two types of ",(0,i.jsx)(t.em,{children:"performables"}),":"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.em,{children:"Interactions"}),", where the actor interacts directly with the application (Click a button or Open a URL), and"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.em,{children:"Tasks"}),", which are groups of interactions that the actor needs to perform to achieve some goal (Add an item to the cart or purchase an item)."]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["An example of a simple Interaction is the ",(0,i.jsx)(t.code,{children:"Open.url()"})," interaction, which opens a given URL."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'Open.url("https://todomvc.com/examples/angularjs/#/")\n'})}),"\n",(0,i.jsx)(t.p,{children:'In our "add a todo item to an empty list" test, the first step will be for Toby to open the browser on the TodoMVC application home page. We can do this with the following code:'}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'@Test\n@DisplayName("Add a todo item to an empty list")\nvoid addToEmptyList() {\n    toby.attemptsTo(\n        Open.url("https://todomvc.com/examples/angularjs/#/")\n    );\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"actors-can-interact-with-a-web-application",children:"Actors can interact with a web application"}),"\n",(0,i.jsx)(t.p,{children:"The next thing we need to do is to enter a value into the input field on the TodoMVC home page that you can see here:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(7637).A+"",width:"738",height:"338"})}),"\n",(0,i.jsxs)(t.p,{children:["To enter a value into a field, we can use the ",(0,i.jsx)(t.code,{children:"Enter"})," interaction class. This field can be located using a CSS locator like ",(0,i.jsx)(t.em,{children:'".new-todo"'}),". So to enter the value into this field, we can use the following interaction:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'Enter.theValue("Buy some milk").into(".new-todo")\n'})}),"\n",(0,i.jsxs)(t.p,{children:["There is no submit button on this form. To add the item to the list, we need to press the ",(0,i.jsx)(t.em,{children:"RETURN"})," key. We can do this by adding the ",(0,i.jsx)(t.code,{children:"thenHit()"})," method, like this:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'Enter.theValue("Buy some milk").into(".new-todo").thenHit(Keys.RETURN)\n'})}),"\n",(0,i.jsx)(t.p,{children:"When we add this to our test, we get the following:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'@Test\n@DisplayName("Add a todo item to an empty list")\nvoid addToEmptyList() {\n    toby.attemptsTo(\n        Open.url("https://todomvc.com/examples/angularjs/#/"),\n        Enter.theValue("Buy some milk").into(".new-todo").thenHit(Keys.RETURN)\n    );\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"actors-can-ask-about-the-state-of-the-system",children:"Actors can ask about the state of the system"}),"\n",(0,i.jsx)(t.p,{children:"Once Toby hits RETURN, the item will be added to the todo list, as we can see here:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(1677).A+"",width:"812",height:"538"})}),"\n",(0,i.jsxs)(t.p,{children:["Now we need to check that the item we entered was successfully added to this list. In Screenplay we do this using ",(0,i.jsx)(t.em,{children:"Questions"}),". A Question is a class that knows how to retrieve a specific piece of information about the state of the application. This could be the value of a text field, the result of a REST API call, or even the result of a database query."]}),"\n",(0,i.jsxs)(t.p,{children:['In this case, we can identify the names of the todo items in the list using a CSS locator such as ".todo-list li". So a ',(0,i.jsx)(t.em,{children:"question"})," to retrieve each of the todo items displayed on the page might look like this:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'Text.ofEach(".todo-list li")\n'})}),"\n",(0,i.jsx)(t.p,{children:"A question does nothing by itself - just as we need an actor to perform an interaction, we also need an actor to ask a question."}),"\n",(0,i.jsxs)(t.p,{children:["One way we do this is to use the ",(0,i.jsx)(t.code,{children:"asksFor()"})," method, like this:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'        var todos = toby.asksFor(Text.ofEach(".todo-list label"));\n'})}),"\n",(0,i.jsx)(t.p,{children:"If we add an AssertJ assertion to check that the list contains the value we expect, our completed test will look like the following:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'import net.serenitybdd.junit5.SerenityJUnit5Extension;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.actions.Enter;\nimport net.serenitybdd.screenplay.actions.Open;\nimport net.serenitybdd.screenplay.annotations.CastMember;\nimport net.serenitybdd.screenplay.questions.Text;\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.openqa.selenium.Keys;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\n@ExtendWith(SerenityJUnit5Extension.class)\nclass AddNewTodos {\n\n    @CastMember(name = "Toby")\n    Actor toby;\n\n    @Test\n    @DisplayName("Add a todo item to an empty list")\n    void addToEmptyList() {\n        toby.attemptsTo(\n                Open.url("https://todomvc.com/examples/angularjs/#/"),\n                Enter.theValue("Buy some milk").into(".new-todo").thenHit(Keys.RETURN)\n        );\n        var todos = toby.asksFor(Text.ofEach(".todo-list li"));\n        assertThat(todos).containsExactly("Buy some milk");\n    }\n}\n\n'})}),"\n",(0,i.jsx)(t.h2,{id:"generating-the-reports",children:"Generating the reports"}),"\n",(0,i.jsxs)(t.p,{children:["Let's run the tests and see what the reports look like. Just run ",(0,i.jsx)(t.code,{children:"mvn clean verify"})," from the command line. You should see an output along the following lines:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"$ mvn verify\n...\n[INFO] -----------------------------------------\n[INFO]  SERENITY TESTS: SUCCESS\n[INFO] -----------------------------------------\n[INFO] | Test cases executed    | 1\n[INFO] | Tests executed         | 1\n[INFO] | Tests passed           | 1\n[INFO] | Tests failed           | 0\n[INFO] | Tests with errors      | 0\n[INFO] | Tests compromised      | 0\n[INFO] | Tests aborted          | 0\n[INFO] | Tests pending          | 0\n[INFO] | Tests ignored/skipped  | 0\n[INFO] ------------------------ | --------------\n[INFO] | Total Duration         | 7s 292ms\n[INFO] | Fastest test took      | 7s 292ms\n[INFO] | Slowest test took      | 7s 292ms\n[INFO] -----------------------------------------\n[INFO]\n[INFO] SERENITY REPORTS\n[INFO]   - Full Report: file:///C:/Users/johns/projects/todomvc-screenplay-tutorial/target/site/serenity/index.html\n[INFO]\n[INFO] --- maven-failsafe-plugin:3.0.0-M5:verify (default) @ serenity-junit-screenplay-starter ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  21.660 s\n[INFO] Finished at: 2022-04-04T13:34:26+01:00\n[INFO] ------------------------------------------------------------------------\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Now open the ",(0,i.jsx)(t.code,{children:"index.html"})," file in the ",(0,i.jsx)(t.code,{children:"target/site/serenity"}),' directory using a web browser, and navigate to the Test Results tab. Open up the "Add a todo item to an empty list" scenario. Notice how the report renders the actor\'s actions almost word-for-word:']}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(4333).A+"",width:"1405",height:"747"})}),"\n",(0,i.jsx)(t.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsxs)(t.p,{children:["You have now seen just a little of the power of the Screenplay pattern. To learn more about what you can do with the Screenplay pattern, check out ",(0,i.jsx)(t.a,{href:"../screenplay/screenplay_fundamentals",children:"the full Screenplay Documentation"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);
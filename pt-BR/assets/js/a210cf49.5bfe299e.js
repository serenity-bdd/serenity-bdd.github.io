"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[2131],{2249(e,t,n){n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"playwright/playwright_screenplay_tutorial","title":"Tutorial: Screenplay com TodoMVC","description":"Este tutorial mostra como construir uma su\xedte de testes Serenity Playwright usando o Screenplay Pattern para a aplica\xe7\xe3o TodoMVC. Vamos constru\xed-la iterativamente, come\xe7ando pelos fundamentos e progressivamente adicionando padr\xf5es mais sofisticados.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/playwright/screenplay-tutorial.md","sourceDirName":"playwright","slug":"/playwright/playwright_screenplay_tutorial","permalink":"/pt-BR/docs/playwright/playwright_screenplay_tutorial","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/playwright/screenplay-tutorial.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"id":"playwright_screenplay_tutorial","title":"Tutorial: Screenplay com TodoMVC","sidebar_position":8},"sidebar":"tutorialSidebar","previous":{"title":"Tutorial: Testando TodoMVC","permalink":"/pt-BR/docs/playwright/playwright_tutorial_todomvc"},"next":{"title":"Integra\xe7\xe3o com Cucumber","permalink":"/pt-BR/docs/playwright/playwright_cucumber"}}');var s=n(4848),a=n(8453);const i={id:"playwright_screenplay_tutorial",title:"Tutorial: Screenplay com TodoMVC",sidebar_position:8},r="Tutorial: Construindo uma Su\xedte de Testes Screenplay",d={},l=[{value:"O Que Estamos Construindo",id:"o-que-estamos-construindo",level:2},{value:"Configura\xe7\xe3o do Projeto",id:"configura\xe7\xe3o-do-projeto",level:2},{value:"Parte 1: Nosso Primeiro Teste",id:"parte-1-nosso-primeiro-teste",level:2},{value:"Passo 1: Crie a Classe Base de Teste",id:"passo-1-crie-a-classe-base-de-teste",level:3},{value:"Passo 2: Defina os Target de UI",id:"passo-2-defina-os-target-de-ui",level:3},{value:"Passo 3: Crie a Primeira Task",id:"passo-3-crie-a-primeira-task",level:3},{value:"Passo 4: Crie a Task de Adicionar Tarefa",id:"passo-4-crie-a-task-de-adicionar-tarefa",level:3},{value:"Passo 5: Crie uma Question",id:"passo-5-crie-uma-question",level:3},{value:"Passo 6: Escreva o Teste",id:"passo-6-escreva-o-teste",level:3},{value:"Parte 2: Expandindo Nossa Su\xedte de Testes",id:"parte-2-expandindo-nossa-su\xedte-de-testes",level:2},{value:"Adicionando Mais Target",id:"adicionando-mais-target",level:3},{value:"Task de Completar",id:"task-de-completar",level:3},{value:"Task de Excluir",id:"task-de-excluir",level:3},{value:"Task de Filtro",id:"task-de-filtro",level:3},{value:"Mais Question",id:"mais-question",level:3},{value:"Parte 3: Su\xedte de Testes Completa",id:"parte-3-su\xedte-de-testes-completa",level:2},{value:"Testes de Adicionar Tarefas",id:"testes-de-adicionar-tarefas",level:3},{value:"Testes de Completar Tarefas",id:"testes-de-completar-tarefas",level:3},{value:"Testes de Filtro",id:"testes-de-filtro",level:3},{value:"Testes de Exclus\xe3o",id:"testes-de-exclus\xe3o",level:3},{value:"Principais Li\xe7\xf5es",id:"principais-li\xe7\xf5es",level:2},{value:"Benef\xedcios do Screenplay Pattern",id:"benef\xedcios-do-screenplay-pattern",level:3},{value:"Estrutura do Projeto",id:"estrutura-do-projeto",level:3},{value:"Pr\xf3ximos Passos",id:"pr\xf3ximos-passos",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"tutorial-construindo-uma-su\xedte-de-testes-screenplay",children:"Tutorial: Construindo uma Su\xedte de Testes Screenplay"})}),"\n",(0,s.jsxs)(t.p,{children:["Este tutorial mostra como construir uma su\xedte de testes Serenity Playwright usando o Screenplay Pattern para a ",(0,s.jsx)(t.a,{href:"https://todomvc.com/examples/react/dist/",children:"aplica\xe7\xe3o TodoMVC"}),". Vamos constru\xed-la iterativamente, come\xe7ando pelos fundamentos e progressivamente adicionando padr\xf5es mais sofisticados."]}),"\n",(0,s.jsx)(t.h2,{id:"o-que-estamos-construindo",children:"O Que Estamos Construindo"}),"\n",(0,s.jsx)(t.p,{children:"Ao final deste tutorial, voc\xea ter\xe1 uma su\xedte de testes completa com:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Target"})," para todos os elementos de UI"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Task"})," para a\xe7\xf5es do usu\xe1rio (adicionar, completar, excluir, filtrar tarefas)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Question"})," para consultar o estado da aplica\xe7\xe3o"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Testes"})," usando asser\xe7\xf5es ",(0,s.jsx)(t.code,{children:"Ensure.that()"})]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"configura\xe7\xe3o-do-projeto",children:"Configura\xe7\xe3o do Projeto"}),"\n",(0,s.jsx)(t.p,{children:"Crie um projeto Maven com estas depend\xeancias:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-xml",children:"<properties>\n    <serenity.version>5.1.1</serenity.version>\n    <playwright.version>1.58.0</playwright.version>\n</properties>\n\n<dependencies>\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-screenplay-playwright</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-screenplay</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-ensure</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-junit5</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>com.microsoft.playwright</groupId>\n        <artifactId>playwright</artifactId>\n        <version>${playwright.version}</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.junit.jupiter</groupId>\n        <artifactId>junit-jupiter</artifactId>\n        <version>6.0.1</version>\n        <scope>test</scope>\n    </dependency>\n</dependencies>\n"})}),"\n",(0,s.jsx)(t.h2,{id:"parte-1-nosso-primeiro-teste",children:"Parte 1: Nosso Primeiro Teste"}),"\n",(0,s.jsx)(t.p,{children:"Vamos come\xe7ar com o teste mais simples poss\xedvel - adicionar um \xfanico item de tarefa."}),"\n",(0,s.jsx)(t.h3,{id:"passo-1-crie-a-classe-base-de-teste",children:"Passo 1: Crie a Classe Base de Teste"}),"\n",(0,s.jsx)(t.p,{children:"Primeiro, crie uma classe base que configura nosso actor com capacidades do Playwright:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'package todomvc.screenplay;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport org.junit.jupiter.api.BeforeEach;\n\npublic abstract class ScreenplayPlaywrightTest {\n\n    protected Actor toby;\n\n    @BeforeEach\n    void setUpPlaywright() {\n        toby = Actor.named("Toby");\n        toby.can(BrowseTheWebWithPlaywright.usingTheDefaultConfiguration());\n    }\n\n    // N\xe3o \xe9 necess\xe1rio @AfterEach - BrowseTheWebWithPlaywright limpa\n    // automaticamente os recursos do navegador quando o teste termina\n}\n'})}),"\n",(0,s.jsx)(t.admonition,{title:"Limpeza Autom\xe1tica",type:"tip",children:(0,s.jsxs)(t.p,{children:["A Ability ",(0,s.jsx)(t.code,{children:"BrowseTheWebWithPlaywright"})," se inscreve nos eventos de ciclo de vida de teste do Serenity e fecha automaticamente o navegador, contexto e p\xe1gina quando cada teste \xe9 conclu\xeddo. Voc\xea n\xe3o precisa escrever nenhum c\xf3digo de teardown!"]})}),"\n",(0,s.jsx)(t.h3,{id:"passo-2-defina-os-target-de-ui",children:"Passo 2: Defina os Target de UI"}),"\n",(0,s.jsx)(t.p,{children:"Crie uma classe para armazenar todos os locators de elementos de UI:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'package todomvc.screenplay.ui;\n\nimport net.serenitybdd.screenplay.playwright.Target;\n\npublic class TodoList {\n\n    public static final Target NEW_TODO_INPUT =\n        Target.the("new todo input")\n              .locatedBy("[placeholder=\'What needs to be done?\']");\n\n    public static final Target TODO_ITEMS =\n        Target.the("todo items")\n              .locatedBy(".todo-list li");\n\n    public static final Target TODO_ITEM_LABELS =\n        Target.the("todo item labels")\n              .locatedBy(".todo-list li label");\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"passo-3-crie-a-primeira-task",children:"Passo 3: Crie a Primeira Task"}),"\n",(0,s.jsx)(t.p,{children:"Crie uma task para abrir a aplica\xe7\xe3o TodoMVC:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'package todomvc.screenplay.tasks;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.playwright.interactions.Open;\nimport net.serenitybdd.annotations.Step;\n\npublic class OpenTodoMvcApp implements Task {\n\n    private static final String URL = "https://todomvc.com/examples/react/dist/";\n\n    @Override\n    @Step("{0} opens the TodoMVC application")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(Open.url(URL));\n    }\n\n    public static OpenTodoMvcApp onTheHomePage() {\n        return new OpenTodoMvcApp();\n    }\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"passo-4-crie-a-task-de-adicionar-tarefa",children:"Passo 4: Crie a Task de Adicionar Tarefa"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'package todomvc.screenplay.tasks;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.playwright.interactions.Enter;\nimport net.serenitybdd.screenplay.playwright.interactions.Press;\nimport net.serenitybdd.annotations.Step;\nimport todomvc.screenplay.ui.TodoList;\n\npublic class AddATodoItem implements Task {\n\n    private final String todoItem;\n\n    public AddATodoItem(String todoItem) {\n        this.todoItem = todoItem;\n    }\n\n    @Override\n    @Step("{0} adds a todo item called \'#todoItem\'")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Enter.theValue(todoItem).into(TodoList.NEW_TODO_INPUT),\n            Press.keys("Enter")\n        );\n    }\n\n    public static AddATodoItem called(String todoItem) {\n        return new AddATodoItem(todoItem);\n    }\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"passo-5-crie-uma-question",children:"Passo 5: Crie uma Question"}),"\n",(0,s.jsx)(t.p,{children:"Crie uma question para contar as tarefas vis\xedveis:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'package todomvc.screenplay.questions;\n\nimport net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport todomvc.screenplay.ui.TodoList;\n\npublic class TheVisibleTodos {\n\n    public static Question<Integer> count() {\n        return Question.about("visible todo count").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(TodoList.TODO_ITEMS.asSelector())\n                .count()\n        );\n    }\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"passo-6-escreva-o-teste",children:"Passo 6: Escreva o Teste"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'package todomvc.screenplay;\n\nimport net.serenitybdd.junit5.SerenityJUnit5Extension;\nimport net.serenitybdd.screenplay.ensure.Ensure;\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport todomvc.screenplay.questions.TheVisibleTodos;\nimport todomvc.screenplay.tasks.AddATodoItem;\nimport todomvc.screenplay.tasks.OpenTodoMvcApp;\n\n@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When adding todos")\nclass WhenAddingTodosTest extends ScreenplayPlaywrightTest {\n\n    @Test\n    @DisplayName("should add a single todo item")\n    void shouldAddSingleTodoItem() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Buy milk"),\n            Ensure.that(TheVisibleTodos.count()).isEqualTo(1)\n        );\n    }\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Execute com ",(0,s.jsx)(t.code,{children:"mvn clean verify"})," - voc\xea deve ver um teste passando com um relat\xf3rio Serenity."]}),"\n",(0,s.jsx)(t.h2,{id:"parte-2-expandindo-nossa-su\xedte-de-testes",children:"Parte 2: Expandindo Nossa Su\xedte de Testes"}),"\n",(0,s.jsx)(t.p,{children:"Agora vamos adicionar mais capacidades."}),"\n",(0,s.jsx)(t.h3,{id:"adicionando-mais-target",children:"Adicionando Mais Target"}),"\n",(0,s.jsxs)(t.p,{children:["Expanda a classe ",(0,s.jsx)(t.code,{children:"TodoList"})," com mais locators:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'public class TodoList {\n\n    // Elementos de input\n    public static final Target NEW_TODO_INPUT =\n        Target.the("new todo input")\n              .locatedBy("[placeholder=\'What needs to be done?\']");\n\n    // Itens de tarefa\n    public static final Target TODO_ITEMS =\n        Target.the("todo items")\n              .locatedBy(".todo-list li");\n\n    public static final Target TODO_ITEM_LABELS =\n        Target.the("todo item labels")\n              .locatedBy(".todo-list li label");\n\n    // Target din\xe2micos para itens espec\xedficos\n    public static Target todoItemCalled(String text) {\n        return Target.the("todo \'" + text + "\'")\n                     .locatedBy(".todo-list li:has-text(\'" + text + "\')");\n    }\n\n    public static Target checkboxFor(String text) {\n        return Target.the("checkbox for \'" + text + "\'")\n                     .locatedBy(".todo-list li:has-text(\'" + text + "\') .toggle");\n    }\n\n    public static Target deleteButtonFor(String text) {\n        return Target.the("delete button for \'" + text + "\'")\n                     .locatedBy(".todo-list li:has-text(\'" + text + "\') .destroy");\n    }\n\n    // Elementos do rodap\xe9\n    public static final Target TODO_COUNT =\n        Target.the("todo count")\n              .locatedBy(".todo-count");\n\n    public static final Target CLEAR_COMPLETED_BUTTON =\n        Target.the("clear completed button")\n              .locatedBy(".clear-completed");\n\n    // Filtros\n    public static final Target ALL_FILTER =\n        Target.the("All filter")\n              .locatedBy(".filters a:has-text(\'All\')");\n\n    public static final Target ACTIVE_FILTER =\n        Target.the("Active filter")\n              .locatedBy(".filters a:has-text(\'Active\')");\n\n    public static final Target COMPLETED_FILTER =\n        Target.the("Completed filter")\n              .locatedBy(".filters a:has-text(\'Completed\')");\n\n    public static final Target SELECTED_FILTER =\n        Target.the("selected filter")\n              .locatedBy(".filters a.selected");\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"task-de-completar",children:"Task de Completar"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:"package todomvc.screenplay.tasks;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.playwright.interactions.Click;\nimport net.serenitybdd.annotations.Step;\nimport todomvc.screenplay.ui.TodoList;\n\npublic class Complete implements Task {\n\n    private final String todoItem;\n\n    public Complete(String todoItem) {\n        this.todoItem = todoItem;\n    }\n\n    @Override\n    @Step(\"{0} completes the todo item '#todoItem'\")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Click.on(TodoList.checkboxFor(todoItem))\n        );\n    }\n\n    public static Complete todoItem(String todoItem) {\n        return new Complete(todoItem);\n    }\n}\n"})}),"\n",(0,s.jsx)(t.h3,{id:"task-de-excluir",children:"Task de Excluir"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:"package todomvc.screenplay.tasks;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.playwright.interactions.Click;\nimport net.serenitybdd.screenplay.playwright.interactions.Hover;\nimport net.serenitybdd.annotations.Step;\nimport todomvc.screenplay.ui.TodoList;\n\npublic class Delete implements Task {\n\n    private final String todoItem;\n\n    public Delete(String todoItem) {\n        this.todoItem = todoItem;\n    }\n\n    @Override\n    @Step(\"{0} deletes the todo item '#todoItem'\")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Hover.over(TodoList.todoItemCalled(todoItem)),\n            Click.on(TodoList.deleteButtonFor(todoItem))\n        );\n    }\n\n    public static Delete theTodoItem(String todoItem) {\n        return new Delete(todoItem);\n    }\n}\n"})}),"\n",(0,s.jsx)(t.h3,{id:"task-de-filtro",children:"Task de Filtro"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'package todomvc.screenplay.tasks;\n\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.playwright.interactions.Click;\nimport todomvc.screenplay.ui.TodoList;\n\npublic class FilterTodos {\n\n    public static Task toShowAll() {\n        return Task.where("{0} filters to show all todos",\n            Click.on(TodoList.ALL_FILTER)\n        );\n    }\n\n    public static Task toShowActive() {\n        return Task.where("{0} filters to show active todos",\n            Click.on(TodoList.ACTIVE_FILTER)\n        );\n    }\n\n    public static Task toShowCompleted() {\n        return Task.where("{0} filters to show completed todos",\n            Click.on(TodoList.COMPLETED_FILTER)\n        );\n    }\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"mais-question",children:"Mais Question"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'// TheVisibleTodos.java - expandido\npackage todomvc.screenplay.questions;\n\nimport net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport todomvc.screenplay.ui.TodoList;\n\nimport java.util.Collection;\n\npublic class TheVisibleTodos {\n\n    public static Question<Collection<String>> displayed() {\n        return Question.about("the visible todos").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(TodoList.TODO_ITEM_LABELS.asSelector())\n                .allTextContents()\n        );\n    }\n\n    public static Question<Integer> count() {\n        return Question.about("visible todo count").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(TodoList.TODO_ITEMS.asSelector())\n                .count()\n        );\n    }\n}\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'// TheRemainingCount.java\npackage todomvc.screenplay.questions;\n\nimport net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport todomvc.screenplay.ui.TodoList;\n\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class TheRemainingCount {\n\n    private static final Pattern COUNT_PATTERN = Pattern.compile("(\\\\d+)");\n\n    public static Question<Integer> value() {\n        return Question.about("the remaining count").answeredBy(actor -> {\n            String text = BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(TodoList.TODO_COUNT.asSelector())\n                .textContent();\n\n            Matcher matcher = COUNT_PATTERN.matcher(text);\n            return matcher.find() ? Integer.parseInt(matcher.group(1)) : 0;\n        });\n    }\n}\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'// TheCurrentFilter.java\npackage todomvc.screenplay.questions;\n\nimport net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport todomvc.screenplay.ui.TodoList;\n\npublic class TheCurrentFilter {\n\n    public static Question<String> selected() {\n        return Question.about("the current filter").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(TodoList.SELECTED_FILTER.asSelector())\n                .textContent()\n        );\n    }\n}\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'// TheTodoItem.java - construtor de question fluente\npackage todomvc.screenplay.questions;\n\nimport net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport todomvc.screenplay.ui.TodoList;\n\npublic class TheTodoItem {\n\n    private final String todoItem;\n\n    public TheTodoItem(String todoItem) {\n        this.todoItem = todoItem;\n    }\n\n    public static TheTodoItem called(String todoItem) {\n        return new TheTodoItem(todoItem);\n    }\n\n    public Question<Boolean> exists() {\n        String item = todoItem;\n        return Question.about("whether \'" + item + "\' exists").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(TodoList.todoItemCalled(item).asSelector())\n                .count() > 0\n        );\n    }\n\n    public Question<Boolean> isCompleted() {\n        String item = todoItem;\n        return Question.about("whether \'" + item + "\' is completed").answeredBy(\n            actor -> BrowseTheWebWithPlaywright.as(actor)\n                .getCurrentPage()\n                .locator(TodoList.todoItemCalled(item).asSelector())\n                .getAttribute("class")\n                .contains("completed")\n        );\n    }\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"parte-3-su\xedte-de-testes-completa",children:"Parte 3: Su\xedte de Testes Completa"}),"\n",(0,s.jsx)(t.p,{children:"Agora temos tudo para escrever uma su\xedte de testes abrangente:"}),"\n",(0,s.jsx)(t.h3,{id:"testes-de-adicionar-tarefas",children:"Testes de Adicionar Tarefas"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When adding todos (Screenplay)")\nclass WhenAddingTodosScreenplayTest extends ScreenplayPlaywrightTest {\n\n    @Test\n    @DisplayName("should add a single todo item")\n    void shouldAddSingleTodoItem() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Buy milk"),\n            Ensure.that(TheVisibleTodos.count()).isEqualTo(1),\n            Ensure.that(TheTodoItem.called("Buy milk").exists()).isTrue()\n        );\n    }\n\n    @Test\n    @DisplayName("should add multiple todo items")\n    void shouldAddMultipleTodoItems() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Buy milk"),\n            AddATodoItem.called("Walk the dog"),\n            AddATodoItem.called("Do laundry"),\n            Ensure.that(TheVisibleTodos.displayed())\n                .containsExactly("Buy milk", "Walk the dog", "Do laundry")\n        );\n    }\n\n    @Test\n    @DisplayName("should update remaining count when adding todos")\n    void shouldUpdateRemainingCountWhenAddingTodos() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Task 1"),\n            Ensure.that(TheRemainingCount.value()).isEqualTo(1),\n\n            AddATodoItem.called("Task 2"),\n            Ensure.that(TheRemainingCount.value()).isEqualTo(2),\n\n            AddATodoItem.called("Task 3"),\n            Ensure.that(TheRemainingCount.value()).isEqualTo(3)\n        );\n    }\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"testes-de-completar-tarefas",children:"Testes de Completar Tarefas"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When completing todos (Screenplay)")\nclass WhenCompletingTodosScreenplayTest extends ScreenplayPlaywrightTest {\n\n    @BeforeEach\n    void setupTodos() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Buy milk"),\n            AddATodoItem.called("Walk the dog"),\n            AddATodoItem.called("Do laundry")\n        );\n    }\n\n    @Test\n    @DisplayName("should mark a todo as completed")\n    void shouldMarkTodoAsCompleted() {\n        toby.attemptsTo(\n            Complete.todoItem("Buy milk"),\n            Ensure.that(TheTodoItem.called("Buy milk").isCompleted()).isTrue(),\n            Ensure.that(TheRemainingCount.value()).isEqualTo(2)\n        );\n    }\n\n    @Test\n    @DisplayName("should clear completed todos")\n    void shouldClearCompletedTodos() {\n        toby.attemptsTo(\n            Complete.todoItem("Buy milk"),\n            Complete.todoItem("Walk the dog"),\n            Click.on(TodoList.CLEAR_COMPLETED_BUTTON),\n            Ensure.that(TheVisibleTodos.displayed()).containsExactly("Do laundry"),\n            Ensure.that(TheVisibleTodos.count()).isEqualTo(1)\n        );\n    }\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"testes-de-filtro",children:"Testes de Filtro"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When filtering todos (Screenplay)")\nclass WhenFilteringTodosScreenplayTest extends ScreenplayPlaywrightTest {\n\n    @BeforeEach\n    void setupTodos() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Buy milk"),\n            AddATodoItem.called("Walk the dog"),\n            AddATodoItem.called("Do laundry"),\n            Complete.todoItem("Walk the dog")\n        );\n    }\n\n    @Test\n    @DisplayName("should show all todos by default")\n    void shouldShowAllTodosByDefault() {\n        toby.attemptsTo(\n            Ensure.that(TheCurrentFilter.selected()).isEqualTo("All"),\n            Ensure.that(TheVisibleTodos.displayed())\n                .containsExactly("Buy milk", "Walk the dog", "Do laundry")\n        );\n    }\n\n    @Test\n    @DisplayName("should filter to show only active todos")\n    void shouldFilterToShowOnlyActiveTodos() {\n        toby.attemptsTo(\n            FilterTodos.toShowActive(),\n            Ensure.that(TheCurrentFilter.selected()).isEqualTo("Active"),\n            Ensure.that(TheVisibleTodos.displayed())\n                .containsExactly("Buy milk", "Do laundry")\n        );\n    }\n\n    @Test\n    @DisplayName("should filter to show only completed todos")\n    void shouldFilterToShowOnlyCompletedTodos() {\n        toby.attemptsTo(\n            FilterTodos.toShowCompleted(),\n            Ensure.that(TheCurrentFilter.selected()).isEqualTo("Completed"),\n            Ensure.that(TheVisibleTodos.displayed()).containsExactly("Walk the dog")\n        );\n    }\n\n    @Test\n    @DisplayName("should switch between filters")\n    void shouldSwitchBetweenFilters() {\n        toby.attemptsTo(\n            FilterTodos.toShowActive(),\n            Ensure.that(TheVisibleTodos.count()).isEqualTo(2),\n\n            FilterTodos.toShowCompleted(),\n            Ensure.that(TheVisibleTodos.count()).isEqualTo(1),\n\n            FilterTodos.toShowAll(),\n            Ensure.that(TheVisibleTodos.count()).isEqualTo(3)\n        );\n    }\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"testes-de-exclus\xe3o",children:"Testes de Exclus\xe3o"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("When deleting todos (Screenplay)")\nclass WhenDeletingTodosScreenplayTest extends ScreenplayPlaywrightTest {\n\n    @BeforeEach\n    void setupTodos() {\n        toby.attemptsTo(\n            OpenTodoMvcApp.onTheHomePage(),\n            AddATodoItem.called("Buy milk"),\n            AddATodoItem.called("Walk the dog"),\n            AddATodoItem.called("Do laundry")\n        );\n    }\n\n    @Test\n    @DisplayName("should delete a todo item")\n    void shouldDeleteTodoItem() {\n        toby.attemptsTo(\n            Delete.theTodoItem("Walk the dog"),\n            Ensure.that(TheTodoItem.called("Walk the dog").exists()).isFalse(),\n            Ensure.that(TheVisibleTodos.displayed())\n                .containsExactly("Buy milk", "Do laundry")\n        );\n    }\n\n    @Test\n    @DisplayName("should update the remaining count after deleting")\n    void shouldUpdateRemainingCountAfterDeleting() {\n        toby.attemptsTo(\n            Ensure.that(TheRemainingCount.value()).isEqualTo(3),\n            Delete.theTodoItem("Buy milk"),\n            Ensure.that(TheRemainingCount.value()).isEqualTo(2)\n        );\n    }\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"principais-li\xe7\xf5es",children:"Principais Li\xe7\xf5es"}),"\n",(0,s.jsx)(t.h3,{id:"benef\xedcios-do-screenplay-pattern",children:"Benef\xedcios do Screenplay Pattern"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Legibilidade"}),": Testes leem como especifica\xe7\xf5es"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'toby.attemptsTo(\n    OpenTodoMvcApp.onTheHomePage(),\n    AddATodoItem.called("Buy milk"),\n    Complete.todoItem("Buy milk"),\n    Ensure.that(TheRemainingCount.value()).isEqualTo(0)\n);\n'})}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Reusabilidade"}),": Task e Question podem ser compostas e reutilizadas"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Manutenibilidade"}),": Mudan\xe7as na UI s\xe3o isoladas nas defini\xe7\xf5es de Target"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Expressividade"}),": A inten\xe7\xe3o de neg\xf3cio \xe9 clara em cada teste"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"estrutura-do-projeto",children:"Estrutura do Projeto"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"src/test/java/\n\u251c\u2500\u2500 todomvc/screenplay/\n\u2502   \u251c\u2500\u2500 ScreenplayPlaywrightTest.java    # Classe base de teste\n\u2502   \u251c\u2500\u2500 WhenAddingTodosTest.java         # Classe de teste\n\u2502   \u251c\u2500\u2500 WhenCompletingTodosTest.java     # Classe de teste\n\u2502   \u251c\u2500\u2500 WhenFilteringTodosTest.java      # Classe de teste\n\u2502   \u251c\u2500\u2500 WhenDeletingTodosTest.java       # Classe de teste\n\u2502   \u251c\u2500\u2500 ui/\n\u2502   \u2502   \u2514\u2500\u2500 TodoList.java                # Target de UI\n\u2502   \u251c\u2500\u2500 tasks/\n\u2502   \u2502   \u251c\u2500\u2500 OpenTodoMvcApp.java\n\u2502   \u2502   \u251c\u2500\u2500 AddATodoItem.java\n\u2502   \u2502   \u251c\u2500\u2500 Complete.java\n\u2502   \u2502   \u251c\u2500\u2500 Delete.java\n\u2502   \u2502   \u2514\u2500\u2500 FilterTodos.java\n\u2502   \u2514\u2500\u2500 questions/\n\u2502       \u251c\u2500\u2500 TheVisibleTodos.java\n\u2502       \u251c\u2500\u2500 TheRemainingCount.java\n\u2502       \u251c\u2500\u2500 TheCurrentFilter.java\n\u2502       \u2514\u2500\u2500 TheTodoItem.java\n"})}),"\n",(0,s.jsx)(t.h2,{id:"pr\xf3ximos-passos",children:"Pr\xf3ximos Passos"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Aprenda sobre ",(0,s.jsx)(t.a,{href:"playwright_screenplay",children:"recursos avan\xe7ados do Screenplay"})," incluindo intercepta\xe7\xe3o de rede e m\xfaltiplas abas"]}),"\n",(0,s.jsxs)(t.li,{children:["Explore ",(0,s.jsx)(t.a,{href:"playwright_screenplay#playwright-specific-assertions",children:"asser\xe7\xf5es espec\xedficas do Playwright"})," com auto-retry"]}),"\n",(0,s.jsxs)(t.li,{children:["Veja ",(0,s.jsx)(t.a,{href:"playwright_best_practices",children:"Boas Pr\xe1ticas"})," para testes prontos para produ\xe7\xe3o"]}),"\n"]})]})}function p(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453(e,t,n){n.d(t,{R:()=>i,x:()=>r});var o=n(6540);const s={},a=o.createContext(s);function i(e){const t=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);
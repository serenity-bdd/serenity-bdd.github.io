"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[9068],{1347(e,n,a){a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"cucumber/advanced-patterns","title":"Padroes Avancados do Cucumber","description":"Este guia cobre padr\xf5es e t\xe9cnicas avan\xe7adas para escrever testes Cucumber manteniveis e escal\xe1veis com o Serenity BDD. Voc\xea aprender\xe1 padr\xf5es usados por engenheiros de automa\xe7\xe3o de testes experientes para construir suites de teste robustas.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/cucumber/advanced-patterns.md","sourceDirName":"cucumber","slug":"/cucumber/advanced-patterns","permalink":"/pt-BR/docs/cucumber/advanced-patterns","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/cucumber/advanced-patterns.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"advanced-patterns","title":"Padroes Avancados do Cucumber","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Executando Testes Cucumber em Paralelo","permalink":"/pt-BR/docs/cucumber/parallel-execution"},"next":{"title":"Referencia de Configuracao do Cucumber","permalink":"/pt-BR/docs/cucumber/configuration-reference"}}');var o=a(4848),t=a(8453);const s={id:"advanced-patterns",title:"Padroes Avancados do Cucumber",sidebar_position:3},i="Padroes Avancados do Cucumber com Serenity BDD",c={},d=[{value:"Pre-requisitos",id:"pre-requisitos",level:2},{value:"Padroes Avancados de Hooks",id:"padroes-avancados-de-hooks",level:2},{value:"Tipos de Hooks e Ordem de Execucao",id:"tipos-de-hooks-e-ordem-de-execucao",level:3},{value:"Tagged Hooks",id:"tagged-hooks",level:3},{value:"Expressoes de Tags em Hooks",id:"expressoes-de-tags-em-hooks",level:3},{value:"Ordenacao de Hooks",id:"ordenacao-de-hooks",level:3},{value:"Hooks Especificos do Screenplay",id:"hooks-especificos-do-screenplay",level:3},{value:"Tipos de Parametros Personalizados",id:"tipos-de-parametros-personalizados",level:2},{value:"Definindo Tipos de Parametros Personalizados",id:"definindo-tipos-de-parametros-personalizados",level:3},{value:"Usando Parametros Personalizados em Passos",id:"usando-parametros-personalizados-em-passos",level:3},{value:"Tipo de Parametro Actor",id:"tipo-de-parametro-actor",level:3},{value:"Padroes Complexos de Data Table",id:"padroes-complexos-de-data-table",level:2},{value:"Transformacoes Basicas de Data Table",id:"transformacoes-basicas-de-data-table",level:3},{value:"DataTableType para Transformacoes Personalizadas",id:"datatabletype-para-transformacoes-personalizadas",level:3},{value:"Data Tables Verticais",id:"data-tables-verticais",level:3},{value:"Estruturas de Dados Aninhadas",id:"estruturas-de-dados-aninhadas",level:3},{value:"Doc Strings para Conteudo Extenso",id:"doc-strings-para-conteudo-extenso",level:2},{value:"Doc Strings com Tipos de Conteudo",id:"doc-strings-com-tipos-de-conteudo",level:3},{value:"Compartilhando Estado Entre Passos",id:"compartilhando-estado-entre-passos",level:2},{value:"Usando Memoria do Actor (Screenplay Pattern)",id:"usando-memoria-do-actor-screenplay-pattern",level:3},{value:"Memoria Tipada com Generics",id:"memoria-tipada-com-generics",level:3},{value:"Usando World Objects (Injecao de Dependencia)",id:"usando-world-objects-injecao-de-dependencia",level:3},{value:"Padroes de Tratamento de Erros",id:"padroes-de-tratamento-de-erros",level:2},{value:"Padrao de Erros Esperados",id:"padrao-de-erros-esperados",level:3},{value:"Usando Question para Estados de Erro",id:"usando-question-para-estados-de-erro",level:3},{value:"Soft Assertions para Multiplas Verificacoes",id:"soft-assertions-para-multiplas-verificacoes",level:3},{value:"Organizacao de Step Definitions",id:"organizacao-de-step-definitions",level:2},{value:"Uma Classe Por Area de Funcionalidade",id:"uma-classe-por-area-de-funcionalidade",level:3},{value:"Passos Enxutos, Task Ricas",id:"passos-enxutos-task-ricas",level:3},{value:"Padroes de Passos Reutilizaveis",id:"padroes-de-passos-reutilizaveis",level:3},{value:"Boas Praticas para Background",id:"boas-praticas-para-background",level:2},{value:"Mantenha os Background Simples",id:"mantenha-os-background-simples",level:3},{value:"Use Tags para Compartilhar Background",id:"use-tags-para-compartilhar-background",level:3},{value:"Padroes de Scenario Outline",id:"padroes-de-scenario-outline",level:2},{value:"Examples Dinamicos com Tags",id:"examples-dinamicos-com-tags",level:3},{value:"Tabelas de Examples de Fontes Externas",id:"tabelas-de-examples-de-fontes-externas",level:3},{value:"Integracao: Screenplay vs Page Object",id:"integracao-screenplay-vs-page-object",level:2},{value:"Abordagem Pura com Screenplay",id:"abordagem-pura-com-screenplay",level:3},{value:"Abordagem com Page Object",id:"abordagem-com-page-object",level:3},{value:"Abordagem Hibrida",id:"abordagem-hibrida",level:3},{value:"Otimizacao de Performance",id:"otimizacao-de-performance",level:2},{value:"Execucao Paralela com Estado Isolado",id:"execucao-paralela-com-estado-isolado",level:3},{value:"Inicializacao Lazy",id:"inicializacao-lazy",level:3},{value:"Dicas de Depuracao",id:"dicas-de-depuracao",level:2},{value:"Logging Verboso em Hooks",id:"logging-verboso-em-hooks",level:3},{value:"Capturar Estado em Falha",id:"capturar-estado-em-falha",level:3},{value:"Resumo",id:"resumo",level:2},{value:"Proximos Passos",id:"proximos-passos",level:2},{value:"Recursos Adicionais",id:"recursos-adicionais",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"padroes-avancados-do-cucumber-com-serenity-bdd",children:"Padroes Avancados do Cucumber com Serenity BDD"})}),"\n",(0,o.jsx)(n.p,{children:"Este guia cobre padr\xf5es e t\xe9cnicas avan\xe7adas para escrever testes Cucumber manteniveis e escal\xe1veis com o Serenity BDD. Voc\xea aprender\xe1 padr\xf5es usados por engenheiros de automa\xe7\xe3o de testes experientes para construir suites de teste robustas."}),"\n",(0,o.jsx)(n.h2,{id:"pre-requisitos",children:"Pre-requisitos"}),"\n",(0,o.jsx)(n.p,{children:"Este guia assume que voc\xea est\xe1 familiarizado com:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Conceitos b\xe1sicos do Cucumber (Feature, Scenario, Step Definition)"}),"\n",(0,o.jsx)(n.li,{children:"Fundamentos do Serenity BDD"}),"\n",(0,o.jsx)(n.li,{children:"O Screenplay Pattern ou Page Object"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Se voc\xea \xe9 novo no Cucumber com Serenity, comece com ",(0,o.jsx)(n.a,{href:"cucumber-junit5",children:"Executando Cenarios Cucumber com JUnit 5"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"padroes-avancados-de-hooks",children:"Padroes Avancados de Hooks"}),"\n",(0,o.jsx)(n.p,{children:"Os Cucumber Hooks permitem que voc\xea execute c\xf3digo em pontos espec\xedficos do ciclo de vida do teste. Entender padr\xf5es avan\xe7ados de hooks \xe9 essencial para configura\xe7\xe3o e limpeza adequadas dos testes."}),"\n",(0,o.jsx)(n.h3,{id:"tipos-de-hooks-e-ordem-de-execucao",children:"Tipos de Hooks e Ordem de Execucao"}),"\n",(0,o.jsx)(n.p,{children:"O Cucumber fornece v\xe1rios tipos de hooks que executam em diferentes pontos:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'package com.example.hooks;\n\nimport io.cucumber.java.*;\n\npublic class LifecycleHooks {\n\n    // Executa uma vez antes de TODOS os cenarios (Cucumber 7+)\n    @BeforeAll\n    public static void beforeAllScenarios() {\n        System.out.println("Iniciando suite de testes");\n        // Inicializar recursos compartilhados, iniciar test containers, etc.\n    }\n\n    // Executa antes de CADA cenario\n    @Before\n    public void beforeScenario(Scenario scenario) {\n        System.out.println("Iniciando: " + scenario.getName());\n    }\n\n    // Executa antes de CADA passo\n    @BeforeStep\n    public void beforeStep() {\n        // Util para logging ou medicao de tempo\n    }\n\n    // Executa apos CADA passo\n    @AfterStep\n    public void afterStep() {\n        // Util para capturas de tela ou verificacao de estado\n    }\n\n    // Executa apos CADA cenario\n    @After\n    public void afterScenario(Scenario scenario) {\n        System.out.println("Finalizado: " + scenario.getName());\n        if (scenario.isFailed()) {\n            // Tratamento personalizado de falha\n        }\n    }\n\n    // Executa uma vez apos TODOS os cenarios (Cucumber 7+)\n    @AfterAll\n    public static void afterAllScenarios() {\n        System.out.println("Suite de testes completa");\n        // Limpar recursos compartilhados\n    }\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Ordem de execucao para um cenario:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"@BeforeAll (uma vez por execucao de teste)\n  \u2514\u2500> @Before\n        \u2514\u2500> @BeforeStep \u2192 Passo 1 \u2192 @AfterStep\n        \u2514\u2500> @BeforeStep \u2192 Passo 2 \u2192 @AfterStep\n        \u2514\u2500> @BeforeStep \u2192 Passo 3 \u2192 @AfterStep\n      @After\n@AfterAll (uma vez por execucao de teste)\n"})}),"\n",(0,o.jsx)(n.h3,{id:"tagged-hooks",children:"Tagged Hooks"}),"\n",(0,o.jsx)(n.p,{children:"Execute hooks apenas para cen\xe1rios com tags espec\xedficas:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class TaggedHooks {\n\n    @Before("@database")\n    public void setupDatabase() {\n        // Executa apenas para cenarios com tag @database\n        DatabaseTestUtils.resetDatabase();\n        DatabaseTestUtils.loadFixtures("test-data.sql");\n    }\n\n    @After("@database")\n    public void cleanupDatabase() {\n        DatabaseTestUtils.truncateAllTables();\n    }\n\n    @Before("@authenticated")\n    public void ensureAuthenticated() {\n        // Configurar sessao autenticada antes de cenarios que precisam\n    }\n\n    @Before("@slow")\n    public void increaseTimeouts() {\n        // Aumentar timeouts para cenarios de execucao lenta\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"expressoes-de-tags-em-hooks",children:"Expressoes de Tags em Hooks"}),"\n",(0,o.jsx)(n.p,{children:"Use express\xf5es de tags complexas para direcionar cen\xe1rios espec\xedficos:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class ConditionalHooks {\n\n    @Before("@ui and not @headless")\n    public void setupBrowserWithUI() {\n        // Apenas para testes de UI que precisam de navegador visivel\n    }\n\n    @Before("@api or @integration")\n    public void setupApiClient() {\n        // Para testes de API ou integracao\n    }\n\n    @Before("(@smoke or @regression) and not @wip")\n    public void setupForRealTests() {\n        // Para smoke ou regressao, mas pula work-in-progress\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"ordenacao-de-hooks",children:"Ordenacao de Hooks"}),"\n",(0,o.jsx)(n.p,{children:"Controle a ordem de execu\xe7\xe3o dos hooks quando voc\xea tem m\xfaltiplos hooks do mesmo tipo:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class OrderedHooks {\n\n    // Valores de order menores executam primeiro para hooks @Before\n    @Before(order = 1)\n    public void firstSetup() {\n        System.out.println("1. Inicializar ambiente de teste");\n    }\n\n    @Before(order = 2)\n    public void secondSetup() {\n        System.out.println("2. Configurar dados de teste");\n    }\n\n    @Before(order = 3)\n    public void thirdSetup() {\n        System.out.println("3. Navegar para aplicacao");\n    }\n\n    // Valores de order maiores executam primeiro para hooks @After (ordem reversa)\n    @After(order = 3)\n    public void firstCleanup() {\n        System.out.println("1. Capturar estado final");\n    }\n\n    @After(order = 2)\n    public void secondCleanup() {\n        System.out.println("2. Limpar dados de teste");\n    }\n\n    @After(order = 1)\n    public void thirdCleanup() {\n        System.out.println("3. Fechar recursos");\n    }\n}\n'})}),"\n",(0,o.jsxs)(n.admonition,{title:"Dica de Memoria para Ordem de Hooks",type:"tip",children:[(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"@Before"}),": N\xfameros menores executam primeiro (1, 2, 3...)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"@After"}),": N\xfameros maiores executam primeiro (...3, 2, 1)"]}),"\n"]}),(0,o.jsx)(n.p,{children:"Pense como um empilhamento: setup constr\xf3i, teardown desfaz na ordem reversa."})]}),"\n",(0,o.jsx)(n.h3,{id:"hooks-especificos-do-screenplay",children:"Hooks Especificos do Screenplay"}),"\n",(0,o.jsx)(n.p,{children:"Ao usar o Screenplay Pattern, configure os Actor em hooks:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"package com.example.hooks;\n\nimport io.cucumber.java.*;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.actors.OnStage;\nimport net.serenitybdd.screenplay.actors.OnlineCast;\nimport net.serenitybdd.screenplay.abilities.BrowseTheWeb;\n\npublic class ScreenplayHooks {\n\n    @Before\n    public void setTheStage() {\n        OnStage.setTheStage(new OnlineCast());\n    }\n\n    @After\n    public void drawTheCurtain() {\n        OnStage.drawTheCurtain();\n    }\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"Para testes baseados em Playwright:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"import net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\n\npublic class PlaywrightHooks {\n\n    @Before\n    public void setTheStage() {\n        OnStage.setTheStage(Cast.whereEveryoneCan(\n            BrowseTheWebWithPlaywright.usingTheDefaultConfiguration()\n        ));\n    }\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"tipos-de-parametros-personalizados",children:"Tipos de Parametros Personalizados"}),"\n",(0,o.jsx)(n.p,{children:"As express\xf5es Cucumber suportam tipos de par\xe2metros personalizados que transformam argumentos de passos em objetos de dom\xednio."}),"\n",(0,o.jsx)(n.h3,{id:"definindo-tipos-de-parametros-personalizados",children:"Definindo Tipos de Parametros Personalizados"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'package com.example.parameters;\n\nimport io.cucumber.java.ParameterType;\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\n\npublic class CustomParameters {\n\n    // Transforma "today", "tomorrow", "yesterday" em LocalDate\n    @ParameterType("today|tomorrow|yesterday|\\\\d{4}-\\\\d{2}-\\\\d{2}")\n    public LocalDate date(String value) {\n        return switch (value) {\n            case "today" -> LocalDate.now();\n            case "tomorrow" -> LocalDate.now().plusDays(1);\n            case "yesterday" -> LocalDate.now().minusDays(1);\n            default -> LocalDate.parse(value);\n        };\n    }\n\n    // Transforma valores monetarios como "$100.50" ou "\u20ac50"\n    @ParameterType("\\\\$[\\\\d,]+\\\\.?\\\\d*|\u20ac[\\\\d,]+\\\\.?\\\\d*|\xa3[\\\\d,]+\\\\.?\\\\d*")\n    public Money money(String value) {\n        String currency = value.substring(0, 1);\n        double amount = Double.parseDouble(value.substring(1).replace(",", ""));\n        return new Money(amount, currency);\n    }\n\n    // Transforma papeis de usuario\n    @ParameterType("admin|manager|user|guest")\n    public UserRole role(String value) {\n        return UserRole.valueOf(value.toUpperCase());\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"usando-parametros-personalizados-em-passos",children:"Usando Parametros Personalizados em Passos"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:"Feature: Order Management\n\n  Scenario: Schedule order for delivery\n    Given an order placed on 2024-01-15\n    When I schedule delivery for tomorrow\n    Then the delivery date should be after today\n\n  Scenario: Apply discount to order\n    Given an order totaling $150.00\n    When a manager applies a 10% discount\n    Then the new total should be $135.00\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class OrderSteps {\n\n    @Given("an order placed on {date}")\n    public void anOrderPlacedOn(LocalDate orderDate) {\n        // orderDate ja e um objeto LocalDate\n        theActorInTheSpotlight().remember("orderDate", orderDate);\n    }\n\n    @When("I schedule delivery for {date}")\n    public void scheduleDeliveryFor(LocalDate deliveryDate) {\n        theActorInTheSpotlight().attemptsTo(\n            ScheduleDelivery.forDate(deliveryDate)\n        );\n    }\n\n    @Given("an order totaling {money}")\n    public void anOrderTotaling(Money total) {\n        // total e um objeto Money com valor e moeda\n        theActorInTheSpotlight().attemptsTo(\n            CreateOrder.withTotal(total)\n        );\n    }\n\n    @When("a {role} applies a {int}% discount")\n    public void applyDiscount(UserRole role, int percentage) {\n        // role e um enum UserRole\n        theActorInTheSpotlight().attemptsTo(\n            ApplyDiscount.of(percentage).asA(role)\n        );\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"tipo-de-parametro-actor",children:"Tipo de Parametro Actor"}),"\n",(0,o.jsxs)(n.p,{children:["O Serenity BDD fornece um tipo de par\xe2metro ",(0,o.jsx)(n.code,{children:"{actor}"})," integrado:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:"Scenario: Multiple users interact\n  Given Alice has items in her cart\n  And Bob is browsing the catalog\n  When Alice proceeds to checkout\n  And Bob adds a laptop to his cart\n  Then Alice should see the payment page\n  And Bob should have 1 item in his cart\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class MultiActorSteps {\n\n    @Given("{actor} has items in her/his cart")\n    public void hasItemsInCart(Actor actor) {\n        actor.attemptsTo(\n            AddToCart.item("Sample Product")\n        );\n    }\n\n    @When("{actor} proceeds to checkout")\n    public void proceedsToCheckout(Actor actor) {\n        actor.attemptsTo(\n            NavigateTo.theCheckoutPage()\n        );\n    }\n\n    @Then("{actor} should have {int} item(s) in her/his cart")\n    public void shouldHaveItemsInCart(Actor actor, int count) {\n        actor.should(\n            seeThat(TheCart.itemCount(), equalTo(count))\n        );\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"padroes-complexos-de-data-table",children:"Padroes Complexos de Data Table"}),"\n",(0,o.jsx)(n.p,{children:"Data Tables s\xe3o poderosas para passar dados estruturados para os passos."}),"\n",(0,o.jsx)(n.h3,{id:"transformacoes-basicas-de-data-table",children:"Transformacoes Basicas de Data Table"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:"Scenario: Create multiple products\n  Given the following products exist:\n    | name        | price  | category    | inStock |\n    | Laptop      | 999.99 | Electronics | true    |\n    | Headphones  | 149.99 | Electronics | true    |\n    | Desk Chair  | 299.99 | Furniture   | false   |\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Usando DataTable diretamente:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@Given("the following products exist:")\npublic void createProducts(DataTable dataTable) {\n    List<Map<String, String>> rows = dataTable.asMaps();\n    for (Map<String, String> row : rows) {\n        String name = row.get("name");\n        double price = Double.parseDouble(row.get("price"));\n        String category = row.get("category");\n        boolean inStock = Boolean.parseBoolean(row.get("inStock"));\n        // Criar produto...\n    }\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Transformacao automatica para POJOs:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class Product {\n    private String name;\n    private double price;\n    private String category;\n    private boolean inStock;\n\n    // Getters e setters...\n}\n\n@Given("the following products exist:")\npublic void createProducts(List<Product> products) {\n    // Cucumber automaticamente transforma linhas em objetos Product\n    for (Product product : products) {\n        theActorInTheSpotlight().attemptsTo(\n            CreateProduct.withDetails(product)\n        );\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"datatabletype-para-transformacoes-personalizadas",children:"DataTableType para Transformacoes Personalizadas"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'package com.example.parameters;\n\nimport io.cucumber.java.DataTableType;\nimport java.util.Map;\n\npublic class DataTableTypes {\n\n    @DataTableType\n    public Product productEntry(Map<String, String> entry) {\n        Product product = new Product();\n        product.setName(entry.get("name"));\n        product.setPrice(parsePrice(entry.get("price")));\n        product.setCategory(entry.get("category"));\n        product.setInStock("yes".equalsIgnoreCase(entry.get("available")));\n\n        // Tratar campos opcionais\n        if (entry.containsKey("sku")) {\n            product.setSku(entry.get("sku"));\n        }\n\n        return product;\n    }\n\n    @DataTableType\n    public Address addressEntry(Map<String, String> entry) {\n        return Address.builder()\n            .street(entry.get("street"))\n            .city(entry.get("city"))\n            .state(entry.get("state"))\n            .zipCode(entry.get("zip"))\n            .country(entry.getOrDefault("country", "USA"))\n            .build();\n    }\n\n    private double parsePrice(String price) {\n        return Double.parseDouble(price.replace("$", "").replace(",", ""));\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"data-tables-verticais",children:"Data Tables Verticais"}),"\n",(0,o.jsx)(n.p,{children:"Para dados de entidade \xfanica, use tabelas verticais:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:"Scenario: Create a detailed user profile\n  Given a user with the following details:\n    | First Name    | John              |\n    | Last Name     | Smith             |\n    | Email         | john@example.com  |\n    | Phone         | +1-555-123-4567   |\n    | Date of Birth | 1990-05-15        |\n    | Role          | Premium Member    |\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@Given("a user with the following details:")\npublic void createUser(DataTable dataTable) {\n    Map<String, String> userData = dataTable.asMap();\n\n    UserProfile profile = UserProfile.builder()\n        .firstName(userData.get("First Name"))\n        .lastName(userData.get("Last Name"))\n        .email(userData.get("Email"))\n        .phone(userData.get("Phone"))\n        .dateOfBirth(LocalDate.parse(userData.get("Date of Birth")))\n        .role(userData.get("Role"))\n        .build();\n\n    theActorInTheSpotlight().attemptsTo(\n        CreateUserProfile.with(profile)\n    );\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"estruturas-de-dados-aninhadas",children:"Estruturas de Dados Aninhadas"}),"\n",(0,o.jsx)(n.p,{children:"Para dados complexos, combine tabelas com Scenario Outline:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:"Scenario Outline: Validate order with multiple items\n  Given a customer places an order with:\n    | product   | quantity | unit price |\n    | <item1>   | <qty1>   | <price1>   |\n    | <item2>   | <qty2>   | <price2>   |\n  When the order is processed\n  Then the order total should be <total>\n\n  Examples:\n    | item1     | qty1 | price1 | item2      | qty2 | price2 | total   |\n    | Laptop    | 1    | $999   | Mouse      | 2    | $25    | $1049   |\n    | Monitor   | 2    | $300   | Keyboard   | 1    | $75    | $675    |\n"})}),"\n",(0,o.jsx)(n.h2,{id:"doc-strings-para-conteudo-extenso",children:"Doc Strings para Conteudo Extenso"}),"\n",(0,o.jsx)(n.p,{children:"Use doc strings para conte\xfado de texto com m\xfaltiplas linhas:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:'Scenario: Submit a support ticket\n  Given the customer has a billing issue\n  When they submit a support ticket with:\n    """\n    Subject: Incorrect charge on my account\n\n    Hello,\n\n    I noticed an incorrect charge of $49.99 on my account\n    dated January 15th. I did not authorize this transaction.\n\n    Please investigate and refund the amount.\n\n    Thank you,\n    John Smith\n    Account: JS-12345\n    """\n  Then a ticket should be created with priority "High"\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@When("they submit a support ticket with:")\npublic void submitTicket(String ticketContent) {\n    theActorInTheSpotlight().attemptsTo(\n        SubmitSupportTicket.withContent(ticketContent)\n    );\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"doc-strings-com-tipos-de-conteudo",children:"Doc Strings com Tipos de Conteudo"}),"\n",(0,o.jsx)(n.p,{children:"Especifique o tipo de conte\xfado para dados estruturados:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:'Scenario: Create product via API\n  When I send a POST request to "/api/products" with:\n    """json\n    {\n      "name": "Wireless Keyboard",\n      "price": 79.99,\n      "category": "Electronics",\n      "specifications": {\n        "connection": "Bluetooth 5.0",\n        "battery": "AAA x 2",\n        "warranty": "2 years"\n      }\n    }\n    """\n  Then the response status should be 201\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@When("I send a POST request to {string} with:")\npublic void sendPostRequest(String endpoint, String jsonBody) {\n    theActorInTheSpotlight().attemptsTo(\n        Post.to(endpoint).with(request -> request\n            .contentType(ContentType.JSON)\n            .body(jsonBody)\n        )\n    );\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"compartilhando-estado-entre-passos",children:"Compartilhando Estado Entre Passos"}),"\n",(0,o.jsx)(n.p,{children:"Gerenciar estado entre passos \xe9 crucial para testes manteniveis."}),"\n",(0,o.jsx)(n.h3,{id:"usando-memoria-do-actor-screenplay-pattern",children:"Usando Memoria do Actor (Screenplay Pattern)"}),"\n",(0,o.jsx)(n.p,{children:"A abordagem recomendada com Screenplay:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class OrderSteps {\n\n    @Given("a customer creates an order")\n    public void createOrder() {\n        String orderId = UUID.randomUUID().toString();\n\n        theActorInTheSpotlight().attemptsTo(\n            CreateOrder.withId(orderId)\n        );\n\n        // Armazenar para passos posteriores\n        theActorInTheSpotlight().remember("orderId", orderId);\n    }\n\n    @When("the customer adds {string} to the order")\n    public void addItem(String item) {\n        String orderId = theActorInTheSpotlight().recall("orderId");\n\n        theActorInTheSpotlight().attemptsTo(\n            AddToOrder.item(item).forOrder(orderId)\n        );\n    }\n\n    @Then("the order should contain {int} items")\n    public void verifyItemCount(int expectedCount) {\n        String orderId = theActorInTheSpotlight().recall("orderId");\n\n        theActorInTheSpotlight().should(\n            seeThat(TheOrder.withId(orderId).itemCount(), equalTo(expectedCount))\n        );\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"memoria-tipada-com-generics",children:"Memoria Tipada com Generics"}),"\n",(0,o.jsx)(n.p,{children:"Crie chaves de mem\xf3ria type-safe:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class MemoryKeys {\n    public static final String ORDER_ID = "orderId";\n    public static final String CUSTOMER = "customer";\n    public static final String CART_ITEMS = "cartItems";\n}\n\n// Uso\nactor.remember(MemoryKeys.ORDER_ID, orderId);\nString id = actor.recall(MemoryKeys.ORDER_ID);\n'})}),"\n",(0,o.jsx)(n.h3,{id:"usando-world-objects-injecao-de-dependencia",children:"Usando World Objects (Injecao de Dependencia)"}),"\n",(0,o.jsx)(n.p,{children:"Para gerenciamento de estado complexo, use a inje\xe7\xe3o de depend\xeancia do Cucumber:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Com PicoContainer (padrao):"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'// Classe de estado compartilhado\npublic class TestContext {\n    private Order currentOrder;\n    private Customer currentCustomer;\n    private List<String> capturedErrors = new ArrayList<>();\n\n    public Order getCurrentOrder() { return currentOrder; }\n    public void setCurrentOrder(Order order) { this.currentOrder = order; }\n\n    public Customer getCurrentCustomer() { return currentCustomer; }\n    public void setCurrentCustomer(Customer customer) { this.currentCustomer = customer; }\n\n    public void addError(String error) { capturedErrors.add(error); }\n    public List<String> getErrors() { return capturedErrors; }\n}\n\n// Step Definitions recebem TestContext via injecao no construtor\npublic class OrderSteps {\n    private final TestContext context;\n\n    public OrderSteps(TestContext context) {\n        this.context = context;\n    }\n\n    @Given("a customer creates an order")\n    public void createOrder() {\n        Order order = new Order();\n        context.setCurrentOrder(order);\n    }\n\n    @When("an error occurs: {string}")\n    public void captureError(String error) {\n        context.addError(error);\n    }\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Adicione a dependencia do PicoContainer:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>io.cucumber</groupId>\n    <artifactId>cucumber-picocontainer</artifactId>\n    <version>${cucumber.version}</version>\n    <scope>test</scope>\n</dependency>\n"})}),"\n",(0,o.jsx)(n.h2,{id:"padroes-de-tratamento-de-erros",children:"Padroes de Tratamento de Erros"}),"\n",(0,o.jsx)(n.p,{children:"Trate erros com eleg\xe2ncia nas Step Definition."}),"\n",(0,o.jsx)(n.h3,{id:"padrao-de-erros-esperados",children:"Padrao de Erros Esperados"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:'Scenario: Prevent checkout with empty cart\n  Given a customer with an empty cart\n  When they attempt to checkout\n  Then they should see an error: "Your cart is empty"\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class ErrorSteps {\n\n    @When("they attempt to checkout")\n    public void attemptCheckout() {\n        try {\n            theActorInTheSpotlight().attemptsTo(\n                ProceedToCheckout.now()\n            );\n            // Armazenar que nenhum erro ocorreu\n            theActorInTheSpotlight().remember("checkoutError", null);\n        } catch (CheckoutException e) {\n            // Armazenar o erro para verificacao\n            theActorInTheSpotlight().remember("checkoutError", e.getMessage());\n        }\n    }\n\n    @Then("they should see an error: {string}")\n    public void shouldSeeError(String expectedError) {\n        String actualError = theActorInTheSpotlight().recall("checkoutError");\n        assertThat(actualError).isEqualTo(expectedError);\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"usando-question-para-estados-de-erro",children:"Usando Question para Estados de Erro"}),"\n",(0,o.jsx)(n.p,{children:"Uma abordagem mais limpa com Screenplay:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class ErrorMessage implements Question<String> {\n\n    public static Question<String> displayed() {\n        return new ErrorMessage();\n    }\n\n    @Override\n    public String answeredBy(Actor actor) {\n        return Text.of(".error-message").answeredBy(actor);\n    }\n}\n\n// Nos passos\n@Then("they should see an error: {string}")\npublic void shouldSeeError(String expectedError) {\n    theActorInTheSpotlight().should(\n        seeThat(ErrorMessage.displayed(), equalTo(expectedError))\n    );\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"soft-assertions-para-multiplas-verificacoes",children:"Soft Assertions para Multiplas Verificacoes"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@Then("the order summary should show:")\npublic void verifyOrderSummary(DataTable expected) {\n    Actor actor = theActorInTheSpotlight();\n\n    actor.attemptsTo(\n        Ensure.that(OrderSummary.subtotal()).isEqualTo(expected.get("subtotal")),\n        Ensure.that(OrderSummary.tax()).isEqualTo(expected.get("tax")),\n        Ensure.that(OrderSummary.shipping()).isEqualTo(expected.get("shipping")),\n        Ensure.that(OrderSummary.total()).isEqualTo(expected.get("total"))\n    );\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"organizacao-de-step-definitions",children:"Organizacao de Step Definitions"}),"\n",(0,o.jsx)(n.h3,{id:"uma-classe-por-area-de-funcionalidade",children:"Uma Classe Por Area de Funcionalidade"}),"\n",(0,o.jsx)(n.p,{children:"Organize Step Definition por \xe1rea de dom\xednio:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"src/test/java/com/example/stepdefinitions/\n\u251c\u2500\u2500 authentication/\n\u2502   \u251c\u2500\u2500 LoginSteps.java\n\u2502   \u251c\u2500\u2500 RegistrationSteps.java\n\u2502   \u2514\u2500\u2500 PasswordResetSteps.java\n\u251c\u2500\u2500 shopping/\n\u2502   \u251c\u2500\u2500 CartSteps.java\n\u2502   \u251c\u2500\u2500 CheckoutSteps.java\n\u2502   \u2514\u2500\u2500 PaymentSteps.java\n\u251c\u2500\u2500 common/\n\u2502   \u251c\u2500\u2500 NavigationSteps.java\n\u2502   \u2514\u2500\u2500 VerificationSteps.java\n\u2514\u2500\u2500 hooks/\n    \u251c\u2500\u2500 ScreenplayHooks.java\n    \u2514\u2500\u2500 DatabaseHooks.java\n"})}),"\n",(0,o.jsx)(n.h3,{id:"passos-enxutos-task-ricas",children:"Passos Enxutos, Task Ricas"}),"\n",(0,o.jsx)(n.p,{children:"Mantenha as Step Definition enxutas delegando para Task do Screenplay:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'// Ruim: Logica na step definition\n@When("the customer adds {string} to their cart")\npublic void addToCart(String productName) {\n    WebDriver driver = getDriver();\n    driver.findElement(By.cssSelector(".search-input")).sendKeys(productName);\n    driver.findElement(By.cssSelector(".search-button")).click();\n    WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));\n    wait.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(".product-card")));\n    driver.findElement(By.cssSelector(".add-to-cart-button")).click();\n    wait.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(".cart-updated")));\n}\n\n// Bom: Delegar para Task\n@When("the customer adds {string} to their cart")\npublic void addToCart(String productName) {\n    theActorInTheSpotlight().attemptsTo(\n        AddToCart.theProduct(productName)\n    );\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"padroes-de-passos-reutilizaveis",children:"Padroes de Passos Reutilizaveis"}),"\n",(0,o.jsx)(n.p,{children:"Crie passos gen\xe9ricos que funcionem em v\xe1rias Feature:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class CommonSteps {\n\n    @Given("{actor} is on the {word} page")\n    public void navigateToPage(Actor actor, String pageName) {\n        actor.attemptsTo(\n            NavigateTo.thePage(pageName)\n        );\n    }\n\n    @Then("{actor} should see the message {string}")\n    public void shouldSeeMessage(Actor actor, String message) {\n        actor.should(\n            seeThat(TheVisibleText.onPage(), containsString(message))\n        );\n    }\n\n    @Then("{actor} should see {int} {word} displayed")\n    public void shouldSeeCount(Actor actor, int count, String elementType) {\n        actor.should(\n            seeThat(TheCount.of(elementType), equalTo(count))\n        );\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"boas-praticas-para-background",children:"Boas Praticas para Background"}),"\n",(0,o.jsx)(n.h3,{id:"mantenha-os-background-simples",children:"Mantenha os Background Simples"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:'# Bom: Configuracao simples e essencial\nBackground:\n  Given the user is logged in as "admin"\n\n# Ruim: Muito detalhe no background\nBackground:\n  Given a user with email "admin@example.com" exists\n  And the user has password "SecurePass123!"\n  And the user has role "administrator"\n  And the user\'s account is active\n  And the user has accepted terms of service\n  When the user navigates to the login page\n  And enters their credentials\n  And clicks the login button\n  Then they should be on the dashboard\n'})}),"\n",(0,o.jsx)(n.h3,{id:"use-tags-para-compartilhar-background",children:"Use Tags para Compartilhar Background"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:'@authenticated\nFeature: Shopping Cart\n\n  # Esta feature assume que o usuario esta logado\n  # O hook @authenticated trata o login\n\n  Scenario: Add item to cart\n    When I search for "laptop"\n    And I add the first result to my cart\n    Then my cart should have 1 item\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@Before("@authenticated")\npublic void loginAsDefaultUser() {\n    OnStage.theActorCalled("Customer").attemptsTo(\n        Login.withCredentials("testuser", "password123")\n    );\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"padroes-de-scenario-outline",children:"Padroes de Scenario Outline"}),"\n",(0,o.jsx)(n.h3,{id:"examples-dinamicos-com-tags",children:"Examples Dinamicos com Tags"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:'@smoke\nScenario Outline: Quick login validation\n  Given I am on the login page\n  When I login as "<userType>"\n  Then I should see the "<dashboard>" dashboard\n\n  @admin\n  Examples: Admin Users\n    | userType     | dashboard    |\n    | super_admin  | Super Admin  |\n    | site_admin   | Site Admin   |\n\n  @regular\n  Examples: Regular Users\n    | userType     | dashboard    |\n    | premium      | Premium      |\n    | standard     | Standard     |\n'})}),"\n",(0,o.jsx)(n.h3,{id:"tabelas-de-examples-de-fontes-externas",children:"Tabelas de Examples de Fontes Externas"}),"\n",(0,o.jsx)(n.p,{children:"Carregue examples de arquivos ou bancos de dados:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class DynamicExamples {\n\n    @ParameterType(".*\\\\.csv")\n    public List<Map<String, String>> csvFile(String filename) {\n        return CsvReader.read("src/test/resources/data/" + filename);\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"integracao-screenplay-vs-page-object",children:"Integracao: Screenplay vs Page Object"}),"\n",(0,o.jsx)(n.p,{children:"Voc\xea pode usar qualquer padr\xe3o com Cucumber, ou at\xe9 mesmo mistur\xe1-los."}),"\n",(0,o.jsx)(n.h3,{id:"abordagem-pura-com-screenplay",children:"Abordagem Pura com Screenplay"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class CheckoutSteps {\n\n    @When("{actor} completes checkout with card ending in {string}")\n    public void completeCheckout(Actor actor, String lastFourDigits) {\n        actor.attemptsTo(\n            CompleteCheckout.withCard(lastFourDigits)\n        );\n    }\n\n    @Then("{actor} should receive order confirmation")\n    public void shouldReceiveConfirmation(Actor actor) {\n        actor.should(\n            seeThat(OrderConfirmation.isDisplayed(), is(true)),\n            seeThat(OrderConfirmation.orderNumber(), not(emptyString()))\n        );\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"abordagem-com-page-object",children:"Abordagem com Page Object"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class CheckoutSteps {\n\n    @Steps\n    CheckoutPage checkoutPage;\n\n    @Steps\n    ConfirmationPage confirmationPage;\n\n    @When("the user completes checkout with card ending in {string}")\n    public void completeCheckout(String lastFourDigits) {\n        checkoutPage.enterCardEndingIn(lastFourDigits);\n        checkoutPage.submitOrder();\n    }\n\n    @Then("the user should receive order confirmation")\n    public void shouldReceiveConfirmation() {\n        assertThat(confirmationPage.isDisplayed()).isTrue();\n        assertThat(confirmationPage.getOrderNumber()).isNotEmpty();\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"abordagem-hibrida",children:"Abordagem Hibrida"}),"\n",(0,o.jsx)(n.p,{children:"Use Page Object para p\xe1ginas simples, Screenplay para fluxos complexos:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class HybridSteps {\n\n    @Steps\n    LoginPage loginPage;  // Pagina simples, use Page Object\n\n    @When("the user logs in with valid credentials")\n    public void login() {\n        loginPage.loginAs("user@example.com", "password");\n    }\n\n    @When("{actor} completes the multi-step registration")\n    public void completeRegistration(Actor actor) {\n        // Fluxo complexo, use Screenplay\n        actor.attemptsTo(\n            CompleteRegistration.withDefaults()\n        );\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"otimizacao-de-performance",children:"Otimizacao de Performance"}),"\n",(0,o.jsx)(n.h3,{id:"execucao-paralela-com-estado-isolado",children:"Execucao Paralela com Estado Isolado"}),"\n",(0,o.jsx)(n.p,{children:"Certifique-se de que seus hooks e gerenciamento de estado s\xe3o thread-safe:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"public class ThreadSafeHooks {\n\n    // ThreadLocal para execucao paralela\n    private static final ThreadLocal<TestContext> contextHolder = new ThreadLocal<>();\n\n    @Before\n    public void setUp() {\n        contextHolder.set(new TestContext());\n    }\n\n    @After\n    public void tearDown() {\n        contextHolder.remove();\n    }\n\n    public static TestContext getContext() {\n        return contextHolder.get();\n    }\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"inicializacao-lazy",children:"Inicializacao Lazy"}),"\n",(0,o.jsx)(n.p,{children:"N\xe3o inicialize recursos at\xe9 que sejam necess\xe1rios:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'public class LazyDriverHooks {\n\n    @Before("@ui")\n    public void initializeDriver() {\n        // Criar navegador apenas para testes de UI\n        OnStage.setTheStage(new OnlineCast());\n    }\n\n    @Before("@api")\n    public void initializeApiClient() {\n        // Criar cliente de API apenas para testes de API\n        OnStage.setTheStage(Cast.whereEveryoneCan(\n            CallAnApi.at(baseUrl)\n        ));\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"dicas-de-depuracao",children:"Dicas de Depuracao"}),"\n",(0,o.jsx)(n.h3,{id:"logging-verboso-em-hooks",children:"Logging Verboso em Hooks"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@BeforeStep\npublic void logStepStart() {\n    System.out.println(">>> Iniciando passo em " + LocalDateTime.now());\n}\n\n@AfterStep\npublic void logStepEnd(Scenario scenario) {\n    System.out.println("<<< Passo completado, status do cenario: " + scenario.getStatus());\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"capturar-estado-em-falha",children:"Capturar Estado em Falha"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@After\npublic void captureOnFailure(Scenario scenario) {\n    if (scenario.isFailed()) {\n        // Capturar screenshot\n        byte[] screenshot = theActorInTheSpotlight()\n            .usingAbilityTo(BrowseTheWeb.class)\n            .takeScreenshot();\n        scenario.attach(screenshot, "image/png", "failure-screenshot");\n\n        // Capturar codigo fonte da pagina\n        String pageSource = theActorInTheSpotlight()\n            .asksFor(ThePageSource.current());\n        scenario.attach(pageSource, "text/html", "page-source");\n\n        // Capturar console do navegador\n        List<String> consoleLogs = theActorInTheSpotlight()\n            .asksFor(ConsoleMessages.all());\n        scenario.attach(String.join("\\n", consoleLogs), "text/plain", "console-logs");\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"resumo",children:"Resumo"}),"\n",(0,o.jsx)(n.p,{children:"Estes padr\xf5es avan\xe7ados ajudam voc\xea a construir suites de teste Cucumber manteniveis e escal\xe1veis:"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Padr\xe3o"}),(0,o.jsx)(n.th,{children:"Quando Usar"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Tagged Hooks"}),(0,o.jsx)(n.td,{children:"Setup/teardown condicional baseado em tags do cen\xe1rio"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Ordered Hooks"}),(0,o.jsx)(n.td,{children:"Controlar ordem de execu\xe7\xe3o de m\xfaltiplos hooks"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Custom Parameters"}),(0,o.jsx)(n.td,{children:"Transformar argumentos de passos em objetos de dom\xednio"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Data Table Types"}),(0,o.jsx)(n.td,{children:"Transforma\xe7\xe3o autom\xe1tica de linhas de tabela"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Actor Memory"}),(0,o.jsx)(n.td,{children:"Compartilhar estado entre passos (Screenplay)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"World Objects"}),(0,o.jsx)(n.td,{children:"Estado complexo com inje\xe7\xe3o de depend\xeancia"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Thin Steps"}),(0,o.jsx)(n.td,{children:"Manter passos m\xednimos, delegar para Task"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Soft Assertions"}),(0,o.jsx)(n.td,{children:"Verificar m\xfaltiplas condi\xe7\xf5es antes de falhar"})]})]})]}),"\n",(0,o.jsx)(n.h2,{id:"proximos-passos",children:"Proximos Passos"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Explore ",(0,o.jsx)(n.a,{href:"parallel-execution",children:"Execucao Paralela"})," para execu\xe7\xf5es de teste mais r\xe1pidas"]}),"\n",(0,o.jsxs)(n.li,{children:["Aprenda sobre ",(0,o.jsx)(n.a,{href:"configuration-reference",children:"Configuracao do Cucumber"})]}),"\n",(0,o.jsxs)(n.li,{children:["Domine o ",(0,o.jsx)(n.a,{href:"/docs/screenplay/screenplay_fundamentals",children:"Screenplay Pattern"})]}),"\n",(0,o.jsxs)(n.li,{children:["Revise ",(0,o.jsx)(n.a,{href:"/docs/reporting/the_serenity_reports",children:"Relatorios do Serenity"})," para documenta\xe7\xe3o rica"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"recursos-adicionais",children:"Recursos Adicionais"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://cucumber.io/docs/cucumber/cucumber-expressions/",children:"Documentacao de Expressoes Cucumber"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://cucumber.io/docs/cucumber/api/#hooks",children:"Referencia de Cucumber Hooks"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/docs/screenplay/screenplay_fundamentals",children:"Guia do Screenplay do Serenity BDD"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453(e,n,a){a.d(n,{R:()=>s,x:()=>i});var r=a(6540);const o={},t=r.createContext(o);function s(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);
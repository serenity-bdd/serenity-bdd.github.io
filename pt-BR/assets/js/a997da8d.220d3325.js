"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[2396],{1843(e,o,s){s.d(o,{A:()=>r});const r=s.p+"assets/images/custom-report-fields-52b92f696936c0519f9e76fb62abafcf.png"},2582(e,o,s){s.r(o),s.d(o,{assets:()=>t,contentTitle:()=>d,default:()=>l,frontMatter:()=>n,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"reporting/reports_custom_info","title":"Campos Personalizados em Relat\xf3rios","description":"Relat\xf3rios com Campos Personalizados","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/reporting/reports-custom-info.md","sourceDirName":"reporting","slug":"/reporting/reports_custom_info","permalink":"/pt-BR/docs/reporting/reports_custom_info","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/reporting/reports-custom-info.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"reports_custom_info","title":"Campos Personalizados em Relat\xf3rios","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Integrando com o JIRA","permalink":"/pt-BR/docs/reporting/integrating_with_jira"},"next":{"title":"Selenium Grid","permalink":"/pt-BR/docs/cloud/selenium-grid"}}');var a=s(4848),i=s(8453);const n={id:"reports_custom_info",title:"Campos Personalizados em Relat\xf3rios",sidebar_position:5},d=void 0,t={},p=[{value:"Relat\xf3rios com Campos Personalizados",id:"relat\xf3rios-com-campos-personalizados",level:2},{value:"Acessando vari\xe1veis do sistema",id:"acessando-vari\xe1veis-do-sistema",level:3},{value:"Sobrescrevendo valores de propriedades",id:"sobrescrevendo-valores-de-propriedades",level:3},{value:"Usando valores padr\xe3o",id:"usando-valores-padr\xe3o",level:4},{value:"Ordenando as propriedades personalizadas",id:"ordenando-as-propriedades-personalizadas",level:3},{value:"Um exemplo completo",id:"um-exemplo-completo",level:3},{value:"Informa\xe7\xf5es de Build Personalizadas",id:"informa\xe7\xf5es-de-build-personalizadas",level:2},{value:"Definindo informa\xe7\xf5es do build programaticamente",id:"definindo-informa\xe7\xf5es-do-build-programaticamente",level:2}];function c(e){const o={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.h2,{id:"relat\xf3rios-com-campos-personalizados",children:"Relat\xf3rios com Campos Personalizados"}),"\n",(0,a.jsx)(o.p,{children:"Campos personalizados podem ser inclu\xeddos nos relat\xf3rios, usando valores que s\xe3o obtidos das vari\xe1veis de ambiente ou passados para o build via propriedades do sistema. Isso pode ser \xfatil se voc\xea quiser incluir a vers\xe3o do produto ou do build, o ambiente em que os testes foram executados, ou a data da execu\xe7\xe3o do teste."}),"\n",(0,a.jsxs)(o.p,{children:["Voc\xea pode adicionar campos personalizados ao seu relat\xf3rio definindo propriedades do sistema com o prefixo especial ",(0,a.jsx)(o.code,{children:"report.customfields"}),". Estas podem ir no seu arquivo ",(0,a.jsx)(o.code,{children:"serenity.properties"})," no diret\xf3rio raiz do seu projeto, ou voc\xea pode pass\xe1-las como op\xe7\xf5es de linha de comando."]}),"\n",(0,a.jsxs)(o.p,{children:["Por exemplo, voc\xea poderia adicionar as seguintes propriedades ao seu arquivo ",(0,a.jsx)(o.code,{children:"serenity.properties"}),"."]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"report.customfields.environment = Integration\nreport.customfields.ApplicationVersion = 1.2.3\n"})}),"\n",(0,a.jsx)(o.p,{children:"Isso produziria um relat\xf3rio contendo esses valores, como mostrado aqui:"}),"\n",(0,a.jsx)(o.p,{children:(0,a.jsx)(o.img,{alt:"Campos personalizados aparecendo no relat\xf3rio de resumo HTML",src:s(1843).A+"",width:"1240",height:"980"})}),"\n",(0,a.jsx)(o.h3,{id:"acessando-vari\xe1veis-do-sistema",children:"Acessando vari\xe1veis do sistema"}),"\n",(0,a.jsxs)(o.p,{children:["Tamb\xe9m podemos acessar quaisquer vari\xe1veis do sistema \xe0s quais o Java tem acesso. Por exemplo, poder\xedamos incluir o nome do usu\xe1rio que executou o teste com a vari\xe1vel do sistema ",(0,a.jsx)(o.code,{children:"${USER}"}),":"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"report.customfields.user = ${USER}\n"})}),"\n",(0,a.jsx)(o.p,{children:"Esta propriedade resultaria em um relat\xf3rio como o seguinte:"}),"\n",(0,a.jsx)(o.p,{children:(0,a.jsx)(o.img,{alt:"Campos personalizados tamb\xe9m podem incluir vari\xe1veis do sistema",src:s(6213).A+"",width:"1322",height:"492"})}),"\n",(0,a.jsxs)(o.p,{children:["Nem todas as propriedades do sistema est\xe3o dispon\xedveis para o Java. Por exemplo, em sistemas Linux, a vari\xe1vel ",(0,a.jsx)(o.code,{children:"$HOST"})," fornece o nome da m\xe1quina local. Poder\xedamos incluir isso no nosso relat\xf3rio adicionando a seguinte propriedade:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"report.customfields.host = ${HOST}\n"})}),"\n",(0,a.jsx)(o.p,{children:"No entanto, como esta vari\xe1vel n\xe3o est\xe1 dispon\xedvel para o Java, precisar\xedamos pass\xe1-la para o Serenity pela linha de comando, assim:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"mvn serenity:aggregate -DHOST=$HOST\n"})}),"\n",(0,a.jsx)(o.h3,{id:"sobrescrevendo-valores-de-propriedades",children:"Sobrescrevendo valores de propriedades"}),"\n",(0,a.jsx)(o.p,{children:"[[custom-report-fields-with-provided-values]]\n.Voc\xea pode passar propriedades do sistema pela linha de comando\nimage::custom-reports-with-provided-property.png[]"}),"\n",(0,a.jsxs)(o.p,{children:["Voc\xea pode, \xe9 claro, passar outras propriedades, para sobrescrever as do seu arquivo ",(0,a.jsx)(o.code,{children:"serenity.properties"}),". Aqui sobrescrevemos a vers\xe3o da aplica\xe7\xe3o:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"mvn serenity:aggregate -DHOST=$HOST -Dreport.customfields.ApplicationVersion=1.2.4\n"})}),"\n",(0,a.jsxs)(o.p,{children:["Mas uma solu\xe7\xe3o mais elegante, se voc\xea sabe que sempre estar\xe1 passando uma vari\xe1vel, \xe9 usar uma vari\xe1vel mais curta no seu arquivo ",(0,a.jsx)(o.code,{children:"serenity.properties"})," e ent\xe3o pass\xe1-la. Por exemplo, aqui usamos a propriedade ",(0,a.jsx)(o.code,{children:"environment"})," para exibir o ambiente atual nas propriedades personalizadas:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"report.customfields.environment = ${environment}\n"})}),"\n",(0,a.jsx)(o.p,{children:"Podemos definir este valor pela linha de comando como mostrado aqui:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-bash",children:"mvn serenity:aggregate -DHOST=$HOST -Denvironment=INT5\n"})}),"\n",(0,a.jsx)(o.h4,{id:"usando-valores-padr\xe3o",children:"Usando valores padr\xe3o"}),"\n",(0,a.jsx)(o.p,{children:"Se uma vari\xe1vel de ambiente n\xe3o existir, voc\xea pode especificar um valor de fallback."}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:'report.customfields.user = ${USER:-Unknown}\nreport.customfields.host = ${HOST:-} # Em branco em vez dos caracteres literais "${HOST}"\n'})}),"\n",(0,a.jsxs)(o.p,{children:["O mecanismo por tr\xe1s da substitui\xe7\xe3o: ",(0,a.jsxs)(o.a,{href:"https://commons.apache.org/proper/commons-text/apidocs/org/apache/commons/text/StringSubstitutor.html",children:["Apache Commons ",(0,a.jsx)(o.code,{children:"StringSubstitutor"})]})]}),"\n",(0,a.jsx)(o.h3,{id:"ordenando-as-propriedades-personalizadas",children:"Ordenando as propriedades personalizadas"}),"\n",(0,a.jsxs)(o.p,{children:["Por padr\xe3o, os campos aparecer\xe3o em uma ordem arbitr\xe1ria. Voc\xea pode for\xe7ar os campos a aparecerem em uma ordem pr\xe9-determinada usando o campo ",(0,a.jsx)(o.code,{children:"report.customfields.order"}),":"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"report.customfields.order=ApplicationVersion,environment,user,host\n"})}),"\n",(0,a.jsx)(o.h3,{id:"um-exemplo-completo",children:"Um exemplo completo"}),"\n",(0,a.jsx)(o.p,{children:"Um exemplo completo dessas propriedades e seus v\xe1rios usos \xe9 mostrado aqui:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"report.customfields.ApplicationVersion = 1.2.3\nreport.customfields.environment = ${environment}\nreport.customfields.user = ${USER}\nreport.customfields.host = ${HOST}\nreport.customfields.order=ApplicationVersion,environment,user,host\n"})}),"\n",(0,a.jsx)(o.h2,{id:"informa\xe7\xf5es-de-build-personalizadas",children:"Informa\xe7\xf5es de Build Personalizadas"}),"\n",(0,a.jsxs)(o.p,{children:["Voc\xea tamb\xe9m pode adicionar seus pr\xf3prios campos na tela de Informa\xe7\xf5es do Build, usando as propriedades ",(0,a.jsx)(o.code,{children:"sysinfo.*"}),".\nAs propriedades ",(0,a.jsx)(o.code,{children:"sysinfo.*"})," permitem definir campos e valores que aparecer\xe3o na p\xe1gina de Informa\xe7\xf5es do Build. Para combina\xe7\xf5es simples de campo-valor, o campo aparece ao lado dos outros valores na tela de Informa\xe7\xf5es do Build:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"sysinfo.lead = Daisy\n"})}),"\n",(0,a.jsxs)(o.p,{children:["Voc\xea pode usar express\xf5es Groovy para acessar propriedades do sistema (que voc\xea pode passar pela linha de comando). A propriedade ",(0,a.jsx)(o.code,{children:"env"})," d\xe1 acesso \xe0s vari\xe1veis de ambiente atuais. Por exemplo, para exibir o n\xfamero do build atual do Jenkins, voc\xea poderia incluir a seguinte linha:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:'sysinfo.build = "${env.BUILD_NUMBER}"\n'})}),"\n",(0,a.jsxs)(o.p,{children:["Voc\xea tamb\xe9m pode agrupar propriedades personalizadas em se\xe7\xf5es com subt\xedtulos. Um exemplo de tal configura\xe7\xe3o no arquivo ",(0,a.jsx)(o.code,{children:"serenity.conf"})," \xe9 mostrado abaixo:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:'sysinfo {\n  lead = Daisy\n  build = "${env.BUILD_NUMBER}"\n  Test Run {\n    Run By = "${env.USER}"\n    Java Version = "${java.version}"\n  }\n}\n'})}),"\n",(0,a.jsx)(o.p,{children:"A tela correspondente de Informa\xe7\xf5es do Build \xe9 mostrada abaixo:"}),"\n",(0,a.jsx)(o.p,{children:(0,a.jsx)(o.img,{alt:"Detalhes personalizados de Informa\xe7\xf5es do Build",src:s(4420).A+"",width:"2144",height:"924"})}),"\n",(0,a.jsx)(o.h2,{id:"definindo-informa\xe7\xf5es-do-build-programaticamente",children:"Definindo informa\xe7\xf5es do build programaticamente"}),"\n",(0,a.jsxs)(o.p,{children:["Voc\xea tamb\xe9m pode usar a classe ",(0,a.jsx)(o.code,{children:"BuildInfo"})," para adicionar informa\xe7\xf5es \xe0 p\xe1gina de Informa\xe7\xf5es do Build programaticamente. Simplesmente defina a se\xe7\xe3o, e adicione quantos pares de nome/valor de propriedade voc\xea quiser. Voc\xea pode ver um exemplo aqui:"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{className:"language-java",children:'BuildInfo.section("Toggles").setProperty("toggle-custom-ads-v2", "on");\nBuildInfo.section("Toggles").setProperty("toggle-user-feedback", "on");\n\nBuildInfo.section("Versions").setProperty("game-history-service", "1.2.3");\nBuildInfo.section("Versions").setProperty("player-service", "3.4.5");\nBuildInfo.section("Versions").setProperty("related-products-service", "2.3.4");\n'})}),"\n",(0,a.jsx)(o.p,{children:(0,a.jsx)(o.img,{alt:"Detalhes personalizados de Informa\xe7\xf5es do Build",src:s(8510).A+"",width:"2692",height:"1550"})})]})}function l(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,a.jsx)(o,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},4420(e,o,s){s.d(o,{A:()=>r});const r=s.p+"assets/images/build-info-2daa81eba4d528597f5c7d24e9988ab5.png"},6213(e,o,s){s.d(o,{A:()=>r});const r=s.p+"assets/images/custom-reports-including-a-system-variable-f80f91af608be8de5ca006821f66676e.png"},8453(e,o,s){s.d(o,{R:()=>n,x:()=>d});var r=s(6540);const a={},i=r.createContext(a);function n(e){const o=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function d(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:n(e.components),r.createElement(i.Provider,{value:o},e.children)}},8510(e,o,s){s.d(o,{A:()=>r});const r=s.p+"assets/images/custom-build-info-5d970b8f7d9acdd7a50df855ef7096f5.png"}}]);
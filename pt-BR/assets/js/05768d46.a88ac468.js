"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[4419],{2101(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>l,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"guide/maven","title":"Usando Maven com Serenity","description":"Maven \xe9 a ferramenta de build recomendada para o Serenity BDD.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/guide/maven.md","sourceDirName":"guide","slug":"/guide/maven","permalink":"/pt-BR/docs/guide/maven","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/guide/maven.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"maven","title":"Usando Maven com Serenity","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Criando um Novo Projeto","permalink":"/pt-BR/docs/guide/getting_started"},"next":{"title":"Bibliotecas de Passos","permalink":"/pt-BR/docs/guide/step_libraries"}}');var s=r(4848),o=r(8453);const t={id:"maven",title:"Usando Maven com Serenity",sidebar_position:3},a="Integrando o Serenity BDD em um projeto Maven",d={},c=[{value:"Vers\xf5es Recomendadas",id:"vers\xf5es-recomendadas",level:2},{value:"Depend\xeancias Principais",id:"depend\xeancias-principais",level:2},{value:"Depend\xeancias do Serenity JUnit 5 (Recomendado)",id:"depend\xeancias-do-serenity-junit-5-recomendado",level:2},{value:"Depend\xeancias do Serenity JUnit 4 (Obsoleto)",id:"depend\xeancias-do-serenity-junit-4-obsoleto",level:2},{value:"Depend\xeancias do Serenity Cucumber",id:"depend\xeancias-do-serenity-cucumber",level:2},{value:"Depend\xeancias do Cucumber com JUnit 5 (Recomendado)",id:"depend\xeancias-do-cucumber-com-junit-5-recomendado",level:2},{value:"Depend\xeancias do Cucumber com JUnit 4 (Obsoleto)",id:"depend\xeancias-do-cucumber-com-junit-4-obsoleto",level:2},{value:"Screenplay",id:"screenplay",level:2},{value:"Executando Testes com Maven Failsafe",id:"executando-testes-com-maven-failsafe",level:2},{value:"Executando Testes JUnit 5 e Cucumber Juntos",id:"executando-testes-junit-5-e-cucumber-juntos",level:3},{value:"O Plugin Maven do Serenity",id:"o-plugin-maven-do-serenity",level:2},{value:"Verificando arquivos de feature Gherkin",id:"verificando-arquivos-de-feature-gherkin",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"integrando-o-serenity-bdd-em-um-projeto-maven",children:"Integrando o Serenity BDD em um projeto Maven"})}),"\n",(0,s.jsx)(n.p,{children:"Maven \xe9 a ferramenta de build recomendada para o Serenity BDD."}),"\n",(0,s.jsxs)(n.p,{children:["Voc\xea pode adicionar o Serenity BDD a um projeto Maven existente adicionando as depend\xeancias correspondentes ao seu arquivo ",(0,s.jsx)(n.code,{children:"pom.xml"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"vers\xf5es-recomendadas",children:"Vers\xf5es Recomendadas"}),"\n",(0,s.jsx)(n.p,{children:"Primeiro, defina as vers\xf5es recomendadas na se\xe7\xe3o de propriedades:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"<properties>\n    <serenity.version>5.2.2</serenity.version>\n    <junit5.version>6.0.1</junit5.version>\n    <cucumber.version>7.33.0</cucumber.version>\n</properties>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"depend\xeancias-principais",children:"Depend\xeancias Principais"}),"\n",(0,s.jsx)(n.p,{children:"Todos os projetos Serenity BDD precisam da seguinte depend\xeancia principal:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"<dependency>\n    <groupId>net.serenity-bdd</groupId>\n    <artifactId>serenity-core</artifactId>\n    <version>${serenity.version}</version>\n    <scope>test</scope>\n</dependency>\n"})}),"\n",(0,s.jsx)(n.p,{children:"Voc\xea tamb\xe9m precisar\xe1 de um executor de testes, que normalmente ser\xe1 JUnit 5 (recomendado) ou Cucumber. Observe que o JUnit 4 est\xe1 obsoleto a partir do Serenity 5.0.0."}),"\n",(0,s.jsx)(n.h2,{id:"depend\xeancias-do-serenity-junit-5-recomendado",children:"Depend\xeancias do Serenity JUnit 5 (Recomendado)"}),"\n",(0,s.jsx)(n.p,{children:"Para usar o JUnit 5 voc\xea precisar\xe1 da seguinte depend\xeancia:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"<dependency>\n    <groupId>net.serenity-bdd</groupId>\n    <artifactId>serenity-junit5</artifactId>\n    <version>${serenity.version}</version>\n    <scope>test</scope>\n</dependency>\n"})}),"\n",(0,s.jsx)(n.p,{children:"Voc\xea tamb\xe9m precisar\xe1 das depend\xeancias do JUnit 5, por exemplo:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"<dependency>\n    <groupId>org.junit.jupiter</groupId>\n    <artifactId>junit-jupiter-api</artifactId>\n    <version>${junit5.version}</version>\n    <scope>test</scope>\n</dependency>\n<dependency>\n    <groupId>org.junit.jupiter</groupId>\n    <artifactId>junit-jupiter-engine</artifactId>\n    <version>${junit5.version}</version>\n    <scope>test</scope>\n</dependency>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"depend\xeancias-do-serenity-junit-4-obsoleto",children:"Depend\xeancias do Serenity JUnit 4 (Obsoleto)"}),"\n",(0,s.jsx)(n.admonition,{title:"JUnit 4 Obsoleto",type:"warning",children:(0,s.jsx)(n.p,{children:"O suporte ao JUnit 4 est\xe1 obsoleto a partir do Serenity 5.0.0 e ser\xe1 removido no Serenity 6.0.0. Por favor, migre para o JUnit 5 (veja acima)."})}),"\n",(0,s.jsx)(n.p,{children:"Se voc\xea ainda est\xe1 usando o JUnit 4, precisar\xe1 da seguinte depend\xeancia:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"<dependency>\n    <groupId>net.serenity-bdd</groupId>\n    <artifactId>serenity-junit</artifactId>\n    <version>${serenity.version}</version>\n    <scope>test</scope>\n</dependency>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"depend\xeancias-do-serenity-cucumber",children:"Depend\xeancias do Serenity Cucumber"}),"\n",(0,s.jsx)(n.p,{children:"Para o Cucumber voc\xea precisar\xe1 da seguinte depend\xeancia:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"<dependency>\n    <groupId>net.serenity-bdd</groupId>\n    <artifactId>serenity-cucumber</artifactId>\n    <version>${serenity.version}</version>\n    <scope>test</scope>\n</dependency>\n"})}),"\n",(0,s.jsx)(n.p,{children:"Como o Serenity depende de uma vers\xe3o espec\xedfica das APIs do Cucumber, recomendamos usar a mesma vers\xe3o das bibliotecas do Cucumber."}),"\n",(0,s.jsx)(n.p,{children:"O Cucumber requer um executor de testes, preferencialmente JUnit 5 (JUnit 4 est\xe1 obsoleto)."}),"\n",(0,s.jsx)(n.h2,{id:"depend\xeancias-do-cucumber-com-junit-5-recomendado",children:"Depend\xeancias do Cucumber com JUnit 5 (Recomendado)"}),"\n",(0,s.jsx)(n.p,{children:"Para usar o JUnit 5 voc\xea precisar\xe1 da seguinte depend\xeancia:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"<dependency>\n    <groupId>io.cucumber</groupId>\n    <artifactId>cucumber-junit-platform-engine</artifactId>\n    <version>${cucumber.version}</version>\n    <scope>test</scope>\n</dependency>\n<dependency>\n    <groupId>org.junit.platform</groupId>\n    <artifactId>junit-platform-suite</artifactId>\n    <version>${junit-platform.version}</version>\n    <scope>test</scope>\n</dependency>\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Veja a documenta\xe7\xe3o do cucumber-junit-platform-engine sobre como usar junit-platform-suite para pilotar o cucumber: ",(0,s.jsx)(n.a,{href:"https://github.com/cucumber/cucumber-jvm/tree/main/junit-platform-engine#suites-with-different-configurations",children:"https://github.com/cucumber/cucumber-jvm/tree/main/junit-platform-engine#suites-with-different-configurations"}),", e ",(0,s.jsx)(n.a,{href:"https://github.com/serenity-bdd/serenity-cucumber-starter",children:"https://github.com/serenity-bdd/serenity-cucumber-starter"})," para um exemplo funcional."]}),"\n",(0,s.jsx)(n.h2,{id:"depend\xeancias-do-cucumber-com-junit-4-obsoleto",children:"Depend\xeancias do Cucumber com JUnit 4 (Obsoleto)"}),"\n",(0,s.jsx)(n.admonition,{title:"JUnit 4 Obsoleto",type:"warning",children:(0,s.jsx)(n.p,{children:"Os executores Cucumber do JUnit 4 est\xe3o obsoletos a partir do Serenity 5.0.0 e ser\xe3o removidos no Serenity 6.0.0. Por favor, migre para o JUnit 5 (veja acima)."})}),"\n",(0,s.jsx)(n.p,{children:"Se voc\xea ainda est\xe1 usando o JUnit 4 com Cucumber, precisar\xe1 da seguinte depend\xeancia:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"<dependency>\n    <groupId>io.cucumber</groupId>\n    <artifactId>cucumber-junit</artifactId>\n    <version>${cucumber.version}</version>\n    <scope>test</scope>\n</dependency>\n<dependency>\n    <groupId>org.junit.platform</groupId>\n    <artifactId>junit-vintage-engine</artifactId>\n    <version>${junit5.version}</version>\n    <scope>test</scope>\n</dependency>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"screenplay",children:"Screenplay"}),"\n",(0,s.jsx)(n.p,{children:"Se voc\xea est\xe1 usando o Screenplay Pattern, tamb\xe9m precisar\xe1 das depend\xeancias do Screenplay:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"<dependency>\n    <groupId>net.serenity-bdd</groupId>\n    <artifactId>serenity-screenplay</artifactId>\n    <version>${serenity.version}</version>\n    <scope>test</scope>\n</dependency>\n<dependency>\n    <groupId>net.serenity-bdd</groupId>\n    <artifactId>serenity-rest-assured</artifactId>\n    <version>${serenity.version}</version>\n</dependency>\n<dependency>\n    <groupId>net.serenity-bdd</groupId>\n    <artifactId>serenity-ensure</artifactId>\n    <version>${serenity.version}</version>\n    <scope>test</scope>\n</dependency>\n<dependency>\n    <groupId>net.serenity-bdd</groupId>\n    <artifactId>serenity-screenplay-webdriver</artifactId>\n    <version>${serenity.version}</version>\n    <scope>test</scope>\n</dependency>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"executando-testes-com-maven-failsafe",children:"Executando Testes com Maven Failsafe"}),"\n",(0,s.jsx)(n.p,{children:"Os testes do Serenity s\xe3o testes de integra\xe7\xe3o e devem ser executados usando o plugin Maven Failsafe. A configura\xe7\xe3o b\xe1sica \xe9 direta:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"<plugin>\n    <groupId>org.apache.maven.plugins</groupId>\n    <artifactId>maven-failsafe-plugin</artifactId>\n    <version>3.5.2</version>\n    <configuration>\n        <includes>\n            <include>**/*Test.java</include>\n        </includes>\n    </configuration>\n    <executions>\n        <execution>\n            <goals>\n                <goal>integration-test</goal>\n                <goal>verify</goal>\n            </goals>\n        </execution>\n    </executions>\n</plugin>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"executando-testes-junit-5-e-cucumber-juntos",children:"Executando Testes JUnit 5 e Cucumber Juntos"}),"\n",(0,s.jsxs)(n.p,{children:["Se seu projeto cont\xe9m tanto testes JUnit 5 quanto testes Cucumber, voc\xea pode encontrar um problema onde apenas os testes Cucumber s\xe3o descobertos e executados. Isso acontece porque quando o Cucumber usa a propriedade ",(0,s.jsx)(n.code,{children:"cucumber.features"})," (seja via ",(0,s.jsx)(n.code,{children:"@ConfigurationParameter"})," ou ",(0,s.jsx)(n.code,{children:"junit-platform.properties"}),"), isso faz com que outros seletores de descoberta da JUnit Platform sejam ignorados."]}),"\n",(0,s.jsx)(n.p,{children:"Voc\xea ver\xe1 um aviso como este:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"WARNING: TestEngine with ID 'cucumber' encountered a non-critical issue during test discovery:\nDiscovering tests using the cucumber.features property. Other discovery selectors are ignored!\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"A solu\xe7\xe3o"})," \xe9 configurar execu\xe7\xf5es separadas do Failsafe para testes JUnit 5 e Cucumber:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"<plugin>\n    <groupId>org.apache.maven.plugins</groupId>\n    <artifactId>maven-failsafe-plugin</artifactId>\n    <version>3.5.2</version>\n    <executions>\n        \x3c!-- Execu\xe7\xe3o para testes JUnit Jupiter (exclui Cucumber) --\x3e\n        <execution>\n            <id>junit-tests</id>\n            <goals>\n                <goal>integration-test</goal>\n            </goals>\n            <configuration>\n                <includes>\n                    <include>**/*Test.java</include>\n                </includes>\n                <excludes>\n                    <exclude>**/CucumberTestSuite.java</exclude>\n                </excludes>\n            </configuration>\n        </execution>\n        \x3c!-- Execu\xe7\xe3o para testes Cucumber --\x3e\n        <execution>\n            <id>cucumber-tests</id>\n            <goals>\n                <goal>integration-test</goal>\n            </goals>\n            <configuration>\n                <includes>\n                    <include>**/CucumberTestSuite.java</include>\n                </includes>\n            </configuration>\n        </execution>\n        \x3c!-- Fase de verifica\xe7\xe3o (executa uma vez ap\xf3s todos os testes) --\x3e\n        <execution>\n            <id>verify</id>\n            <goals>\n                <goal>verify</goal>\n            </goals>\n        </execution>\n    </executions>\n</plugin>\n"})}),"\n",(0,s.jsx)(n.p,{children:"Esta configura\xe7\xe3o:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Executa os testes JUnit Jupiter primeiro (todos os arquivos ",(0,s.jsx)(n.code,{children:"*Test.java"})," exceto a su\xedte Cucumber)"]}),"\n",(0,s.jsxs)(n.li,{children:["Executa os testes Cucumber separadamente via a classe ",(0,s.jsx)(n.code,{children:"CucumberTestSuite"})]}),"\n",(0,s.jsx)(n.li,{children:"Executa o goal verify uma vez no final para verificar falhas"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Conven\xe7\xe3o de Nomenclatura",type:"tip",children:(0,s.jsxs)(n.p,{children:["Ajuste os padr\xf5es ",(0,s.jsx)(n.code,{children:"<include>"})," e ",(0,s.jsx)(n.code,{children:"<exclude>"})," para corresponder \xe0s conven\xe7\xf5es de nomenclatura das suas classes de teste. Por exemplo, se sua su\xedte Cucumber \xe9 chamada ",(0,s.jsx)(n.code,{children:"CucumberIT.java"}),", atualize os padr\xf5es de acordo."]})}),"\n",(0,s.jsx)(n.h2,{id:"o-plugin-maven-do-serenity",children:"O Plugin Maven do Serenity"}),"\n",(0,s.jsxs)(n.p,{children:["Se voc\xea deseja gerar os relat\xf3rios do Serenity sempre que executar ",(0,s.jsx)(n.code,{children:"mvn verify"}),", voc\xea pode usar o ",(0,s.jsx)(n.code,{children:"serenity-maven-plugin"})," para isso:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"<plugin>\n    <groupId>net.serenity-bdd.maven.plugins</groupId>\n    <artifactId>serenity-maven-plugin</artifactId>\n    <version>${serenity.version}</version>\n    <configuration>\n      <tags>${tags}</tags>\n    </configuration>\n    <executions>\n        <execution>\n            <id>serenity-reports</id>\n            <phase>post-integration-test</phase>\n            <goals>\n                <goal>aggregate</goal>\n                <goal>check</goal>\n            </goals>\n        </execution>\n    </executions>\n</plugin>\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Por padr\xe3o, o goal ",(0,s.jsx)(n.code,{children:"aggregate"})," N\xc3O falhar\xe1 o build se houver falhas de teste - ele simplesmente gerar\xe1 os relat\xf3rios. Desta forma voc\xea pode agregar m\xfaltiplos conjuntos de relat\xf3rios e ent\xe3o verificar falhas no final usando ",(0,s.jsx)(n.code,{children:"mvn serenity:check"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"verificando-arquivos-de-feature-gherkin",children:"Verificando arquivos de feature Gherkin"}),"\n",(0,s.jsx)(n.p,{children:"Alguns erros em arquivos de feature Gherkin podem causar comportamento imprevis\xedvel nos relat\xf3rios do Serenity. Por esta raz\xe3o, as seguintes regras devem ser seguidas ao trabalhar com Cucumber e Serenity:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Os nomes dos Scenario devem ser \xfanicos dentro de um arquivo de feature"}),"\n",(0,s.jsx)(n.li,{children:"Os nomes de Scenario, Rule e Feature n\xe3o devem estar em branco"}),"\n",(0,s.jsx)(n.li,{children:"Os nomes das Feature devem ser \xfanicos sempre que poss\xedvel. Em particular, features com o mesmo nome, dentro de diret\xf3rios com nomes id\xeanticos, n\xe3o aparecer\xe3o corretamente nos relat\xf3rios do Serenity."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Voc\xea pode verificar essas regras antes de executar o teste completo chamando o goal ",(0,s.jsx)(n.code,{children:"check-gherkin"}),", por exemplo:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"mvn serenity:check-gherkin\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Voc\xea pode garantir que seus arquivos de feature estejam configurados corretamente antes de iniciar seus testes vinculando o goal ",(0,s.jsx)(n.code,{children:"check-gherkin"})," \xe0 fase de ciclo de vida ",(0,s.jsx)(n.code,{children:"process-test-resources"}),", como mostrado aqui:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"<plugin>\n    <groupId>net.serenity-bdd.maven.plugins</groupId>\n    <artifactId>serenity-maven-plugin</artifactId>\n    <version>${serenity.version}</version>\n    <configuration>\n      <tags>${tags}</tags>\n    </configuration>\n    <executions>\n        <execution>\n            <id>check-feature-files</id>\n            <phase>process-test-resources</phase>\n            <goals>\n                <goal>check-gherkin</goal>\n            </goals>\n        </execution>\n        <execution>\n            <id>serenity-reports</id>\n            <phase>post-integration-test</phase>\n            <goals>\n                <goal>aggregate</goal>\n            </goals>\n        </execution>\n    </executions>\n</plugin>\n"})})]})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453(e,n,r){r.d(n,{R:()=>t,x:()=>a});var i=r(6540);const s={},o=i.createContext(s);function t(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);
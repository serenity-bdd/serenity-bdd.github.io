"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[3686],{10(e,n,o){o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"playwright/playwright_cucumber","title":"Integra\xe7\xe3o com Cucumber","description":"O Cucumber fornece uma sintaxe de linguagem natural para escrever testes orientados a comportamento. Quando combinado com a implementa\xe7\xe3o Screenplay do Serenity Playwright, voc\xea obt\xe9m cen\xe1rios BDD expressivos que direcionam automa\xe7\xe3o de navegador confi\xe1vel.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/playwright/cucumber-integration.md","sourceDirName":"playwright","slug":"/playwright/playwright_cucumber","permalink":"/pt-BR/docs/playwright/playwright_cucumber","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/playwright/cucumber-integration.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"id":"playwright_cucumber","title":"Integra\xe7\xe3o com Cucumber","sidebar_position":9},"sidebar":"tutorialSidebar","previous":{"title":"Tutorial: Screenplay com TodoMVC","permalink":"/pt-BR/docs/playwright/playwright_screenplay_tutorial"},"next":{"title":"Testes de Integra\xe7\xe3o com Spring","permalink":"/pt-BR/docs/spring/integration_testing_spring"}}');var a=o(4848),r=o(8453);const i={id:"playwright_cucumber",title:"Integra\xe7\xe3o com Cucumber",sidebar_position:9},s="Integra\xe7\xe3o do Cucumber com Playwright Screenplay",c={},d=[{value:"Configura\xe7\xe3o do Projeto",id:"configura\xe7\xe3o-do-projeto",level:2},{value:"Depend\xeancias Maven",id:"depend\xeancias-maven",level:3},{value:"Instalar os Navegadores do Playwright",id:"instalar-os-navegadores-do-playwright",level:3},{value:"Estrutura do Projeto",id:"estrutura-do-projeto",level:2},{value:"Passo 1: Crie o Test Runner",id:"passo-1-crie-o-test-runner",level:2},{value:"Passo 2: Crie os Hooks do Playwright",id:"passo-2-crie-os-hooks-do-playwright",level:2},{value:"Entendendo os Hooks",id:"entendendo-os-hooks",level:3},{value:"Passo 3: Escreva Arquivos Feature",id:"passo-3-escreva-arquivos-feature",level:2},{value:"Passo 4: Crie Step Definition",id:"passo-4-crie-step-definition",level:2},{value:"Padr\xf5es Principais nas Step Definition",id:"padr\xf5es-principais-nas-step-definition",level:3},{value:"Passo 5: Crie Task do Screenplay",id:"passo-5-crie-task-do-screenplay",level:2},{value:"Passo 6: Crie Question do Screenplay",id:"passo-6-crie-question-do-screenplay",level:2},{value:"Passo 7: Defina os Target de UI",id:"passo-7-defina-os-target-de-ui",level:2},{value:"Executando os Testes",id:"executando-os-testes",level:2},{value:"Executar Todos os Testes Cucumber",id:"executar-todos-os-testes-cucumber",level:3},{value:"Executar Testes com Tags Espec\xedficas",id:"executar-testes-com-tags-espec\xedficas",level:3},{value:"Executar um \xdanico Cen\xe1rio",id:"executar-um-\xfanico-cen\xe1rio",level:3},{value:"Ver Relat\xf3rios",id:"ver-relat\xf3rios",level:3},{value:"Configura\xe7\xe3o",id:"configura\xe7\xe3o",level:2},{value:"serenity.properties",id:"serenityproperties",level:3},{value:"cucumber.properties",id:"cucumberproperties",level:3},{value:"Configura\xe7\xe3o Avan\xe7ada",id:"configura\xe7\xe3o-avan\xe7ada",level:2},{value:"Configura\xe7\xe3o Personalizada do Navegador",id:"configura\xe7\xe3o-personalizada-do-navegador",level:3},{value:"M\xfaltiplos Actor",id:"m\xfaltiplos-actor",level:3},{value:"Solu\xe7\xe3o de Problemas",id:"solu\xe7\xe3o-de-problemas",level:2},{value:"Vazamento de Estado Entre Cen\xe1rios",id:"vazamento-de-estado-entre-cen\xe1rios",level:3},{value:"Elemento N\xe3o Encontrado",id:"elemento-n\xe3o-encontrado",level:3},{value:"Capturas de Tela N\xe3o Capturadas",id:"capturas-de-tela-n\xe3o-capturadas",level:3},{value:"Reposit\xf3rio de Exemplo",id:"reposit\xf3rio-de-exemplo",level:2},{value:"Veja Tamb\xe9m",id:"veja-tamb\xe9m",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"integra\xe7\xe3o-do-cucumber-com-playwright-screenplay",children:"Integra\xe7\xe3o do Cucumber com Playwright Screenplay"})}),"\n",(0,a.jsx)(n.p,{children:"O Cucumber fornece uma sintaxe de linguagem natural para escrever testes orientados a comportamento. Quando combinado com a implementa\xe7\xe3o Screenplay do Serenity Playwright, voc\xea obt\xe9m cen\xe1rios BDD expressivos que direcionam automa\xe7\xe3o de navegador confi\xe1vel."}),"\n",(0,a.jsx)(n.p,{children:"Este guia mostra como integrar o Cucumber com o Serenity Playwright usando o Screenplay Pattern."}),"\n",(0,a.jsx)(n.h2,{id:"configura\xe7\xe3o-do-projeto",children:"Configura\xe7\xe3o do Projeto"}),"\n",(0,a.jsx)(n.h3,{id:"depend\xeancias-maven",children:"Depend\xeancias Maven"}),"\n",(0,a.jsxs)(n.p,{children:["Adicione as seguintes depend\xeancias ao seu ",(0,a.jsx)(n.code,{children:"pom.xml"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:"<properties>\n    <serenity.version>5.1.1</serenity.version>\n    <playwright.version>1.58.0</playwright.version>\n    <cucumber.version>7.34.2</cucumber.version>\n    <junit.version>5.11.4</junit.version>\n</properties>\n\n<dependencyManagement>\n    <dependencies>\n        \x3c!-- Use BOMs para gerenciamento de vers\xf5es --\x3e\n        <dependency>\n            <groupId>org.junit</groupId>\n            <artifactId>junit-bom</artifactId>\n            <version>${junit.version}</version>\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n        <dependency>\n            <groupId>io.cucumber</groupId>\n            <artifactId>cucumber-bom</artifactId>\n            <version>${cucumber.version}</version>\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n    </dependencies>\n</dependencyManagement>\n\n<dependencies>\n    \x3c!-- Serenity Screenplay com Playwright --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-screenplay-playwright</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Integra\xe7\xe3o Serenity Cucumber --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-cucumber</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Cucumber (vers\xf5es gerenciadas pelo cucumber-bom) --\x3e\n    <dependency>\n        <groupId>io.cucumber</groupId>\n        <artifactId>cucumber-java</artifactId>\n        <scope>test</scope>\n    </dependency>\n\n    <dependency>\n        <groupId>io.cucumber</groupId>\n        <artifactId>cucumber-junit-platform-engine</artifactId>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- JUnit Platform Suite --\x3e\n    <dependency>\n        <groupId>org.junit.platform</groupId>\n        <artifactId>junit-platform-suite</artifactId>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Serenity Ensure para asser\xe7\xf5es --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-ensure</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n</dependencies>\n"})}),"\n",(0,a.jsx)(n.h3,{id:"instalar-os-navegadores-do-playwright",children:"Instalar os Navegadores do Playwright"}),"\n",(0,a.jsx)(n.p,{children:"Antes de executar os testes, instale os navegadores do Playwright:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'mvn exec:java -e -D exec.mainClass=com.microsoft.playwright.CLI -D exec.args="install"\n'})}),"\n",(0,a.jsx)(n.h2,{id:"estrutura-do-projeto",children:"Estrutura do Projeto"}),"\n",(0,a.jsx)(n.p,{children:"Uma estrutura t\xedpica de projeto se parece com isso:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"src/test/\n\u251c\u2500\u2500 java/\n\u2502   \u2514\u2500\u2500 yourpackage/\n\u2502       \u251c\u2500\u2500 cucumber/\n\u2502       \u2502   \u251c\u2500\u2500 CucumberTestSuite.java      # Test runner\n\u2502       \u2502   \u251c\u2500\u2500 PlaywrightHooks.java        # Hooks do Cucumber\n\u2502       \u2502   \u2514\u2500\u2500 StepDefinitions.java        # Step Definition\n\u2502       \u2514\u2500\u2500 screenplay/\n\u2502           \u251c\u2500\u2500 tasks/                       # Task reutiliz\xe1veis\n\u2502           \u2502   \u251c\u2500\u2500 OpenTheApplication.java\n\u2502           \u2502   \u2514\u2500\u2500 AddATodoItem.java\n\u2502           \u251c\u2500\u2500 questions/                   # Question reutiliz\xe1veis\n\u2502           \u2502   \u2514\u2500\u2500 TheVisibleTodos.java\n\u2502           \u2514\u2500\u2500 ui/                          # Defini\xe7\xf5es de Target\n\u2502               \u2514\u2500\u2500 TodoList.java\n\u2514\u2500\u2500 resources/\n    \u251c\u2500\u2500 features/\n    \u2502   \u2514\u2500\u2500 managing_todos.feature          # Arquivos Feature\n    \u2514\u2500\u2500 serenity.properties                  # Configura\xe7\xe3o\n"})}),"\n",(0,a.jsx)(n.h2,{id:"passo-1-crie-o-test-runner",children:"Passo 1: Crie o Test Runner"}),"\n",(0,a.jsx)(n.p,{children:"O test runner configura o Cucumber para funcionar com o Serenity:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package yourpackage.cucumber;\n\nimport org.junit.platform.suite.api.*;\nimport static io.cucumber.junit.platform.engine.Constants.*;\n\n@Suite\n@IncludeEngines("cucumber")\n@SelectPackages("yourpackage.cucumber")\n@ConfigurationParameter(key = PLUGIN_PROPERTY_NAME,\n    value = "net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel,pretty")\n@ConfigurationParameter(key = GLUE_PROPERTY_NAME,\n    value = "yourpackage.cucumber,net.serenitybdd.cucumber.actors")\n@ConfigurationParameter(key = FEATURES_PROPERTY_NAME,\n    value = "src/test/resources/features")\npublic class CucumberTestSuite {\n}\n'})}),"\n",(0,a.jsx)(n.admonition,{title:"Configura\xe7\xe3o do Glue Path",type:"important",children:(0,a.jsxs)(n.p,{children:["Sempre inclua ",(0,a.jsx)(n.code,{children:"net.serenitybdd.cucumber.actors"})," no seu glue path. Isso registra o ",(0,a.jsx)(n.code,{children:"StageDirector"})," do Serenity que automaticamente chama ",(0,a.jsx)(n.code,{children:"OnStage.drawTheCurtain()"})," ap\xf3s cada cen\xe1rio para limpar os recursos do navegador."]})}),"\n",(0,a.jsx)(n.h2,{id:"passo-2-crie-os-hooks-do-playwright",children:"Passo 2: Crie os Hooks do Playwright"}),"\n",(0,a.jsx)(n.p,{children:"A classe de hooks configura o stage do Playwright antes de cada cen\xe1rio:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package yourpackage.cucumber;\n\nimport io.cucumber.java.Before;\nimport io.cucumber.java.ParameterType;\nimport io.cucumber.java.Scenario;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.actors.OnStage;\nimport net.serenitybdd.screenplay.playwright.actors.PlaywrightCast;\n\npublic class PlaywrightHooks {\n\n    /**\n     * Configura o stage do Playwright antes de cada cen\xe1rio.\n     * Order 0 garante que isso execute primeiro entre todos os hooks @Before.\n     */\n    @Before(order = 0)\n    public void setTheStage(Scenario scenario) {\n        OnStage.setTheStage(new PlaywrightCast());\n    }\n\n    /**\n     * Define o tipo de par\xe2metro {actor} para os passos do Cucumber.\n     * Isso permite passos como "Given Toby is on the application"\n     * para automaticamente resolver "Toby" para uma inst\xe2ncia de Actor.\n     */\n    @ParameterType(".*")\n    public Actor actor(String actorName) {\n        return OnStage.theActorCalled(actorName);\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"entendendo-os-hooks",children:"Entendendo os Hooks"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:"@Before(order = 0)"})}),": O ",(0,a.jsx)(n.code,{children:"order = 0"})," garante que o stage seja configurado antes de quaisquer outros hooks executarem. Isso \xe9 importante se voc\xea tiver outros hooks ",(0,a.jsx)(n.code,{children:"@Before"})," que dependem dos actor."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:(0,a.jsx)(n.code,{children:'@ParameterType(".*")'})}),": Isso cria um tipo de par\xe2metro personalizado que converte nomes de actor nos arquivos feature para inst\xe2ncias de ",(0,a.jsx)(n.code,{children:"Actor"}),". O padr\xe3o ",(0,a.jsx)(n.code,{children:".*"})," corresponde a qualquer string."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Limpeza Autom\xe1tica"}),": Voc\xea n\xe3o precisa de um hook ",(0,a.jsx)(n.code,{children:"@After"})," para limpeza. O ",(0,a.jsx)(n.code,{children:"StageDirector"})," (inclu\xeddo via glue path) automaticamente gerencia a limpeza chamando ",(0,a.jsx)(n.code,{children:"OnStage.drawTheCurtain()"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"passo-3-escreva-arquivos-feature",children:"Passo 3: Escreva Arquivos Feature"}),"\n",(0,a.jsx)(n.p,{children:"Arquivos feature descrevem comportamento na sintaxe Gherkin:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-gherkin",children:'# src/test/resources/features/managing_todos.feature\n@playwright\nFeature: Managing Todo Items\n  As a busy person\n  I want to manage my todo list\n  So that I can keep track of what I need to do\n\n  Background:\n    Given Toby is on the TodoMVC application\n\n  Scenario: Adding a single todo item\n    When Toby adds a todo item called "Buy milk"\n    Then the todo list should contain "Buy milk"\n    And the remaining item count should be 1\n\n  Scenario: Adding multiple todo items\n    When Toby adds the following todo items:\n      | Buy milk     |\n      | Walk the dog |\n      | Do laundry   |\n    Then the todo list should contain:\n      | Buy milk     |\n      | Walk the dog |\n      | Do laundry   |\n    And the remaining item count should be 3\n\n  Scenario: Completing a todo item\n    Given Toby has added the following todo items:\n      | Buy milk     |\n      | Walk the dog |\n    When Toby completes the todo item "Walk the dog"\n    Then the remaining item count should be 1\n\n  Scenario: Filtering to show only active todos\n    Given Toby has added the following todo items:\n      | Buy milk     |\n      | Walk the dog |\n    And Toby has completed the todo item "Walk the dog"\n    When Toby filters to show "Active" todos\n    Then the visible todo list should contain:\n      | Buy milk |\n'})}),"\n",(0,a.jsx)(n.h2,{id:"passo-4-crie-step-definition",children:"Passo 4: Crie Step Definition"}),"\n",(0,a.jsx)(n.p,{children:"Step Definition conectam arquivos feature \xe0s Task do Screenplay:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package yourpackage.cucumber;\n\nimport io.cucumber.java.en.*;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.actors.OnStage;\nimport net.serenitybdd.screenplay.ensure.Ensure;\nimport yourpackage.screenplay.tasks.*;\nimport yourpackage.screenplay.questions.*;\n\nimport java.util.List;\n\npublic class TodoStepDefinitions {\n\n    @Given("{actor} is on the TodoMVC application")\n    public void actorIsOnTheTodoMvcApplication(Actor actor) {\n        actor.attemptsTo(\n            OpenTheApplication.onTheTodoMvcHomePage()\n        );\n    }\n\n    @When("{actor} adds a todo item called {string}")\n    public void actorAddsTodoItemCalled(Actor actor, String todoItem) {\n        actor.attemptsTo(\n            AddATodoItem.called(todoItem)\n        );\n    }\n\n    @When("{actor} adds the following todo items:")\n    public void actorAddsTheFollowingTodoItems(Actor actor, List<String> todoItems) {\n        for (String item : todoItems) {\n            actor.attemptsTo(\n                AddATodoItem.called(item)\n            );\n        }\n    }\n\n    @Given("{actor} has added the following todo items:")\n    public void actorHasAddedTheFollowingTodoItems(Actor actor, List<String> todoItems) {\n        actorIsOnTheTodoMvcApplication(actor);\n        actorAddsTheFollowingTodoItems(actor, todoItems);\n    }\n\n    @When("{actor} completes the todo item {string}")\n    public void actorCompletesTheTodoItem(Actor actor, String todoItem) {\n        actor.attemptsTo(\n            Complete.todoItem(todoItem)\n        );\n    }\n\n    @Given("{actor} has completed the todo item {string}")\n    public void actorHasCompletedTheTodoItem(Actor actor, String todoItem) {\n        actorCompletesTheTodoItem(actor, todoItem);\n    }\n\n    @When("{actor} filters to show {string} todos")\n    public void actorFiltersToShow(Actor actor, String filterType) {\n        actor.attemptsTo(\n            FilterTodos.toShow(filterType)\n        );\n    }\n\n    @Then("the todo list should contain {string}")\n    public void theTodoListShouldContain(String expectedItem) {\n        Actor actor = OnStage.theActorInTheSpotlight();\n        actor.attemptsTo(\n            Ensure.that(TheVisibleTodos.displayed()).contains(expectedItem)\n        );\n    }\n\n    @Then("the todo list should contain:")\n    public void theTodoListShouldContainItems(List<String> expectedItems) {\n        Actor actor = OnStage.theActorInTheSpotlight();\n        actor.attemptsTo(\n            Ensure.that(TheVisibleTodos.displayed())\n                  .containsExactlyElementsFrom(expectedItems)\n        );\n    }\n\n    @Then("the visible todo list should contain:")\n    public void theVisibleTodoListShouldContain(List<String> expectedItems) {\n        Actor actor = OnStage.theActorInTheSpotlight();\n        actor.attemptsTo(\n            Ensure.that(TheVisibleTodos.displayed())\n                  .containsExactlyElementsFrom(expectedItems)\n        );\n    }\n\n    @Then("the remaining item count should be {int}")\n    public void theRemainingItemCountShouldBe(int expectedCount) {\n        Actor actor = OnStage.theActorInTheSpotlight();\n        actor.attemptsTo(\n            Ensure.that(TheRemainingCount.value()).isEqualTo(expectedCount)\n        );\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"padr\xf5es-principais-nas-step-definition",children:"Padr\xf5es Principais nas Step Definition"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Par\xe2metro Actor"}),": O par\xe2metro ",(0,a.jsx)(n.code,{children:"{actor}"})," automaticamente resolve para uma inst\xe2ncia de Actor gra\xe7as \xe0 defini\xe7\xe3o ",(0,a.jsx)(n.code,{children:"@ParameterType"})," nos hooks."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Passos de Background"}),": Passos como ",(0,a.jsx)(n.code,{children:"actorHasAddedTheFollowingTodoItems"})," comp\xf5em m\xfaltiplas a\xe7\xf5es, permitindo que passos ",(0,a.jsx)(n.code,{children:"Given"})," configurem pr\xe9-condi\xe7\xf5es complexas."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"The Actor in the Spotlight"}),": Para passos ",(0,a.jsx)(n.code,{children:"Then"})," que n\xe3o recebem um par\xe2metro actor, use ",(0,a.jsx)(n.code,{children:"OnStage.theActorInTheSpotlight()"})," para obter o \xfaltimo actor que executou uma a\xe7\xe3o."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Tabelas de Dados"}),": Tabelas de dados do Cucumber mapeiam diretamente para ",(0,a.jsx)(n.code,{children:"List<String>"})," para tabelas de coluna \xfanica."]}),"\n",(0,a.jsx)(n.h2,{id:"passo-5-crie-task-do-screenplay",children:"Passo 5: Crie Task do Screenplay"}),"\n",(0,a.jsx)(n.p,{children:"Task encapsulam a\xe7\xf5es de n\xedvel de neg\xf3cio:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package yourpackage.screenplay.tasks;\n\nimport net.serenitybdd.annotations.Step;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport net.serenitybdd.screenplay.playwright.interactions.Open;\n\npublic class OpenTheApplication implements Task {\n\n    private static final String TODO_MVC_URL = "https://todomvc.com/examples/react/dist/";\n\n    @Override\n    @Step("{0} opens the TodoMVC application")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Open.url(TODO_MVC_URL)\n        );\n\n        // Limpa o localStorage para garantir um estado limpo\n        // (TodoMVC persiste tarefas no localStorage)\n        var page = BrowseTheWebWithPlaywright.as(actor).getCurrentPage();\n        page.evaluate("() => localStorage.clear()");\n        page.reload();\n    }\n\n    public static OpenTheApplication onTheTodoMvcHomePage() {\n        return new OpenTheApplication();\n    }\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package yourpackage.screenplay.tasks;\n\nimport net.serenitybdd.annotations.Step;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.playwright.interactions.*;\nimport yourpackage.screenplay.ui.TodoList;\n\npublic class AddATodoItem implements Task {\n\n    private final String itemName;\n\n    public AddATodoItem(String itemName) {\n        this.itemName = itemName;\n    }\n\n    @Override\n    @Step("{0} adds a todo item called \'#itemName\'")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Enter.theValue(itemName).into(TodoList.NEW_TODO_INPUT),\n            Press.keys("Enter")\n        );\n    }\n\n    public static AddATodoItem called(String itemName) {\n        return new AddATodoItem(itemName);\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"passo-6-crie-question-do-screenplay",children:"Passo 6: Crie Question do Screenplay"}),"\n",(0,a.jsx)(n.p,{children:"Question consultam o estado da aplica\xe7\xe3o:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package yourpackage.screenplay.questions;\n\nimport net.serenitybdd.annotations.Step;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Question;\nimport net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport yourpackage.screenplay.ui.TodoList;\n\nimport java.util.Collection;\n\npublic class TheVisibleTodos implements Question<Collection<String>> {\n\n    @Override\n    @Step("{0} checks the visible todo items")\n    public Collection<String> answeredBy(Actor actor) {\n        var page = BrowseTheWebWithPlaywright.as(actor).getCurrentPage();\n        return page.locator(TodoList.TODO_ITEMS.asSelector())\n                   .allTextContents();\n    }\n\n    public static TheVisibleTodos displayed() {\n        return new TheVisibleTodos();\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"passo-7-defina-os-target-de-ui",children:"Passo 7: Defina os Target de UI"}),"\n",(0,a.jsx)(n.p,{children:"Target definem como localizar elementos:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package yourpackage.screenplay.ui;\n\nimport net.serenitybdd.screenplay.playwright.Target;\n\npublic class TodoList {\n    public static final Target NEW_TODO_INPUT =\n        Target.the("new todo input").locatedBy(".new-todo");\n\n    public static final Target TODO_ITEMS =\n        Target.the("todo items").locatedBy(".todo-list li label");\n\n    public static final Target TODO_COUNT =\n        Target.the("todo count").locatedBy(".todo-count");\n\n    public static final Target TOGGLE_ALL =\n        Target.the("toggle all checkbox").locatedBy(".toggle-all");\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"executando-os-testes",children:"Executando os Testes"}),"\n",(0,a.jsx)(n.h3,{id:"executar-todos-os-testes-cucumber",children:"Executar Todos os Testes Cucumber"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mvn clean verify\n"})}),"\n",(0,a.jsx)(n.h3,{id:"executar-testes-com-tags-espec\xedficas",children:"Executar Testes com Tags Espec\xedficas"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'mvn clean verify -Dcucumber.filter.tags="@playwright"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"executar-um-\xfanico-cen\xe1rio",children:"Executar um \xdanico Cen\xe1rio"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'mvn clean verify -Dcucumber.filter.name="Adding a single todo item"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"ver-relat\xf3rios",children:"Ver Relat\xf3rios"}),"\n",(0,a.jsx)(n.p,{children:"Ap\xf3s executar os testes, abra o relat\xf3rio Serenity:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"target/site/serenity/index.html\n"})}),"\n",(0,a.jsx)(n.h2,{id:"configura\xe7\xe3o",children:"Configura\xe7\xe3o"}),"\n",(0,a.jsx)(n.h3,{id:"serenityproperties",children:"serenity.properties"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-properties",children:"# Configura\xe7\xf5es do navegador\nplaywright.browsertype=chromium\nplaywright.headless=true\n\n# Configura\xe7\xf5es de captura de tela\nserenity.take.screenshots=FOR_FAILURES\n\n# Configura\xe7\xf5es do relat\xf3rio\nserenity.project.name=My TodoMVC Tests\n"})}),"\n",(0,a.jsx)(n.h3,{id:"cucumberproperties",children:"cucumber.properties"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-properties",children:"# Configura\xe7\xf5es do Cucumber\ncucumber.publish.quiet=true\n"})}),"\n",(0,a.jsx)(n.h2,{id:"configura\xe7\xe3o-avan\xe7ada",children:"Configura\xe7\xe3o Avan\xe7ada"}),"\n",(0,a.jsx)(n.h3,{id:"configura\xe7\xe3o-personalizada-do-navegador",children:"Configura\xe7\xe3o Personalizada do Navegador"}),"\n",(0,a.jsxs)(n.p,{children:["Configure ",(0,a.jsx)(n.code,{children:"PlaywrightCast"})," com op\xe7\xf5es personalizadas:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Before(order = 0)\npublic void setTheStage(Scenario scenario) {\n    BrowserType.LaunchOptions options = new BrowserType.LaunchOptions()\n        .setHeadless(false)\n        .setSlowMo(100);  // Desacelera para depura\xe7\xe3o\n\n    OnStage.setTheStage(\n        new PlaywrightCast()\n            .withLaunchOptions(options)\n            .withBrowserType("firefox")\n    );\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"m\xfaltiplos-actor",children:"M\xfaltiplos Actor"}),"\n",(0,a.jsx)(n.p,{children:"Cen\xe1rios podem envolver m\xfaltiplos actor:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-gherkin",children:'Scenario: Collaborative editing\n  Given Alice has added a todo item called "Shared task"\n  When Bob views the todo list\n  Then Bob should see "Shared task" in the list\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@When("{actor} views the todo list")\npublic void actorViewsTheTodoList(Actor actor) {\n    actor.attemptsTo(\n        OpenTheApplication.onTheTodoMvcHomePage()\n    );\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["Cada actor obt\xe9m sua pr\xf3pria inst\xe2ncia de navegador automaticamente atrav\xe9s do ",(0,a.jsx)(n.code,{children:"PlaywrightCast"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"solu\xe7\xe3o-de-problemas",children:"Solu\xe7\xe3o de Problemas"}),"\n",(0,a.jsx)(n.h3,{id:"vazamento-de-estado-entre-cen\xe1rios",children:"Vazamento de Estado Entre Cen\xe1rios"}),"\n",(0,a.jsx)(n.p,{children:"Se os testes interferirem uns com os outros:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Verifique se ",(0,a.jsx)(n.code,{children:"net.serenitybdd.cucumber.actors"})," est\xe1 no seu glue path"]}),"\n",(0,a.jsx)(n.li,{children:"Limpe o estado da aplica\xe7\xe3o (como localStorage) na sua Task de navega\xe7\xe3o"}),"\n",(0,a.jsxs)(n.li,{children:["Garanta que ",(0,a.jsx)(n.code,{children:"@Before(order = 0)"})," est\xe1 definido no seu hook de configura\xe7\xe3o do stage"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"elemento-n\xe3o-encontrado",children:"Elemento N\xe3o Encontrado"}),"\n",(0,a.jsx)(n.p,{children:"Se elementos n\xe3o est\xe3o sendo encontrados:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Use a espera autom\xe1tica integrada do Playwright (est\xe1 habilitada por padr\xe3o)"}),"\n",(0,a.jsx)(n.li,{children:"Verifique seus seletores usando as DevTools do navegador"}),"\n",(0,a.jsxs)(n.li,{children:["Considere usar seletores mais robustos do Playwright como ",(0,a.jsx)(n.code,{children:"text="}),", ",(0,a.jsx)(n.code,{children:"role="}),", etc."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"capturas-de-tela-n\xe3o-capturadas",children:"Capturas de Tela N\xe3o Capturadas"}),"\n",(0,a.jsxs)(n.p,{children:["Configure o modo de captura de tela no ",(0,a.jsx)(n.code,{children:"serenity.properties"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-properties",children:"serenity.take.screenshots=FOR_EACH_ACTION\n"})}),"\n",(0,a.jsx)(n.h2,{id:"reposit\xf3rio-de-exemplo",children:"Reposit\xf3rio de Exemplo"}),"\n",(0,a.jsxs)(n.p,{children:["Um exemplo funcional completo est\xe1 dispon\xedvel no reposit\xf3rio ",(0,a.jsx)(n.a,{href:"https://github.com/serenity-bdd/serenity-playwright-todomvc-demo",children:"serenity-playwright-todomvc-demo"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"veja-tamb\xe9m",children:"Veja Tamb\xe9m"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"playwright_screenplay",children:"Screenplay Pattern com Playwright"})," - Conceitos principais do Screenplay"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"playwright_screenplay_tutorial",children:"Tutorial: Screenplay com TodoMVC"})," - Construindo uma su\xedte de testes do zero"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/docs/cucumber/configuration-reference",children:"Refer\xeancia de Configura\xe7\xe3o do Cucumber"})," - Todas as op\xe7\xf5es do Cucumber"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"/docs/cucumber/parallel-execution",children:"Execu\xe7\xe3o Paralela"})," - Executando testes em paralelo"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453(e,n,o){o.d(n,{R:()=>i,x:()=>s});var t=o(6540);const a={},r=t.createContext(a);function i(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);
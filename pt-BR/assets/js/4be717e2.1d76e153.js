"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[132],{3502(e,a,n){n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"cucumber/parallel-execution","title":"Executando Testes Cucumber em Paralelo","description":"Executar cen\xe1rios Cucumber em paralelo pode reduzir drasticamente o tempo de execu\xe7\xe3o dos testes. Este guia explica como configurar e otimizar a execu\xe7\xe3o paralela com Serenity BDD e JUnit 5.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/cucumber/parallel-execution.md","sourceDirName":"cucumber","slug":"/cucumber/parallel-execution","permalink":"/pt-BR/docs/cucumber/parallel-execution","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/cucumber/parallel-execution.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"parallel-execution","title":"Executando Testes Cucumber em Paralelo","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Cucumber com JUnit 5","permalink":"/pt-BR/docs/cucumber/cucumber-junit5"},"next":{"title":"Padroes Avancados do Cucumber","permalink":"/pt-BR/docs/cucumber/advanced-patterns"}}');var i=n(4848),s=n(8453);const o={id:"parallel-execution",title:"Executando Testes Cucumber em Paralelo",sidebar_position:2},l="Executando Cenarios Cucumber em Paralelo",c={},d=[{value:"Visao Geral",id:"visao-geral",level:2},{value:"Pre-requisitos",id:"pre-requisitos",level:2},{value:"Configuracao Basica",id:"configuracao-basica",level:2},{value:"Passo 1: Adicionar Dependencias Necessarias",id:"passo-1-adicionar-dependencias-necessarias",level:3},{value:"Passo 2: Usar o Reporter Paralelo",id:"passo-2-usar-o-reporter-paralelo",level:3},{value:"Passo 3: Configurar Execucao Paralela",id:"passo-3-configurar-execucao-paralela",level:3},{value:"Estrategias de Execucao",id:"estrategias-de-execucao",level:2},{value:"Estrategia Dinamica (Recomendada)",id:"estrategia-dinamica-recomendada",level:3},{value:"Estrategia Fixa",id:"estrategia-fixa",level:3},{value:"Estrategia Personalizada",id:"estrategia-personalizada",level:3},{value:"Exemplo Completo de Configuracao",id:"exemplo-completo-de-configuracao",level:2},{value:"Consideracoes sobre Thread Safety",id:"consideracoes-sobre-thread-safety",level:2},{value:"Gerenciamento de WebDriver",id:"gerenciamento-de-webdriver",level:3},{value:"Thread Safety em Step Definition",id:"thread-safety-em-step-definition",level:3},{value:"Usando Contexto de Cenario",id:"usando-contexto-de-cenario",level:3},{value:"Controlando o Paralelismo",id:"controlando-o-paralelismo",level:2},{value:"Paralelismo em Diferentes Niveis",id:"paralelismo-em-diferentes-niveis",level:3},{value:"Paralelismo em Nivel de Cenario (Padrao)",id:"paralelismo-em-nivel-de-cenario-padrao",level:4},{value:"Paralelismo em Nivel de Feature",id:"paralelismo-em-nivel-de-feature",level:4},{value:"Limitando Cenarios Concorrentes",id:"limitando-cenarios-concorrentes",level:3},{value:"Execucao Paralela com Tags",id:"execucao-paralela-com-tags",level:2},{value:"Configuracao Maven/Gradle",id:"configuracao-mavengradle",level:2},{value:"Plugin Maven Surefire",id:"plugin-maven-surefire",level:3},{value:"Configuracao Gradle",id:"configuracao-gradle",level:3},{value:"Otimizacao de Performance",id:"otimizacao-de-performance",level:2},{value:"1. Escolha a Estrategia Certa",id:"1-escolha-a-estrategia-certa",level:3},{value:"2. Otimize o Design dos Cenarios",id:"2-otimize-o-design-dos-cenarios",level:3},{value:"3. Gerenciamento de Recursos",id:"3-gerenciamento-de-recursos",level:3},{value:"4. Monitore o Uso de Recursos",id:"4-monitore-o-uso-de-recursos",level:3},{value:"Depurando Testes Paralelos",id:"depurando-testes-paralelos",level:2},{value:"Desabilitar Execucao Paralela Temporariamente",id:"desabilitar-execucao-paralela-temporariamente",level:3},{value:"Executar com Menos Threads",id:"executar-com-menos-threads",level:3},{value:"Logging Verboso",id:"logging-verboso",level:3},{value:"Problemas Comuns e Solucoes",id:"problemas-comuns-e-solucoes",level:2},{value:"Problema 1: Testes Intermitentes (Flaky Tests)",id:"problema-1-testes-intermitentes-flaky-tests",level:3},{value:"Problema 2: Esgotamento de Recursos",id:"problema-2-esgotamento-de-recursos",level:3},{value:"Problema 3: Problemas na Geracao de Relatorios",id:"problema-3-problemas-na-geracao-de-relatorios",level:3},{value:"Problema 4: Falhas no Pipeline de CI/CD",id:"problema-4-falhas-no-pipeline-de-cicd",level:3},{value:"Boas Praticas",id:"boas-praticas",level:2},{value:"1. Comece Pequeno",id:"1-comece-pequeno",level:3},{value:"2. Use Tags Estrategicamente",id:"2-use-tags-estrategicamente",level:3},{value:"3. Isole Dados de Teste",id:"3-isole-dados-de-teste",level:3},{value:"4. Monitore e Ajuste",id:"4-monitore-e-ajuste",level:3},{value:"5. Documente Thread Safety",id:"5-documente-thread-safety",level:3},{value:"Medindo Melhorias de Performance",id:"medindo-melhorias-de-performance",level:2},{value:"Antes da Execucao Paralela",id:"antes-da-execucao-paralela",level:3},{value:"Apos Execucao Paralela (8 threads)",id:"apos-execucao-paralela-8-threads",level:3},{value:"Proximos Passos",id:"proximos-passos",level:2},{value:"Recursos Adicionais",id:"recursos-adicionais",level:2}];function t(e){const a={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.header,{children:(0,i.jsx)(a.h1,{id:"executando-cenarios-cucumber-em-paralelo",children:"Executando Cenarios Cucumber em Paralelo"})}),"\n",(0,i.jsx)(a.p,{children:"Executar cen\xe1rios Cucumber em paralelo pode reduzir drasticamente o tempo de execu\xe7\xe3o dos testes. Este guia explica como configurar e otimizar a execu\xe7\xe3o paralela com Serenity BDD e JUnit 5."}),"\n",(0,i.jsx)(a.h2,{id:"visao-geral",children:"Visao Geral"}),"\n",(0,i.jsx)(a.p,{children:"A execu\xe7\xe3o paralela no Cucumber com JUnit 5 \xe9 alimentada pelo Cucumber JUnit Platform Engine, que se integra \xe0s capacidades de execu\xe7\xe3o de testes paralelos do JUnit 5. Quando configurado corretamente, m\xfaltiplos cen\xe1rios podem ser executados simultaneamente, aproveitando processadores multi-core."}),"\n",(0,i.jsx)(a.h2,{id:"pre-requisitos",children:"Pre-requisitos"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"Serenity BDD 3.6.0 ou superior"}),"\n",(0,i.jsx)(a.li,{children:"JUnit 5"}),"\n",(0,i.jsx)(a.li,{children:"Cucumber JUnit Platform Engine"}),"\n",(0,i.jsx)(a.li,{children:"C\xf3digo de teste thread-safe"}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"configuracao-basica",children:"Configuracao Basica"}),"\n",(0,i.jsx)(a.h3,{id:"passo-1-adicionar-dependencias-necessarias",children:"Passo 1: Adicionar Dependencias Necessarias"}),"\n",(0,i.jsx)(a.p,{children:"Certifique-se de ter a depend\xeancia do Cucumber JUnit Platform Engine:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-xml",children:"<dependency>\n    <groupId>io.cucumber</groupId>\n    <artifactId>cucumber-junit-platform-engine</artifactId>\n    <version>7.33.0</version>\n    <scope>test</scope>\n</dependency>\n<dependency>\n    <groupId>org.junit.platform</groupId>\n    <artifactId>junit-platform-suite</artifactId>\n    <version>5.10.0</version>\n    <scope>test</scope>\n</dependency>\n"})}),"\n",(0,i.jsx)(a.h3,{id:"passo-2-usar-o-reporter-paralelo",children:"Passo 2: Usar o Reporter Paralelo"}),"\n",(0,i.jsx)(a.admonition,{title:"Importante",type:"warning",children:(0,i.jsxs)(a.p,{children:["Voc\xea ",(0,i.jsx)(a.strong,{children:"deve"})," usar ",(0,i.jsx)(a.code,{children:"SerenityReporterParallel"})," para execu\xe7\xe3o paralela, n\xe3o ",(0,i.jsx)(a.code,{children:"SerenityReporter"}),"."]})}),"\n",(0,i.jsx)(a.p,{children:"Atualize sua test suite para usar o reporter thread-safe:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'import org.junit.platform.suite.api.*;\nimport static io.cucumber.junit.platform.engine.Constants.PLUGIN_PROPERTY_NAME;\n\n@Suite\n@IncludeEngines("cucumber")\n@SelectClasspathResource("features")\n@ConfigurationParameter(\n    key = PLUGIN_PROPERTY_NAME,\n    value = "net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel"\n)\nclass CucumberTestSuite {\n}\n'})}),"\n",(0,i.jsx)(a.h3,{id:"passo-3-configurar-execucao-paralela",children:"Passo 3: Configurar Execucao Paralela"}),"\n",(0,i.jsxs)(a.p,{children:["Crie ou atualize ",(0,i.jsx)(a.code,{children:"junit-platform.properties"})," em ",(0,i.jsx)(a.code,{children:"src/test/resources"}),":"]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-properties",children:"# Habilitar execucao paralela\ncucumber.execution.parallel.enabled=true\n\n# Usar estrategia dinamica (recomendado)\ncucumber.execution.parallel.config.strategy=dynamic\n\n# Configurar o reporter do Serenity\ncucumber.plugin=net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel\n"})}),"\n",(0,i.jsx)(a.h2,{id:"estrategias-de-execucao",children:"Estrategias de Execucao"}),"\n",(0,i.jsx)(a.h3,{id:"estrategia-dinamica-recomendada",children:"Estrategia Dinamica (Recomendada)"}),"\n",(0,i.jsx)(a.p,{children:"A estrat\xe9gia din\xe2mica determina automaticamente o n\xfamero de threads baseado nos processadores dispon\xedveis:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-properties",children:"cucumber.execution.parallel.config.strategy=dynamic\ncucumber.execution.parallel.config.dynamic.factor=1.0\n"})}),"\n",(0,i.jsxs)(a.p,{children:["O ",(0,i.jsx)(a.code,{children:"factor"})," \xe9 um multiplicador para o n\xfamero de processadores dispon\xedveis:"]}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"1.0"})," = mesmo n\xfamero de threads que processadores (recomendado)"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"0.5"})," = metade do n\xfamero de processadores"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"2.0"})," = dobro do n\xfamero de processadores"]}),"\n"]}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"Exemplo:"})," Em uma m\xe1quina com 8 cores:"]}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["Fator ",(0,i.jsx)(a.code,{children:"1.0"})," = 8 threads"]}),"\n",(0,i.jsxs)(a.li,{children:["Fator ",(0,i.jsx)(a.code,{children:"0.5"})," = 4 threads"]}),"\n",(0,i.jsxs)(a.li,{children:["Fator ",(0,i.jsx)(a.code,{children:"2.0"})," = 16 threads"]}),"\n"]}),"\n",(0,i.jsx)(a.h3,{id:"estrategia-fixa",children:"Estrategia Fixa"}),"\n",(0,i.jsx)(a.p,{children:"A estrat\xe9gia fixa usa um n\xfamero especificado de threads:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-properties",children:"cucumber.execution.parallel.config.strategy=fixed\ncucumber.execution.parallel.config.fixed.parallelism=4\ncucumber.execution.parallel.config.fixed.max-pool-size=4\n"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"parallelism"})," - N\xfamero de threads concorrentes"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.code,{children:"max-pool-size"})," - Tamanho m\xe1ximo do pool de threads"]}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Use quando:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"Voc\xea precisa de contagens de threads consistentes e previs\xedveis"}),"\n",(0,i.jsx)(a.li,{children:"Executando em infraestrutura de CI/CD compartilhada"}),"\n",(0,i.jsx)(a.li,{children:"Depurando problemas de execu\xe7\xe3o paralela"}),"\n"]}),"\n",(0,i.jsx)(a.h3,{id:"estrategia-personalizada",children:"Estrategia Personalizada"}),"\n",(0,i.jsx)(a.p,{children:"Para casos de uso avan\xe7ados, voc\xea pode implementar uma estrat\xe9gia personalizada:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-properties",children:"cucumber.execution.parallel.config.strategy=custom\ncucumber.execution.parallel.config.custom.class=com.example.MyParallelStrategy\n"})}),"\n",(0,i.jsx)(a.h2,{id:"exemplo-completo-de-configuracao",children:"Exemplo Completo de Configuracao"}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"junit-platform.properties:"})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-properties",children:"# Execucao paralela\ncucumber.execution.parallel.enabled=true\ncucumber.execution.parallel.config.strategy=dynamic\ncucumber.execution.parallel.config.dynamic.factor=1.0\n\n# Reporter do Serenity\ncucumber.plugin=net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel\n\n# Opcional: Controlar ordem de execucao\ncucumber.execution.order=random\n\n# Opcional: Falhar rapido\ncucumber.execution.fail-fast=false\n"})}),"\n",(0,i.jsx)(a.h2,{id:"consideracoes-sobre-thread-safety",children:"Consideracoes sobre Thread Safety"}),"\n",(0,i.jsx)(a.h3,{id:"gerenciamento-de-webdriver",children:"Gerenciamento de WebDriver"}),"\n",(0,i.jsxs)(a.p,{children:["O WebDriver ",(0,i.jsx)(a.code,{children:"@Managed"})," do Serenity \xe9 automaticamente thread-safe ao usar execu\xe7\xe3o paralela:"]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\nclass WebDriverSteps {\n\n    @Managed\n    WebDriver driver;  // Thread-safe - cada thread recebe sua propria instancia\n\n    @Given("I am on the home page")\n    public void navigateToHomePage() {\n        driver.get("https://example.com");\n    }\n}\n'})}),"\n",(0,i.jsx)(a.p,{children:"Cada thread ter\xe1 sua pr\xf3pria inst\xe2ncia isolada de WebDriver."}),"\n",(0,i.jsx)(a.h3,{id:"thread-safety-em-step-definition",children:"Thread Safety em Step Definition"}),"\n",(0,i.jsx)(a.p,{children:"Classes de Step Definition devem ser thread-safe:"}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Thread-Safe (Recomendado):"})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'public class LoginSteps {\n\n    @Given("{actor} is on the login page")\n    public void navigateToLoginPage(Actor actor) {\n        actor.attemptsTo(\n            Navigate.to("/login")\n        );\n    }\n}\n'})}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"NAO Thread-Safe:"})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'public class LoginSteps {\n\n    private String username;  // Estado compartilhado - NAO thread-safe!\n\n    @Given("user enters username {string}")\n    public void enterUsername(String user) {\n        this.username = user;  // Condicao de corrida!\n    }\n}\n'})}),"\n",(0,i.jsx)(a.h3,{id:"usando-contexto-de-cenario",children:"Usando Contexto de Cenario"}),"\n",(0,i.jsx)(a.p,{children:"Para compartilhar dados dentro de um cen\xe1rio, use o contexto de cen\xe1rio do Cucumber:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'public class CheckoutSteps {\n\n    private final ScenarioContext context;\n\n    public CheckoutSteps(ScenarioContext context) {\n        this.context = context;  // Injetado por cenario\n    }\n\n    @When("I add item to cart")\n    public void addItem() {\n        context.put("cartTotal", calculateTotal());\n    }\n\n    @Then("cart total should be correct")\n    public void verifyTotal() {\n        Double total = context.get("cartTotal", Double.class);\n        // Verificar total\n    }\n}\n'})}),"\n",(0,i.jsx)(a.h2,{id:"controlando-o-paralelismo",children:"Controlando o Paralelismo"}),"\n",(0,i.jsx)(a.h3,{id:"paralelismo-em-diferentes-niveis",children:"Paralelismo em Diferentes Niveis"}),"\n",(0,i.jsx)(a.p,{children:"Voc\xea pode controlar o que executa em paralelo:"}),"\n",(0,i.jsx)(a.h4,{id:"paralelismo-em-nivel-de-cenario-padrao",children:"Paralelismo em Nivel de Cenario (Padrao)"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-properties",children:"# Cada cenario executa em sua propria thread\ncucumber.execution.parallel.enabled=true\n"})}),"\n",(0,i.jsx)(a.h4,{id:"paralelismo-em-nivel-de-feature",children:"Paralelismo em Nivel de Feature"}),"\n",(0,i.jsx)(a.p,{children:"Para executar Feature em paralelo, mas cen\xe1rios dentro de uma Feature sequencialmente, voc\xea precisa configurar a JUnit Platform:"}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"junit-platform.properties:"})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-properties",children:"junit.jupiter.execution.parallel.enabled=true\njunit.jupiter.execution.parallel.mode.default=concurrent\njunit.jupiter.execution.parallel.mode.classes.default=concurrent\n"})}),"\n",(0,i.jsx)(a.h3,{id:"limitando-cenarios-concorrentes",children:"Limitando Cenarios Concorrentes"}),"\n",(0,i.jsx)(a.p,{children:"Controle o n\xfamero m\xe1ximo de cen\xe1rios concorrentes:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-properties",children:"cucumber.execution.parallel.config.strategy=fixed\ncucumber.execution.parallel.config.fixed.parallelism=4\n"})}),"\n",(0,i.jsx)(a.h2,{id:"execucao-paralela-com-tags",children:"Execucao Paralela com Tags"}),"\n",(0,i.jsx)(a.p,{children:"Voc\xea pode executar tags espec\xedficas em paralelo:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'@Suite\n@IncludeEngines("cucumber")\n@SelectClasspathResource("features")\n@ConfigurationParameter(\n    key = PLUGIN_PROPERTY_NAME,\n    value = "net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel"\n)\n@ConfigurationParameter(\n    key = FILTER_TAGS_PROPERTY_NAME,\n    value = "@parallel"\n)\nclass ParallelTestSuite {\n}\n'})}),"\n",(0,i.jsx)(a.p,{children:"Ou exclua cen\xe1rios da execu\xe7\xe3o paralela:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-properties",children:"cucumber.filter.tags=not @serial\n"})}),"\n",(0,i.jsx)(a.h2,{id:"configuracao-mavengradle",children:"Configuracao Maven/Gradle"}),"\n",(0,i.jsx)(a.h3,{id:"plugin-maven-surefire",children:"Plugin Maven Surefire"}),"\n",(0,i.jsx)(a.p,{children:"Configure o Maven para suportar execu\xe7\xe3o paralela:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-xml",children:"<build>\n    <plugins>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-surefire-plugin</artifactId>\n            <version>3.0.0</version>\n            <configuration>\n                <skip>true</skip>\n            </configuration>\n        </plugin>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-failsafe-plugin</artifactId>\n            <version>3.0.0</version>\n            <configuration>\n                <includes>\n                    <include>**/*TestSuite.java</include>\n                </includes>\n                <systemPropertyVariables>\n                    <webdriver.driver>${webdriver.driver}</webdriver.driver>\n                </systemPropertyVariables>\n            </configuration>\n            <executions>\n                <execution>\n                    <goals>\n                        <goal>integration-test</goal>\n                        <goal>verify</goal>\n                    </goals>\n                </execution>\n            </executions>\n        </plugin>\n    </plugins>\n</build>\n"})}),"\n",(0,i.jsx)(a.h3,{id:"configuracao-gradle",children:"Configuracao Gradle"}),"\n",(0,i.jsx)(a.p,{children:"Para Gradle:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-groovy",children:"test {\n    useJUnitPlatform()\n    maxParallelForks = Runtime.runtime.availableProcessors()\n\n    systemProperty 'cucumber.execution.parallel.enabled', 'true'\n    systemProperty 'cucumber.execution.parallel.config.strategy', 'dynamic'\n}\n"})}),"\n",(0,i.jsx)(a.h2,{id:"otimizacao-de-performance",children:"Otimizacao de Performance"}),"\n",(0,i.jsx)(a.h3,{id:"1-escolha-a-estrategia-certa",children:"1. Escolha a Estrategia Certa"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Suites de teste pequenas"})," (<50 cen\xe1rios): Estrat\xe9gia fixa com 2-4 threads"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Suites de teste m\xe9dias"})," (50-200 cen\xe1rios): Estrat\xe9gia din\xe2mica com fator 1.0"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Suites de teste grandes"})," (>200 cen\xe1rios): Estrat\xe9gia din\xe2mica com fator 0.75-1.0"]}),"\n"]}),"\n",(0,i.jsx)(a.h3,{id:"2-otimize-o-design-dos-cenarios",children:"2. Otimize o Design dos Cenarios"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Mantenha cenarios independentes"})," - Sem estado compartilhado entre cen\xe1rios"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Minimize tempo de setup"})," - Use Before hooks eficientes"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Evite sleeps"})," - Use esperas expl\xedcitas em vez disso"]}),"\n",(0,i.jsxs)(a.li,{children:[(0,i.jsx)(a.strong,{children:"Limpe recursos"})," - Use After hooks adequadamente"]}),"\n"]}),"\n",(0,i.jsx)(a.h3,{id:"3-gerenciamento-de-recursos",children:"3. Gerenciamento de Recursos"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-properties",children:"# Controle o tamanho do pool de threads para evitar esgotamento de recursos\ncucumber.execution.parallel.config.fixed.max-pool-size=8\n\n# Evite muitos navegadores concorrentes\nwebdriver.pool.max=10\n"})}),"\n",(0,i.jsx)(a.h3,{id:"4-monitore-o-uso-de-recursos",children:"4. Monitore o Uso de Recursos"}),"\n",(0,i.jsx)(a.p,{children:"Observe:"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"Utiliza\xe7\xe3o de CPU (deve estar pr\xf3xima de 100% para performance ideal)"}),"\n",(0,i.jsx)(a.li,{children:"Consumo de mem\xf3ria (cada inst\xe2ncia de navegador usa RAM)"}),"\n",(0,i.jsx)(a.li,{children:"Largura de banda de rede (para WebDriver remoto)"}),"\n",(0,i.jsx)(a.li,{children:"Conex\xf5es de banco de dados (se aplic\xe1vel)"}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"depurando-testes-paralelos",children:"Depurando Testes Paralelos"}),"\n",(0,i.jsx)(a.h3,{id:"desabilitar-execucao-paralela-temporariamente",children:"Desabilitar Execucao Paralela Temporariamente"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-properties",children:"cucumber.execution.parallel.enabled=false\n"})}),"\n",(0,i.jsx)(a.p,{children:"Ou via linha de comando:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-bash",children:"mvn clean verify -Dcucumber.execution.parallel.enabled=false\n"})}),"\n",(0,i.jsx)(a.h3,{id:"executar-com-menos-threads",children:"Executar com Menos Threads"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-properties",children:"cucumber.execution.parallel.config.strategy=fixed\ncucumber.execution.parallel.config.fixed.parallelism=1\n"})}),"\n",(0,i.jsx)(a.h3,{id:"logging-verboso",children:"Logging Verboso"}),"\n",(0,i.jsx)(a.p,{children:"Habilite logging detalhado para diagnosticar problemas:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-properties",children:"# Localizacao do arquivo de log\ncucumber.plugin=pretty,html:target/cucumber-reports.html,json:target/cucumber.json\n\n# Logging do Serenity\nserenity.verbose=true\nserenity.logging=VERBOSE\n"})}),"\n",(0,i.jsx)(a.h2,{id:"problemas-comuns-e-solucoes",children:"Problemas Comuns e Solucoes"}),"\n",(0,i.jsx)(a.h3,{id:"problema-1-testes-intermitentes-flaky-tests",children:"Problema 1: Testes Intermitentes (Flaky Tests)"}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"Sintomas:"})," Testes passam quando executados individualmente, mas falham quando executados em paralelo"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Solucoes:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"Verifique estado compartilhado nas Step Definition"}),"\n",(0,i.jsx)(a.li,{children:"Certifique-se de que as inst\xe2ncias de WebDriver est\xe3o propriamente isoladas"}),"\n",(0,i.jsx)(a.li,{children:"Revise os dados de teste - evite dados de teste compartilhados"}),"\n",(0,i.jsx)(a.li,{children:"Adicione sincroniza\xe7\xe3o/esperas adequadas"}),"\n"]}),"\n",(0,i.jsx)(a.h3,{id:"problema-2-esgotamento-de-recursos",children:"Problema 2: Esgotamento de Recursos"}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"Sintomas:"})," Testes ficam lentos ou travam ap\xf3s algum tempo"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Solucoes:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"Reduza o paralelismo: diminua a contagem de threads"}),"\n",(0,i.jsxs)(a.li,{children:["Aumente o heap size: ",(0,i.jsx)(a.code,{children:"-Xmx4g"})]}),"\n",(0,i.jsx)(a.li,{children:"Verifique vazamentos de recursos (conex\xf5es n\xe3o fechadas, inst\xe2ncias de navegador)"}),"\n",(0,i.jsx)(a.li,{children:"Monitore os recursos do sistema"}),"\n"]}),"\n",(0,i.jsx)(a.h3,{id:"problema-3-problemas-na-geracao-de-relatorios",children:"Problema 3: Problemas na Geracao de Relatorios"}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"Sintomas:"})," Relat\xf3rios do Serenity est\xe3o incompletos ou corrompidos"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Solucoes:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["Certifique-se de que est\xe1 usando ",(0,i.jsx)(a.code,{children:"SerenityReporterParallel"})]}),"\n",(0,i.jsx)(a.li,{children:"Verifique a vers\xe3o do Serenity (3.6.0+)"}),"\n",(0,i.jsx)(a.li,{children:"Verifique se o maven-failsafe-plugin est\xe1 configurado corretamente"}),"\n",(0,i.jsx)(a.li,{children:"Verifique condi\xe7\xf5es de corrida no sistema de arquivos"}),"\n"]}),"\n",(0,i.jsx)(a.h3,{id:"problema-4-falhas-no-pipeline-de-cicd",children:"Problema 4: Falhas no Pipeline de CI/CD"}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"Sintomas:"})," Testes falham apenas no CI, mas passam localmente"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Solucoes:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"Ajuste a contagem de threads para as capacidades do ambiente de CI"}),"\n",(0,i.jsx)(a.li,{children:"Use estrat\xe9gia fixa para comportamento consistente"}),"\n",(0,i.jsx)(a.li,{children:"Aumente timeouts para ambientes de CI mais lentos"}),"\n",(0,i.jsx)(a.li,{children:"Verifique limites de recursos do CI"}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"boas-praticas",children:"Boas Praticas"}),"\n",(0,i.jsx)(a.h3,{id:"1-comece-pequeno",children:"1. Comece Pequeno"}),"\n",(0,i.jsx)(a.p,{children:"Comece com 2-4 threads e aumente gradualmente:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-properties",children:"cucumber.execution.parallel.config.strategy=fixed\ncucumber.execution.parallel.config.fixed.parallelism=2\n"})}),"\n",(0,i.jsx)(a.h3,{id:"2-use-tags-estrategicamente",children:"2. Use Tags Estrategicamente"}),"\n",(0,i.jsx)(a.p,{children:"Marque cen\xe1rios que n\xe3o podem executar em paralelo:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-gherkin",children:"@serial @database-migration\nScenario: Migrate database schema\n  # Este cenario deve executar sozinho\n"})}),"\n",(0,i.jsx)(a.p,{children:"Ent\xe3o exclua-os:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-properties",children:"cucumber.filter.tags=not @serial\n"})}),"\n",(0,i.jsx)(a.h3,{id:"3-isole-dados-de-teste",children:"3. Isole Dados de Teste"}),"\n",(0,i.jsx)(a.p,{children:"Cada cen\xe1rio deve criar e limpar seus pr\xf3prios dados de teste:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-java",children:'@Before\npublic void setupTestData() {\n    // Crie dados de teste unicos para este cenario\n    String uniqueId = UUID.randomUUID().toString();\n    context.put("testUserId", "user_" + uniqueId);\n}\n\n@After\npublic void cleanupTestData() {\n    // Limpe os dados de teste deste cenario\n    String userId = context.get("testUserId", String.class);\n    deleteUser(userId);\n}\n'})}),"\n",(0,i.jsx)(a.h3,{id:"4-monitore-e-ajuste",children:"4. Monitore e Ajuste"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"Monitore tempos de execu\xe7\xe3o de testes"}),"\n",(0,i.jsx)(a.li,{children:"Acompanhe taxas de testes intermitentes"}),"\n",(0,i.jsx)(a.li,{children:"Ajuste o paralelismo baseado em m\xe9tricas"}),"\n",(0,i.jsx)(a.li,{children:"Revise a utiliza\xe7\xe3o de recursos"}),"\n"]}),"\n",(0,i.jsx)(a.h3,{id:"5-documente-thread-safety",children:"5. Documente Thread Safety"}),"\n",(0,i.jsx)(a.p,{children:"Adicione coment\xe1rios para cen\xe1rios n\xe3o thread-safe:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-gherkin",children:"# @serial - Modifica estado global da aplicacao\n@serial @admin\nScenario: Update application settings\n  Given I am logged in as admin\n  When I change the default language to Spanish\n  Then all users should see Spanish interface\n"})}),"\n",(0,i.jsx)(a.h2,{id:"medindo-melhorias-de-performance",children:"Medindo Melhorias de Performance"}),"\n",(0,i.jsx)(a.h3,{id:"antes-da-execucao-paralela",children:"Antes da Execucao Paralela"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{children:"Total de cenarios: 100\nTempo de execucao: 50 minutos\n"})}),"\n",(0,i.jsx)(a.h3,{id:"apos-execucao-paralela-8-threads",children:"Apos Execucao Paralela (8 threads)"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{children:"Total de cenarios: 100\nTempo de execucao: 8 minutos\nSpeedup: 6.25x\nEficiencia: 78%\n"})}),"\n",(0,i.jsx)(a.p,{children:"Calcule seu speedup:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{children:"Speedup = Tempo Sequencial / Tempo Paralelo\nEficiencia = Speedup / Numero de Threads\n"})}),"\n",(0,i.jsx)(a.h2,{id:"proximos-passos",children:"Proximos Passos"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["Revise o guia principal ",(0,i.jsx)(a.a,{href:"cucumber-junit5",children:"Cucumber com JUnit 5"})]}),"\n",(0,i.jsxs)(a.li,{children:["Consulte a ",(0,i.jsx)(a.a,{href:"configuration-reference",children:"Referencia de Configuracao"})," para todas as op\xe7\xf5es dispon\xedveis"]}),"\n",(0,i.jsxs)(a.li,{children:["Veja ",(0,i.jsx)(a.a,{href:"cucumber-junit5#best-practices",children:"Boas Praticas"})," para escrever testes manteniveis"]}),"\n",(0,i.jsxs)(a.li,{children:["Explore a documenta\xe7\xe3o de ",(0,i.jsx)(a.a,{href:"/docs/reporting/the_serenity_reports",children:"Relatorios do Serenity"})]}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"recursos-adicionais",children:"Recursos Adicionais"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"https://github.com/cucumber/cucumber-jvm/tree/main/cucumber-junit-platform-engine#parallel-execution",children:"Documentacao de Execucao Paralela do Cucumber"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-parallel-execution",children:"Execucao Paralela do JUnit 5"})}),"\n",(0,i.jsx)(a.li,{children:(0,i.jsx)(a.a,{href:"https://serenity-bdd.info",children:"Dicas de Performance do Serenity BDD"})}),"\n"]})]})}function u(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}},8453(e,a,n){n.d(a,{R:()=>o,x:()=>l});var r=n(6540);const i={},s=r.createContext(i);function o(e){const a=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function l(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:a},e.children)}}}]);
"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[4206],{813(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"tutorials/rest-api-testing","title":"Testes Completos de API REST","description":"Este tutorial fornece um guia completo para testar APIs REST com Serenity BDD, cobrindo desde requisicoes basicas ate padroes avancados como autenticacao, tratamento de erros, validacao de schema e testes hibridos UI+API.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/tutorials/rest-api-testing.md","sourceDirName":"tutorials","slug":"/tutorials/rest-api-testing","permalink":"/pt-BR/docs/tutorials/rest-api-testing","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/tutorials/rest-api-testing.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"rest-api-testing","title":"Testes Completos de API REST","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Comecando com Cucumber usando Serenity BDD e Screenplay","permalink":"/pt-BR/docs/tutorials/cucumber-screenplay"},"next":{"title":"Testes Orientados a Dados com Serenity BDD","permalink":"/pt-BR/docs/tutorials/data-driven-testing"}}');var a=s(4848),i=s(8453);const r={id:"rest-api-testing",title:"Testes Completos de API REST",sidebar_position:4},o="Testes Completos de API REST com Serenity BDD",d={},l=[{value:"APIs de Teste Usadas",id:"apis-de-teste-usadas",level:2},{value:"Configuracao do Projeto",id:"configuracao-do-projeto",level:2},{value:"Dependencias Maven",id:"dependencias-maven",level:3},{value:"Dependencias Gradle",id:"dependencias-gradle",level:3},{value:"Configuracao (serenity.conf)",id:"configuracao-serenityconf",level:3},{value:"Parte 1: Operacoes REST Basicas",id:"parte-1-operacoes-rest-basicas",level:2},{value:"Requisicao GET Simples",id:"requisicao-get-simples",level:3},{value:"Requisicao POST - Criando Recursos",id:"requisicao-post---criando-recursos",level:3},{value:"Usando POJOs para Request/Response",id:"usando-pojos-para-requestresponse",level:3},{value:"Requisicoes PUT e PATCH",id:"requisicoes-put-e-patch",level:3},{value:"Requisicao DELETE",id:"requisicao-delete",level:3},{value:"Parte 2: Screenplay Pattern para Testes de API",id:"parte-2-screenplay-pattern-para-testes-de-api",level:2},{value:"Configurando Actor com Ability de API",id:"configurando-actor-com-ability-de-api",level:3},{value:"Criando Task Reutilizaveis",id:"criando-task-reutilizaveis",level:3},{value:"Criando Question Reutilizaveis",id:"criando-question-reutilizaveis",level:3},{value:"Parte 3: Padroes de Autenticacao",id:"parte-3-padroes-de-autenticacao",level:2},{value:"Autenticacao Basica",id:"autenticacao-basica",level:3},{value:"Autenticacao com Bearer Token",id:"autenticacao-com-bearer-token",level:3},{value:"Autenticacao com API Key",id:"autenticacao-com-api-key",level:3},{value:"Task de Autenticacao com Screenplay",id:"task-de-autenticacao-com-screenplay",level:3},{value:"Parte 4: Tratamento de Erros e Validacao",id:"parte-4-tratamento-de-erros-e-validacao",level:2},{value:"Testando Respostas de Erro",id:"testando-respostas-de-erro",level:3},{value:"Testando Multiplos Status Codes",id:"testando-multiplos-status-codes",level:3},{value:"Validacao de JSON Schema",id:"validacao-de-json-schema",level:3},{value:"Validacao de Tempo de Resposta",id:"validacao-de-tempo-de-resposta",level:3},{value:"Parte 5: Chamadas de API Encadeadas",id:"parte-5-chamadas-de-api-encadeadas",level:2},{value:"Chamadas Encadeadas com Screenplay",id:"chamadas-encadeadas-com-screenplay",level:3},{value:"Parte 6: Testes de API Orientados a Dados",id:"parte-6-testes-de-api-orientados-a-dados",level:2},{value:"Testes Parametrizados",id:"testes-parametrizados",level:3},{value:"Carregando Dados de Teste de Arquivos",id:"carregando-dados-de-teste-de-arquivos",level:3},{value:"Parte 7: Upload e Download de Arquivos",id:"parte-7-upload-e-download-de-arquivos",level:2},{value:"Upload de Arquivo (Multipart)",id:"upload-de-arquivo-multipart",level:3},{value:"Download de Arquivo",id:"download-de-arquivo",level:3},{value:"Parte 8: Configuracao Avancada",id:"parte-8-configuracao-avancada",level:2},{value:"Request Specification (Configuracao Reutilizavel)",id:"request-specification-configuracao-reutilizavel",level:3},{value:"Response Specification (Assercoes Reutilizaveis)",id:"response-specification-assercoes-reutilizaveis",level:3},{value:"Timeouts e Retries",id:"timeouts-e-retries",level:3},{value:"Logging",id:"logging",level:3},{value:"Parte 9: Testes Hibridos UI + API",id:"parte-9-testes-hibridos-ui--api",level:2},{value:"Usando Playwright com Chamadas de API",id:"usando-playwright-com-chamadas-de-api",level:3},{value:"Parte 10: Melhores Praticas",id:"parte-10-melhores-praticas",level:2},{value:"1. Organize por Dominio",id:"1-organize-por-dominio",level:3},{value:"2. Use Assercoes Significativas",id:"2-use-assercoes-significativas",level:3},{value:"3. Extraia Setup Comum",id:"3-extraia-setup-comum",level:3},{value:"4. Use Tags para Categorias de Teste",id:"4-use-tags-para-categorias-de-teste",level:3},{value:"5. Limpe Dados de Teste",id:"5-limpe-dados-de-teste",level:3},{value:"Resumo",id:"resumo",level:2},{value:"Proximos Passos",id:"proximos-passos",level:2},{value:"Recursos",id:"recursos",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"testes-completos-de-api-rest-com-serenity-bdd",children:"Testes Completos de API REST com Serenity BDD"})}),"\n",(0,a.jsx)(n.p,{children:"Este tutorial fornece um guia completo para testar APIs REST com Serenity BDD, cobrindo desde requisicoes basicas ate padroes avancados como autenticacao, tratamento de erros, validacao de schema e testes hibridos UI+API."}),"\n",(0,a.jsx)(n.p,{children:"Todos os exemplos usam APIs de teste reais e publicamente disponiveis que voce pode usar para praticar."}),"\n",(0,a.jsx)(n.h2,{id:"apis-de-teste-usadas",children:"APIs de Teste Usadas"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"API"}),(0,a.jsx)(n.th,{children:"URL"}),(0,a.jsx)(n.th,{children:"Proposito"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"JSONPlaceholder"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.a,{href:"https://jsonplaceholder.typicode.com",children:"https://jsonplaceholder.typicode.com"})}),(0,a.jsx)(n.td,{children:"API fake gratuita para CRUD basico"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"ReqRes"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.a,{href:"https://reqres.in",children:"https://reqres.in"})}),(0,a.jsx)(n.td,{children:"Gerenciamento de usuarios com exemplos de autenticacao"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Restful-Booker"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.a,{href:"https://restful-booker.herokuapp.com",children:"https://restful-booker.herokuapp.com"})}),(0,a.jsx)(n.td,{children:"Reservas de hotel com autenticacao por token"})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"configuracao-do-projeto",children:"Configuracao do Projeto"}),"\n",(0,a.jsx)(n.h3,{id:"dependencias-maven",children:"Dependencias Maven"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:"<properties>\n    <serenity.version>5.2.2</serenity.version>\n</properties>\n\n<dependencies>\n    \x3c!-- Core Serenity --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-core</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Integracao Serenity REST Assured --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-rest-assured</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Serenity Screenplay REST (para o Screenplay Pattern) --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-screenplay-rest</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- JUnit 5 --\x3e\n    <dependency>\n        <groupId>net.serenity-bdd</groupId>\n        <artifactId>serenity-junit5</artifactId>\n        <version>${serenity.version}</version>\n        <scope>test</scope>\n    </dependency>\n\n    \x3c!-- Validacao de JSON Schema --\x3e\n    <dependency>\n        <groupId>io.rest-assured</groupId>\n        <artifactId>json-schema-validator</artifactId>\n        <version>5.3.2</version>\n        <scope>test</scope>\n    </dependency>\n</dependencies>\n"})}),"\n",(0,a.jsx)(n.h3,{id:"dependencias-gradle",children:"Dependencias Gradle"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-groovy",children:'dependencies {\n    testImplementation "net.serenity-bdd:serenity-core:5.2.2"\n    testImplementation "net.serenity-bdd:serenity-rest-assured:5.2.2"\n    testImplementation "net.serenity-bdd:serenity-screenplay-rest:5.2.2"\n    testImplementation "net.serenity-bdd:serenity-junit5:5.2.2"\n    testImplementation "io.rest-assured:json-schema-validator:5.3.2"\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"configuracao-serenityconf",children:"Configuracao (serenity.conf)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-hocon",children:'# URLs base para diferentes ambientes\nrestapi {\n    jsonplaceholder = "https://jsonplaceholder.typicode.com"\n    reqres = "https://reqres.in/api"\n    booker = "https://restful-booker.herokuapp.com"\n}\n\n# Logging de requisicoes\nserenity {\n    logging = VERBOSE\n}\n\n# Configuracoes do REST Assured\nrestassured {\n    # Logar todas as requisicoes e respostas\n    log.all = true\n}\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"parte-1-operacoes-rest-basicas",children:"Parte 1: Operacoes REST Basicas"}),"\n",(0,a.jsx)(n.h3,{id:"requisicao-get-simples",children:"Requisicao GET Simples"}),"\n",(0,a.jsx)(n.p,{children:"Vamos comecar com o teste de API mais simples possivel - buscar um recurso:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package com.example.api;\n\nimport net.serenitybdd.junit5.SerenityJUnit5Extension;\nimport net.serenitybdd.rest.SerenityRest;\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\n\nimport static net.serenitybdd.rest.SerenityRest.given;\nimport static org.hamcrest.Matchers.*;\n\n@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("Basic REST Operations")\nclass BasicRestTest {\n\n    private static final String BASE_URL = "https://jsonplaceholder.typicode.com";\n\n    @Test\n    @DisplayName("Should fetch a single user")\n    void shouldFetchSingleUser() {\n        given()\n            .baseUri(BASE_URL)\n        .when()\n            .get("/users/1")\n        .then()\n            .statusCode(200)\n            .body("id", equalTo(1))\n            .body("name", equalTo("Leanne Graham"))\n            .body("email", equalTo("Sincere@april.biz"));\n    }\n\n    @Test\n    @DisplayName("Should fetch all users")\n    void shouldFetchAllUsers() {\n        given()\n            .baseUri(BASE_URL)\n        .when()\n            .get("/users")\n        .then()\n            .statusCode(200)\n            .body("size()", equalTo(10))\n            .body("name", hasItems("Leanne Graham", "Ervin Howell"));\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"requisicao-post---criando-recursos",children:"Requisicao POST - Criando Recursos"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Test\n@DisplayName("Should create a new post")\nvoid shouldCreateNewPost() {\n    String requestBody = """\n        {\n            "title": "My New Post",\n            "body": "This is the content of my post",\n            "userId": 1\n        }\n        """;\n\n    given()\n        .baseUri(BASE_URL)\n        .contentType("application/json")\n        .body(requestBody)\n    .when()\n        .post("/posts")\n    .then()\n        .statusCode(201)\n        .body("title", equalTo("My New Post"))\n        .body("id", notNullValue());\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"usando-pojos-para-requestresponse",children:"Usando POJOs para Request/Response"}),"\n",(0,a.jsx)(n.p,{children:"Crie classes de modelo para codigo mais limpo:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"// Post.java\npublic class Post {\n    private Integer id;\n    private String title;\n    private String body;\n    private Integer userId;\n\n    // Construtor padrao para desserializacao JSON\n    public Post() {}\n\n    public Post(String title, String body, Integer userId) {\n        this.title = title;\n        this.body = body;\n        this.userId = userId;\n    }\n\n    // Getters e setters\n    public Integer getId() { return id; }\n    public void setId(Integer id) { this.id = id; }\n    public String getTitle() { return title; }\n    public void setTitle(String title) { this.title = title; }\n    public String getBody() { return body; }\n    public void setBody(String body) { this.body = body; }\n    public Integer getUserId() { return userId; }\n    public void setUserId(Integer userId) { this.userId = userId; }\n}\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Test\n@DisplayName("Should create post using POJO")\nvoid shouldCreatePostUsingPojo() {\n    Post newPost = new Post("POJO Title", "Content from POJO", 1);\n\n    Post createdPost = given()\n        .baseUri(BASE_URL)\n        .contentType("application/json")\n        .body(newPost)\n    .when()\n        .post("/posts")\n    .then()\n        .statusCode(201)\n        .extract()\n        .as(Post.class);\n\n    assertThat(createdPost.getTitle()).isEqualTo("POJO Title");\n    assertThat(createdPost.getId()).isNotNull();\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"requisicoes-put-e-patch",children:"Requisicoes PUT e PATCH"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Test\n@DisplayName("Should update entire post with PUT")\nvoid shouldUpdatePostWithPut() {\n    Post updatedPost = new Post("Updated Title", "Updated Body", 1);\n\n    given()\n        .baseUri(BASE_URL)\n        .contentType("application/json")\n        .body(updatedPost)\n    .when()\n        .put("/posts/1")\n    .then()\n        .statusCode(200)\n        .body("title", equalTo("Updated Title"));\n}\n\n@Test\n@DisplayName("Should partially update post with PATCH")\nvoid shouldPartiallyUpdateWithPatch() {\n    given()\n        .baseUri(BASE_URL)\n        .contentType("application/json")\n        .body("{\\"title\\": \\"Patched Title\\"}")\n    .when()\n        .patch("/posts/1")\n    .then()\n        .statusCode(200)\n        .body("title", equalTo("Patched Title"))\n        .body("body", notNullValue()); // Body original preservado\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"requisicao-delete",children:"Requisicao DELETE"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Test\n@DisplayName("Should delete a post")\nvoid shouldDeletePost() {\n    given()\n        .baseUri(BASE_URL)\n    .when()\n        .delete("/posts/1")\n    .then()\n        .statusCode(200);\n}\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"parte-2-screenplay-pattern-para-testes-de-api",children:"Parte 2: Screenplay Pattern para Testes de API"}),"\n",(0,a.jsx)(n.p,{children:"O Screenplay Pattern fornece uma abordagem mais sustentavel e centrada no ator:"}),"\n",(0,a.jsx)(n.h3,{id:"configurando-actor-com-ability-de-api",children:"Configurando Actor com Ability de API"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package com.example.api.screenplay;\n\nimport net.serenitybdd.junit5.SerenityJUnit5Extension;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.rest.abilities.CallAnApi;\nimport net.serenitybdd.screenplay.rest.interactions.*;\nimport org.junit.jupiter.api.*;\nimport org.junit.jupiter.api.extension.ExtendWith;\n\nimport static net.serenitybdd.screenplay.rest.questions.ResponseConsequence.seeThatResponse;\nimport static org.hamcrest.Matchers.*;\n\n@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("Screenplay REST API Tests")\nclass ScreenplayRestTest {\n\n    private static final String BASE_URL = "https://jsonplaceholder.typicode.com";\n\n    Actor alex;\n\n    @BeforeEach\n    void setUp() {\n        alex = Actor.named("Alex the API tester")\n                    .whoCan(CallAnApi.at(BASE_URL));\n    }\n\n    @Test\n    @DisplayName("Should fetch user with Screenplay")\n    void shouldFetchUserWithScreenplay() {\n        alex.attemptsTo(\n            Get.resource("/users/1")\n        );\n\n        alex.should(\n            seeThatResponse("User details are correct",\n                response -> response\n                    .statusCode(200)\n                    .body("name", equalTo("Leanne Graham"))\n            )\n        );\n    }\n\n    @Test\n    @DisplayName("Should create post with Screenplay")\n    void shouldCreatePostWithScreenplay() {\n        alex.attemptsTo(\n            Post.to("/posts")\n                .with(request -> request\n                    .contentType("application/json")\n                    .body(new Post("Screenplay Post", "Content", 1))\n                )\n        );\n\n        alex.should(\n            seeThatResponse("Post was created",\n                response -> response\n                    .statusCode(201)\n                    .body("title", equalTo("Screenplay Post"))\n            )\n        );\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"criando-task-reutilizaveis",children:"Criando Task Reutilizaveis"}),"\n",(0,a.jsx)(n.p,{children:"Encapsule operacoes de API em Task reutilizaveis:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// tasks/CreatePost.java\npackage com.example.api.tasks;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.rest.interactions.Post;\nimport net.thucydides.core.annotations.Step;\nimport com.example.api.model.Post;\n\nimport static net.serenitybdd.screenplay.Tasks.instrumented;\n\npublic class CreatePost implements Task {\n\n    private final Post post;\n\n    public CreatePost(Post post) {\n        this.post = post;\n    }\n\n    public static CreatePost withDetails(String title, String body, int userId) {\n        return instrumented(CreatePost.class, new Post(title, body, userId));\n    }\n\n    public static CreatePost withTitle(String title) {\n        return instrumented(CreatePost.class, new Post(title, "Default body", 1));\n    }\n\n    @Override\n    @Step("{0} creates a new post titled \'#post.title\'")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Post.to("/posts")\n                .with(request -> request\n                    .contentType("application/json")\n                    .body(post)\n                )\n        );\n    }\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// tasks/FetchUser.java\npackage com.example.api.tasks;\n\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.rest.interactions.Get;\nimport net.thucydides.core.annotations.Step;\n\nimport static net.serenitybdd.screenplay.Tasks.instrumented;\n\npublic class FetchUser implements Task {\n\n    private final int userId;\n\n    public FetchUser(int userId) {\n        this.userId = userId;\n    }\n\n    public static FetchUser withId(int userId) {\n        return instrumented(FetchUser.class, userId);\n    }\n\n    @Override\n    @Step("{0} fetches user with ID #userId")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Get.resource("/users/{id}")\n               .with(request -> request.pathParam("id", userId))\n        );\n    }\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"Usando as Task:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Test\n@DisplayName("Should use custom tasks for API operations")\nvoid shouldUseCustomTasks() {\n    alex.attemptsTo(\n        CreatePost.withDetails("Task-based Post", "Content from task", 1)\n    );\n\n    alex.should(\n        seeThatResponse("Post was created successfully",\n            response -> response.statusCode(201)\n        )\n    );\n\n    alex.attemptsTo(\n        FetchUser.withId(1)\n    );\n\n    alex.should(\n        seeThatResponse("User was retrieved",\n            response -> response\n                .statusCode(200)\n                .body("name", notNullValue())\n        )\n    );\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"criando-question-reutilizaveis",children:"Criando Question Reutilizaveis"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// questions/TheUser.java\npackage com.example.api.questions;\n\nimport net.serenitybdd.rest.SerenityRest;\nimport net.serenitybdd.screenplay.Question;\nimport com.example.api.model.User;\n\npublic class TheUser {\n\n    public static Question<User> details() {\n        return actor -> SerenityRest.lastResponse()\n                                    .jsonPath()\n                                    .getObject("", User.class);\n    }\n\n    public static Question<String> name() {\n        return actor -> SerenityRest.lastResponse()\n                                    .jsonPath()\n                                    .getString("name");\n    }\n\n    public static Question<String> email() {\n        return actor -> SerenityRest.lastResponse()\n                                    .jsonPath()\n                                    .getString("email");\n    }\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Test\n@DisplayName("Should use questions to query responses")\nvoid shouldUseQuestionsToQueryResponses() {\n    alex.attemptsTo(\n        FetchUser.withId(1)\n    );\n\n    String userName = alex.asksFor(TheUser.name());\n    assertThat(userName).isEqualTo("Leanne Graham");\n\n    User user = alex.asksFor(TheUser.details());\n    assertThat(user.getEmail()).isEqualTo("Sincere@april.biz");\n}\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"parte-3-padroes-de-autenticacao",children:"Parte 3: Padroes de Autenticacao"}),"\n",(0,a.jsx)(n.h3,{id:"autenticacao-basica",children:"Autenticacao Basica"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Test\n@DisplayName("Should authenticate with Basic Auth")\nvoid shouldAuthenticateWithBasicAuth() {\n    given()\n        .baseUri("https://httpbin.org")\n        .auth().basic("user", "passwd")\n    .when()\n        .get("/basic-auth/user/passwd")\n    .then()\n        .statusCode(200)\n        .body("authenticated", equalTo(true));\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"autenticacao-com-bearer-token",children:"Autenticacao com Bearer Token"}),"\n",(0,a.jsx)(n.p,{children:"Usando a API Restful-Booker para autenticacao baseada em token:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("Token Authentication Tests")\nclass TokenAuthTest {\n\n    private static final String BOOKER_URL = "https://restful-booker.herokuapp.com";\n    private String authToken;\n\n    @BeforeEach\n    void authenticate() {\n        // Obter token de autenticacao\n        authToken = given()\n            .baseUri(BOOKER_URL)\n            .contentType("application/json")\n            .body("""\n                {\n                    "username": "admin",\n                    "password": "password123"\n                }\n                """)\n        .when()\n            .post("/auth")\n        .then()\n            .statusCode(200)\n            .extract()\n            .path("token");\n\n        assertThat(authToken).isNotNull();\n    }\n\n    @Test\n    @DisplayName("Should use token for authenticated requests")\n    void shouldUseTokenForAuthenticatedRequests() {\n        // Criar uma reserva\n        String bookingBody = """\n            {\n                "firstname": "John",\n                "lastname": "Doe",\n                "totalprice": 150,\n                "depositpaid": true,\n                "bookingdates": {\n                    "checkin": "2024-01-01",\n                    "checkout": "2024-01-05"\n                },\n                "additionalneeds": "Breakfast"\n            }\n            """;\n\n        int bookingId = given()\n            .baseUri(BOOKER_URL)\n            .contentType("application/json")\n            .body(bookingBody)\n        .when()\n            .post("/booking")\n        .then()\n            .statusCode(200)\n            .extract()\n            .path("bookingid");\n\n        // Atualizar reserva usando token\n        given()\n            .baseUri(BOOKER_URL)\n            .contentType("application/json")\n            .cookie("token", authToken)  // Token no cookie\n            .body("""\n                {\n                    "firstname": "Jane",\n                    "lastname": "Doe",\n                    "totalprice": 200,\n                    "depositpaid": true,\n                    "bookingdates": {\n                        "checkin": "2024-01-01",\n                        "checkout": "2024-01-05"\n                    },\n                    "additionalneeds": "Dinner"\n                }\n                """)\n        .when()\n            .put("/booking/" + bookingId)\n        .then()\n            .statusCode(200)\n            .body("firstname", equalTo("Jane"));\n    }\n\n    @Test\n    @DisplayName("Should use Authorization header for token")\n    void shouldUseAuthorizationHeader() {\n        given()\n            .baseUri(BOOKER_URL)\n            .header("Authorization", "Bearer " + authToken)\n        .when()\n            .get("/booking")\n        .then()\n            .statusCode(200);\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"autenticacao-com-api-key",children:"Autenticacao com API Key"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Test\n@DisplayName("Should authenticate with API key in header")\nvoid shouldAuthenticateWithApiKey() {\n    given()\n        .baseUri("https://api.example.com")\n        .header("X-API-Key", "your-api-key-here")\n    .when()\n        .get("/protected-resource")\n    .then()\n        .statusCode(200);\n}\n\n@Test\n@DisplayName("Should authenticate with API key in query parameter")\nvoid shouldAuthenticateWithApiKeyInQuery() {\n    given()\n        .baseUri("https://api.example.com")\n        .queryParam("api_key", "your-api-key-here")\n    .when()\n        .get("/protected-resource")\n    .then()\n        .statusCode(200);\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"task-de-autenticacao-com-screenplay",children:"Task de Autenticacao com Screenplay"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// tasks/Authenticate.java\npackage com.example.api.tasks;\n\nimport net.serenitybdd.rest.SerenityRest;\nimport net.serenitybdd.screenplay.Actor;\nimport net.serenitybdd.screenplay.Task;\nimport net.serenitybdd.screenplay.rest.interactions.Post;\nimport net.thucydides.core.annotations.Step;\n\nimport static net.serenitybdd.screenplay.Tasks.instrumented;\n\npublic class Authenticate implements Task {\n\n    private final String username;\n    private final String password;\n\n    public Authenticate(String username, String password) {\n        this.username = username;\n        this.password = password;\n    }\n\n    public static Authenticate withCredentials(String username, String password) {\n        return instrumented(Authenticate.class, username, password);\n    }\n\n    public static Authenticate asAdmin() {\n        return instrumented(Authenticate.class, "admin", "password123");\n    }\n\n    @Override\n    @Step("{0} authenticates as #username")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n            Post.to("/auth")\n                .with(request -> request\n                    .contentType("application/json")\n                    .body(String.format("""\n                        {"username": "%s", "password": "%s"}\n                        """, username, password))\n                )\n        );\n\n        String token = SerenityRest.lastResponse().path("token");\n        actor.remember("authToken", token);\n    }\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"Usando a Task de autenticacao:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Test\n@DisplayName("Should authenticate and use token in subsequent requests")\nvoid shouldAuthenticateAndUseToken() {\n    Actor admin = Actor.named("Admin")\n                       .whoCan(CallAnApi.at(BOOKER_URL));\n\n    admin.attemptsTo(\n        Authenticate.asAdmin()\n    );\n\n    String token = admin.recall("authToken");\n    assertThat(token).isNotNull();\n\n    // Usar token na requisicao subsequente\n    admin.attemptsTo(\n        Get.resource("/booking")\n           .with(request -> request.cookie("token", token))\n    );\n\n    admin.should(\n        seeThatResponse(response -> response.statusCode(200))\n    );\n}\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"parte-4-tratamento-de-erros-e-validacao",children:"Parte 4: Tratamento de Erros e Validacao"}),"\n",(0,a.jsx)(n.h3,{id:"testando-respostas-de-erro",children:"Testando Respostas de Erro"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("Error Handling Tests")\nclass ErrorHandlingTest {\n\n    private static final String BASE_URL = "https://jsonplaceholder.typicode.com";\n\n    @Test\n    @DisplayName("Should handle 404 Not Found")\n    void shouldHandle404NotFound() {\n        given()\n            .baseUri(BASE_URL)\n        .when()\n            .get("/users/99999")\n        .then()\n            .statusCode(404);\n    }\n\n    @Test\n    @DisplayName("Should handle invalid request body")\n    void shouldHandleInvalidRequestBody() {\n        given()\n            .baseUri("https://reqres.in/api")\n            .contentType("application/json")\n            .body("{invalid json}")\n        .when()\n            .post("/users")\n        .then()\n            .statusCode(anyOf(equalTo(400), equalTo(500)));\n    }\n\n    @Test\n    @DisplayName("Should verify error message content")\n    void shouldVerifyErrorMessageContent() {\n        given()\n            .baseUri("https://reqres.in/api")\n        .when()\n            .post("/login")  // Campos obrigatorios ausentes\n        .then()\n            .statusCode(400)\n            .body("error", equalTo("Missing email or username"));\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"testando-multiplos-status-codes",children:"Testando Multiplos Status Codes"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@ParameterizedTest\n@CsvSource({\n    "1, 200",\n    "2, 200",\n    "99999, 404"\n})\n@DisplayName("Should return correct status for user ID")\nvoid shouldReturnCorrectStatusForUserId(int userId, int expectedStatus) {\n    given()\n        .baseUri("https://reqres.in/api")\n    .when()\n        .get("/users/" + userId)\n    .then()\n        .statusCode(expectedStatus);\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"validacao-de-json-schema",children:"Validacao de JSON Schema"}),"\n",(0,a.jsxs)(n.p,{children:["Crie um arquivo de schema em ",(0,a.jsx)(n.code,{children:"src/test/resources/schemas/user-schema.json"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n    "$schema": "http://json-schema.org/draft-07/schema#",\n    "type": "object",\n    "required": ["data"],\n    "properties": {\n        "data": {\n            "type": "object",\n            "required": ["id", "email", "first_name", "last_name", "avatar"],\n            "properties": {\n                "id": {\n                    "type": "integer"\n                },\n                "email": {\n                    "type": "string",\n                    "format": "email"\n                },\n                "first_name": {\n                    "type": "string",\n                    "minLength": 1\n                },\n                "last_name": {\n                    "type": "string",\n                    "minLength": 1\n                },\n                "avatar": {\n                    "type": "string",\n                    "format": "uri"\n                }\n            }\n        }\n    }\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'import static io.restassured.module.jsv.JsonSchemaValidator.matchesJsonSchemaInClasspath;\n\n@Test\n@DisplayName("Should match JSON schema")\nvoid shouldMatchJsonSchema() {\n    given()\n        .baseUri("https://reqres.in/api")\n    .when()\n        .get("/users/1")\n    .then()\n        .statusCode(200)\n        .body(matchesJsonSchemaInClasspath("schemas/user-schema.json"));\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"validacao-de-tempo-de-resposta",children:"Validacao de Tempo de Resposta"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'import static java.util.concurrent.TimeUnit.SECONDS;\nimport static java.util.concurrent.TimeUnit.MILLISECONDS;\n\n@Test\n@DisplayName("Should respond within acceptable time")\nvoid shouldRespondWithinAcceptableTime() {\n    given()\n        .baseUri(BASE_URL)\n    .when()\n        .get("/users")\n    .then()\n        .statusCode(200)\n        .time(lessThan(5L), SECONDS);\n}\n\n@Test\n@DisplayName("Should track response time")\nvoid shouldTrackResponseTime() {\n    long responseTime = given()\n        .baseUri(BASE_URL)\n    .when()\n        .get("/users")\n    .then()\n        .extract()\n        .time();\n\n    System.out.println("Response time: " + responseTime + "ms");\n    assertThat(responseTime).isLessThan(5000);\n}\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"parte-5-chamadas-de-api-encadeadas",children:"Parte 5: Chamadas de API Encadeadas"}),"\n",(0,a.jsx)(n.p,{children:"Frequentemente voce precisa usar dados de uma chamada de API em chamadas subsequentes:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("Chained API Calls")\nclass ChainedApiTest {\n\n    private static final String BASE_URL = "https://jsonplaceholder.typicode.com";\n\n    @Test\n    @DisplayName("Should create post and then fetch it")\n    void shouldCreatePostAndThenFetchIt() {\n        // Passo 1: Criar um novo post\n        Post newPost = new Post("Chained Test", "Testing chained calls", 1);\n\n        Integer postId = given()\n            .baseUri(BASE_URL)\n            .contentType("application/json")\n            .body(newPost)\n        .when()\n            .post("/posts")\n        .then()\n            .statusCode(201)\n            .extract()\n            .path("id");\n\n        // Passo 2: Buscar o post criado\n        given()\n            .baseUri(BASE_URL)\n        .when()\n            .get("/posts/" + postId)\n        .then()\n            .statusCode(200)\n            .body("title", equalTo("Chained Test"));\n    }\n\n    @Test\n    @DisplayName("Should fetch user and then their posts")\n    void shouldFetchUserAndTheirPosts() {\n        // Passo 1: Obter usuario\n        int userId = given()\n            .baseUri(BASE_URL)\n        .when()\n            .get("/users/1")\n        .then()\n            .statusCode(200)\n            .extract()\n            .path("id");\n\n        // Passo 2: Obter posts desse usuario\n        given()\n            .baseUri(BASE_URL)\n            .queryParam("userId", userId)\n        .when()\n            .get("/posts")\n        .then()\n            .statusCode(200)\n            .body("size()", greaterThan(0))\n            .body("userId", everyItem(equalTo(userId)));\n    }\n\n    @Test\n    @DisplayName("Should perform CRUD lifecycle")\n    void shouldPerformCrudLifecycle() {\n        // CREATE\n        Integer postId = given()\n            .baseUri(BASE_URL)\n            .contentType("application/json")\n            .body(new Post("CRUD Test", "Initial content", 1))\n        .when()\n            .post("/posts")\n        .then()\n            .statusCode(201)\n            .extract()\n            .path("id");\n\n        System.out.println("Created post with ID: " + postId);\n\n        // READ\n        given()\n            .baseUri(BASE_URL)\n        .when()\n            .get("/posts/" + postId)\n        .then()\n            .statusCode(200)\n            .body("title", equalTo("CRUD Test"));\n\n        // UPDATE\n        given()\n            .baseUri(BASE_URL)\n            .contentType("application/json")\n            .body(new Post("Updated CRUD Test", "Updated content", 1))\n        .when()\n            .put("/posts/" + postId)\n        .then()\n            .statusCode(200)\n            .body("title", equalTo("Updated CRUD Test"));\n\n        // DELETE\n        given()\n            .baseUri(BASE_URL)\n        .when()\n            .delete("/posts/" + postId)\n        .then()\n            .statusCode(200);\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"chamadas-encadeadas-com-screenplay",children:"Chamadas Encadeadas com Screenplay"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Test\n@DisplayName("Should chain API calls with Screenplay")\nvoid shouldChainApiCallsWithScreenplay() {\n    Actor tester = Actor.named("API Tester")\n                        .whoCan(CallAnApi.at(BASE_URL));\n\n    // Criar post e lembrar o ID\n    tester.attemptsTo(\n        Post.to("/posts")\n            .with(request -> request\n                .contentType("application/json")\n                .body(new Post("Screenplay Chain", "Content", 1))\n            )\n    );\n\n    Integer postId = SerenityRest.lastResponse().path("id");\n    tester.remember("postId", postId);\n\n    // Buscar o post usando o ID lembrado\n    tester.attemptsTo(\n        Get.resource("/posts/{id}")\n           .with(request -> request.pathParam("id", tester.recall("postId")))\n    );\n\n    tester.should(\n        seeThatResponse(response -> response\n            .statusCode(200)\n            .body("title", equalTo("Screenplay Chain"))\n        )\n    );\n}\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"parte-6-testes-de-api-orientados-a-dados",children:"Parte 6: Testes de API Orientados a Dados"}),"\n",(0,a.jsx)(n.h3,{id:"testes-parametrizados",children:"Testes Parametrizados"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("Data-Driven API Tests")\nclass DataDrivenApiTest {\n\n    private static final String BASE_URL = "https://jsonplaceholder.typicode.com";\n\n    @ParameterizedTest\n    @ValueSource(ints = {1, 2, 3, 4, 5})\n    @DisplayName("Should fetch user by ID")\n    void shouldFetchUserById(int userId) {\n        given()\n            .baseUri(BASE_URL)\n        .when()\n            .get("/users/" + userId)\n        .then()\n            .statusCode(200)\n            .body("id", equalTo(userId));\n    }\n\n    @ParameterizedTest\n    @CsvSource({\n        "1, Leanne Graham, Sincere@april.biz",\n        "2, Ervin Howell, Shanna@melissa.tv",\n        "3, Clementine Bauch, Nathan@yesenia.net"\n    })\n    @DisplayName("Should verify user details")\n    void shouldVerifyUserDetails(int id, String name, String email) {\n        given()\n            .baseUri(BASE_URL)\n        .when()\n            .get("/users/" + id)\n        .then()\n            .statusCode(200)\n            .body("name", equalTo(name))\n            .body("email", equalTo(email));\n    }\n\n    @ParameterizedTest\n    @MethodSource("postDataProvider")\n    @DisplayName("Should create posts with various data")\n    void shouldCreatePostsWithVariousData(Post post) {\n        given()\n            .baseUri(BASE_URL)\n            .contentType("application/json")\n            .body(post)\n        .when()\n            .post("/posts")\n        .then()\n            .statusCode(201)\n            .body("title", equalTo(post.getTitle()));\n    }\n\n    static Stream<Post> postDataProvider() {\n        return Stream.of(\n            new Post("First Post", "Content 1", 1),\n            new Post("Second Post", "Content 2", 2),\n            new Post("Third Post", "Content 3", 3)\n        );\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"carregando-dados-de-teste-de-arquivos",children:"Carregando Dados de Teste de Arquivos"}),"\n",(0,a.jsxs)(n.p,{children:["Crie um arquivo de dados de teste ",(0,a.jsx)(n.code,{children:"src/test/resources/testdata/users.json"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'[\n    {"userId": 1, "expectedName": "Leanne Graham"},\n    {"userId": 2, "expectedName": "Ervin Howell"},\n    {"userId": 3, "expectedName": "Clementine Bauch"}\n]\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@ParameterizedTest\n@MethodSource("loadUsersFromFile")\n@DisplayName("Should verify users from JSON file")\nvoid shouldVerifyUsersFromFile(int userId, String expectedName) {\n    given()\n        .baseUri(BASE_URL)\n    .when()\n        .get("/users/" + userId)\n    .then()\n        .statusCode(200)\n        .body("name", equalTo(expectedName));\n}\n\nstatic Stream<Arguments> loadUsersFromFile() throws Exception {\n    ObjectMapper mapper = new ObjectMapper();\n    List<Map<String, Object>> users = mapper.readValue(\n        new File("src/test/resources/testdata/users.json"),\n        new TypeReference<List<Map<String, Object>>>() {}\n    );\n\n    return users.stream()\n        .map(user -> Arguments.of(\n            ((Number) user.get("userId")).intValue(),\n            user.get("expectedName")\n        ));\n}\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"parte-7-upload-e-download-de-arquivos",children:"Parte 7: Upload e Download de Arquivos"}),"\n",(0,a.jsx)(n.h3,{id:"upload-de-arquivo-multipart",children:"Upload de Arquivo (Multipart)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Test\n@DisplayName("Should upload a file")\nvoid shouldUploadFile() {\n    File testFile = new File("src/test/resources/testdata/sample.txt");\n\n    given()\n        .baseUri("https://httpbin.org")\n        .multiPart("file", testFile)\n    .when()\n        .post("/post")\n    .then()\n        .statusCode(200)\n        .body("files.file", notNullValue());\n}\n\n@Test\n@DisplayName("Should upload file with additional form data")\nvoid shouldUploadFileWithFormData() {\n    File testFile = new File("src/test/resources/testdata/sample.txt");\n\n    given()\n        .baseUri("https://httpbin.org")\n        .multiPart("file", testFile)\n        .formParam("description", "Test file upload")\n        .formParam("category", "documents")\n    .when()\n        .post("/post")\n    .then()\n        .statusCode(200);\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"download-de-arquivo",children:"Download de Arquivo"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Test\n@DisplayName("Should download a file")\nvoid shouldDownloadFile() {\n    byte[] fileContent = given()\n        .baseUri("https://httpbin.org")\n    .when()\n        .get("/image/png")\n    .then()\n        .statusCode(200)\n        .contentType("image/png")\n        .extract()\n        .asByteArray();\n\n    assertThat(fileContent.length).isGreaterThan(0);\n\n    // Opcionalmente salvar em arquivo\n    // Files.write(Paths.get("downloaded.png"), fileContent);\n}\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"parte-8-configuracao-avancada",children:"Parte 8: Configuracao Avancada"}),"\n",(0,a.jsx)(n.h3,{id:"request-specification-configuracao-reutilizavel",children:"Request Specification (Configuracao Reutilizavel)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\nclass RequestSpecificationTest {\n\n    private RequestSpecification baseSpec;\n\n    @BeforeEach\n    void setup() {\n        baseSpec = new RequestSpecBuilder()\n            .setBaseUri("https://jsonplaceholder.typicode.com")\n            .setContentType("application/json")\n            .addHeader("Accept", "application/json")\n            .log(LogDetail.ALL)\n            .build();\n    }\n\n    @Test\n    @DisplayName("Should use request specification")\n    void shouldUseRequestSpecification() {\n        given()\n            .spec(baseSpec)\n        .when()\n            .get("/users/1")\n        .then()\n            .statusCode(200);\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"response-specification-assercoes-reutilizaveis",children:"Response Specification (Assercoes Reutilizaveis)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\nclass ResponseSpecificationTest {\n\n    private ResponseSpecification successSpec;\n    private ResponseSpecification errorSpec;\n\n    @BeforeEach\n    void setup() {\n        successSpec = new ResponseSpecBuilder()\n            .expectStatusCode(200)\n            .expectContentType("application/json")\n            .expectResponseTime(lessThan(5000L))\n            .build();\n\n        errorSpec = new ResponseSpecBuilder()\n            .expectStatusCode(404)\n            .build();\n    }\n\n    @Test\n    @DisplayName("Should use success response specification")\n    void shouldUseSuccessResponseSpec() {\n        given()\n            .baseUri("https://jsonplaceholder.typicode.com")\n        .when()\n            .get("/users/1")\n        .then()\n            .spec(successSpec)\n            .body("name", notNullValue());\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"timeouts-e-retries",children:"Timeouts e Retries"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'import static io.restassured.config.HttpClientConfig.httpClientConfig;\n\n@Test\n@DisplayName("Should configure connection timeout")\nvoid shouldConfigureTimeout() {\n    given()\n        .baseUri("https://jsonplaceholder.typicode.com")\n        .config(RestAssured.config()\n            .httpClient(httpClientConfig()\n                .setParam("http.connection.timeout", 5000)\n                .setParam("http.socket.timeout", 5000)\n            )\n        )\n    .when()\n        .get("/users")\n    .then()\n        .statusCode(200);\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"logging",children:"Logging"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Test\n@DisplayName("Should log request and response")\nvoid shouldLogRequestAndResponse() {\n    given()\n        .baseUri("https://jsonplaceholder.typicode.com")\n        .log().all()  // Logar toda a requisicao\n    .when()\n        .get("/users/1")\n    .then()\n        .log().all()  // Logar toda a resposta\n        .statusCode(200);\n}\n\n@Test\n@DisplayName("Should log only on failure")\nvoid shouldLogOnlyOnFailure() {\n    given()\n        .baseUri("https://jsonplaceholder.typicode.com")\n        .log().ifValidationFails()\n    .when()\n        .get("/users/1")\n    .then()\n        .log().ifValidationFails()\n        .statusCode(200);\n}\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"parte-9-testes-hibridos-ui--api",children:"Parte 9: Testes Hibridos UI + API"}),"\n",(0,a.jsx)(n.p,{children:"Combine testes de UI e API para cenarios end-to-end poderosos:"}),"\n",(0,a.jsx)(n.h3,{id:"usando-playwright-com-chamadas-de-api",children:"Usando Playwright com Chamadas de API"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'import net.serenitybdd.screenplay.playwright.abilities.BrowseTheWebWithPlaywright;\nimport net.serenitybdd.screenplay.playwright.interactions.*;\nimport net.serenitybdd.screenplay.rest.abilities.CallAnApi;\nimport net.serenitybdd.screenplay.rest.interactions.Post;\n\n@ExtendWith(SerenityJUnit5Extension.class)\n@DisplayName("Hybrid UI + API Tests")\nclass HybridTest {\n\n    @Test\n    @DisplayName("Should create data via API and verify in UI")\n    void shouldCreateDataViaApiAndVerifyInUi() {\n        // Actor com ambas as Ability\n        Actor tester = Actor.named("Hybrid Tester")\n            .whoCan(CallAnApi.at("https://api.example.com"))\n            .whoCan(BrowseTheWebWithPlaywright.usingTheDefaultConfiguration());\n\n        // Criar dados via API\n        tester.attemptsTo(\n            Post.to("/products")\n                .with(request -> request\n                    .contentType("application/json")\n                    .body("""\n                        {"name": "New Product", "price": 99.99}\n                        """)\n                )\n        );\n\n        // Verificar na UI\n        tester.attemptsTo(\n            Open.url("https://example.com/products"),\n            Ensure.that(Text.of(".product-name")).contains("New Product")\n        );\n    }\n\n    @Test\n    @DisplayName("Should perform UI action and verify via API")\n    void shouldPerformUiActionAndVerifyViaApi() {\n        Actor tester = Actor.named("Hybrid Tester")\n            .whoCan(CallAnApi.at("https://api.example.com"))\n            .whoCan(BrowseTheWebWithPlaywright.usingTheDefaultConfiguration());\n\n        // Realizar acao na UI\n        tester.attemptsTo(\n            Open.url("https://example.com/checkout"),\n            Click.on("#place-order-button")\n        );\n\n        // Verificar via API\n        tester.attemptsTo(\n            Get.resource("/orders/latest")\n        );\n\n        tester.should(\n            seeThatResponse(response -> response\n                .statusCode(200)\n                .body("status", equalTo("placed"))\n            )\n        );\n    }\n}\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"parte-10-melhores-praticas",children:"Parte 10: Melhores Praticas"}),"\n",(0,a.jsx)(n.h3,{id:"1-organize-por-dominio",children:"1. Organize por Dominio"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"src/test/java/com/example/api/\n\u251c\u2500\u2500 model/\n\u2502   \u251c\u2500\u2500 User.java\n\u2502   \u251c\u2500\u2500 Post.java\n\u2502   \u2514\u2500\u2500 Booking.java\n\u251c\u2500\u2500 tasks/\n\u2502   \u251c\u2500\u2500 CreateUser.java\n\u2502   \u251c\u2500\u2500 FetchUser.java\n\u2502   \u2514\u2500\u2500 Authenticate.java\n\u251c\u2500\u2500 questions/\n\u2502   \u251c\u2500\u2500 TheUser.java\n\u2502   \u2514\u2500\u2500 TheResponse.java\n\u251c\u2500\u2500 specs/\n\u2502   \u251c\u2500\u2500 RequestSpecs.java\n\u2502   \u2514\u2500\u2500 ResponseSpecs.java\n\u2514\u2500\u2500 tests/\n    \u251c\u2500\u2500 UserApiTest.java\n    \u251c\u2500\u2500 PostApiTest.java\n    \u2514\u2500\u2500 AuthenticationTest.java\n"})}),"\n",(0,a.jsx)(n.h3,{id:"2-use-assercoes-significativas",children:"2. Use Assercoes Significativas"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// Ruim\nresponse.body("data", notNullValue());\n\n// Bom\nresponse.body("data.id", equalTo(expectedUserId))\n        .body("data.email", matchesPattern("^[\\\\w.-]+@[\\\\w.-]+\\\\.\\\\w+$"))\n        .body("data.created_at", notNullValue());\n'})}),"\n",(0,a.jsx)(n.h3,{id:"3-extraia-setup-comum",children:"3. Extraia Setup Comum"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'public class ApiTestBase {\n\n    protected static final String BASE_URL =\n        System.getProperty("api.baseurl", "https://api.example.com");\n\n    protected RequestSpecification baseRequest() {\n        return given()\n            .baseUri(BASE_URL)\n            .contentType("application/json")\n            .accept("application/json")\n            .log().ifValidationFails();\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"4-use-tags-para-categorias-de-teste",children:"4. Use Tags para Categorias de Teste"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Tag("smoke")\n@Test\nvoid criticalEndpointTest() { }\n\n@Tag("regression")\n@Test\nvoid detailedValidationTest() { }\n\n@Tag("slow")\n@Test\nvoid performanceTest() { }\n'})}),"\n",(0,a.jsx)(n.h3,{id:"5-limpe-dados-de-teste",children:"5. Limpe Dados de Teste"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@AfterEach\nvoid cleanup() {\n    if (createdResourceId != null) {\n        given()\n            .baseUri(BASE_URL)\n            .header("Authorization", "Bearer " + authToken)\n        .when()\n            .delete("/resources/" + createdResourceId)\n        .then()\n            .statusCode(anyOf(equalTo(200), equalTo(204), equalTo(404)));\n    }\n}\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"resumo",children:"Resumo"}),"\n",(0,a.jsx)(n.p,{children:"Este tutorial cobriu:"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Topico"}),(0,a.jsx)(n.th,{children:"Descricao"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Operacoes Basicas"}),(0,a.jsx)(n.td,{children:"Requisicoes GET, POST, PUT, PATCH, DELETE"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Screenplay Pattern"}),(0,a.jsx)(n.td,{children:"Testes de API centrados no Actor com Task e Question"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Autenticacao"}),(0,a.jsx)(n.td,{children:"Basic auth, bearer tokens, API keys"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Tratamento de Erros"}),(0,a.jsx)(n.td,{children:"Testando respostas de erro, validacao de schema"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Chamadas Encadeadas"}),(0,a.jsx)(n.td,{children:"Usando dados de uma chamada em outra"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Testes Orientados a Dados"}),(0,a.jsx)(n.td,{children:"Testes parametrizados com varias fontes de dados"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Operacoes de Arquivo"}),(0,a.jsx)(n.td,{children:"Upload e download de arquivos"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Configuracao"}),(0,a.jsx)(n.td,{children:"Request/response specs, timeouts, logging"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Testes Hibridos"}),(0,a.jsx)(n.td,{children:"Combinando testes de UI e API"})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"proximos-passos",children:"Proximos Passos"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Explore ",(0,a.jsx)(n.a,{href:"/docs/screenplay/screenplay_rest",children:"Screenplay REST"})," para mais padroes Screenplay"]}),"\n",(0,a.jsxs)(n.li,{children:["Aprenda sobre ",(0,a.jsx)(n.a,{href:"/docs/reporting/the_serenity_reports",children:"Relatorios Serenity"})," para relatorios de testes de API"]}),"\n",(0,a.jsxs)(n.li,{children:["Confira ",(0,a.jsx)(n.a,{href:"/docs/cucumber/cucumber-junit5",children:"Integracao com Cucumber"})," para testes de API no estilo BDD"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"recursos",children:"Recursos"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://rest-assured.io/",children:"Documentacao do Rest-Assured"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://jsonplaceholder.typicode.com/",children:"API JSONPlaceholder"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://reqres.in/",children:"API ReqRes"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://restful-booker.herokuapp.com/apidoc/",children:"API Restful-Booker"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://json-schema.org/",children:"JSON Schema"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453(e,n,s){s.d(n,{R:()=>r,x:()=>o});var t=s(6540);const a={},i=t.createContext(a);function r(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);
"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[5583],{6154(e,n,a){a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"junit5/parallel-execution","title":"Executando Testes JUnit 5 em Paralelo","description":"Executar testes JUnit 5 em paralelo pode reduzir significativamente o tempo de execu\xe7\xe3o dos testes. Este guia explica como configurar e otimizar a execu\xe7\xe3o paralela para testes Serenity BDD usando JUnit 5.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/junit5/parallel-execution.md","sourceDirName":"junit5","slug":"/junit5/parallel-execution","permalink":"/pt-BR/docs/junit5/parallel-execution","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/junit5/parallel-execution.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"parallel-execution","title":"Executando Testes JUnit 5 em Paralelo","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"JUnit 5 com Serenity BDD","permalink":"/pt-BR/docs/junit5/junit5-tests"},"next":{"title":"Cucumber com JUnit 5","permalink":"/pt-BR/docs/cucumber/cucumber-junit5"}}');var i=a(4848),r=a(8453);const o={id:"parallel-execution",title:"Executando Testes JUnit 5 em Paralelo",sidebar_position:2},t="Executando Testes Serenity JUnit 5 em Paralelo",l={},d=[{value:"Vis\xe3o Geral",id:"vis\xe3o-geral",level:2},{value:"Pr\xe9-requisitos",id:"pr\xe9-requisitos",level:2},{value:"Configura\xe7\xe3o B\xe1sica",id:"configura\xe7\xe3o-b\xe1sica",level:2},{value:"Passo 1: Habilitar Execu\xe7\xe3o Paralela",id:"passo-1-habilitar-execu\xe7\xe3o-paralela",level:3},{value:"Passo 2: Configurar Modo de Execu\xe7\xe3o",id:"passo-2-configurar-modo-de-execu\xe7\xe3o",level:3},{value:"Passo 3: Configurar Estrat\xe9gia de Execu\xe7\xe3o",id:"passo-3-configurar-estrat\xe9gia-de-execu\xe7\xe3o",level:3},{value:"Modos de Execu\xe7\xe3o",id:"modos-de-execu\xe7\xe3o",level:2},{value:"Modo Concurrent",id:"modo-concurrent",level:3},{value:"Modo Same Thread",id:"modo-same-thread",level:3},{value:"Modo Misto",id:"modo-misto",level:3},{value:"Estrat\xe9gias de Execu\xe7\xe3o",id:"estrat\xe9gias-de-execu\xe7\xe3o",level:2},{value:"Estrat\xe9gia Din\xe2mica (Recomendada)",id:"estrat\xe9gia-din\xe2mica-recomendada",level:3},{value:"Estrat\xe9gia Fixa",id:"estrat\xe9gia-fixa",level:3},{value:"Estrat\xe9gia Personalizada",id:"estrat\xe9gia-personalizada",level:3},{value:"Controlando Paralelismo em N\xedvel de Classe/M\xe9todo",id:"controlando-paralelismo-em-n\xedvel-de-classem\xe9todo",level:2},{value:"Configura\xe7\xe3o Por Classe",id:"configura\xe7\xe3o-por-classe",level:3},{value:"For\xe7ar Execu\xe7\xe3o Sequencial",id:"for\xe7ar-execu\xe7\xe3o-sequencial",level:3},{value:"Controle em N\xedvel de M\xe9todo",id:"controle-em-n\xedvel-de-m\xe9todo",level:3},{value:"Bloqueios de Recursos",id:"bloqueios-de-recursos",level:2},{value:"Bloqueios de Recursos Comuns",id:"bloqueios-de-recursos-comuns",level:3},{value:"Thread Safety com Serenity",id:"thread-safety-com-serenity",level:2},{value:"Gerenciamento do WebDriver",id:"gerenciamento-do-webdriver",level:3},{value:"Bibliotecas de Passos",id:"bibliotecas-de-passos",level:3},{value:"Evite Estado Mut\xe1vel Compartilhado",id:"evite-estado-mut\xe1vel-compartilhado",level:3},{value:"Exemplo de Configura\xe7\xe3o Completa",id:"exemplo-de-configura\xe7\xe3o-completa",level:2},{value:"junit-platform.properties Abrangente",id:"junit-platformproperties-abrangente",level:3},{value:"Configura\xe7\xe3o Maven",id:"configura\xe7\xe3o-maven",level:2},{value:"Plugin Failsafe",id:"plugin-failsafe",level:3},{value:"Executando pela Linha de Comando",id:"executando-pela-linha-de-comando",level:3},{value:"Configura\xe7\xe3o Gradle",id:"configura\xe7\xe3o-gradle",level:2},{value:"Otimiza\xe7\xe3o de Performance",id:"otimiza\xe7\xe3o-de-performance",level:2},{value:"1. Escolha a Estrat\xe9gia Certa",id:"1-escolha-a-estrat\xe9gia-certa",level:3},{value:"2. Monitore o Uso de Recursos",id:"2-monitore-o-uso-de-recursos",level:3},{value:"3. Otimize o Design dos Testes",id:"3-otimize-o-design-dos-testes",level:3},{value:"4. Equilibre a Contagem de Threads",id:"4-equilibre-a-contagem-de-threads",level:3},{value:"Depurando Testes Paralelos",id:"depurando-testes-paralelos",level:2},{value:"Desabilitar Paralelismo Temporariamente",id:"desabilitar-paralelismo-temporariamente",level:3},{value:"Executar Classe de Teste \xdanica",id:"executar-classe-de-teste-\xfanica",level:3},{value:"Habilitar Log Detalhado",id:"habilitar-log-detalhado",level:3},{value:"Problemas Comuns e Solu\xe7\xf5es",id:"problemas-comuns-e-solu\xe7\xf5es",level:2},{value:"Problema 1: Testes Inst\xe1veis",id:"problema-1-testes-inst\xe1veis",level:3},{value:"Problema 2: Esgotamento de Recursos",id:"problema-2-esgotamento-de-recursos",level:3},{value:"Problema 3: Problemas com WebDriver",id:"problema-3-problemas-com-webdriver",level:3},{value:"Problema 4: Bloqueios de Banco de Dados",id:"problema-4-bloqueios-de-banco-de-dados",level:3},{value:"Boas Pr\xe1ticas",id:"boas-pr\xe1ticas",level:2},{value:"1. Comece Pequeno",id:"1-comece-pequeno",level:3},{value:"2. Isole Dados de Teste",id:"2-isole-dados-de-teste",level:3},{value:"3. Use Tags para Paralelismo Seletivo",id:"3-use-tags-para-paralelismo-seletivo",level:3},{value:"4. Limpe Recursos",id:"4-limpe-recursos",level:3},{value:"5. Documente Thread Safety",id:"5-documente-thread-safety",level:3},{value:"Medindo Performance",id:"medindo-performance",level:2},{value:"Antes da Execu\xe7\xe3o Paralela",id:"antes-da-execu\xe7\xe3o-paralela",level:3},{value:"Ap\xf3s Execu\xe7\xe3o Paralela (8 threads)",id:"ap\xf3s-execu\xe7\xe3o-paralela-8-threads",level:3},{value:"Pr\xf3ximos Passos",id:"pr\xf3ximos-passos",level:2},{value:"Recursos Adicionais",id:"recursos-adicionais",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"executando-testes-serenity-junit-5-em-paralelo",children:"Executando Testes Serenity JUnit 5 em Paralelo"})}),"\n",(0,i.jsx)(n.p,{children:"Executar testes JUnit 5 em paralelo pode reduzir significativamente o tempo de execu\xe7\xe3o dos testes. Este guia explica como configurar e otimizar a execu\xe7\xe3o paralela para testes Serenity BDD usando JUnit 5."}),"\n",(0,i.jsx)(n.h2,{id:"vis\xe3o-geral",children:"Vis\xe3o Geral"}),"\n",(0,i.jsx)(n.p,{children:"JUnit 5 (Jupiter) tem suporte nativo para execu\xe7\xe3o paralela de testes. Quando combinado com Serenity BDD, voc\xea pode executar m\xe9todos de teste e classes de teste simultaneamente, aproveitando processadores multi-core."}),"\n",(0,i.jsx)(n.admonition,{title:"Benef\xedcios da Execu\xe7\xe3o Paralela",type:"tip",children:(0,i.jsx)(n.p,{children:"Em uma m\xe1quina com 8 n\xfacleos, a execu\xe7\xe3o paralela pode reduzir o tempo de teste de 30 minutos para 5-8 minutos ou menos."})}),"\n",(0,i.jsx)(n.h2,{id:"pr\xe9-requisitos",children:"Pr\xe9-requisitos"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"JUnit 5 (Jupiter)"}),"\n",(0,i.jsx)(n.li,{children:"Serenity BDD 3.6.0 ou superior"}),"\n",(0,i.jsx)(n.li,{children:"C\xf3digo de teste thread-safe"}),"\n",(0,i.jsx)(n.li,{children:"Recursos de sistema suficientes (CPU, RAM)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"configura\xe7\xe3o-b\xe1sica",children:"Configura\xe7\xe3o B\xe1sica"}),"\n",(0,i.jsx)(n.h3,{id:"passo-1-habilitar-execu\xe7\xe3o-paralela",children:"Passo 1: Habilitar Execu\xe7\xe3o Paralela"}),"\n",(0,i.jsxs)(n.p,{children:["Crie ou atualize ",(0,i.jsx)(n.code,{children:"junit-platform.properties"})," em ",(0,i.jsx)(n.code,{children:"src/test/resources"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"# Habilitar execu\xe7\xe3o paralela\njunit.jupiter.execution.parallel.enabled=true\n"})}),"\n",(0,i.jsx)(n.h3,{id:"passo-2-configurar-modo-de-execu\xe7\xe3o",children:"Passo 2: Configurar Modo de Execu\xe7\xe3o"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"# Executar classes de teste em paralelo\njunit.jupiter.execution.parallel.mode.default=concurrent\n\n# Executar classes de teste em paralelo\njunit.jupiter.execution.parallel.mode.classes.default=concurrent\n"})}),"\n",(0,i.jsx)(n.h3,{id:"passo-3-configurar-estrat\xe9gia-de-execu\xe7\xe3o",children:"Passo 3: Configurar Estrat\xe9gia de Execu\xe7\xe3o"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"# Usar estrat\xe9gia din\xe2mica (recomendado)\njunit.jupiter.execution.parallel.config.strategy=dynamic\njunit.jupiter.execution.parallel.config.dynamic.factor=1.0\n"})}),"\n",(0,i.jsx)(n.h2,{id:"modos-de-execu\xe7\xe3o",children:"Modos de Execu\xe7\xe3o"}),"\n",(0,i.jsx)(n.h3,{id:"modo-concurrent",children:"Modo Concurrent"}),"\n",(0,i.jsx)(n.p,{children:"Testes executam em paralelo:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"junit.jupiter.execution.parallel.mode.default=concurrent\njunit.jupiter.execution.parallel.mode.classes.default=concurrent\n"})}),"\n",(0,i.jsx)(n.h3,{id:"modo-same-thread",children:"Modo Same Thread"}),"\n",(0,i.jsx)(n.p,{children:"Testes executam sequencialmente:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"junit.jupiter.execution.parallel.mode.default=same_thread\njunit.jupiter.execution.parallel.mode.classes.default=same_thread\n"})}),"\n",(0,i.jsx)(n.h3,{id:"modo-misto",children:"Modo Misto"}),"\n",(0,i.jsx)(n.p,{children:"Execute classes em paralelo mas m\xe9todos dentro de uma classe sequencialmente:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"# Classes em paralelo\njunit.jupiter.execution.parallel.mode.classes.default=concurrent\n\n# M\xe9todos na mesma classe executam sequencialmente\njunit.jupiter.execution.parallel.mode.default=same_thread\n"})}),"\n",(0,i.jsx)(n.h2,{id:"estrat\xe9gias-de-execu\xe7\xe3o",children:"Estrat\xe9gias de Execu\xe7\xe3o"}),"\n",(0,i.jsx)(n.h3,{id:"estrat\xe9gia-din\xe2mica-recomendada",children:"Estrat\xe9gia Din\xe2mica (Recomendada)"}),"\n",(0,i.jsx)(n.p,{children:"Determina automaticamente a contagem de threads com base nos processadores dispon\xedveis:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"junit.jupiter.execution.parallel.config.strategy=dynamic\njunit.jupiter.execution.parallel.config.dynamic.factor=1.0\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"C\xe1lculo do fator:"})," ",(0,i.jsx)(n.code,{children:"threads = processadores \xd7 fator"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Exemplos"})," (em uma m\xe1quina de 8 n\xfacleos):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Fator ",(0,i.jsx)(n.code,{children:"1.0"})," = 8 threads (recomendado)"]}),"\n",(0,i.jsxs)(n.li,{children:["Fator ",(0,i.jsx)(n.code,{children:"0.5"})," = 4 threads"]}),"\n",(0,i.jsxs)(n.li,{children:["Fator ",(0,i.jsx)(n.code,{children:"2.0"})," = 16 threads"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"estrat\xe9gia-fixa",children:"Estrat\xe9gia Fixa"}),"\n",(0,i.jsx)(n.p,{children:"Usa um n\xfamero espec\xedfico de threads:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"junit.jupiter.execution.parallel.config.strategy=fixed\njunit.jupiter.execution.parallel.config.fixed.parallelism=4\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Use quando:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Voc\xea precisa de contagens de threads consistentes"}),"\n",(0,i.jsx)(n.li,{children:"Executando em infraestrutura de CI/CD compartilhada"}),"\n",(0,i.jsx)(n.li,{children:"Depurando problemas de execu\xe7\xe3o paralela"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"estrat\xe9gia-personalizada",children:"Estrat\xe9gia Personalizada"}),"\n",(0,i.jsx)(n.p,{children:"Implemente sua pr\xf3pria estrat\xe9gia:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"junit.jupiter.execution.parallel.config.strategy=custom\njunit.jupiter.execution.parallel.config.custom.class=com.example.MyParallelStrategy\n"})}),"\n",(0,i.jsx)(n.h2,{id:"controlando-paralelismo-em-n\xedvel-de-classem\xe9todo",children:"Controlando Paralelismo em N\xedvel de Classe/M\xe9todo"}),"\n",(0,i.jsx)(n.h3,{id:"configura\xe7\xe3o-por-classe",children:"Configura\xe7\xe3o Por Classe"}),"\n",(0,i.jsxs)(n.p,{children:["Use a anota\xe7\xe3o ",(0,i.jsx)(n.code,{children:"@Execution"})," para controlar o paralelismo:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"import org.junit.jupiter.api.parallel.Execution;\nimport org.junit.jupiter.api.parallel.ExecutionMode;\n\n@ExtendWith(SerenityJUnit5Extension.class)\n@Execution(ExecutionMode.CONCURRENT)  // Executa os m\xe9todos desta classe em paralelo\nclass FastTests {\n\n    @Test\n    void test1() { }\n\n    @Test\n    void test2() { }\n\n    @Test\n    void test3() { }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"for\xe7ar-execu\xe7\xe3o-sequencial",children:"For\xe7ar Execu\xe7\xe3o Sequencial"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@ExtendWith(SerenityJUnit5Extension.class)\n@Execution(ExecutionMode.SAME_THREAD)  // Executa sequencialmente\nclass DatabaseMigrationTests {\n\n    @Test\n    void migration1() { }\n\n    @Test\n    void migration2() { }  // Deve executar ap\xf3s migration1\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"controle-em-n\xedvel-de-m\xe9todo",children:"Controle em N\xedvel de M\xe9todo"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@ExtendWith(SerenityJUnit5Extension.class)\nclass MixedTests {\n\n    @Test\n    @Execution(ExecutionMode.CONCURRENT)\n    void canRunInParallel() { }\n\n    @Test\n    @Execution(ExecutionMode.SAME_THREAD)\n    void mustRunSequentially() { }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"bloqueios-de-recursos",children:"Bloqueios de Recursos"}),"\n",(0,i.jsx)(n.p,{children:"Previna acesso concorrente a recursos compartilhados:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'import org.junit.jupiter.api.parallel.ResourceLock;\n\n@ExtendWith(SerenityJUnit5Extension.class)\nclass SharedResourceTests {\n\n    @Test\n    @ResourceLock("database")\n    void accessDatabase1() {\n        // Acesso exclusivo ao banco de dados\n    }\n\n    @Test\n    @ResourceLock("database")\n    void accessDatabase2() {\n        // Vai aguardar accessDatabase1 completar\n    }\n\n    @Test\n    @ResourceLock(value = "database", mode = READ)\n    void readFromDatabase() {\n        // Acesso somente leitura - pode executar simultaneamente com outras leituras\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"bloqueios-de-recursos-comuns",children:"Bloqueios de Recursos Comuns"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'import static org.junit.jupiter.api.parallel.Resources.*;\n\n@Test\n@ResourceLock(SYSTEM_PROPERTIES)\nvoid modifiesSystemProperties() { }\n\n@Test\n@ResourceLock(SYSTEM_OUT)\nvoid writesToSystemOut() { }\n\n@Test\n@ResourceLock("my-custom-resource")\nvoid accessesCustomResource() { }\n'})}),"\n",(0,i.jsx)(n.h2,{id:"thread-safety-com-serenity",children:"Thread Safety com Serenity"}),"\n",(0,i.jsx)(n.h3,{id:"gerenciamento-do-webdriver",children:"Gerenciamento do WebDriver"}),"\n",(0,i.jsxs)(n.p,{children:["O ",(0,i.jsx)(n.code,{children:"@Managed"})," WebDriver do Serenity \xe9 automaticamente thread-safe:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@Execution(ExecutionMode.CONCURRENT)\nclass WebTests {\n\n    @Managed(driver = "chrome", options = "headless")\n    WebDriver driver;  // Cada thread recebe sua pr\xf3pria inst\xe2ncia\n\n    @Test\n    void test1() {\n        driver.get("https://example.com");\n        // Thread-safe\n    }\n\n    @Test\n    void test2() {\n        driver.get("https://example.com/other");\n        // Inst\xe2ncia de WebDriver independente\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"bibliotecas-de-passos",children:"Bibliotecas de Passos"}),"\n",(0,i.jsx)(n.p,{children:"As bibliotecas de passos s\xe3o thread-safe quando usadas corretamente:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\n@Execution(ExecutionMode.CONCURRENT)\nclass CheckoutTests {\n\n    @Steps\n    CartSteps cart;  // Thread-safe - inst\xe2ncia por thread\n\n    @Test\n    void addToCart() {\n        cart.addProduct("Product1");\n    }\n\n    @Test\n    void removeFromCart() {\n        cart.addProduct("Product2");\n        cart.removeProduct("Product2");\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"evite-estado-mut\xe1vel-compartilhado",children:"Evite Estado Mut\xe1vel Compartilhado"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// \u274c RUIM - N\xe3o \xe9 thread-safe\n@ExtendWith(SerenityJUnit5Extension.class)\n@Execution(ExecutionMode.CONCURRENT)\nclass BadTests {\n\n    private String sharedData;  // Estado mut\xe1vel compartilhado!\n\n    @Test\n    void test1() {\n        sharedData = "test1";  // Condi\xe7\xe3o de corrida!\n    }\n\n    @Test\n    void test2() {\n        sharedData = "test2";  // Condi\xe7\xe3o de corrida!\n    }\n}\n\n// \u2705 BOM - Thread-safe\n@ExtendWith(SerenityJUnit5Extension.class)\n@Execution(ExecutionMode.CONCURRENT)\nclass GoodTests {\n\n    @Test\n    void test1() {\n        String localData = "test1";  // Vari\xe1vel local - thread-safe\n        // Usa localData\n    }\n\n    @Test\n    void test2() {\n        String localData = "test2";  // Independente\n        // Usa localData\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"exemplo-de-configura\xe7\xe3o-completa",children:"Exemplo de Configura\xe7\xe3o Completa"}),"\n",(0,i.jsx)(n.h3,{id:"junit-platformproperties-abrangente",children:"junit-platform.properties Abrangente"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"# ==========================================\n# Execu\xe7\xe3o Paralela\n# ==========================================\njunit.jupiter.execution.parallel.enabled=true\njunit.jupiter.execution.parallel.mode.default=concurrent\njunit.jupiter.execution.parallel.mode.classes.default=concurrent\n\n# ==========================================\n# Estrat\xe9gia de Execu\xe7\xe3o\n# ==========================================\njunit.jupiter.execution.parallel.config.strategy=dynamic\njunit.jupiter.execution.parallel.config.dynamic.factor=1.0\n\n# Alternativa: Estrat\xe9gia fixa\n# junit.jupiter.execution.parallel.config.strategy=fixed\n# junit.jupiter.execution.parallel.config.fixed.parallelism=4\n# junit.jupiter.execution.parallel.config.fixed.max-pool-size=8\n\n# ==========================================\n# Ciclo de Vida da Inst\xe2ncia de Teste\n# ==========================================\njunit.jupiter.testinstance.lifecycle.default=per_method\n\n# ==========================================\n# Descoberta de Testes\n# ==========================================\njunit.jupiter.testclass.order.default=org.junit.jupiter.api.ClassOrderer$Random\n\n# ==========================================\n# Nomes de Exibi\xe7\xe3o\n# ==========================================\njunit.jupiter.displayname.generator.default=org.junit.jupiter.api.DisplayNameGenerator$ReplaceUnderscores\n"})}),"\n",(0,i.jsx)(n.h2,{id:"configura\xe7\xe3o-maven",children:"Configura\xe7\xe3o Maven"}),"\n",(0,i.jsx)(n.h3,{id:"plugin-failsafe",children:"Plugin Failsafe"}),"\n",(0,i.jsx)(n.p,{children:"Configure o plugin Maven Failsafe para execu\xe7\xe3o paralela:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<plugin>\n    <groupId>org.apache.maven.plugins</groupId>\n    <artifactId>maven-failsafe-plugin</artifactId>\n    <version>3.0.0</version>\n    <configuration>\n        \x3c!-- Habilitar JUnit 5 --\x3e\n        <includes>\n            <include>**/*Test.java</include>\n            <include>**/*Tests.java</include>\n        </includes>\n\n        \x3c!-- Propriedades do sistema --\x3e\n        <systemPropertyVariables>\n            <webdriver.driver>${webdriver.driver}</webdriver.driver>\n            <environment>${environment}</environment>\n        </systemPropertyVariables>\n\n        \x3c!-- Aumentar mem\xf3ria para execu\xe7\xe3o paralela --\x3e\n        <argLine>-Xmx2g</argLine>\n    </configuration>\n    <executions>\n        <execution>\n            <goals>\n                <goal>integration-test</goal>\n                <goal>verify</goal>\n            </goals>\n        </execution>\n    </executions>\n</plugin>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"executando-pela-linha-de-comando",children:"Executando pela Linha de Comando"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Executar todos os testes em paralelo\nmvn clean verify\n\n# Sobrescrever paralelismo\nmvn clean verify -Djunit.jupiter.execution.parallel.config.fixed.parallelism=8\n\n# Desabilitar execu\xe7\xe3o paralela\nmvn clean verify -Djunit.jupiter.execution.parallel.enabled=false\n"})}),"\n",(0,i.jsx)(n.h2,{id:"configura\xe7\xe3o-gradle",children:"Configura\xe7\xe3o Gradle"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-groovy",children:"test {\n    useJUnitPlatform()\n\n    // Habilitar execu\xe7\xe3o paralela\n    maxParallelForks = Runtime.runtime.availableProcessors()\n\n    // Aumentar mem\xf3ria\n    minHeapSize = \"512m\"\n    maxHeapSize = \"2g\"\n\n    // Propriedades do sistema\n    systemProperty 'junit.jupiter.execution.parallel.enabled', 'true'\n    systemProperty 'junit.jupiter.execution.parallel.config.strategy', 'dynamic'\n    systemProperty 'junit.jupiter.execution.parallel.config.dynamic.factor', '1.0'\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"otimiza\xe7\xe3o-de-performance",children:"Otimiza\xe7\xe3o de Performance"}),"\n",(0,i.jsx)(n.h3,{id:"1-escolha-a-estrat\xe9gia-certa",children:"1. Escolha a Estrat\xe9gia Certa"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Su\xedtes de teste pequenas"})," (<30 testes):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"junit.jupiter.execution.parallel.config.strategy=fixed\njunit.jupiter.execution.parallel.config.fixed.parallelism=2\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Su\xedtes de teste m\xe9dias"})," (30-100 testes):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"junit.jupiter.execution.parallel.config.strategy=dynamic\njunit.jupiter.execution.parallel.config.dynamic.factor=1.0\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Su\xedtes de teste grandes"})," (>100 testes):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"junit.jupiter.execution.parallel.config.strategy=dynamic\njunit.jupiter.execution.parallel.config.dynamic.factor=0.75\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-monitore-o-uso-de-recursos",children:"2. Monitore o Uso de Recursos"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Monitorar enquanto os testes executam\ntop\nhtop\njconsole\n"})}),"\n",(0,i.jsx)(n.p,{children:"Observe:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"CPU"}),": Deve estar pr\xf3ximo de 100% de utiliza\xe7\xe3o"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Mem\xf3ria"}),": Cada inst\xe2ncia de navegador usa ~200-500MB de RAM"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Threads"}),": Deve corresponder \xe0 sua configura\xe7\xe3o de paralelismo"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"3-otimize-o-design-dos-testes",children:"3. Otimize o Design dos Testes"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// \u2705 BOM - Testes r\xe1pidos e focados\n@Test\nvoid shouldCalculateTotal() {\n    // Sem depend\xeancias externas, executa rapidamente\n    assertThat(calculator.add(2, 3)).isEqualTo(5);\n}\n\n// \u26a0\ufe0f LENTO - Considere otimiza\xe7\xe3o\n@Test\nvoid shouldProcessLargeDataset() {\n    // Processa 10000 registros - considere usar dataset menor\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-equilibre-a-contagem-de-threads",children:"4. Equilibre a Contagem de Threads"}),"\n",(0,i.jsx)(n.p,{children:"Poucas threads:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"# Subutilizando CPU\njunit.jupiter.execution.parallel.config.dynamic.factor=0.25\n"})}),"\n",(0,i.jsx)(n.p,{children:"Muitas threads:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"# Pode causar esgotamento de recursos\njunit.jupiter.execution.parallel.config.dynamic.factor=4.0\n"})}),"\n",(0,i.jsx)(n.p,{children:"\xd3timo:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"# Corresponde aos n\xfacleos da CPU\njunit.jupiter.execution.parallel.config.dynamic.factor=1.0\n"})}),"\n",(0,i.jsx)(n.h2,{id:"depurando-testes-paralelos",children:"Depurando Testes Paralelos"}),"\n",(0,i.jsx)(n.h3,{id:"desabilitar-paralelismo-temporariamente",children:"Desabilitar Paralelismo Temporariamente"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"junit.jupiter.execution.parallel.enabled=false\n"})}),"\n",(0,i.jsx)(n.p,{children:"Ou via linha de comando:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mvn verify -Djunit.jupiter.execution.parallel.enabled=false\n"})}),"\n",(0,i.jsx)(n.h3,{id:"executar-classe-de-teste-\xfanica",children:"Executar Classe de Teste \xdanica"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mvn test -Dtest=MyTestClass\n"})}),"\n",(0,i.jsx)(n.h3,{id:"habilitar-log-detalhado",children:"Habilitar Log Detalhado"}),"\n",(0,i.jsxs)(n.p,{children:["Adicione ao ",(0,i.jsx)(n.code,{children:"junit-platform.properties"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"# Mostrar qual thread executa qual teste\njunit.platform.output.capture.stdout=true\njunit.platform.output.capture.stderr=true\n"})}),"\n",(0,i.jsx)(n.p,{children:"No seu teste:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@BeforeEach\nvoid logThread() {\n    System.out.println("Executando em: " + Thread.currentThread().getName());\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"problemas-comuns-e-solu\xe7\xf5es",children:"Problemas Comuns e Solu\xe7\xf5es"}),"\n",(0,i.jsx)(n.h3,{id:"problema-1-testes-inst\xe1veis",children:"Problema 1: Testes Inst\xe1veis"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Sintomas:"})," Testes passam individualmente mas falham em paralelo"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solu\xe7\xf5es:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Verifique estado mut\xe1vel compartilhado"}),"\n",(0,i.jsx)(n.li,{children:"Verifique isolamento de dados de teste"}),"\n",(0,i.jsx)(n.li,{children:"Revise bloqueios de recursos"}),"\n",(0,i.jsx)(n.li,{children:"Adicione sincroniza\xe7\xe3o adequada"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// Problema: Estado compartilhado\nprivate static int counter = 0;  // \u274c N\xe3o \xe9 thread-safe\n\n@Test\nvoid incrementCounter() {\n    counter++;  // Condi\xe7\xe3o de corrida\n}\n\n// Solu\xe7\xe3o: Use tipos at\xf4micos ou vari\xe1veis locais\nprivate static AtomicInteger counter = new AtomicInteger(0);  // \u2705 Thread-safe\n\n@Test\nvoid incrementCounter() {\n    counter.incrementAndGet();\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"problema-2-esgotamento-de-recursos",children:"Problema 2: Esgotamento de Recursos"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Sintomas:"})," Testes ficam lentos ou falham ap\xf3s algum tempo"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solu\xe7\xf5es:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Reduza a contagem de threads"}),"\n",(0,i.jsx)(n.li,{children:"Aumente o tamanho do heap da JVM"}),"\n",(0,i.jsx)(n.li,{children:"Verifique vazamentos de recursos"}),"\n",(0,i.jsx)(n.li,{children:"Monitore os recursos do sistema"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"\x3c!-- Aumentar tamanho do heap --\x3e\n<argLine>-Xmx4g</argLine>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"problema-3-problemas-com-webdriver",children:"Problema 3: Problemas com WebDriver"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Sintomas:"})," Inst\xe2ncias de navegador se multiplicam ou n\xe3o fecham"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solu\xe7\xf5es:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.code,{children:"@Managed"})," WebDriver (Serenity gerencia o ciclo de vida)"]}),"\n",(0,i.jsxs)(n.li,{children:["Garanta limpeza adequada em ",(0,i.jsx)(n.code,{children:"@AfterEach"})]}),"\n",(0,i.jsx)(n.li,{children:"Limite inst\xe2ncias de navegador concorrentes"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// \u2705 Serenity gerencia o ciclo de vida\n@Managed\nWebDriver driver;\n\n// \u274c N\xe3o gerencie manualmente em testes paralelos\nWebDriver driver = new ChromeDriver();  // Risco de vazamento de mem\xf3ria\n"})}),"\n",(0,i.jsx)(n.h3,{id:"problema-4-bloqueios-de-banco-de-dados",children:"Problema 4: Bloqueios de Banco de Dados"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Sintomas:"})," Testes ficam em timeout aguardando banco de dados"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solu\xe7\xf5es:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use bloqueios de recursos"}),"\n",(0,i.jsx)(n.li,{children:"Isole dados de teste"}),"\n",(0,i.jsx)(n.li,{children:"Use banco de dados em mem\xf3ria para testes"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Test\n@ResourceLock("database")\nvoid modifiesDatabase() {\n    // Acesso exclusivo ao banco de dados\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"boas-pr\xe1ticas",children:"Boas Pr\xe1ticas"}),"\n",(0,i.jsx)(n.h3,{id:"1-comece-pequeno",children:"1. Comece Pequeno"}),"\n",(0,i.jsx)(n.p,{children:"Comece com 2-4 threads e aumente gradualmente:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"junit.jupiter.execution.parallel.config.strategy=fixed\njunit.jupiter.execution.parallel.config.fixed.parallelism=2\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-isole-dados-de-teste",children:"2. Isole Dados de Teste"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\nclass UserTests {\n\n    @Test\n    void createUser() {\n        String uniqueId = UUID.randomUUID().toString();\n        User user = createTestUser("user_" + uniqueId);\n        // Teste com usu\xe1rio \xfanico\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"3-use-tags-para-paralelismo-seletivo",children:"3. Use Tags para Paralelismo Seletivo"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@Test\n@Tag("parallel")\nvoid canRunInParallel() { }\n\n@Test\n@Tag("serial")\n@Execution(ExecutionMode.SAME_THREAD)\nvoid mustRunSequentially() { }\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-properties",children:"# Executar apenas testes paralelos\njunit.jupiter.includeTags=parallel\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-limpe-recursos",children:"4. Limpe Recursos"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@AfterEach\nvoid cleanup() {\n    // Limpar dados de teste\n    testDataService.deleteTestData(testId);\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-documente-thread-safety",children:"5. Documente Thread Safety"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"/**\n * Testes nesta classe modificam estado global da aplica\xe7\xe3o\n * e devem executar sequencialmente.\n */\n@Execution(ExecutionMode.SAME_THREAD)\nclass GlobalStateTests {\n    // ...\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"medindo-performance",children:"Medindo Performance"}),"\n",(0,i.jsx)(n.h3,{id:"antes-da-execu\xe7\xe3o-paralela",children:"Antes da Execu\xe7\xe3o Paralela"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Total de testes: 150\nTempo de execu\xe7\xe3o: 25 minutos\n"})}),"\n",(0,i.jsx)(n.h3,{id:"ap\xf3s-execu\xe7\xe3o-paralela-8-threads",children:"Ap\xf3s Execu\xe7\xe3o Paralela (8 threads)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Total de testes: 150\nTempo de execu\xe7\xe3o: 4 minutos\nSpeedup: 6.25x\nEfici\xeancia: 78%\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Calcule m\xe9tricas:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Speedup = Tempo Sequencial / Tempo Paralelo\nEfici\xeancia = Speedup / N\xfamero de Threads \xd7 100%\n"})}),"\n",(0,i.jsx)(n.h2,{id:"pr\xf3ximos-passos",children:"Pr\xf3ximos Passos"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Retorne ao guia principal ",(0,i.jsx)(n.a,{href:"junit5-tests",children:"JUnit 5"})]}),"\n",(0,i.jsxs)(n.li,{children:["Aprenda sobre ",(0,i.jsx)(n.a,{href:"junit5-tests#display-names-and-organization",children:"Organiza\xe7\xe3o de Testes"})]}),"\n",(0,i.jsxs)(n.li,{children:["Revise ",(0,i.jsx)(n.a,{href:"junit5-tests#best-practices",children:"Boas Pr\xe1ticas"})]}),"\n",(0,i.jsxs)(n.li,{children:["Explore ",(0,i.jsx)(n.a,{href:"/docs/reporting/the_serenity_reports",children:"Relat\xf3rios Serenity"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"recursos-adicionais",children:"Recursos Adicionais"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-parallel-execution",children:"Documenta\xe7\xe3o de Execu\xe7\xe3o Paralela JUnit 5"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://serenity-bdd.info",children:"Dicas de Performance Serenity BDD"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://jcip.net/",children:"Java Concurrency in Practice"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,n,a){a.d(n,{R:()=>o,x:()=>t});var s=a(6540);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);
"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[9897],{480(e,a,n){n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"playwright/playwright_page_objects","title":"Page Objects","description":"Page Object \xe9 um padr\xe3o de design que encapsula a estrutura e o comportamento de uma p\xe1gina web. Com Playwright e Serenity, os Page Object fornecem uma separa\xe7\xe3o clara entre sua l\xf3gica de teste e os detalhes de implementa\xe7\xe3o da p\xe1gina.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/playwright/page-objects.md","sourceDirName":"playwright","slug":"/playwright/playwright_page_objects","permalink":"/pt-BR/docs/playwright/playwright_page_objects","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/playwright/page-objects.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"playwright_page_objects","title":"Page Objects","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Primeiros Passos","permalink":"/pt-BR/docs/playwright/playwright_getting_started"},"next":{"title":"Screenplay Pattern com Playwright","permalink":"/pt-BR/docs/playwright/playwright_screenplay"}}');var r=n(4848),o=n(8453);const s={id:"playwright_page_objects",title:"Page Objects",sidebar_position:3},i="Page Object com Playwright",c={},l=[{value:"Por que Page Object?",id:"por-que-page-object",level:2},{value:"Estrutura do Page Object",id:"estrutura-do-page-object",level:2},{value:"Princ\xedpios Fundamentais",id:"princ\xedpios-fundamentais",level:3},{value:"Estrat\xe9gias de Locator do Playwright",id:"estrat\xe9gias-de-locator-do-playwright",level:2},{value:"Locators Baseados em Role (Recomendado)",id:"locators-baseados-em-role-recomendado",level:3},{value:"Locators Baseados em Texto",id:"locators-baseados-em-texto",level:3},{value:"Locators Baseados em Label",id:"locators-baseados-em-label",level:3},{value:"Locators por Test ID",id:"locators-por-test-id",level:3},{value:"CSS e XPath (\xdaltimo Recurso)",id:"css-e-xpath-\xfaltimo-recurso",level:3},{value:"Padr\xf5es de Page Object",id:"padr\xf5es-de-page-object",level:2},{value:"M\xe9todos de Navega\xe7\xe3o",id:"m\xe9todos-de-navega\xe7\xe3o",level:3},{value:"Transi\xe7\xf5es de P\xe1gina",id:"transi\xe7\xf5es-de-p\xe1gina",level:3},{value:"Page Component",id:"page-component",level:3},{value:"Estrat\xe9gias de Espera",id:"estrat\xe9gias-de-espera",level:3},{value:"Integra\xe7\xe3o com Step Library",id:"integra\xe7\xe3o-com-step-library",level:2},{value:"Boas Pr\xe1ticas",id:"boas-pr\xe1ticas",level:2},{value:"1. Um Page Object por P\xe1gina/View",id:"1-um-page-object-por-p\xe1ginaview",level:3},{value:"2. Use Nomes de M\xe9todos Descritivos",id:"2-use-nomes-de-m\xe9todos-descritivos",level:3},{value:"3. Evite Expor Locators",id:"3-evite-expor-locators",level:3},{value:"4. Lide com Conte\xfado Din\xe2mico",id:"4-lide-com-conte\xfado-din\xe2mico",level:3}];function d(e){const a={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"page-object-com-playwright",children:"Page Object com Playwright"})}),"\n",(0,r.jsx)(a.p,{children:"Page Object \xe9 um padr\xe3o de design que encapsula a estrutura e o comportamento de uma p\xe1gina web. Com Playwright e Serenity, os Page Object fornecem uma separa\xe7\xe3o clara entre sua l\xf3gica de teste e os detalhes de implementa\xe7\xe3o da p\xe1gina."}),"\n",(0,r.jsx)(a.h2,{id:"por-que-page-object",children:"Por que Page Object?"}),"\n",(0,r.jsx)(a.p,{children:"Sem Page Object, os testes se tornam fr\xe1geis e dif\xedceis de manter:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'// \u274c Ruim: Locators espalhados pelos testes\n@Test\nvoid searchTest() {\n    page.locator("input[name=\'q\']").fill("search term");\n    page.locator("button.search-btn").click();\n    assertThat(page.locator(".results-count").textContent()).contains("10");\n}\n'})}),"\n",(0,r.jsx)(a.p,{children:"Com Page Object, os testes s\xe3o limpos e f\xe1ceis de manter:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'// \u2705 Bom: Locators encapsulados no Page Object\n@Test\nvoid searchTest() {\n    searchPage.searchFor("search term");\n    assertThat(searchPage.getResultCount()).isEqualTo(10);\n}\n'})}),"\n",(0,r.jsx)(a.h2,{id:"estrutura-do-page-object",children:"Estrutura do Page Object"}),"\n",(0,r.jsx)(a.p,{children:"Um Page Object bem projetado tem tr\xeas se\xe7\xf5es:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'public class ProductPage {\n    private final Page page;\n\n    public ProductPage(Page page) {\n        this.page = page;\n    }\n\n    // ========== LOCATORS (privados) ==========\n    // Encapsulam como os elementos s\xe3o encontrados\n\n    private Locator productTitle() {\n        return page.locator("h1.product-title");\n    }\n\n    private Locator addToCartButton() {\n        return page.getByRole(AriaRole.BUTTON,\n            new Page.GetByRoleOptions().setName("Add to Cart"));\n    }\n\n    private Locator quantityInput() {\n        return page.locator("#quantity");\n    }\n\n    // ========== A\xc7\xd5ES (p\xfablicas) ==========\n    // Representam intera\xe7\xf5es do usu\xe1rio\n\n    public void addToCart() {\n        addToCartButton().click();\n    }\n\n    public void setQuantity(int quantity) {\n        quantityInput().fill(String.valueOf(quantity));\n    }\n\n    // ========== CONSULTAS (p\xfablicas) ==========\n    // Retornam informa\xe7\xf5es sobre o estado da p\xe1gina\n\n    public String getProductTitle() {\n        return productTitle().textContent();\n    }\n\n    public boolean isAddToCartEnabled() {\n        return addToCartButton().isEnabled();\n    }\n}\n'})}),"\n",(0,r.jsx)(a.h3,{id:"princ\xedpios-fundamentais",children:"Princ\xedpios Fundamentais"}),"\n",(0,r.jsxs)(a.ol,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"Locators s\xe3o privados"})," - Apenas o Page Object sabe como encontrar elementos"]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"A\xe7\xf5es s\xe3o p\xfablicas"})," - Exp\xf5em intera\xe7\xf5es significativas do usu\xe1rio"]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"Consultas s\xe3o p\xfablicas"})," - Exp\xf5em formas de verificar o estado da p\xe1gina"]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"Sem asser\xe7\xf5es nos Page Object"})," - Deixe o chamador decidir o que verificar"]}),"\n"]}),"\n",(0,r.jsx)(a.h2,{id:"estrat\xe9gias-de-locator-do-playwright",children:"Estrat\xe9gias de Locator do Playwright"}),"\n",(0,r.jsx)(a.p,{children:"O Playwright oferece v\xe1rias formas de localizar elementos. Use a estrat\xe9gia mais resiliente para cada caso:"}),"\n",(0,r.jsx)(a.h3,{id:"locators-baseados-em-role-recomendado",children:"Locators Baseados em Role (Recomendado)"}),"\n",(0,r.jsx)(a.p,{children:"Estes s\xe3o os mais resilientes pois usam sem\xe2ntica de acessibilidade:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'// Encontrar por ARIA role e nome acess\xedvel\nprivate Locator searchButton() {\n    return page.getByRole(AriaRole.BUTTON,\n        new Page.GetByRoleOptions().setName("Search"));\n}\n\nprivate Locator emailField() {\n    return page.getByRole(AriaRole.TEXTBOX,\n        new Page.GetByRoleOptions().setName("Email"));\n}\n\nprivate Locator mainNavigation() {\n    return page.getByRole(AriaRole.NAVIGATION);\n}\n'})}),"\n",(0,r.jsx)(a.h3,{id:"locators-baseados-em-texto",children:"Locators Baseados em Texto"}),"\n",(0,r.jsx)(a.p,{children:"Bons para encontrar elementos por texto vis\xedvel:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'private Locator submitButton() {\n    return page.getByText("Submit Order");\n}\n\nprivate Locator welcomeMessage() {\n    return page.getByText("Welcome back", new Page.GetByTextOptions().setExact(false));\n}\n'})}),"\n",(0,r.jsx)(a.h3,{id:"locators-baseados-em-label",children:"Locators Baseados em Label"}),"\n",(0,r.jsx)(a.p,{children:"Encontre campos de formul\xe1rio por seus labels associados:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'private Locator usernameField() {\n    return page.getByLabel("Username");\n}\n\nprivate Locator rememberMeCheckbox() {\n    return page.getByLabel("Remember me");\n}\n'})}),"\n",(0,r.jsx)(a.h3,{id:"locators-por-test-id",children:"Locators por Test ID"}),"\n",(0,r.jsx)(a.p,{children:"Use atributos data-testid para elementos sem bons identificadores sem\xe2nticos:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'private Locator shoppingCart() {\n    return page.getByTestId("shopping-cart");\n}\n\nprivate Locator productCard(String productId) {\n    return page.getByTestId("product-" + productId);\n}\n'})}),"\n",(0,r.jsx)(a.h3,{id:"css-e-xpath-\xfaltimo-recurso",children:"CSS e XPath (\xdaltimo Recurso)"}),"\n",(0,r.jsx)(a.p,{children:"Use apenas quando outras estrat\xe9gias n\xe3o estiverem dispon\xedveis:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:"private Locator legacyWidget() {\n    return page.locator(\"div.legacy-widget > span.value\");\n}\n\nprivate Locator complexElement() {\n    return page.locator(\"xpath=//div[@class='container']//span[contains(text(),'Total')]\");\n}\n"})}),"\n",(0,r.jsx)(a.h2,{id:"padr\xf5es-de-page-object",children:"Padr\xf5es de Page Object"}),"\n",(0,r.jsx)(a.h3,{id:"m\xe9todos-de-navega\xe7\xe3o",children:"M\xe9todos de Navega\xe7\xe3o"}),"\n",(0,r.jsx)(a.p,{children:"Inclua m\xe9todos para navegar at\xe9 a p\xe1gina:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'public class LoginPage {\n    private final Page page;\n    private static final String URL = "/login";\n\n    public void open() {\n        page.navigate(URL);\n    }\n\n    public void openWithRedirect(String returnUrl) {\n        page.navigate(URL + "?redirect=" + returnUrl);\n    }\n}\n'})}),"\n",(0,r.jsx)(a.h3,{id:"transi\xe7\xf5es-de-p\xe1gina",children:"Transi\xe7\xf5es de P\xe1gina"}),"\n",(0,r.jsx)(a.p,{children:"Retorne novos Page Object quando a\xe7\xf5es navegam para p\xe1ginas diferentes:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'public class LoginPage {\n    public DashboardPage loginAs(String username, String password) {\n        usernameField().fill(username);\n        passwordField().fill(password);\n        loginButton().click();\n        return new DashboardPage(page);\n    }\n}\n\n// Uso:\nDashboardPage dashboard = loginPage.loginAs("user", "pass");\nassertThat(dashboard.getWelcomeMessage()).contains("Welcome");\n'})}),"\n",(0,r.jsx)(a.h3,{id:"page-component",children:"Page Component"}),"\n",(0,r.jsx)(a.p,{children:"Reutilize componentes de UI comuns entre p\xe1ginas:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'public class HeaderComponent {\n    private final Page page;\n\n    public HeaderComponent(Page page) {\n        this.page = page;\n    }\n\n    private Locator searchBox() {\n        return page.locator("header input[type=\'search\']");\n    }\n\n    private Locator cartIcon() {\n        return page.locator("header .cart-icon");\n    }\n\n    public void search(String term) {\n        searchBox().fill(term);\n        searchBox().press("Enter");\n    }\n\n    public int getCartItemCount() {\n        String text = cartIcon().textContent();\n        return Integer.parseInt(text);\n    }\n}\n\n// Use nos Page Object:\npublic class ProductPage {\n    private final Page page;\n    private final HeaderComponent header;\n\n    public ProductPage(Page page) {\n        this.page = page;\n        this.header = new HeaderComponent(page);\n    }\n\n    public HeaderComponent header() {\n        return header;\n    }\n}\n'})}),"\n",(0,r.jsx)(a.h3,{id:"estrat\xe9gias-de-espera",children:"Estrat\xe9gias de Espera"}),"\n",(0,r.jsx)(a.p,{children:"O Playwright espera automaticamente, mas \xe0s vezes voc\xea precisa de esperas expl\xedcitas:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:"public class SearchResultsPage {\n    public void waitForResults() {\n        // Espera os resultados carregarem\n        resultsContainer().waitFor();\n    }\n\n    public void waitForMinimumResults(int count) {\n        // Espera at\xe9 ter resultados suficientes\n        page.waitForCondition(() -> getResultCount() >= count);\n    }\n\n    public void waitForLoadingToComplete() {\n        // Espera o spinner de carregamento desaparecer\n        loadingSpinner().waitFor(new Locator.WaitForOptions()\n            .setState(WaitForSelectorState.HIDDEN));\n    }\n}\n"})}),"\n",(0,r.jsx)(a.h2,{id:"integra\xe7\xe3o-com-step-library",children:"Integra\xe7\xe3o com Step Library"}),"\n",(0,r.jsx)(a.p,{children:"Page Object funcionam junto com Step Library. A Step Library cuida dos relat\xf3rios do Serenity enquanto o Page Object cuida das intera\xe7\xf5es com a p\xe1gina:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'public class CheckoutSteps {\n    private CheckoutPage checkoutPage;\n    private OrderConfirmationPage confirmationPage;\n\n    @Step("Enter shipping address")\n    public void enterShippingAddress(Address address) {\n        checkoutPage.enterAddress(address);\n    }\n\n    @Step("Complete the order")\n    public void completeOrder() {\n        confirmationPage = checkoutPage.submitOrder();\n    }\n\n    @Step("Verify order confirmation number is displayed")\n    public void verifyOrderConfirmationDisplayed() {\n        assertThat(confirmationPage.getOrderNumber())\n            .isNotEmpty();\n    }\n}\n'})}),"\n",(0,r.jsx)(a.h2,{id:"boas-pr\xe1ticas",children:"Boas Pr\xe1ticas"}),"\n",(0,r.jsx)(a.h3,{id:"1-um-page-object-por-p\xe1ginaview",children:"1. Um Page Object por P\xe1gina/View"}),"\n",(0,r.jsx)(a.p,{children:"N\xe3o tente representar m\xfaltiplas p\xe1ginas em uma classe:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:"// \u274c Ruim\npublic class AllPages { /* muitas responsabilidades */ }\n\n// \u2705 Bom\npublic class LoginPage { /* apenas login */ }\npublic class DashboardPage { /* apenas dashboard */ }\n"})}),"\n",(0,r.jsx)(a.h3,{id:"2-use-nomes-de-m\xe9todos-descritivos",children:"2. Use Nomes de M\xe9todos Descritivos"}),"\n",(0,r.jsx)(a.p,{children:"Os nomes dos m\xe9todos devem descrever a inten\xe7\xe3o do usu\xe1rio:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:"// \u274c Ruim\npublic void click1() { ... }\npublic void fillForm() { ... }\n\n// \u2705 Bom\npublic void addToWishlist() { ... }\npublic void submitContactForm(String name, String email, String message) { ... }\n"})}),"\n",(0,r.jsx)(a.h3,{id:"3-evite-expor-locators",children:"3. Evite Expor Locators"}),"\n",(0,r.jsx)(a.p,{children:"Nunca retorne objetos Locator brutos:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'// \u274c Ruim - exp\xf5e implementa\xe7\xe3o\npublic Locator getSubmitButton() {\n    return page.locator("#submit");\n}\n\n// \u2705 Bom - exp\xf5e comportamento\npublic void submitForm() {\n    submitButton().click();\n}\n\npublic boolean isSubmitEnabled() {\n    return submitButton().isEnabled();\n}\n'})}),"\n",(0,r.jsx)(a.h3,{id:"4-lide-com-conte\xfado-din\xe2mico",children:"4. Lide com Conte\xfado Din\xe2mico"}),"\n",(0,r.jsx)(a.p,{children:"Use locators parametrizados para elementos din\xe2micos:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:"public class ProductListPage {\n    public void selectProduct(String productName) {\n        page.getByRole(AriaRole.LINK,\n            new Page.GetByRoleOptions().setName(productName)).click();\n    }\n\n    public String getPriceFor(String productName) {\n        return page.locator(String.format(\n            \"[data-product='%s'] .price\", productName)).textContent();\n    }\n}\n"})})]})}function p(e={}){const{wrapper:a}={...(0,o.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,a,n){n.d(a,{R:()=>s,x:()=>i});var t=n(6540);const r={},o=t.createContext(r);function s(e){const a=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function i(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(o.Provider,{value:a},e.children)}}}]);
"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[8869],{6043(e,a,s){s.r(a),s.d(a,{assets:()=>d,contentTitle:()=>o,default:()=>l,frontMatter:()=>i,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"playwright/playwright_step_libraries","title":"Step Libraries","description":"Step Library s\xe3o a ponte entre seus testes e Page Object. Elas fornecem as capacidades de relat\xf3rios ricos do Serenity atrav\xe9s de anota\xe7\xf5es @Step enquanto mant\xeam seus testes limpos e leg\xedveis.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/playwright/step-libraries.md","sourceDirName":"playwright","slug":"/playwright/playwright_step_libraries","permalink":"/pt-BR/docs/playwright/playwright_step_libraries","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/playwright/step-libraries.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"playwright_step_libraries","title":"Step Libraries","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Screenplay Pattern com Playwright","permalink":"/pt-BR/docs/playwright/playwright_screenplay"},"next":{"title":"Configura\xe7\xe3o","permalink":"/pt-BR/docs/playwright/playwright_configuration"}}');var r=s(4848),t=s(8453);const i={id:"playwright_step_libraries",title:"Step Libraries",sidebar_position:4},o="Step Library com Playwright",d={},c=[{value:"A Arquitetura de Tr\xeas Camadas",id:"a-arquitetura-de-tr\xeas-camadas",level:2},{value:"Criando Step Library",id:"criando-step-library",level:2},{value:"Estrutura B\xe1sica",id:"estrutura-b\xe1sica",level:3},{value:"Usando Step Library nos Testes",id:"usando-step-library-nos-testes",level:3},{value:"A Anota\xe7\xe3o @Step",id:"a-anota\xe7\xe3o-step",level:2},{value:"Descri\xe7\xf5es de Passos",id:"descri\xe7\xf5es-de-passos",level:3},{value:"Passos Aninhados",id:"passos-aninhados",level:3},{value:"Passos Cientes da P\xe1gina",id:"passos-cientes-da-p\xe1gina",level:2},{value:"Captura de Tela",id:"captura-de-tela",level:2},{value:"Capturas de Tela Autom\xe1ticas",id:"capturas-de-tela-autom\xe1ticas",level:3},{value:"Capturas de Tela Manuais",id:"capturas-de-tela-manuais",level:3},{value:"Organizando Step Library",id:"organizando-step-library",level:2},{value:"Por \xc1rea Funcional",id:"por-\xe1rea-funcional",level:3},{value:"Por Jornada do Usu\xe1rio",id:"por-jornada-do-usu\xe1rio",level:3},{value:"Boas Pr\xe1ticas",id:"boas-pr\xe1ticas",level:2},{value:"1. Mantenha os Passos Focados",id:"1-mantenha-os-passos-focados",level:3},{value:"2. Use Linguagem de Neg\xf3cio",id:"2-use-linguagem-de-neg\xf3cio",level:3},{value:"3. Gerencie o Estado com Cuidado",id:"3-gerencie-o-estado-com-cuidado",level:3},{value:"4. Fa\xe7a Asser\xe7\xf5es Claras",id:"4-fa\xe7a-asser\xe7\xf5es-claras",level:3},{value:"5. Componha Passos de N\xedvel Superior",id:"5-componha-passos-de-n\xedvel-superior",level:3}];function p(e){const a={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"step-library-com-playwright",children:"Step Library com Playwright"})}),"\n",(0,r.jsxs)(a.p,{children:["Step Library s\xe3o a ponte entre seus testes e Page Object. Elas fornecem as capacidades de relat\xf3rios ricos do Serenity atrav\xe9s de anota\xe7\xf5es ",(0,r.jsx)(a.code,{children:"@Step"})," enquanto mant\xeam seus testes limpos e leg\xedveis."]}),"\n",(0,r.jsx)(a.h2,{id:"a-arquitetura-de-tr\xeas-camadas",children:"A Arquitetura de Tr\xeas Camadas"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{children:"Classe de Teste\n    \u2502  Usa @Steps para injetar step libraries\n    \u2502  Foca em cen\xe1rios de neg\xf3cio\n    \u25bc\nStep Library\n    \u2502  M\xe9todos @Step aparecem nos relat\xf3rios\n    \u2502  Orquestra a\xe7\xf5es do Page Object\n    \u25bc\nPage Object\n       Encapsula locators\n       Lida com intera\xe7\xf5es da p\xe1gina\n"})}),"\n",(0,r.jsx)(a.h2,{id:"criando-step-library",children:"Criando Step Library"}),"\n",(0,r.jsx)(a.h3,{id:"estrutura-b\xe1sica",children:"Estrutura B\xe1sica"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'public class ShoppingCartSteps {\n\n    private ShoppingCartPage cartPage;\n\n    // Inicializa o Page Object quando necess\xe1rio\n    private void ensurePageObject(Page page) {\n        if (cartPage == null) {\n            cartPage = new ShoppingCartPage(page);\n        }\n    }\n\n    @Step("Add product \'{1}\' to cart")\n    public void addProductToCart(Page page, String productName) {\n        ensurePageObject(page);\n        cartPage.addProduct(productName);\n    }\n\n    @Step("Verify cart contains {1} items")\n    public void verifyCartItemCount(Page page, int expectedCount) {\n        ensurePageObject(page);\n        assertThat(cartPage.getItemCount())\n            .as("Cart item count")\n            .isEqualTo(expectedCount);\n    }\n\n    @Step("Proceed to checkout")\n    public void proceedToCheckout(Page page) {\n        ensurePageObject(page);\n        cartPage.clickCheckout();\n    }\n}\n'})}),"\n",(0,r.jsx)(a.h3,{id:"usando-step-library-nos-testes",children:"Usando Step Library nos Testes"}),"\n",(0,r.jsxs)(a.p,{children:["Injete step library usando a anota\xe7\xe3o ",(0,r.jsx)(a.code,{children:"@Steps"}),":"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\nclass ShoppingTest {\n\n    @Steps\n    ShoppingCartSteps cart;\n\n    @Steps\n    ProductSteps products;\n\n    @Steps\n    CheckoutSteps checkout;\n\n    private Page page;\n\n    @Test\n    void shouldCompleteAPurchase() {\n        products.browseCategory(page, "Electronics");\n        products.selectProduct(page, "Laptop Pro");\n        cart.addProductToCart(page, "Laptop Pro");\n        cart.verifyCartItemCount(page, 1);\n        cart.proceedToCheckout(page);\n        checkout.completeOrder(page);\n    }\n}\n'})}),"\n",(0,r.jsx)(a.h2,{id:"a-anota\xe7\xe3o-step",children:"A Anota\xe7\xe3o @Step"}),"\n",(0,r.jsx)(a.h3,{id:"descri\xe7\xf5es-de-passos",children:"Descri\xe7\xf5es de Passos"}),"\n",(0,r.jsx)(a.p,{children:"Use placeholders de par\xe2metros nas descri\xe7\xf5es dos passos:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'@Step("Search for \'{1}\'")\npublic void searchFor(Page page, String term) { ... }\n\n@Step("Add {1} units of \'{2}\' to cart")\npublic void addToCart(Page page, int quantity, String product) { ... }\n\n@Step("Verify total is ${1}")\npublic void verifyTotal(Page page, BigDecimal expectedTotal) { ... }\n'})}),"\n",(0,r.jsxs)(a.p,{children:["Os \xedndices dos par\xe2metros s\xe3o baseados em zero: ",(0,r.jsx)(a.code,{children:"{0}"})," \xe9 o primeiro par\xe2metro, ",(0,r.jsx)(a.code,{children:"{1}"})," \xe9 o segundo, etc."]}),"\n",(0,r.jsx)(a.h3,{id:"passos-aninhados",children:"Passos Aninhados"}),"\n",(0,r.jsx)(a.p,{children:"Passos podem chamar outros passos para relat\xf3rios hier\xe1rquicos:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'@Step("Complete checkout with credit card")\npublic void completeCheckoutWithCreditCard(Page page, CreditCard card) {\n    enterBillingAddress(page, card.getBillingAddress());\n    enterCardDetails(page, card);\n    submitPayment(page);\n}\n\n@Step("Enter billing address")\npublic void enterBillingAddress(Page page, Address address) {\n    checkoutPage.enterAddress(address);\n}\n\n@Step("Enter card details")\npublic void enterCardDetails(Page page, CreditCard card) {\n    checkoutPage.enterCardNumber(card.getNumber());\n    checkoutPage.enterExpiry(card.getExpiry());\n    checkoutPage.enterCvv(card.getCvv());\n}\n\n@Step("Submit payment")\npublic void submitPayment(Page page) {\n    checkoutPage.clickPay();\n}\n'})}),"\n",(0,r.jsx)(a.h2,{id:"passos-cientes-da-p\xe1gina",children:"Passos Cientes da P\xe1gina"}),"\n",(0,r.jsxs)(a.p,{children:["Para assinaturas de passo mais limpas, use ",(0,r.jsx)(a.code,{children:"PlaywrightSerenity.getCurrentPage()"}),":"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'public class NavigationSteps {\n\n    @Step("Navigate to {0}")\n    public void navigateTo(String url) {\n        Page page = PlaywrightSerenity.getCurrentPage();\n        page.navigate(url);\n    }\n\n    @Step("Refresh the page")\n    public void refreshPage() {\n        PlaywrightSerenity.getCurrentPage().reload();\n    }\n\n    @Step("Go back")\n    public void goBack() {\n        PlaywrightSerenity.getCurrentPage().goBack();\n    }\n}\n'})}),"\n",(0,r.jsx)(a.p,{children:"Uso nos testes:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'@Test\nvoid shouldNavigateBetweenPages() {\n    // N\xe3o precisa passar o par\xe2metro page\n    navigation.navigateTo("https://example.com");\n    navigation.refreshPage();\n    navigation.goBack();\n}\n'})}),"\n",(0,r.jsx)(a.admonition,{type:"caution",children:(0,r.jsxs)(a.p,{children:["Ao usar ",(0,r.jsx)(a.code,{children:"getCurrentPage()"}),", certifique-se de ter registrado a p\xe1gina com ",(0,r.jsx)(a.code,{children:"PlaywrightSerenity.registerPage(page)"})," antes de chamar qualquer passo."]})}),"\n",(0,r.jsx)(a.h2,{id:"captura-de-tela",children:"Captura de Tela"}),"\n",(0,r.jsx)(a.h3,{id:"capturas-de-tela-autom\xe1ticas",children:"Capturas de Tela Autom\xe1ticas"}),"\n",(0,r.jsxs)(a.p,{children:["Capturas de tela s\xe3o capturadas automaticamente ap\xf3s cada m\xe9todo ",(0,r.jsx)(a.code,{children:"@Step"})," ser conclu\xeddo. Isso \xe9 gerenciado pelo ",(0,r.jsx)(a.code,{children:"PlaywrightStepListener"}),"."]}),"\n",(0,r.jsx)(a.h3,{id:"capturas-de-tela-manuais",children:"Capturas de Tela Manuais"}),"\n",(0,r.jsx)(a.p,{children:"Dispare capturas de tela adicionais em pontos espec\xedficos:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'@Step("Capture current state")\npublic void captureCurrentState(Page page) {\n    // Faz algumas a\xe7\xf5es\n    performComplexAction(page);\n\n    // Captura uma tela manualmente\n    PlaywrightSerenity.takeScreenshot();\n\n    // Continua com mais a\xe7\xf5es\n    performAnotherAction(page);\n}\n'})}),"\n",(0,r.jsx)(a.h2,{id:"organizando-step-library",children:"Organizando Step Library"}),"\n",(0,r.jsx)(a.h3,{id:"por-\xe1rea-funcional",children:"Por \xc1rea Funcional"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{children:"steps/\n\u251c\u2500\u2500 authentication/\n\u2502   \u251c\u2500\u2500 LoginSteps.java\n\u2502   \u2514\u2500\u2500 RegistrationSteps.java\n\u251c\u2500\u2500 shopping/\n\u2502   \u251c\u2500\u2500 ProductSteps.java\n\u2502   \u251c\u2500\u2500 CartSteps.java\n\u2502   \u2514\u2500\u2500 CheckoutSteps.java\n\u2514\u2500\u2500 account/\n    \u251c\u2500\u2500 ProfileSteps.java\n    \u2514\u2500\u2500 OrderHistorySteps.java\n"})}),"\n",(0,r.jsx)(a.h3,{id:"por-jornada-do-usu\xe1rio",children:"Por Jornada do Usu\xe1rio"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{children:"steps/\n\u251c\u2500\u2500 BuyerSteps.java      // Todos os passos para uma persona de comprador\n\u251c\u2500\u2500 SellerSteps.java     // Todos os passos para uma persona de vendedor\n\u2514\u2500\u2500 AdminSteps.java      // Todos os passos para um admin\n"})}),"\n",(0,r.jsx)(a.h2,{id:"boas-pr\xe1ticas",children:"Boas Pr\xe1ticas"}),"\n",(0,r.jsx)(a.h3,{id:"1-mantenha-os-passos-focados",children:"1. Mantenha os Passos Focados"}),"\n",(0,r.jsx)(a.p,{children:"Cada passo deve representar uma a\xe7\xe3o l\xf3gica do usu\xe1rio:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'// \u274c Ruim: Muitas coisas em um passo\n@Step("Login and add product to cart")\npublic void loginAndAddToCart(Page page, User user, String product) {\n    // Muita coisa acontecendo aqui\n}\n\n// \u2705 Bom: Passos focados com prop\xf3sito \xfanico\n@Step("Login as {1}")\npublic void login(Page page, User user) { ... }\n\n@Step("Add \'{1}\' to cart")\npublic void addToCart(Page page, String product) { ... }\n'})}),"\n",(0,r.jsx)(a.h3,{id:"2-use-linguagem-de-neg\xf3cio",children:"2. Use Linguagem de Neg\xf3cio"}),"\n",(0,r.jsx)(a.p,{children:"Os passos devem ler como linguagem natural:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'// \u274c Ruim: Linguagem t\xe9cnica\n@Step("Click submit button")\n@Step("Fill input field with value")\n\n// \u2705 Bom: Linguagem de neg\xf3cio\n@Step("Submit the order")\n@Step("Enter shipping address")\n'})}),"\n",(0,r.jsx)(a.h3,{id:"3-gerencie-o-estado-com-cuidado",children:"3. Gerencie o Estado com Cuidado"}),"\n",(0,r.jsx)(a.p,{children:"Esteja atento ao estado entre chamadas de passos:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'public class AccountSteps {\n    private AccountPage accountPage;\n    private User currentUser;  // Rastreia o estado quando necess\xe1rio\n\n    @Step("Login as {1}")\n    public void loginAs(Page page, User user) {\n        // Armazena para passos posteriores\n        this.currentUser = user;\n        loginPage.loginAs(user.getEmail(), user.getPassword());\n    }\n\n    @Step("Verify welcome message shows user\'s name")\n    public void verifyWelcomeMessage(Page page) {\n        assertThat(accountPage.getWelcomeMessage())\n            .contains(currentUser.getFirstName());\n    }\n}\n'})}),"\n",(0,r.jsx)(a.h3,{id:"4-fa\xe7a-asser\xe7\xf5es-claras",children:"4. Fa\xe7a Asser\xe7\xf5es Claras"}),"\n",(0,r.jsx)(a.p,{children:"Inclua asser\xe7\xf5es descritivas nos passos de verifica\xe7\xe3o:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'@Step("Verify order total is ${1}")\npublic void verifyOrderTotal(Page page, BigDecimal expectedTotal) {\n    BigDecimal actualTotal = checkoutPage.getOrderTotal();\n    assertThat(actualTotal)\n        .as("Order total")\n        .isEqualByComparingTo(expectedTotal);\n}\n\n@Step("Verify error message is displayed")\npublic void verifyErrorMessageDisplayed(Page page, String expectedMessage) {\n    assertThat(errorPage.getMessage())\n        .as("Error message")\n        .containsIgnoringCase(expectedMessage);\n}\n'})}),"\n",(0,r.jsx)(a.h3,{id:"5-componha-passos-de-n\xedvel-superior",children:"5. Componha Passos de N\xedvel Superior"}),"\n",(0,r.jsx)(a.p,{children:"Construa workflows complexos a partir de passos mais simples:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-java",children:'@Step("Complete guest checkout")\npublic void completeGuestCheckout(Page page, Address address, CreditCard card) {\n    enterShippingAddress(page, address);\n    selectShippingMethod(page, "Standard");\n    enterPaymentDetails(page, card);\n    confirmOrder(page);\n}\n'})}),"\n",(0,r.jsx)(a.p,{children:"Isso cria um relat\xf3rio hier\xe1rquico mostrando tanto o passo de alto n\xedvel quanto suas partes constituintes."})]})}function l(e={}){const{wrapper:a}={...(0,t.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},8453(e,a,s){s.d(a,{R:()=>i,x:()=>o});var n=s(6540);const r={},t=n.createContext(r);function i(e){const a=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(t.Provider,{value:a},e.children)}}}]);
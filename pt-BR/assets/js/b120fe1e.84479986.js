"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[9311],{7319(e,a,o){o.r(a),o.d(a,{assets:()=>d,contentTitle:()=>i,default:()=>m,frontMatter:()=>t,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"screenplay/screenplay_fundamentals","title":"Fundamentos do Screenplay","description":"O Screenplay Pattern e um padrao de design moderno para automacao de testes, criado para facilitar a escrita de codigo de teste escalavel e de facil manutencao. Voce pode obter uma visao geral rapida de um teste Screenplay simples aqui.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/screenplay/screenplay_fundamentals.md","sourceDirName":"screenplay","slug":"/screenplay/screenplay_fundamentals","permalink":"/pt-BR/docs/screenplay/screenplay_fundamentals","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/screenplay/screenplay_fundamentals.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"screenplay_fundamentals","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Referencia de Configuracao do Cucumber","permalink":"/pt-BR/docs/cucumber/configuration-reference"},"next":{"title":"Testes Web com Serenity Screenplay","permalink":"/pt-BR/docs/screenplay/screenplay_webdriver"}}');var s=o(4848),r=o(8453);const t={id:"screenplay_fundamentals",sidebar_position:1},i="Fundamentos do Screenplay",d={},c=[{value:"Configurando um teste Screenplay",id:"configurando-um-teste-screenplay",level:2},{value:"Screenplay e JUnit 4",id:"screenplay-e-junit-4",level:3},{value:"Screenplay e JUnit 5 (Recomendado)",id:"screenplay-e-junit-5-recomendado",level:3},{value:"Screenplay e JUnit 4 (Descontinuado)",id:"screenplay-e-junit-4-descontinuado",level:3},{value:"Screenplay e Cucumber",id:"screenplay-e-cucumber",level:3},{value:"Com JUnit 5 (Recomendado)",id:"com-junit-5-recomendado",level:4},{value:"Com JUnit 4 (Descontinuado)",id:"com-junit-4-descontinuado",level:4},{value:"Definindo os Actor",id:"definindo-os-actor",level:2},{value:"Actor no JUnit",id:"actor-no-junit",level:3},{value:"Definindo Actor usando a anotacao CastMember",id:"definindo-actor-usando-a-anotacao-castmember",level:3},{value:"Actor no Cucumber",id:"actor-no-cucumber",level:3},{value:"Usando um driver gerenciado com Cucumber",id:"usando-um-driver-gerenciado-com-cucumber",level:4},{value:"Cast e Stage",id:"cast-e-stage",level:4},{value:"Cast e Ability",id:"cast-e-ability",level:4},{value:"O Actor em destaque",id:"o-actor-em-destaque",level:4},{value:"Agrupando Interaction em Task",id:"agrupando-interaction-em-task",level:2},{value:"Agrupando Interaction usando a classe Task",id:"agrupando-interaction-usando-a-classe-task",level:3},{value:"Usando expressoes lambda para criar Task customizadas",id:"usando-expressoes-lambda-para-criar-task-customizadas",level:3},{value:"Escrevendo classes Performable customizadas",id:"escrevendo-classes-performable-customizadas",level:3},{value:"Question - consultando o estado do sistema",id:"question---consultando-o-estado-do-sistema",level:2},{value:"Usando classes Question incluidas",id:"usando-classes-question-incluidas",level:3},{value:"Criando Question customizadas usando expressoes Lambda",id:"criando-question-customizadas-usando-expressoes-lambda",level:3},{value:"Tornando Question mais legiveis com o metodo <code>Question.about()</code>",id:"tornando-question-mais-legiveis-com-o-metodo-questionabout",level:3},{value:"Convertendo Question",id:"convertendo-question",level:3},{value:"Convertendo valores de data",id:"convertendo-valores-de-data",level:3},{value:"Convertendo para listas de valores",id:"convertendo-para-listas-de-valores",level:3},{value:"Trabalhando com colecoes",id:"trabalhando-com-colecoes",level:3},{value:"Dados de sessao especificos do Actor",id:"dados-de-sessao-especificos-do-actor",level:2},{value:"Conclusao",id:"conclusao",level:2}];function l(e){const a={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.header,{children:(0,s.jsx)(a.h1,{id:"fundamentos-do-screenplay",children:"Fundamentos do Screenplay"})}),"\n",(0,s.jsxs)(a.p,{children:["O Screenplay Pattern e um padrao de design moderno para automacao de testes, criado para facilitar a escrita de codigo de teste escalavel e de facil manutencao. Voce pode obter uma visao geral rapida de um teste Screenplay simples ",(0,s.jsx)(a.a,{href:"../../docs/tutorials/screenplay",children:"aqui"}),"."]}),"\n",(0,s.jsx)(a.p,{children:"Nesta secao, veremos em detalhes como escrever automacao de testes de alta qualidade usando o Screenplay Pattern. Inicialmente, focaremos na interacao com uma aplicacao web usando Selenium - nas secoes seguintes, veremos como interagir com APIs e bancos de dados usando o modelo Screenplay."}),"\n",(0,s.jsxs)(a.p,{children:["No Screenplay, modelamos ",(0,s.jsx)(a.em,{children:"Actor"})," (atores) que interagem com uma aplicacao de varias formas para executar ",(0,s.jsx)(a.em,{children:"Task"})," (tarefas) que os ajudam a alcancar seus objetivos. Os Actor possuem ",(0,s.jsx)(a.em,{children:"Ability"})," (habilidades), como a habilidade de interagir com um navegador web ou consultar um banco de dados, que os ajudam a executar essas tarefas. Os Actor tambem podem responder ",(0,s.jsx)(a.em,{children:"Question"})," (perguntas) sobre o estado do sistema, para que possamos verificar se uma funcionalidade esta se comportando da forma esperada."]}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.img,{src:o(7794).A+"",width:"1355",height:"641"})}),"\n",(0,s.jsx)(a.h2,{id:"configurando-um-teste-screenplay",children:"Configurando um teste Screenplay"}),"\n",(0,s.jsx)(a.p,{children:"Testes Screenplay do Serenity BDD podem ser escritos usando qualquer framework que funcione com o Serenity BDD. Comecaremos discutindo como configurar um caso de teste Screenplay simples usando bibliotecas comuns como JUnit 4, JUnit 5 e Cucumber."}),"\n",(0,s.jsx)(a.h3,{id:"screenplay-e-junit-4",children:"Screenplay e JUnit 4"}),"\n",(0,s.jsxs)(a.p,{children:["Executar um teste Screenplay no JUnit 4 e JUnit 5 nao e diferente de qualquer outro teste do Serenity BDD. Para JUnit 4, adicione a dependencia ",(0,s.jsx)(a.code,{children:"serenity-junit"})," ao seu projeto se ela ainda nao estiver la:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-xml",children:"        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-junit</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-screenplay</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-screenplay-webdriver</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n"})}),"\n",(0,s.jsx)(a.h3,{id:"screenplay-e-junit-5-recomendado",children:"Screenplay e JUnit 5 (Recomendado)"}),"\n",(0,s.jsx)(a.p,{children:"Para JUnit 5, adicione a seguinte dependencia ao seu projeto:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-xml",children:"        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-junit5</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-screenplay</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-screenplay-webdriver</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n"})}),"\n",(0,s.jsxs)(a.p,{children:["Em seguida, voce precisa usar a classe ",(0,s.jsx)(a.code,{children:"SerenityJUnit5Extension"}),", assim:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'import net.serenitybdd.junit.runners.SerenityJUnit5Extension;\nimport org.junit.jupiter.api.Test;\n\n@ExtendWith(SerenityJUnit5Extension.class)\nclass AddNewTodos {\n\n    @Test\n    @DisplayName("Add a todo item to an empty list")\n    void addToEmptyList() {...}\n}\n'})}),"\n",(0,s.jsx)(a.h3,{id:"screenplay-e-junit-4-descontinuado",children:"Screenplay e JUnit 4 (Descontinuado)"}),"\n",(0,s.jsx)(a.admonition,{title:"JUnit 4 Descontinuado",type:"warning",children:(0,s.jsx)(a.p,{children:"O suporte ao JUnit 4 esta descontinuado a partir do Serenity 5.0.0 e sera removido no Serenity 6.0.0. Por favor, migre para o JUnit 5 (veja acima)."})}),"\n",(0,s.jsxs)(a.p,{children:["Se voce ainda esta usando JUnit 4, use a classe ",(0,s.jsx)(a.code,{children:"SerenityRunner"})," na sua classe de teste, assim:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:"import net.serenitybdd.junit.runners.SerenityRunner;\nimport org.junit.Test;\n\n@RunWith(SerenityRunner.class)\npublic class AddNewTodos {\n\n    @Test\n    public void addToEmptyList() {...}\n}\n"})}),"\n",(0,s.jsx)(a.h3,{id:"screenplay-e-cucumber",children:"Screenplay e Cucumber"}),"\n",(0,s.jsxs)(a.p,{children:["Para executar um Scenario Screenplay com Cucumber e Serenity, voce precisa apenas das dependencias padrao do Screenplay junto com a dependencia ",(0,s.jsx)(a.code,{children:"serenity-cucumber"}),", como mostrado abaixo:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-xml",children:"        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-cucumber</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-screenplay</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>net.serenity-bdd</groupId>\n            <artifactId>serenity-screenplay-webdriver</artifactId>\n            <version>${serenity.version}</version>\n            <scope>test</scope>\n        </dependency>\n"})}),"\n",(0,s.jsx)(a.h4,{id:"com-junit-5-recomendado",children:"Com JUnit 5 (Recomendado)"}),"\n",(0,s.jsxs)(a.p,{children:["Para JUnit 5, use a anotacao ",(0,s.jsx)(a.code,{children:"@Suite"})," com o Cucumber JUnit Platform Engine:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'import org.junit.platform.suite.api.*;\n\nimport static io.cucumber.junit.platform.engine.Constants.PLUGIN_PROPERTY_NAME;\n\n@Suite\n@IncludeEngines("cucumber")\n@SelectClasspathResource("features")\n@ConfigurationParameter(\n    key = PLUGIN_PROPERTY_NAME,\n    value = "net.serenitybdd.cucumber.core.plugin.SerenityReporterParallel"\n)\nclass TestSuite {}\n'})}),"\n",(0,s.jsx)(a.h4,{id:"com-junit-4-descontinuado",children:"Com JUnit 4 (Descontinuado)"}),"\n",(0,s.jsx)(a.admonition,{title:"JUnit 4 Descontinuado",type:"warning",children:(0,s.jsx)(a.p,{children:"Os runners do Cucumber para JUnit 4 estao descontinuados a partir do Serenity 5.0.0 e serao removidos no Serenity 6.0.0. Por favor, migre para o JUnit 5 (veja acima)."})}),"\n",(0,s.jsx)(a.p,{children:"Para JUnit 4, voce usaria:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'import io.cucumber.junit.CucumberOptions;\nimport net.serenitybdd.cucumber.CucumberWithSerenity;\nimport org.junit.runner.RunWith;\n\n@RunWith(CucumberWithSerenity.class)\n@CucumberOptions(\n        features = "classpath:features"\n)\npublic class TestSuite {}\n'})}),"\n",(0,s.jsx)(a.h2,{id:"definindo-os-actor",children:"Definindo os Actor"}),"\n",(0,s.jsx)(a.p,{children:"Todo teste Screenplay precisa de pelo menos um Actor (e alguns tem varios). Existem varias formas de definir um Actor, que variam ligeiramente dependendo do framework de teste que voce esta usando."}),"\n",(0,s.jsx)(a.h3,{id:"actor-no-junit",children:"Actor no JUnit"}),"\n",(0,s.jsxs)(a.p,{children:["Uma forma de criar um novo Actor e usar o metodo ",(0,s.jsx)(a.code,{children:"Actor.named()"}),". Por exemplo, para criar um Actor chamado Toby, podemos escrever o seguinte:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'Actor toby = Actor.named("Toby");\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Porem, esse Actor nao sera capaz de fazer muita coisa ate que lhe demos a habilidade de interagir com nossa aplicacao. E ai que as ",(0,s.jsx)(a.em,{children:"Ability"})," entram em cena."]}),"\n",(0,s.jsxs)(a.p,{children:["A Ability mais comumente necessaria e a habilidade de navegar na web usando uma biblioteca de automacao web como Selenium ou Playwright. Em um teste JUnit do Serenity, podemos usar a anotacao ",(0,s.jsx)(a.code,{children:"@Managed"})," para gerenciar o ciclo de vida do WebDriver. Uma vez que temos um driver disponivel, podemos atribui-lo a um Actor usando a classe ",(0,s.jsx)(a.code,{children:"BrowseTheWeb"})," assim:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\nclass AddNewTodosWithAManagedDriver {\n\n    @Managed\n    WebDriver driver;\n\n    @Test\n    @DisplayName("Add a todo item to an empty list")\n    void addToEmptyList() {\n        Actor toby = Actor.named("Toby")\n                          .whoCan(BrowseTheWeb.with(driver));\n    ...\n    }\n}\n'})}),"\n",(0,s.jsx)(a.h3,{id:"definindo-actor-usando-a-anotacao-castmember",children:"Definindo Actor usando a anotacao CastMember"}),"\n",(0,s.jsxs)(a.p,{children:["Para muitos Scenario, podemos simplificar o codigo mostrado acima. Se precisamos apenas usar um Actor que pode interagir com um site usando Selenium, podemos usar a anotacao ",(0,s.jsx)(a.code,{children:"@CastMember"}),". Esta anotacao configura um Actor com uma instancia do WebDriver e gerencia o ciclo de vida do navegador para nos (entao nao ha necessidade da anotacao ",(0,s.jsx)(a.code,{children:"@Managed"})," ou da variavel ",(0,s.jsx)(a.code,{children:"WebDriver"}),"). Voce pode ver um exemplo desta anotacao em acao aqui:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'@ExtendWith(SerenityJUnit5Extension.class)\nclass AddNewTodosWithACastMember {\n\n    @CastMember\n    Actor toby;\n\n    @Test\n    @DisplayName("Add a todo item to an empty list")\n    void addToEmptyList() {\n\n        toby.attemptsTo(\n                Open.browserOn().the(TodoMvcPage.class),\n                Enter.theValue("Buy some milk").into(".new-todo").thenHit(Keys.RETURN)\n        );\n        Collection<String> items = toby.asksFor(Text.ofEach(".todo-list label"));\n        assertThat(items).containsExactly("Buy some milk");\n\n        String title = toby.asksFor(Text.of(By.tagName("h1")));\n        assertThat(title).isEqualTo("todos");\n    }\n}\n'})}),"\n",(0,s.jsxs)(a.p,{children:["O nome do Actor sera derivado do nome da variavel. Se voce precisar de um nome mais descritivo, pode usar o atributo ",(0,s.jsx)(a.code,{children:"name"})," para fornecer um valor de texto livre, que sera usado nos relatorios:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    @CastMember(name = "Tim the Enchanter")\n    Actor tim;\n'})}),"\n",(0,s.jsx)(a.h3,{id:"actor-no-cucumber",children:"Actor no Cucumber"}),"\n",(0,s.jsx)(a.p,{children:"Configurar Actor no Cucumber e um pouco mais complicado do que no JUnit, porque geralmente nos referimos a eles pelo nome nos Scenario do Cucumber. Suponha, por exemplo, que queremos automatizar o seguinte Scenario:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-gherkin",children:'  Scenario: Add items to an empty list\n    Given Toby starts with an empty list\n    When he adds "Buy some milk" to his list\n    Then the todo list should contain the following items:\n      | Buy some milk |\n'})}),"\n",(0,s.jsx)(a.h4,{id:"usando-um-driver-gerenciado-com-cucumber",children:"Usando um driver gerenciado com Cucumber"}),"\n",(0,s.jsxs)(a.p,{children:["Podemos usar a mesma abordagem que usamos para JUnit em nossos arquivos de Step Definition do Cucumber, declarando uma instancia do WebDriver usando a anotacao ",(0,s.jsx)(a.code,{children:"@Managed"})," e atribuindo-a ao nosso Actor usando a classe de Ability ",(0,s.jsx)(a.code,{children:"BrowseTheWeb"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'public class TodoStepDefinitions {\n\n    @Managed\n    WebDriver driver;\n\n    Actor toby = Actor.named("Toby");\n\n    @Before\n    public void setupActor() {\n        toby.can(BrowseTheWeb.with(driver));\n    }\n\n    @Given("Toby starts with an empty list")\n    public void stats_with_an_empty_list() {\n        toby.attemptsTo(\n                Open.url("https://todomvc.com/examples/angularjs/#/")\n        );\n    }\n'})}),"\n",(0,s.jsx)(a.p,{children:'Porem, o nome do Actor ("Toby") faz parte dos passos do Scenario. Podemos querer ter outros Scenario com outros Actor, ou ter um Scenario envolvendo mais de um Actor.'}),"\n",(0,s.jsx)(a.h4,{id:"cast-e-stage",children:"Cast e Stage"}),"\n",(0,s.jsxs)(a.p,{children:["Podemos tornar nossas Step Definition do Cucumber mais flexiveis introduzindo o conceito de um ",(0,s.jsx)(a.em,{children:"Cast"})," (elenco) de Actor, e um ",(0,s.jsx)(a.em,{children:"stage"})," (palco) onde eles atuam."]}),"\n",(0,s.jsxs)(a.p,{children:["Um ",(0,s.jsx)(a.em,{children:"Cast"})," e uma classe cuja funcao e fornecer Actor com um conjunto especifico de Ability, quando precisamos que eles desempenhem um papel em nossos testes. Por exemplo, podemos usar a classe ",(0,s.jsx)(a.code,{children:"OnlineCast"})," para fornecer Actor que estao equipados com suas proprias instancias do WebDriver. Dessa forma, nao precisamos declarar o driver ",(0,s.jsx)(a.code,{children:"@Managed"}),", e cada Actor pode ter seu proprio navegador se tivermos um Scenario com mais de um Actor."]}),"\n",(0,s.jsxs)(a.p,{children:["Um ",(0,s.jsx)(a.em,{children:"stage"})," e onde nossos Actor desempenham seus papeis. Um Scenario tem um unico stage, que podemos usar para identificar um Actor pelo nome ou encontrar o Actor atualmente ativo."]}),"\n",(0,s.jsxs)(a.p,{children:["Precisamos atribuir um cast ao stage no inicio de cada Scenario; podemos fazer isso chamando o metodo ",(0,s.jsx)(a.code,{children:"OnStage.setTheStage()"})," e passando um cast especifico, assim:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:"OnStage.setTheStage(new OnlineCast());\n"})}),"\n",(0,s.jsxs)(a.p,{children:["Uma vez que configuramos o stage, podemos obter um Actor com um determinado nome usando o metodo ",(0,s.jsx)(a.code,{children:"OnStage.theActorCalled()"}),", assim:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'Actor toby = OnStage.theActorCalled("Toby");\n'})}),"\n",(0,s.jsx)(a.p,{children:"Usando esta abordagem, poderiamos implementar o primeiro passo do nosso Scenario de uma forma que funcionara independentemente de qual Actor esteja envolvido, assim:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    @Given("{word} starts with an empty list")\n    public void stats_with_an_empty_list(String actorName) {\n        Actor actor = OnStage.theActorCalled(actorName);\n        actor.attemptsTo(\n                Open.url("https://todomvc.com/examples/angularjs/#/")\n        );\n    }\n'})}),"\n",(0,s.jsxs)(a.p,{children:["E frequentemente util definir uma expressao customizada do Cucumber para que nao precisemos chamar o metodo ",(0,s.jsx)(a.code,{children:"OnStage.theActorCalled()"})," toda vez:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    @ParameterType(".*")\n    public Actor actor(String actorName) {\n        return OnStage.theActorCalled(actorName);\n    }\n\n    @Given("{actor} starts with an empty list")\n    public void stats_with_an_empty_list(Actor actor) {\n        actor.attemptsTo(\n                Open.url("https://todomvc.com/examples/angularjs/#/")\n        );\n    }\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Dessa forma, nosso proximo passo pode simplesmente usar um parametro do tipo ",(0,s.jsx)(a.code,{children:"Actor"}),", assim:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    @When("{actor} adds {string} to his list")\n    public void he_adds_to_his_list(Actor actor, String item) {\n        actor.attemptsTo(\n                Enter.theValue(item).into(".new-todo").thenHit(Keys.RETURN)\n        );\n    }\n'})}),"\n",(0,s.jsx)(a.p,{children:"Esses metodos sao definidos por padrao no template Serenity Cucumber Starter no Github, entao voce nao precisa adiciona-los se estiver usando este template."}),"\n",(0,s.jsxs)(a.p,{children:["A classe ",(0,s.jsx)(a.code,{children:"OnStage"}),' tambem reconhece pronomes - quando uma expressao como "he adds \'Walk the dog\' to the todo list" ou "her shopping cart should be empty", o metodo ',(0,s.jsx)(a.code,{children:"theActorCalled()"})," reconhecera o pronome e buscara o ultimo Actor ativo com o metodo ",(0,s.jsx)(a.code,{children:"theActorInTheSpotlight()"}),". Por padrao, os pronomes sao:"]}),"\n",(0,s.jsxs)(a.ul,{children:["\n",(0,s.jsx)(a.li,{children:"he"}),"\n",(0,s.jsx)(a.li,{children:"she"}),"\n",(0,s.jsx)(a.li,{children:"they"}),"\n",(0,s.jsx)(a.li,{children:"it"}),"\n",(0,s.jsx)(a.li,{children:"his"}),"\n",(0,s.jsx)(a.li,{children:"her"}),"\n",(0,s.jsx)(a.li,{children:"their"}),"\n",(0,s.jsxs)(a.li,{children:["its\nVoce pode definir sua propria lista de pronomes usando a propriedade ",(0,s.jsx)(a.code,{children:"screenplay.pronouns"})," do Serenity no arquivo ",(0,s.jsx)(a.code,{children:"serenity.conf"}),", por exemplo:"]}),"\n"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-conf",children:"screenplay.pronouns=il,elle,ils,elles,son,sa,leur,leurs\n"})}),"\n",(0,s.jsx)(a.h4,{id:"cast-e-ability",children:"Cast e Ability"}),"\n",(0,s.jsxs)(a.p,{children:["No codigo anterior, usamos a classe ",(0,s.jsx)(a.code,{children:"OnlineCast"})," para definir o cast de Actor:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:"OnStage.setTheStage(new OnlineCast());\n"})}),"\n",(0,s.jsx)(a.p,{children:"Os Cast sao muito flexiveis, e podemos configura-los para produzir Actor com Ability adicionais se precisarmos."}),"\n",(0,s.jsxs)(a.p,{children:["Por exemplo, imagine que queremos dar aos nossos Actor a habilidade de entregar cafe. Para fazer isso, podemos criar uma classe de Ability ",(0,s.jsx)(a.code,{children:"Deliver"}),". Para entregar um cafe, chamaremos o metodo ",(0,s.jsx)(a.code,{children:"deliverItem()"}),', que (para nossos propositos) simplesmente retornara uma string com um item com um numero unico (como "Coffee #1").']}),"\n",(0,s.jsx)(a.p,{children:"A classe Ability poderia ficar assim:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    public class Deliver implements Ability {\n        final String item;\n        private int counter = 1;\n\n        private Deliver(String item) {\n            this.item = item;\n        }\n\n        public static some(String item) {\n            return new Deliver(item)\n        }\n\n        public String deliverItem() {\n            return item + " #" + counter++;\n        }\n    }\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Agora podemos atribuir esta Ability aos nossos Actor no ",(0,s.jsx)(a.code,{children:"Cast"})," usando o metodo ",(0,s.jsx)(a.code,{children:"Cast.whereEveryoneCan()"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'OnStage.setTheStage(\n    Cast.whereEveryoneCan(Fetch.some("Coffee"))\n);\n'})}),"\n",(0,s.jsx)(a.p,{children:"Se precisarmos de uma configuracao mais complexa, tambem podemos usar uma expressao Lambda para fornecer o codigo que precisamos executar para melhorar um novo Actor com Ability adicionais, assim:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'Consumer<Actor> fetchTheCoffee = { actor -> actor.whoCan(Fetch.some("Coffee")) }\n\nOnStage.setTheStage(\n    Cast.whereEveryoneCan(fetchTheCoffee)\n);\n'})}),"\n",(0,s.jsx)(a.h4,{id:"o-actor-em-destaque",children:"O Actor em destaque"}),"\n",(0,s.jsx)(a.p,{children:'As vezes um passo nao se refere a um Actor pelo nome, mas implicitamente se refere ao ultimo Actor que fez qualquer coisa no Scenario. Por exemplo, o terceiro passo, "Then the todo list should contain the following items..." nao tem um Actor explicito.'}),"\n",(0,s.jsxs)(a.p,{children:["Nessas situacoes, podemos usar o metodo ",(0,s.jsx)(a.code,{children:"OnStage.theActorInTheSpotlight()"})," para nos referir ao ultimo Actor ativo conhecido. Por exemplo, poderiamos implementar o terceiro passo do nosso Scenario assim:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    @Then("the todo list should contain the following items:")\n    public void the_todo_list_should_contain(List<String> expectedItems) {\n        Actor currentActor = OnStage.theActorInTheSpotlight();\n        var todos = currentActor.asksFor(Text.ofEach(".todo-list li"));\n        assertThat(todos).containsExactlyElementsOf(expectedItems);\n    }\n'})}),"\n",(0,s.jsx)(a.h2,{id:"agrupando-interaction-em-task",children:"Agrupando Interaction em Task"}),"\n",(0,s.jsx)(a.p,{children:"O Screenplay visa facilitar a escrita de codigo de automacao de facil manutencao e escalavel. E uma forma importante de fazer isso e agrupando Interaction em sequencias reutilizaveis que representam conceitos de dominio de nivel mais alto."}),"\n",(0,s.jsxs)(a.p,{children:["Por exemplo, o teste a seguir mostra como fazer login no site de teste ",(0,s.jsx)(a.a,{href:"https://www.saucedemo.com/",children:"https://www.saucedemo.com/"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'        toby.attemptsTo(\n                Open.url("https://www.saucedemo.com/"),\n                Enter.theValue("standard_user").into("#user-name"),\n                Enter.theValue("secret_sauce").into("#password"),\n                Click.on("#login-button")\n        );\n'})}),"\n",(0,s.jsx)(a.p,{children:"Essas quatro linhas envolvem todo o processo de login no site. Porem, e dificil ver isso a primeira vista ao ler o codigo. Poderiamos tornar este codigo muito mais legivel agrupando essas Interaction em uma unica Task."}),"\n",(0,s.jsx)(a.h3,{id:"agrupando-interaction-usando-a-classe-task",children:"Agrupando Interaction usando a classe Task"}),"\n",(0,s.jsxs)(a.p,{children:["Uma abordagem melhor seria agrupar essas Interaction relacionadas em uma unica ",(0,s.jsx)(a.code,{children:"Task"}),"."]}),"\n",(0,s.jsxs)(a.p,{children:["A forma mais simples de fazer isso e usar o metodo ",(0,s.jsx)(a.code,{children:"Task.where()"}),". Este metodo nos permite retornar uma Task (ou mais precisamente, uma implementacao da interface ",(0,s.jsx)(a.code,{children:"Performable"}),") que combina varias outras Task ou Interaction."]}),"\n",(0,s.jsx)(a.p,{children:"A Task que permite que um Actor faca login como um usuario padrao poderia ficar assim:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'public class Login {\n    public static Task asAStandardUser() {\n        return Task.where(\n                Open.url("https://www.saucedemo.com/"),\n                Enter.theValue("standard_user").into("#user-name"),\n                Enter.theValue("secret_sauce").into("#password"),\n                Click.on("#login-button")\n        );\n    }\n}\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Podemos querer tornar nossa Task mais configuravel, adicionando alguns parametros a assinatura do metodo. Neste caso, e util tornar nossa Task mais descritiva adicionando uma descricao de texto antes da lista de ",(0,s.jsx)(a.em,{children:"Performable"}),", como mostrado abaixo. Esta descricao aparecera nos relatorios sempre que a Task for executada. O ",(0,s.jsx)(a.code,{children:"{0}"}),' na descricao sera substituido pelo nome do Actor (entao "Toby" em nosso teste).']}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'public class Login {\n    public static Performable as(String username, String password) {\n        return Task.where(\n                "{0} logs in as " + username,\n                Open.url("https://www.saucedemo.com/"),\n                Enter.theValue(username).into("#user-name"),\n                Enter.theValue(password).into("#password"),\n                Click.on("#login-button")\n        );\n    }\n}\n'})}),"\n",(0,s.jsx)(a.p,{children:"Agora podemos refatorar nosso teste original usando este metodo:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:"        toby.attemptsTo(Login.asAStandardUser());\n"})}),"\n",(0,s.jsx)(a.p,{children:"ou"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'        toby.attemptsTo(Login.as("standard_user","secret_sauce"));\n'})}),"\n",(0,s.jsx)(a.h3,{id:"usando-expressoes-lambda-para-criar-task-customizadas",children:"Usando expressoes lambda para criar Task customizadas"}),"\n",(0,s.jsxs)(a.p,{children:["Ate agora vimos como criar uma ",(0,s.jsx)(a.em,{children:"Task"})," a partir de uma lista de outras Task ou Interaction. Mas as vezes precisamos ter mais controle sobre a logica da nossa Task. Podemos fazer isso muito facilmente usando expressoes lambda, que nos dao controle total sobre como nossa Task deve funcionar."]}),"\n",(0,s.jsx)(a.p,{children:"Por exemplo, imagine que refatoramos nosso exemplo TodoMVC acima para usar a seguinte classe Task para abrir a aplicacao TodoMVC com uma lista vazia:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'\npublic class Start {\n    public static Performable withAnEmptyTodoList() {\n        return Task.where("{0} starts with an empty todo list",\n                Open.url("https://todomvc.com/examples/angularjs/#/")\n        );\n    }\n'})}),"\n",(0,s.jsx)(a.p,{children:"Tambem poderiamos criar uma Task para adicionar um item de todo a lista:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'public class AddATodoItem {\n    public static Performable called(String thingToDo) {\n        return Task.where("{0} adds a todo item called " + thingToDo,\n                Enter.theValue(item).into(".new-todo").thenHit(Keys.RETURN)\n        );\n    }\n}\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Agora suponha que queremos permitir que Toby comece com alguns elementos ja em sua lista. Poderiamos imaginar um novo metodo ",(0,s.jsx)(a.code,{children:"Start.withAListContainingTheItems(...)"})," assim:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'        toby.attemptsTo(\n                Start.withAListContaingTheItems("Feed the cat","Buy some bread")\n        );\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Porem, para implementar este metodo, precisamos iterar sobre a lista de itens fornecida e chamar a Task ",(0,s.jsx)(a.code,{children:"AddATodoItem"})," para cada um deles. Podemos fazer isso usando uma expressao Lambda em vez de uma lista de ",(0,s.jsx)(a.em,{children:"Performable"}),". A expressao Lambda recebe um Actor como parametro e nos permite escrever blocos de codigo arbitrarios para implementar nossa Task. Por exemplo, o metodo ",(0,s.jsx)(a.code,{children:"withAListContaingTheItems()"})," poderia ficar assim:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    public static Performable withAListContainingTheItems(String... items) {\n        return Task.where("{0} starts with a list containing " + Arrays.asList(items),\n                actor -> {\n                    actor.attemptsTo(Start.withAnEmptyTodoList());\n                    for (String item : items) {\n                        actor.attemptsTo(AddATodoItem.called(item));\n                    }\n                }\n        );\n'})}),"\n",(0,s.jsxs)(a.p,{children:["A classe ",(0,s.jsx)(a.code,{children:"Start"})," completa ficaria assim:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'public class Start {\n    public static Performable withAnEmptyTodoList() {\n        return Task.where("{0} starts with an empty todo list",\n                Open.url("https://todomvc.com/examples/angularjs/#/")\n        );\n    }\n\n    public static Performable withAListContainingTheItems(String... items) {\n        return Task.where("{0} starts with a list containing " + Arrays.asList(items),\n                actor -> {\n                    actor.attemptsTo(Start.withAnEmptyTodoList());\n                    for (String item : items) {\n                        actor.attemptsTo(AddATodoItem.called(item));\n                    }\n                }\n        );\n    }\n}\n\n'})}),"\n",(0,s.jsx)(a.h3,{id:"escrevendo-classes-performable-customizadas",children:"Escrevendo classes Performable customizadas"}),"\n",(0,s.jsxs)(a.p,{children:["As vezes precisamos de mais controle sobre a criacao de uma Task. Podemos fazer isso criando uma classe que implementa a interface ",(0,s.jsx)(a.code,{children:"Performable"}),"."]}),"\n",(0,s.jsxs)(a.p,{children:["A interface ",(0,s.jsx)(a.code,{children:"Performable"})," tem um unico metodo que voce precisa implementar: ",(0,s.jsx)(a.code,{children:"performAs()"}),". Este metodo recebe um ",(0,s.jsx)(a.code,{children:"Actor"})," como parametro. Uma Task customizada muito simples poderia ficar assim:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'public class AddItem implements Performable {\n    @Override\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n                Enter.theValue("Buy some milk")\n                        .into(".new-todo")\n                        .thenHit(Keys.RETURN)\n        );\n    }\n}\n'})}),"\n",(0,s.jsx)(a.p,{children:"Agora podemos usar esta classe diretamente em nossos testes:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:"    AddItem addANewItem = new AddItem();\n    toby.attemptsTo(addANewItem);\n"})}),"\n",(0,s.jsxs)(a.p,{children:['Por padrao, o Serenity registrara esta acao nos relatorios usando o nome do Actor e o nome da classe, entao neste caso, o relatorio incluiria algo como "Toby add item". Se quisermos um texto mais descritivo, podemos adicionar a anotacao ',(0,s.jsx)(a.code,{children:"@Step"})," ao metodo ",(0,s.jsx)(a.code,{children:"performAs()"}),', como mostrado aqui (o placeholder "',0,'" sera substituido pelo nome do Actor):']}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'public class AddItem implements Performable {\n    @Override\n    @Step("{0} adds an item to the list")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n                Enter.theValue("Buy some milk")\n                        .into(".new-todo")\n                        .thenHit(Keys.RETURN)\n        );\n    }\n}\n'})}),"\n",(0,s.jsxs)(a.p,{children:['Nesta classe, so podemos adicionar o item "Buy some milk" a nossa lista. Poderiamos tornar nossa classe mais flexivel registrando o nome da tarefa como um parametro. Para fazer isso, precisamos adicionar uma variavel membro ao nosso ',(0,s.jsx)(a.code,{children:"Performable"})," para representar este valor e passa-lo no construtor:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'public class AddItem implements Performable {\n    private String name;\n\n    public AddItem(String name) {\n        this.name = name;\n    }\n\n    @Override\n    @Step("{0} adds an item to the list")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n                Enter.theValue(name)\n                        .into(".new-todo")\n                        .thenHit(Keys.RETURN)\n        );\n    }\n\n    public static AddItem called(String name) {\n        return new AddItem(name);\n    }\n}\n'})}),"\n",(0,s.jsx)(a.p,{children:"Agora podemos tornar nosso codigo de teste mais legivel, como mostrado aqui:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    toby.attemptsTo(AddItem.named("Walk the dog"));\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Porem, ha mais uma coisa que precisamos fazer para que isso funcione corretamente. O codigo mostrado aqui nao sera reportado corretamente nos relatorios do Serenity. Por razoes tecnicas, toda implementacao de ",(0,s.jsx)(a.code,{children:"Performable"})," deve ter um construtor padrao, mesmo que voce nao o use diretamente no seu codigo. Entao a implementacao completa ficaria assim:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'public class AddItem implements Performable {\n    private String name;\n\n    public AddItem() {}\n\n    public AddItem(String name) {\n        this.name = name;\n    }\n\n    @Override\n    @Step("{0} adds an item to the list")\n    public <T extends Actor> void performAs(T actor) {\n        actor.attemptsTo(\n                Enter.theValue(name)\n                        .into(".new-todo")\n                        .thenHit(Keys.RETURN)\n        );\n    }\n\n    public static AddItem called(String name) {\n        return new AddItem(name);\n    }\n}\n'})}),"\n",(0,s.jsx)(a.admonition,{type:"tip",children:(0,s.jsxs)(a.p,{children:["Sempre lembre de adicionar um construtor padrao sem parametros as suas implementacoes de ",(0,s.jsx)(a.code,{children:"Performable"}),", caso contrario elas nao aparecerao corretamente nos relatorios."]})}),"\n",(0,s.jsx)(a.h2,{id:"question---consultando-o-estado-do-sistema",children:"Question - consultando o estado do sistema"}),"\n",(0,s.jsxs)(a.p,{children:["Screenplay e um padrao centrado no Actor, e assim como os Actor interagem com o sistema executando ",(0,s.jsx)(a.em,{children:"Task"})," e ",(0,s.jsx)(a.em,{children:"Interaction"}),", eles podem consultar o estado do sistema fazendo ",(0,s.jsx)(a.em,{children:"Question"})," (perguntas)."]}),"\n",(0,s.jsx)(a.h3,{id:"usando-classes-question-incluidas",children:"Usando classes Question incluidas"}),"\n",(0,s.jsxs)(a.p,{children:["Um Actor pode fazer uma Question usando o metodo ",(0,s.jsx)(a.code,{children:"askFor()"}),". Voce pode ver um exemplo de como isso funciona aqui:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'   String pageTitle = toby.asksFor(Text.of(".title"));\n'})}),"\n",(0,s.jsxs)(a.p,{children:[(0,s.jsx)(a.code,{children:"Text"})," e um exemplo de um ",(0,s.jsx)(a.em,{children:"Question Factory"}),". Question Factory fornecem uma forma conveniente de consultar o estado da aplicacao, e existem muitos para escolher. Por exemplo, poderiamos verificar se um determinado elemento web estava visivel usando a classe ",(0,s.jsx)(a.code,{children:"Visibility"}),", assim:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'   boolean isVisible = toby.asksFor(Visibility.of(".title"));\n'})}),"\n",(0,s.jsxs)(a.p,{children:["O Serenity BDD vem com muitos ",(0,s.jsx)(a.em,{children:"Question Factory"})," incluidos como esses, e veremos com mais detalhes na proxima secao. Mas voce tambem pode escrever suas proprias Question customizadas, para consultar qualquer aspecto da sua aplicacao que desejar."]}),"\n",(0,s.jsx)(a.h3,{id:"criando-question-customizadas-usando-expressoes-lambda",children:"Criando Question customizadas usando expressoes Lambda"}),"\n",(0,s.jsxs)(a.p,{children:["Uma forma de implementar uma ",(0,s.jsx)(a.em,{children:"Question"})," e usar uma expressao Lambda do Java 8 que recebe um ",(0,s.jsx)(a.em,{children:"Actor"})," como argumento. Por exemplo, o metodo a seguir retorna uma ",(0,s.jsx)(a.em,{children:"Integer Question"})," (uma ",(0,s.jsx)(a.em,{children:"Question"})," que retorna um inteiro)."]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    Question<Integer> numberOfTodoItems() {\n        return actor -> BrowseTheWeb.as(actor).findAll(".todo-list li").size();\n    }\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Poderiamos encontrar a resposta para esta Question usando o metodo ",(0,s.jsx)(a.code,{children:"asksFor()"}),", como no exemplo anterior:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:"   int numberOfTodos = toby.asksFor(numberOfTodoItems());\n"})}),"\n",(0,s.jsxs)(a.p,{children:["Uma alternativa ao metodo ",(0,s.jsx)(a.code,{children:"asksFor()"})," e o proprio metodo ",(0,s.jsx)(a.code,{children:"answeredBy()"})," da ",(0,s.jsx)(a.code,{children:"Question"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:"   int numberOfTodos = numberOfTodoItems().answeredBy(toby);\n"})}),"\n",(0,s.jsx)(a.p,{children:"Este formato pode ser mais conveniente para asser\xe7\xf5es, como ilustrado neste exemplo:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:"   assertThat(numberOfTodoItems().answeredBy(toby)).isEqualTo(1);\n"})}),"\n",(0,s.jsxs)(a.h3,{id:"tornando-question-mais-legiveis-com-o-metodo-questionabout",children:["Tornando Question mais legiveis com o metodo ",(0,s.jsx)(a.code,{children:"Question.about()"})]}),"\n",(0,s.jsxs)(a.p,{children:["Poderiamos tornar este metodo mais legivel usando o formato ",(0,s.jsx)(a.code,{children:"Question.about"})," - isso produzira uma mensagem de erro mais significativa. No exemplo a seguir, usamos a classe ",(0,s.jsx)(a.code,{children:"BrowseTheWeb"})," para acessar a API WebDriver do Serenity e encontrar o numero de itens da lista de todo atualmente na pagina:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    Question<Integer> numberOfTodoItems() {\n        return Question.about("the number of todo items")\n                   .answeredBy(\n                       actor -> BrowseTheWeb.as(actor).findAll(".todo-list li").size());\n    }\n'})}),"\n",(0,s.jsx)(a.h3,{id:"convertendo-question",children:"Convertendo Question"}),"\n",(0,s.jsxs)(a.p,{children:["Question tambem fornecem uma forma conveniente de converter respostas em diferentes tipos. Isso e particularmente util para as classes ",(0,s.jsx)(a.code,{children:"Question"})," incluidas do WebDriver, que normalmente retornam valores em formato de texto."]}),"\n",(0,s.jsx)(a.p,{children:"Por exemplo, a aplicacao TodoMVC mostra o numero de itens restantes para fazer a qualquer momento abaixo da lista:"}),"\n",(0,s.jsx)(a.p,{children:(0,s.jsx)(a.img,{src:o(7569).A+"",width:"1580",height:"1014"})}),"\n",(0,s.jsxs)(a.p,{children:["Podemos localizar a contagem de itens usando a expressao CSS ",(0,s.jsx)(a.em,{children:'".todo-count strong"'}),". Poderiamos buscar este valor como uma String usando a classe ",(0,s.jsx)(a.code,{children:"Text"})," que vimos anteriormente:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    String itemsLeftCount = toby.asksFor(Text.of(".todo-count strong");\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Porem, se preferirmos recuperar o valor como um inteiro, poderiamos usar o metodo ",(0,s.jsx)(a.code,{children:"asInteger()"})," assim:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'   int itemsLeftCount = toby.asksFor(Text.of(".todo-count strong").asInteger());\n'})}),"\n",(0,s.jsx)(a.p,{children:"Alguns dos metodos de conversao disponiveis incluem os seguintes:"}),"\n",(0,s.jsxs)(a.table,{children:[(0,s.jsx)(a.thead,{children:(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.th,{children:"Tipo"}),(0,s.jsx)(a.th,{children:"Metodo"}),(0,s.jsx)(a.th,{children:"Exemplo"})]})}),(0,s.jsxs)(a.tbody,{children:[(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"Integer"}),(0,s.jsx)(a.td,{children:"asInteger()"}),(0,s.jsx)(a.td,{children:'Text.of(".todo-count strong").asInteger()'})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"Long"}),(0,s.jsx)(a.td,{children:"asLong()"}),(0,s.jsx)(a.td,{children:'Text.of(".todo-count strong").asLong()'})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"Float"}),(0,s.jsx)(a.td,{children:"asFloat()"}),(0,s.jsx)(a.td,{children:'Text.of(".currency-value").asFloat()'})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"Double"}),(0,s.jsx)(a.td,{children:"asDouble()"}),(0,s.jsx)(a.td,{children:'Text.of(".currency-value").asDouble()'})]}),(0,s.jsxs)(a.tr,{children:[(0,s.jsx)(a.td,{children:"BigDecimal"}),(0,s.jsx)(a.td,{children:"asBigDecimal()"}),(0,s.jsx)(a.td,{children:'Text.of(".currency-value").asBigDecimal()'})]})]})]}),"\n",(0,s.jsx)(a.h3,{id:"convertendo-valores-de-data",children:"Convertendo valores de data"}),"\n",(0,s.jsxs)(a.p,{children:["Valores de data tambem podem ser convertidos para objetos ",(0,s.jsx)(a.code,{children:"LocalDate"}),'. Se a data usa o formato de data ISO padrao (por exemplo, "2022-05-15"), ela pode ser convertida usando o metodo ',(0,s.jsx)(a.code,{children:"asDate()"}),", assim:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'   LocalDate dateValue = toby.asksFor(\n       Text.of("#departure-date").asDate()\n    );\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Se a data usa um formato diferente, o metodo ",(0,s.jsx)(a.code,{children:"asDate()"})," aceita um padrao de data-hora que pode ser usado para analisar o valor, por exemplo:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    LocalDate dateValue = toby.asksFor(\n        Text.of("#departure-date").asDate("d MMM uuuu")\n    );\n'})}),"\n",(0,s.jsx)(a.h3,{id:"convertendo-para-listas-de-valores",children:"Convertendo para listas de valores"}),"\n",(0,s.jsxs)(a.p,{children:["Tambem podemos usar o metodo ",(0,s.jsx)(a.code,{children:"asListOf()"})," para encontrar todas as respostas para uma Question especifica e converter cada uma delas para um tipo especificado. Por exemplo, para converter uma lista de valores String correspondentes para inteiros, poderiamos usar o seguinte codigo:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    List<Integer> itemQuantities = toby.asksFor(\n        Text.of(".item-quantity").asListOf(Integer.class)\n    );\n'})}),"\n",(0,s.jsx)(a.h3,{id:"trabalhando-com-colecoes",children:"Trabalhando com colecoes"}),"\n",(0,s.jsxs)(a.p,{children:["Outra forma de recuperar uma lista de valores e usar o metodo ",(0,s.jsx)(a.code,{children:"ofEach()"}),"."]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    Collection<String> itemQuantities = toby.asksFor(Text.of(".item-quantity"));\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Assim como com o metodo ",(0,s.jsx)(a.code,{children:"Text.of()"}),", podemos usar o metodo ",(0,s.jsx)(a.code,{children:"asListOf()"})," para converter esta colecao em outro tipo"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    List<String> itemQuantities = toby.asksFor(\n        Text.of(".item-quantity").asListOf(Integer.class)\n    );\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Se precisarmos realizar uma operacao mais complexa, podemos usar o metodo ",(0,s.jsx)(a.code,{children:"mapEach()"})," para aplicar uma expressao Lambda arbitraria a cada elemento correspondente:"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'   Collection<Integer> nameLengths = toby.asksFor(Text.ofEach(".name").mapEach(s -> s.length()));\n'})}),"\n",(0,s.jsx)(a.h2,{id:"dados-de-sessao-especificos-do-actor",children:"Dados de sessao especificos do Actor"}),"\n",(0,s.jsxs)(a.p,{children:["As vezes precisamos armazenar informacoes em um passo ou Task e reutiliza-las em um subsequente. Cada Actor do Screenplay pode lembrar informacoes e recupera-las mais tarde no teste. Fazemos isso usando o metodo ",(0,s.jsx)(a.code,{children:"remember()"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    int actualCost = 100\n    actor.remember("Total Cost", total);\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Mais tarde, podemos recuperar esta informacao usando o metodo ",(0,s.jsx)(a.code,{children:"recall()"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    int recalledCost = dana.recall("Total Cost");\n    assertThat(recalledCost).isEqualTo(100);\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Um Actor pode lembrar informacoes de qualquer tipo, ate mesmo a resposta a uma Question. Por exemplo, o metodo ",(0,s.jsx)(a.code,{children:"Text.of()"})," retorna um objeto Question do tipo ",(0,s.jsx)(a.code,{children:"Question<String>"}),". Um Actor pode lembrar a resposta a esta Question usando-a como parametro para o metodo ",(0,s.jsx)(a.code,{children:"remember()"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    actor.remember("Total Cost", Text.of("#total-cost").asInteger());\n'})}),"\n",(0,s.jsx)(a.p,{children:"Podemos entao recuperar este valor da mesma forma que qualquer outro:"}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    int totalCost = actor.recall("Total Cost");\n    assertThat(totalCost).isEqualTo(100);\n'})}),"\n",(0,s.jsxs)(a.p,{children:["Podemos ate recuperar um mapa contendo cada valor atualmente lembrado pelo Actor. Fazemos isso usando o metodo ",(0,s.jsx)(a.code,{children:"recallAll()"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:"    Map<String, Object> all = actor.recallAll();\n"})}),"\n",(0,s.jsxs)(a.p,{children:["Tambem podemos remover um valor lembrado usando o metodo ",(0,s.jsx)(a.code,{children:"forget()"}),":"]}),"\n",(0,s.jsx)(a.pre,{children:(0,s.jsx)(a.code,{className:"language-java",children:'    actor.forget("Total Cost");\n'})}),"\n",(0,s.jsx)(a.h2,{id:"conclusao",children:"Conclusao"}),"\n",(0,s.jsx)(a.p,{children:"Agora que vimos como configurar um teste Screenplay usando diferentes frameworks, como organizar Interaction em Task e como consultar o estado do sistema, veremos como usar o Screenplay para interagir com uma aplicacao web com mais detalhes."})]})}function m(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,s.jsx)(a,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},7569(e,a,o){o.d(a,{A:()=>n});const n=o.p+"assets/images/items-left-3ecf27bc1e1d2a5f0618de446edd32a3.png"},7794(e,a,o){o.d(a,{A:()=>n});const n=o.p+"assets/images/screenplay-model-d488f442690c701509fec447d3200a99.svg"},8453(e,a,o){o.d(a,{R:()=>t,x:()=>i});var n=o(6540);const s={},r=n.createContext(s);function t(e){const a=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function i(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),n.createElement(r.Provider,{value:a},e.children)}}}]);
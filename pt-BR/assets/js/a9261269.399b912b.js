"use strict";(globalThis.webpackChunkserenity_users_guide=globalThis.webpackChunkserenity_users_guide||[]).push([[5071],{5316(e,n,a){a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>g,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"playwright/playwright_configuration","title":"Configura\xe7\xe3o","description":"O Serenity Playwright pode ser configurado de v\xe1rias formas para personalizar o comportamento do navegador, captura de tela e relat\xf3rios.","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/playwright/configuration.md","sourceDirName":"playwright","slug":"/playwright/playwright_configuration","permalink":"/pt-BR/docs/playwright/playwright_configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/serenity-bdd/serenity-bdd.github.io/blob/master/docs/playwright/configuration.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"playwright_configuration","title":"Configura\xe7\xe3o","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Step Libraries","permalink":"/pt-BR/docs/playwright/playwright_step_libraries"},"next":{"title":"Boas Pr\xe1ticas","permalink":"/pt-BR/docs/playwright/playwright_best_practices"}}');var o=a(4848),i=a(8453);const s={id:"playwright_configuration",title:"Configura\xe7\xe3o",sidebar_position:5},t="Op\xe7\xf5es de Configura\xe7\xe3o",l={},d=[{value:"Configura\xe7\xe3o do Serenity",id:"configura\xe7\xe3o-do-serenity",level:2},{value:"serenity.conf",id:"serenityconf",level:3},{value:"Estrat\xe9gias de Captura de Tela",id:"estrat\xe9gias-de-captura-de-tela",level:3},{value:"Usando Propriedades de Ambiente",id:"usando-propriedades-de-ambiente",level:3},{value:"Configura\xe7\xe3o do Playwright",id:"configura\xe7\xe3o-do-playwright",level:2},{value:"Op\xe7\xf5es do Navegador",id:"op\xe7\xf5es-do-navegador",level:3},{value:"Modo Headless vs Headed",id:"modo-headless-vs-headed",level:3},{value:"Op\xe7\xf5es de Contexto do Navegador",id:"op\xe7\xf5es-de-contexto-do-navegador",level:3},{value:"Emula\xe7\xe3o de Dispositivos",id:"emula\xe7\xe3o-de-dispositivos",level:3},{value:"Configura\xe7\xe3o de Rede",id:"configura\xe7\xe3o-de-rede",level:3},{value:"Intercepta\xe7\xe3o de Requisi\xe7\xf5es",id:"intercepta\xe7\xe3o-de-requisi\xe7\xf5es",level:4},{value:"Configura\xe7\xe3o de Timeout",id:"configura\xe7\xe3o-de-timeout",level:4},{value:"Testes Multi-Navegador",id:"testes-multi-navegador",level:2},{value:"Executando em Diferentes Navegadores",id:"executando-em-diferentes-navegadores",level:3},{value:"Sele\xe7\xe3o de Navegador via Propriedade",id:"sele\xe7\xe3o-de-navegador-via-propriedade",level:3},{value:"Execu\xe7\xe3o Paralela",id:"execu\xe7\xe3o-paralela",level:2},{value:"Configura\xe7\xe3o Paralela do JUnit 5",id:"configura\xe7\xe3o-paralela-do-junit-5",level:3},{value:"Gerenciamento de Navegador Thread-Safe",id:"gerenciamento-de-navegador-thread-safe",level:3},{value:"Configura\xe7\xe3o de Logging",id:"configura\xe7\xe3o-de-logging",level:2},{value:"Configura\xe7\xe3o do Logback",id:"configura\xe7\xe3o-do-logback",level:3},{value:"Logging de Debug",id:"logging-de-debug",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"op\xe7\xf5es-de-configura\xe7\xe3o",children:"Op\xe7\xf5es de Configura\xe7\xe3o"})}),"\n",(0,o.jsx)(n.p,{children:"O Serenity Playwright pode ser configurado de v\xe1rias formas para personalizar o comportamento do navegador, captura de tela e relat\xf3rios."}),"\n",(0,o.jsx)(n.h2,{id:"configura\xe7\xe3o-do-serenity",children:"Configura\xe7\xe3o do Serenity"}),"\n",(0,o.jsx)(n.h3,{id:"serenityconf",children:"serenity.conf"}),"\n",(0,o.jsxs)(n.p,{children:["Crie um arquivo ",(0,o.jsx)(n.code,{children:"serenity.conf"})," em ",(0,o.jsx)(n.code,{children:"src/test/resources"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-hocon",children:'serenity {\n  # Nome do projeto mostrado nos relat\xf3rios\n  project.name = "My Playwright Tests"\n\n  # Estrat\xe9gia de captura de tela\n  # Op\xe7\xf5es: FOR_EACH_ACTION, BEFORE_AND_AFTER_EACH_STEP, FOR_FAILURES, DISABLED\n  take.screenshots = FOR_EACH_ACTION\n\n  # Diret\xf3rio de sa\xedda para relat\xf3rios\n  outputDirectory = target/site/serenity\n\n  # T\xedtulo do relat\xf3rio\n  report.title = "Test Results"\n}\n\n# Configura\xe7\xf5es espec\xedficas de ambiente\nenvironments {\n  default {\n    base.url = "https://www.example.com"\n  }\n  staging {\n    base.url = "https://staging.example.com"\n  }\n  production {\n    base.url = "https://www.example.com"\n  }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"estrat\xe9gias-de-captura-de-tela",children:"Estrat\xe9gias de Captura de Tela"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Estrat\xe9gia"}),(0,o.jsx)(n.th,{children:"Descri\xe7\xe3o"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"FOR_EACH_ACTION"})}),(0,o.jsx)(n.td,{children:"Captura de tela ap\xf3s cada passo (padr\xe3o)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"BEFORE_AND_AFTER_EACH_STEP"})}),(0,o.jsx)(n.td,{children:"Captura de tela antes e depois de cada passo"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"FOR_FAILURES"})}),(0,o.jsx)(n.td,{children:"Captura de tela apenas quando um passo falha"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"DISABLED"})}),(0,o.jsx)(n.td,{children:"Sem capturas de tela autom\xe1ticas"})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"usando-propriedades-de-ambiente",children:"Usando Propriedades de Ambiente"}),"\n",(0,o.jsx)(n.p,{children:"Acesse configura\xe7\xe3o espec\xedfica do ambiente em seus testes:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'import net.thucydides.model.environment.SystemEnvironmentVariables;\n\npublic class ConfiguredSteps {\n    private final String baseUrl;\n\n    public ConfiguredSteps() {\n        EnvironmentVariables env = SystemEnvironmentVariables.currentEnvironmentVariables();\n        this.baseUrl = env.getProperty("environments.default.base.url");\n    }\n\n    @Step("Open the application")\n    public void openApplication(Page page) {\n        page.navigate(baseUrl);\n    }\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"Execute com um ambiente espec\xedfico:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"mvn verify -Denvironment=staging\n"})}),"\n",(0,o.jsx)(n.h2,{id:"configura\xe7\xe3o-do-playwright",children:"Configura\xe7\xe3o do Playwright"}),"\n",(0,o.jsx)(n.h3,{id:"op\xe7\xf5es-do-navegador",children:"Op\xe7\xf5es do Navegador"}),"\n",(0,o.jsx)(n.p,{children:"Configure as op\xe7\xf5es de inicializa\xe7\xe3o do navegador na configura\xe7\xe3o do seu teste:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"@BeforeAll\nstatic void setupBrowser() {\n    playwright = Playwright.create();\n\n    BrowserType.LaunchOptions options = new BrowserType.LaunchOptions()\n        .setHeadless(true)           // Executa headless\n        .setSlowMo(100)              // Desacelera a\xe7\xf5es em 100ms\n        .setTimeout(30000)           // Timeout de inicializa\xe7\xe3o do navegador\n        .setDevtools(false);         // N\xe3o abre DevTools\n\n    browser = playwright.chromium().launch(options);\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"modo-headless-vs-headed",children:"Modo Headless vs Headed"}),"\n",(0,o.jsx)(n.p,{children:"Controle o modo headless via propriedade do sistema:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@BeforeAll\nstatic void setupBrowser() {\n    boolean headless = Boolean.parseBoolean(\n        System.getProperty("playwright.headless", "true")\n    );\n\n    browser = playwright.chromium().launch(\n        new BrowserType.LaunchOptions().setHeadless(headless)\n    );\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"Execute com navegador vis\xedvel:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"mvn verify -Dplaywright.headless=false\n"})}),"\n",(0,o.jsx)(n.h3,{id:"op\xe7\xf5es-de-contexto-do-navegador",children:"Op\xe7\xf5es de Contexto do Navegador"}),"\n",(0,o.jsx)(n.p,{children:"Configure o contexto do navegador para cada teste:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@BeforeEach\nvoid setupPage() {\n    Browser.NewContextOptions contextOptions = new Browser.NewContextOptions()\n        .setViewportSize(1920, 1080)        // Tamanho da janela do navegador\n        .setLocale("en-US")                  // Localidade\n        .setTimezoneId("America/New_York")   // Fuso hor\xe1rio\n        .setGeolocation(40.7128, -74.0060)   // Geolocaliza\xe7\xe3o\n        .setPermissions(Arrays.asList("geolocation")); // Permiss\xf5es\n\n    BrowserContext context = browser.newContext(contextOptions);\n    page = context.newPage();\n    PlaywrightSerenity.registerPage(page);\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"emula\xe7\xe3o-de-dispositivos",children:"Emula\xe7\xe3o de Dispositivos"}),"\n",(0,o.jsx)(n.p,{children:"Teste em dispositivos m\xf3veis:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@BeforeEach\nvoid setupMobilePage() {\n    // Use os descritores de dispositivo do Playwright\n    BrowserContext context = browser.newContext(\n        new Browser.NewContextOptions()\n            .setUserAgent("Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X)...")\n            .setViewportSize(375, 812)\n            .setDeviceScaleFactor(3)\n            .setIsMobile(true)\n            .setHasTouch(true)\n    );\n\n    page = context.newPage();\n    PlaywrightSerenity.registerPage(page);\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"configura\xe7\xe3o-de-rede",children:"Configura\xe7\xe3o de Rede"}),"\n",(0,o.jsx)(n.h4,{id:"intercepta\xe7\xe3o-de-requisi\xe7\xf5es",children:"Intercepta\xe7\xe3o de Requisi\xe7\xf5es"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@BeforeEach\nvoid setupWithMocking() {\n    page = browser.newPage();\n\n    // Simula respostas de API\n    page.route("**/api/products", route -> {\n        route.fulfill(new Route.FulfillOptions()\n            .setStatus(200)\n            .setContentType("application/json")\n            .setBody("[{\\"id\\": 1, \\"name\\": \\"Test Product\\"}]")\n        );\n    });\n\n    PlaywrightSerenity.registerPage(page);\n}\n'})}),"\n",(0,o.jsx)(n.h4,{id:"configura\xe7\xe3o-de-timeout",children:"Configura\xe7\xe3o de Timeout"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'// Timeout global para todas as a\xe7\xf5es\npage.setDefaultTimeout(30000);  // 30 segundos\n\n// Timeout para navega\xe7\xe3o\npage.setDefaultNavigationTimeout(60000);  // 60 segundos\n\n// Timeout por a\xe7\xe3o\npage.locator("#slow-element").click(\n    new Locator.ClickOptions().setTimeout(10000)\n);\n'})}),"\n",(0,o.jsx)(n.h2,{id:"testes-multi-navegador",children:"Testes Multi-Navegador"}),"\n",(0,o.jsx)(n.h3,{id:"executando-em-diferentes-navegadores",children:"Executando em Diferentes Navegadores"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@ParameterizedTest\n@ValueSource(strings = {"chromium", "firefox", "webkit"})\nvoid shouldWorkOnAllBrowsers(String browserType) {\n    Browser browser = switch (browserType) {\n        case "chromium" -> playwright.chromium().launch();\n        case "firefox" -> playwright.firefox().launch();\n        case "webkit" -> playwright.webkit().launch();\n        default -> throw new IllegalArgumentException("Unknown browser: " + browserType);\n    };\n\n    Page page = browser.newPage();\n    PlaywrightSerenity.registerPage(page);\n\n    // Executa teste...\n\n    PlaywrightSerenity.unregisterPage(page);\n    page.close();\n    browser.close();\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"sele\xe7\xe3o-de-navegador-via-propriedade",children:"Sele\xe7\xe3o de Navegador via Propriedade"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:'@BeforeAll\nstatic void setupBrowser() {\n    String browserName = System.getProperty("browser", "chromium");\n\n    browser = switch (browserName.toLowerCase()) {\n        case "firefox" -> playwright.firefox().launch(launchOptions);\n        case "webkit" -> playwright.webkit().launch(launchOptions);\n        default -> playwright.chromium().launch(launchOptions);\n    };\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"Execute com navegador espec\xedfico:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"mvn verify -Dbrowser=firefox\n"})}),"\n",(0,o.jsx)(n.h2,{id:"execu\xe7\xe3o-paralela",children:"Execu\xe7\xe3o Paralela"}),"\n",(0,o.jsx)(n.h3,{id:"configura\xe7\xe3o-paralela-do-junit-5",children:"Configura\xe7\xe3o Paralela do JUnit 5"}),"\n",(0,o.jsxs)(n.p,{children:["Crie ",(0,o.jsx)(n.code,{children:"junit-platform.properties"})," em ",(0,o.jsx)(n.code,{children:"src/test/resources"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-properties",children:"junit.jupiter.execution.parallel.enabled = true\njunit.jupiter.execution.parallel.mode.default = concurrent\njunit.jupiter.execution.parallel.mode.classes.default = concurrent\njunit.jupiter.execution.parallel.config.strategy = fixed\njunit.jupiter.execution.parallel.config.fixed.parallelism = 4\n"})}),"\n",(0,o.jsx)(n.h3,{id:"gerenciamento-de-navegador-thread-safe",children:"Gerenciamento de Navegador Thread-Safe"}),"\n",(0,o.jsx)(n.p,{children:"Para testes paralelos, cada teste precisa de seu pr\xf3prio contexto de navegador:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"@ExtendWith(SerenityJUnit5Extension.class)\nclass ParallelTest {\n\n    // Use ThreadLocal para thread safety\n    private static final ThreadLocal<Playwright> playwrightHolder = new ThreadLocal<>();\n    private static final ThreadLocal<Browser> browserHolder = new ThreadLocal<>();\n\n    private Page page;\n\n    @BeforeEach\n    void setup() {\n        if (playwrightHolder.get() == null) {\n            playwrightHolder.set(Playwright.create());\n            browserHolder.set(playwrightHolder.get().chromium().launch());\n        }\n\n        page = browserHolder.get().newPage();\n        PlaywrightSerenity.registerPage(page);\n    }\n\n    @AfterEach\n    void cleanup() {\n        PlaywrightSerenity.unregisterPage(page);\n        if (page != null) page.close();\n    }\n\n    @AfterAll\n    static void teardown() {\n        // Cleanup acontece por thread\n    }\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"configura\xe7\xe3o-de-logging",children:"Configura\xe7\xe3o de Logging"}),"\n",(0,o.jsx)(n.h3,{id:"configura\xe7\xe3o-do-logback",children:"Configura\xe7\xe3o do Logback"}),"\n",(0,o.jsxs)(n.p,{children:["Crie ",(0,o.jsx)(n.code,{children:"logback-test.xml"})," em ",(0,o.jsx)(n.code,{children:"src/test/resources"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="UTF-8"?>\n<configuration>\n    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">\n        <encoder>\n            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>\n        </encoder>\n    </appender>\n\n    \x3c!-- Logging do Serenity --\x3e\n    <logger name="net.serenitybdd" level="INFO"/>\n    <logger name="net.thucydides" level="INFO"/>\n\n    \x3c!-- Logging do Playwright --\x3e\n    <logger name="com.microsoft.playwright" level="WARN"/>\n\n    \x3c!-- Logging dos seus testes --\x3e\n    <logger name="com.example.tests" level="DEBUG"/>\n\n    <root level="INFO">\n        <appender-ref ref="STDOUT"/>\n    </root>\n</configuration>\n'})}),"\n",(0,o.jsx)(n.h3,{id:"logging-de-debug",children:"Logging de Debug"}),"\n",(0,o.jsx)(n.p,{children:"Habilite logging verboso para solu\xe7\xe3o de problemas:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"mvn verify -Dlogback.configurationFile=logback-debug.xml\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Com ",(0,o.jsx)(n.code,{children:"logback-debug.xml"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'<logger name="net.serenitybdd" level="DEBUG"/>\n<logger name="com.microsoft.playwright" level="DEBUG"/>\n'})})]})}function g(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453(e,n,a){a.d(n,{R:()=>s,x:()=>t});var r=a(6540);const o={},i=r.createContext(o);function s(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);